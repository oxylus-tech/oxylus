import{t as v,createPinia as U,init as E}from"ox";import{OxFieldDetails as y,OxAction as G,OxModelPanel as S,App as $}from"ox/components";import{O as j,u as w,_ as A}from"./OxUserEdit.vue_vue_type_script_setup_true_lang.js";import{_ as F}from"./OxUserPanel.vue_vue_type_script_setup_true_lang.js";import{inject as f,toRefs as T,useTemplateRef as B,resolveComponent as C,createBlock as V,openBlock as m,mergeProps as M,unref as l,withCtx as t,createVNode as n,createCommentVNode as N,computed as R,createElementVNode as e,toDisplayString as u,createElementBlock as O,Fragment as z,renderList as P,defineComponent as D,useSlots as k,createSlots as I,renderSlot as L,normalizeProps as q,guardReactiveProps as H}from"vue";import{V as J,a as g,b as K,c as Q,d as W,e as X}from"./vuetify.js";const b={__name:"OxGroupEdit",props:{initial:Object},emits:["saved"],setup(d,{emit:x}){const c=f("repos"),a=d,{initial:i}=T(a),p=B("form");return f("panels"),f("editor"),(s,_)=>{const h=C("ox-model-edit");return m(),V(h,M(a,{repo:l(c).groups}),{default:t(({editor:o})=>[n(J,{mandatory:"",multiple:"","model-value":["info"]},{default:t(()=>[n(g,{title:"Information",value:"info"},{text:t(()=>[n(K,{ref_key:"form",ref:p,modelValue:o.valid,"onUpdate:modelValue":r=>o.valid=r},{default:t(()=>[n(Q,{variant:"underlined",label:"Group name",modelValue:o.value.name,"onUpdate:modelValue":r=>o.value.name=r},{details:t(()=>{var r;return[n(l(y),{errors:(r=o.errors)==null?void 0:r.name},null,8,["errors"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),o.value.id?(m(),V(g,{key:0,title:"Permissions",value:"permissions"},{text:t(()=>[n(W,null,{default:t(()=>[n(j,{group:o.value,modelValue:o.value.permissions_id,"onUpdate:modelValue":r=>o.value.permissions_id=r},null,8,["group","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]),_:2},1024)]),_:1},16,["repo"])}}},Y={__name:"OxGroupUsers",props:{group:Object},setup(d){const x=f("repos"),c=d,a=R(()=>x.users.where("groups_id",i=>{var p;return i==null?void 0:i.includes((p=c.group)==null?void 0:p.id)}).get());return(i,p)=>(m(),V(X,null,{default:t(()=>[e("thead",null,[e("tr",null,[e("th",null,u(l(v)("fields.username")),1),e("th",null,u(l(v)("fields.first_name")),1),e("th",null,u(l(v)("fields.last_name")),1),e("th",null,u(l(v)("fields.actions")),1)])]),e("tbody",null,[(m(!0),O(z,null,P(a.value,s=>(m(),O("tr",null,[e("td",null,u(s.username),1),e("td",null,u(s.first_name),1),e("td",null,u(s.last_name),1),e("td",null,[n(l(G),{button:"",name:"edit",value:s},null,8,["value"])])]))),256))])]),_:1}))}},Z=D({__name:"OxGroupPanel",props:{repo:{},search:{},view:{},headers:{default:["id","name"]},relations:{},showFilters:{type:Boolean},name:{default:"groups"},index:{},value:{},state:{},help:{},title:{},icon:{}},setup(d){f("context");const x=k(),c=w(),a=d;return(i,p)=>(m(),V(l(S),{name:a.name,icon:"mdi-account-multiple",repo:l(c).groups,headers:a.headers,relations:a.relations,search:"search"},I({"views.detail.edit.default":t(({value:s,saved:_})=>[n(b,{initial:s,saved:_},null,8,["initial","saved"])]),_:2},[P(l(x),(s,_)=>({name:_,fn:t(h=>[L(i.$slots,_,q(H(h)))])}))]),1032,["name","repo","headers","relations"]))}}),ee=Object.freeze(Object.defineProperty({__proto__:null,OxGroupEdit:b,OxGroupPanel:Z,OxGroupUsers:Y,OxUserEdit:A,OxUserPanel:F},Symbol.toStringTag,{value:"Module"})),te={extends:$,components:ee},le=U();E({App:te,plugins:[le]});
//# sourceMappingURL=index.js.map
