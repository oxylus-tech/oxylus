import{t as i,rules as w,createPinia as U,init as G}from"ox";import{OxModelEdit as S,OxAction as $,OxModelPanel as A,App as B}from"ox/components";import{u as h,O as j,_ as F}from"./OxUserEdit.vue_vue_type_script_setup_true_lang.js";import{_ as M}from"./OxUserPanel.vue_vue_type_script_setup_true_lang.js";import{defineComponent as V,inject as O,createBlock as x,openBlock as p,unref as t,mergeProps as P,withCtx as n,createVNode as a,createCommentVNode as T,computed as C,createElementVNode as l,toDisplayString as s,createElementBlock as v,Fragment as N,renderList as y,useSlots as z,createSlots as R,renderSlot as D,normalizeProps as L,guardReactiveProps as k}from"vue";import{V as q,a as g,b as H,c as I,d as J}from"./vuetify.js";const E=V({__name:"OxGroupEdit",props:{repo:{},empty:{},initial:{},name:{},url:{},saved:{type:Function}},setup(m){const d=h(),c=O("user"),_=m;return(o,f)=>(p(),x(t(S),P(_,{repo:t(d).groups}),{default:n(({editor:e,editable:r})=>[a(q,{mandatory:"",multiple:"","model-value":["info"]},{default:n(()=>[a(g,{title:t(i)("views.edit.informations"),value:"info"},{text:n(()=>{var u;return[a(H,{variant:"underlined",label:"Group name",modelValue:e.value.name,"onUpdate:modelValue":b=>e.value.name=b,rules:[t(w).errors((u=e.errors)==null?void 0:u.name)]},null,8,["modelValue","onUpdate:modelValue","rules"])]}),_:2},1032,["title"]),r&&e.value.id&&t(c).can("auth.view_permission")?(p(),x(g,{key:0,title:t(i)("models.permissions",2),value:"permissions"},{text:n(()=>[a(I,null,{default:n(()=>[a(j,{group:e.value,modelValue:e.value.permissions_id,"onUpdate:modelValue":u=>e.value.permissions_id=u},null,8,["group","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"])):T("",!0)]),_:2},1024)]),_:1},16,["repo"]))}}),K={__name:"OxGroupUsers",props:{group:Object},setup(m){const d=O("repos"),c=m,_=C(()=>d.users.where("groups_id",o=>{var f;return o==null?void 0:o.includes((f=c.group)==null?void 0:f.id)}).get());return(o,f)=>(p(),x(J,null,{default:n(()=>[l("thead",null,[l("tr",null,[l("th",null,s(t(i)("fields.username")),1),l("th",null,s(t(i)("fields.first_name")),1),l("th",null,s(t(i)("fields.last_name")),1),l("th",null,s(t(i)("fields.actions")),1)])]),l("tbody",null,[(p(!0),v(N,null,y(_.value,e=>(p(),v("tr",null,[l("td",null,s(e.username),1),l("td",null,s(e.first_name),1),l("td",null,s(e.last_name),1),l("td",null,[a(t($),{button:"",name:"edit",value:e},null,8,["value"])])]))),256))])]),_:1}))}},Q=V({__name:"OxGroupPanel",props:{repo:{},view:{},headers:{default:["id","name"]},relations:{},showFilters:{type:Boolean},fetchRelations:{type:Boolean},search:{},warning:{},name:{default:"groups"},index:{},value:{},state:{},help:{},title:{},icon:{}},setup(m){const d=z(),c=h(),_=m;return(o,f)=>(p(),x(t(A),P(_,{repo:t(c).groups,icon:"mdi-account-multiple"}),R({"views.detail.edit.default":n(({value:e,saved:r})=>[a(E,{initial:e,saved:r},null,8,["initial","saved"])]),_:2},[y(t(d),(e,r)=>({name:r,fn:n(u=>[D(o.$slots,r,L(k(u)))])}))]),1040,["repo"]))}}),W=Object.freeze(Object.defineProperty({__proto__:null,OxGroupEdit:E,OxGroupPanel:Q,OxGroupUsers:K,OxUserEdit:F,OxUserPanel:M},Symbol.toStringTag,{value:"Module"})),X={extends:B,components:W},Y=U();G({App:X,plugins:[Y]});
//# sourceMappingURL=index.js.map
