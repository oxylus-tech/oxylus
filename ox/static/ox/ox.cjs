"use strict";var ne=Object.defineProperty;var ie=(r,e,t)=>e in r?ne(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var g=(r,e,t)=>ie(r,typeof e!="symbol"?e+"":e,t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("./vue-i18n-zIih8GXQ.cjs"),u=require("vue"),se=require("axios"),oe=require("ox/vendor");require("ox/components");const c=require("./theme-Bxzsxwfr.cjs");function ae(r){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return e.default=r,Object.freeze(e)}const ue=ae(oe);class S{static reactive(e){return u.reactive(new this(e))}constructor(e={}){e&&a.assignNonEmpty(this,e)}}const ce=Object.freeze(Object.defineProperty({__proto__:null,ContentType:a.ContentType,Group:a.Group,Meta:a.Meta,Model:a.Model,Permission:a.Permission,Permissions:a.Permissions,User:a.User},Symbol.toStringTag,{value:"Module"}));var le=Object.defineProperty,de=(r,e,t)=>e in r?le(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,D=(r,e,t)=>(de(r,typeof e!="symbol"?e+"":e,t),t);class he{constructor(e,t,n){D(this,"repository"),D(this,"config"),D(this,"response"),D(this,"entities",null),D(this,"isSaved",!1),this.repository=e,this.config=t,this.response=n}async save(){const e=this.getDataFromResponse();if(!this.validateData(e)){console.warn("[Pinia ORM Axios] The response data could not be saved to the store because it is not an object or an array. You might want to use `dataTransformer` option to handle non-array/object response before saving it to the store.");return}let t=this.config.persistBy||"save";this.validatePersistAction(t)||(console.warn('[Pinia ORM Axios] The "persistBy" option configured is not a recognized value. Response data will be persisted by the default `save` method.'),t="save");const n=await this.repository[t](e);this.entities=Array.isArray(n)?n:[n],this.isSaved=!0}async delete(){if(this.config.delete===void 0)throw new Error("[Pinia ORM Axios] Could not delete records because the `delete` option is not set.");await this.repository.query().destroy(this.config.delete)}getDataFromResponse(){return this.config.dataTransformer?this.config.dataTransformer(this.response):this.config.dataKey?this.response.data[this.config.dataKey]:this.response.data}validateData(e){return e!==null&&typeof e=="object"}validatePersistAction(e){return["save","insert"].includes(e)}}var fe=Object.defineProperty,me=(r,e,t)=>e in r?fe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R=(r,e,t)=>(me(r,typeof e!="symbol"?e+"":e,t),t);class ge{constructor(e){R(this,"repository"),R(this,"config",{save:!0}),this.repository=e,this.registerActions()}get axios(){if(!this.repository.axios)throw new Error("[Pinia ORM Axios] The axios instance is not registered. Please register the axios instance to the repository.");return this.repository.axios}registerActions(){var t,n,i;const e={...(t=this.repository.config.axiosApi)==null?void 0:t.actions,...(i=(n=this.repository.getModel().$config())==null?void 0:n.axiosApi)==null?void 0:i.actions};if(e)for(const o in e){const s=e[o];typeof s=="function"?this.registerFunctionAction(o,s):this.registerObjectAction(o,s)}}registerObjectAction(e,t){this[e]=n=>this.request({...t,...n})}registerFunctionAction(e,t){this[e]=t.bind(this)}get(e,t={}){return this.request({method:"get",url:e,...t})}post(e,t={},n={}){return this.request({method:"post",url:e,data:t,...n})}put(e,t={},n={}){return this.request({method:"put",url:e,data:t,...n})}patch(e,t={},n={}){return this.request({method:"patch",url:e,data:t,...n})}delete(e,t={}){return this.request({method:"delete",url:e,...t})}async request(e){const t=this.createConfig(e),n=await this.axios.request(t);return this.createResponse(n,t)}createConfig(e){return{...this.config,...this.repository.globalApiConfig,...this.repository.apiConfig,...e}}async createResponse(e,t){const n=new he(this.repository,t,e);return t.delete!==void 0?(await n.delete(),n):(t.save&&await n.save(),n)}}var pe=Object.defineProperty,ye=(r,e,t)=>e in r?pe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O=(r,e,t)=>(ye(r,typeof e!="symbol"?e+"":e,t),t);class F extends a.Repository{constructor(){var e,t,n;super(...arguments),O(this,"axios",((t=(e=a.config)==null?void 0:e.axiosApi)==null?void 0:t.axios)||null),O(this,"globalApiConfig",((n=a.config)==null?void 0:n.axiosApi)||{}),O(this,"apiConfig",{})}api(){return ve(this)}setAxios(e){return this.axios=e,this}}function ve(r){return new ge(r)}function we(r){const e=a.getActivePinia();return F.useModel=r,a.useRepo(F,e)}function be(r){return a.definePiniaOrmPlugin(e=>(e.config.axiosApi=r,e))}function j(r,e=!0){const t={};Array.isArray(r)||(r=Object.values(r)),e&&!r.includes(a.User)&&r.push(a.User);for(const n of r)if(n&&n.entity){if(n.entity in t)continue;a.useRepo(n),t[n.entity]=we(n)}return u.provide("models",r),u.provide("repos",t),{models:r,repos:t}}function De(){return{permissions:[String,Function,Object,Array]}}function N(r,e,t){const n=e instanceof a.Permissions?e:new a.Permissions(e),i=u.computed(()=>n.can(u.unref(r),u.unref(t)));return{permissions:n,allowed:i}}class V{static reactive(e){const t=u.reactive(new this(e));return t.user=u.computed(()=>{var n;return new a.User(((n=t.data)==null?void 0:n.user)||{})}),t}constructor(e={}){Object.assign(this,e),this.state=a.State.none(),this.showState=!1}load(e=void 0){this.dataEl!==void 0&&(e===void 0&&(e=this.readData(this.dataEl)),e.dataEl=this.dataEl,this.data=e,this.panel&&this.data.panel&&(this.panel.value=e)),this.models!==void 0&&(this.repos=j(this.models).repos)}readData(e){const t=document.getElementById(e);if(!t)throw"Element {elementId} not found";return t.innerText?JSON.parse(t.innerText):{}}}function Me(r,e=!0){const t=V.reactive(r);return e&&t.dataEl&&t.load(),u.provide("context",t),u.provide("user",t.user),t}class Te{constructor(e,t){Object.assign(this,e),this.props=t,this.processing=u.ref(!1);const n=N(this.user,t.permissions,t.item);this.permissions=n.permissions,this.allowed=n.allowed}async run(...e){if(this.props.confirm&&!confirm(this.props.confirm))return;if(!this.allowed.value)throw Error("You are not allowed to execute this action");this.processing.value=!0;let t=this.props.run(this.user,this.props.item,...e);return t instanceof Promise&&(t=await t),this.processing.value=!1,this.emits&&this.emits("completed",this.props.item,...e),t}}function Se(r,e){return new Te(r,e)}class C{static reactive({initial:e,...t}){const n=u.reactive(new this({initial:u.unref(e),...t}));return n.edited=u.computed(()=>n.isEdited()),u.isRef(e)&&u.watch(e,i=>n.reset(i)),n}constructor(e,t={}){Object.assign(this,e),Object.assign(this,t),this.state||(this.state=new a.State),this.value={},this.reset(this.initial)}get errors(){return this.state.isError&&this.state.data||null}reset(e=null){e!==null?this.initial=e:e=this.initial,this._reset(e),this.state.none()}_reset(e){a.reset(this.value,e)}isValid(){return this._isValid()}_isValid(){return!0}isEdited(){return Object.keys(this.value).some(e=>this.value[e]!=this.initial[e])}async save(e=null){var n;if(this.state.processing(),!this.isValid())return this.state.error({_:"Some of the input values are invalid"});e=this.serialize(e??this.value);const t=await this.send(e);return t.isOk?(this.reset(t.data),(n=this.saved)==null||n.call(this,this.value,this)):this.state=t,this.state}serialize(e){return e}send(e){throw"not implemented"}}class K extends C{constructor({repo:e,url:t,...n}){var i,o;t=t||((o=(i=e.use)==null?void 0:i.meta)==null?void 0:o.url),super({url:t,...n},{repo:e})}get fields(){return this._fields||(this._fields=Object.keys(this.repo.use.fields())),this._fields}_reset(e){this.value=u.reactive(new this.initial.constructor),this.fields.reduce((t,n)=>(t[n]=e[n],t),this.value)}isEdited(){return this.fields.some(e=>this.value[e]!=this.initial[e])}serialize(e){return e.$toJson(null,{relations:!1})}send(e){let[t,n]=["post",this.url];return e.id&&(n=`${n}${e.id}/`,t="put"),this.repo.api()[t](n,e).then(i=>a.State.ok(i.entities[0]),i=>a.State.error(i.response.data))}}function U({editorClass:r=C,emits:e=null,panel:t=null,...n}){e&&(n.saved??(n.saved=(o,s)=>e("saved",o,s)));const i=r.reactive(n);return t&&u.watch(()=>i.edited,o=>t.setEdition(i.name,o)),i}function Ae(r){return U({...r,editorClass:K})}const A={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function Oe(r,e,t){const n=[];let i=[];const o=q(r),s=B(r),d=t??A[e.slice(-2).toUpperCase()]??0,l=(o.getDay()-d+7)%7,y=(s.getDay()-d+7)%7;for(let h=0;h<l;h++){const m=new Date(o);m.setDate(m.getDate()-(l-h)),i.push(m)}for(let h=1;h<=s.getDate();h++){const m=new Date(r.getFullYear(),r.getMonth(),h);i.push(m),i.length===7&&(n.push(i),i=[])}for(let h=1;h<7-y;h++){const m=new Date(s);m.setDate(m.getDate()+h),i.push(m)}return i.length>0&&n.push(i),n}function xe(r,e,t){const n=t??A[e.slice(-2).toUpperCase()]??0,i=new Date(r);for(;i.getDay()!==n;)i.setDate(i.getDate()-1);return i}function Pe(r,e){const t=new Date(r),n=((A[e.slice(-2).toUpperCase()]??0)+6)%7;for(;t.getDay()!==n;)t.setDate(t.getDate()+1);return t}function q(r){return new Date(r.getFullYear(),r.getMonth(),1)}function B(r){return new Date(r.getFullYear(),r.getMonth()+1,0)}function ke(r){const e=r.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const Ee=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function W(r){if(r==null)return new Date;if(r instanceof Date)return r;if(typeof r=="string"){let e;if(Ee.test(r))return ke(r);if(e=Date.parse(r),!isNaN(e))return new Date(e)}return null}const _=new Date(2e3,0,2);function Ce(r,e){const t=e??A[r.slice(-2).toUpperCase()]??0;return c.createRange(7).map(n=>{const i=new Date(_);return i.setDate(_.getDate()+t+n),new Intl.DateTimeFormat(r,{weekday:"narrow"}).format(i)})}function Ie(r,e,t,n){const i=W(r)??new Date,o=n==null?void 0:n[e];if(typeof o=="function")return o(i,e,t);let s={};switch(e){case"fullDate":s={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":s={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const d=i.getDate(),l=new Intl.DateTimeFormat(t,{month:"long"}).format(i);return`${d} ${l}`;case"normalDateWithWeekday":s={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":s={month:"short",day:"numeric"};break;case"year":s={year:"numeric"};break;case"month":s={month:"long"};break;case"monthShort":s={month:"short"};break;case"monthAndYear":s={month:"long",year:"numeric"};break;case"monthAndDate":s={month:"long",day:"numeric"};break;case"weekday":s={weekday:"long"};break;case"weekdayShort":s={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(t).format(i.getDate());case"hours12h":s={hour:"numeric",hour12:!0};break;case"hours24h":s={hour:"numeric",hour12:!1};break;case"minutes":s={minute:"numeric"};break;case"seconds":s={second:"numeric"};break;case"fullTime":s={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime12h":s={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime24h":s={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"fullDateTime":s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime12h":s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime24h":s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDate":s={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDateTime12h":s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"keyboardDateTime24h":s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;default:s=o??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(t,s).format(i)}function Re(r,e){const t=r.toJsDate(e),n=t.getFullYear(),i=c.padStart(String(t.getMonth()+1),2,"0"),o=c.padStart(String(t.getDate()),2,"0");return`${n}-${i}-${o}`}function Fe(r){const[e,t,n]=r.split("-").map(Number);return new Date(e,t-1,n)}function _e(r,e){const t=new Date(r);return t.setMinutes(t.getMinutes()+e),t}function Ye(r,e){const t=new Date(r);return t.setHours(t.getHours()+e),t}function Le(r,e){const t=new Date(r);return t.setDate(t.getDate()+e),t}function $e(r,e){const t=new Date(r);return t.setDate(t.getDate()+e*7),t}function je(r,e){const t=new Date(r);return t.setDate(1),t.setMonth(t.getMonth()+e),t}function Ne(r){return r.getFullYear()}function Ve(r){return r.getMonth()}function Ke(r){return r.getDate()}function Ue(r){return new Date(r.getFullYear(),r.getMonth()+1,1)}function qe(r){return new Date(r.getFullYear(),r.getMonth()-1,1)}function Be(r){return r.getHours()}function We(r){return r.getMinutes()}function He(r){return new Date(r.getFullYear(),0,1)}function Ge(r){return new Date(r.getFullYear(),11,31)}function Ze(r,e){return T(r,e[0])&&Qe(r,e[1])}function ze(r){const e=new Date(r);return e instanceof Date&&!isNaN(e.getTime())}function T(r,e){return r.getTime()>e.getTime()}function Je(r,e){return T(x(r),x(e))}function Qe(r,e){return r.getTime()<e.getTime()}function Y(r,e){return r.getTime()===e.getTime()}function Xe(r,e){return r.getDate()===e.getDate()&&r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()}function et(r,e){return r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()}function tt(r,e){return r.getFullYear()===e.getFullYear()}function rt(r,e,t){const n=new Date(r),i=new Date(e);switch(t){case"years":return n.getFullYear()-i.getFullYear();case"quarters":return Math.floor((n.getMonth()-i.getMonth()+(n.getFullYear()-i.getFullYear())*12)/4);case"months":return n.getMonth()-i.getMonth()+(n.getFullYear()-i.getFullYear())*12;case"weeks":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24));case"hours":return Math.floor((n.getTime()-i.getTime())/(1e3*60*60));case"minutes":return Math.floor((n.getTime()-i.getTime())/(1e3*60));case"seconds":return Math.floor((n.getTime()-i.getTime())/1e3);default:return n.getTime()-i.getTime()}}function nt(r,e){const t=new Date(r);return t.setHours(e),t}function it(r,e){const t=new Date(r);return t.setMinutes(e),t}function st(r,e){const t=new Date(r);return t.setMonth(e),t}function ot(r,e){const t=new Date(r);return t.setDate(e),t}function at(r,e){const t=new Date(r);return t.setFullYear(e),t}function x(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0)}function ut(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999)}class ct{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return W(e)}toJsDate(e){return e}toISO(e){return Re(this,e)}parseISO(e){return Fe(e)}addMinutes(e,t){return _e(e,t)}addHours(e,t){return Ye(e,t)}addDays(e,t){return Le(e,t)}addWeeks(e,t){return $e(e,t)}addMonths(e,t){return je(e,t)}getWeekArray(e,t){return Oe(e,this.locale,t?Number(t):void 0)}startOfWeek(e,t){return xe(e,this.locale,t?Number(t):void 0)}endOfWeek(e){return Pe(e,this.locale)}startOfMonth(e){return q(e)}endOfMonth(e){return B(e)}format(e,t){return Ie(e,t,this.locale,this.formats)}isEqual(e,t){return Y(e,t)}isValid(e){return ze(e)}isWithinRange(e,t){return Ze(e,t)}isAfter(e,t){return T(e,t)}isAfterDay(e,t){return Je(e,t)}isBefore(e,t){return!T(e,t)&&!Y(e,t)}isSameDay(e,t){return Xe(e,t)}isSameMonth(e,t){return et(e,t)}isSameYear(e,t){return tt(e,t)}setMinutes(e,t){return it(e,t)}setHours(e,t){return nt(e,t)}setMonth(e,t){return st(e,t)}setDate(e,t){return ot(e,t)}setYear(e,t){return at(e,t)}getDiff(e,t,n){return rt(e,t,n)}getWeekdays(e){return Ce(this.locale,e?Number(e):void 0)}getYear(e){return Ne(e)}getMonth(e){return Ve(e)}getDate(e){return Ke(e)}getNextMonth(e){return Ue(e)}getPreviousMonth(e){return qe(e)}getHours(e){return Be(e)}getMinutes(e){return We(e)}startOfDay(e){return x(e)}endOfDay(e){return ut(e)}startOfYear(e){return He(e)}endOfYear(e){return Ge(e)}}const lt=Symbol.for("vuetify:date-options"),L=Symbol.for("vuetify:date-adapter");function dt(r,e){const t=c.mergeDeep({adapter:ct,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},r);return{options:t,instance:ht(t,e)}}function ht(r,e){const t=u.reactive(typeof r.adapter=="function"?new r.adapter({locale:r.locale[e.current.value]??e.current.value,formats:r.formats}):r.adapter);return u.watch(e.current,n=>{t.locale=r.locale[n]??n??t.locale}),t}function H(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...t}=r,n=c.mergeDeep(e,t),{aliases:i={},components:o={},directives:s={}}=n,d=c.createDefaults(n.defaults),l=c.createDisplay(n.display,n.ssr),y=c.createTheme(n.theme),h=c.createIcons(n.icons),m=c.createLocale(n.locale),v=dt(n.date,m),M=c.createGoTo(n.goTo,m);return{install:f=>{for(const p in s)f.directive(p,s[p]);for(const p in o)f.component(p,o[p]);for(const p in i)f.component(p,c.defineComponent({...i[p],name:p,aliasName:i[p].name}));if(y.install(f),f.provide(c.DefaultsSymbol,d),f.provide(c.DisplaySymbol,l),f.provide(c.ThemeSymbol,y),f.provide(c.IconSymbol,h),f.provide(c.LocaleSymbol,m),f.provide(lt,v.options),f.provide(L,v.instance),f.provide(c.GoToSymbol,M),c.IN_BROWSER&&n.ssr)if(f.$nuxt)f.$nuxt.hook("app:suspense:resolve",()=>{l.update()});else{const{mount:p}=f;f.mount=function(){const re=p(...arguments);return u.nextTick(()=>l.update()),f.mount=p,re}}c.getUid.reset(),f.mixin({computed:{$vuetify(){return u.reactive({defaults:w.call(this,c.DefaultsSymbol),display:w.call(this,c.DisplaySymbol),theme:w.call(this,c.ThemeSymbol),icons:w.call(this,c.IconSymbol),locale:w.call(this,c.LocaleSymbol),date:w.call(this,L)})}}})},defaults:d,display:l,theme:y,icons:h,locale:m,date:v,goTo:M}}const ft="3.7.3";H.version=ft;function w(r){var n,i;const e=this.$,t=((n=e.parent)==null?void 0:n.provides)??((i=e.vnode.appContext)==null?void 0:i.provides);if(t&&r in t)return t[r]}const mt={defaults:{VAppBar:{flat:!0},VAutocomplete:{variant:"filled"},VBanner:{color:"primary"},VBottomSheet:{contentClass:"rounded-t-xl overflow-hidden"},VBtn:{color:"primary",rounded:"xl"},VBtnGroup:{rounded:"xl",VBtn:{rounded:null}},VCard:{rounded:"lg"},VCheckbox:{color:"secondary",inset:!0},VChip:{rounded:"sm"},VCombobox:{variant:"filled"},VNavigationDrawer:{},VSelect:{variant:"filled"},VSlider:{color:"primary"},VTabs:{color:"primary"},VTextarea:{variant:"filled"},VTextField:{variant:"filled"},VToolbar:{VBtn:{color:null}}},icons:{defaultSet:"mdi",sets:{mdi:c.mdi}},theme:{themes:{light:{colors:{primary:"#6750a4",secondary:"#b4b0bb",tertiary:"#7d5260",error:"#b3261e",surface:"#fffbfe"}}}}};function G(){const e=(a.getCookieList("lang",",")||["en"]).map(t=>t.toLowerCase().replace(/[_-](\w+)/,"")).find(t=>t in a.config$1.locales);return a.createI18n({legacy:!1,fallbackLocale:"en",locale:e})}const I=G();function b(...r){return I.global.t(...r)}function gt(r,e,t){if(!(t in a.config$1.locales))throw Error("Locale is not provided by config.");r.global.locale.value=t,k(r,e,t),document.querySelector("html").setAttribute("lang",t)}const P=new Set;function pt({path:r="./",fallback:e=!0,...t}={}){const n=a.useI18n(t);return $(n,{path:r,fallback:e}),u.watch(()=>n.locale,()=>$(n,{path:r,fallback:e})),n}async function k(r,e,t){const n=t.replace(/[_-](\w+)/,"");if(e=`${e}locales/${n}.json`,P.has(e))return;P.add(e);const i=await fetch(e).then(o=>o.json());r.messages.value[t]={...r.messages.value[t],...i}}function $(r,{path:e="./",fallback:t=!0}={}){e.startsWith("/")||(e=(void 0)(e)),e.endsWith("/")||(e+="/");let n=k(r,e,u.unref(r.locale));return t&&r.fallbackLocale.value&&(n=n.catch(i=>k(r,e,u.unref(r.fallbackLocale))).catch(i=>{throw Error(`Could not load locale ${r.locale.value} nor its fallback ${r.fallbackLocale.value} (path: ${e}). Error: ${i}`)})),n}const E={model:r=>`models.${r.entity}`,field:r=>`fields.${r}`};function yt({App:r=null,el:e="#app",onLoad:t=!0,...n}={}){function i(){const o=Z(r,n),s=e?o.mount(e):null;return document.body.classList.remove("loading"),{app:o,el:e,vm:s}}return new Promise(o=>{if(t)return window.addEventListener("load",()=>o(i()));o(i())})}function Z(r,{props:e={},vuetify:t={},plugins:n=null}={}){return r=u.createApp(r,e),r.config.globalProperties.window=window,r.use(z(t)),r.use(I),n&&n.forEach(i=>r.use(i)),r}function z({components:r={},...e}){return e.components={...ue,...r},H({blueprint:mt,theme:{},...e})}function vt({axiosConfig:r=null,baseURL:e=null}={}){e||(e=document.body.dataset.apiUrl);const t=a.createPinia(),n=a.createORM({});return n().use(be({axios:se,...r||a.config$1.axiosConfig,baseURL:e})),a.setActivePinia(t),t.use(n)}class wt{constructor(e,t=null){if(typeof e=="string"){if(!t)throw Error(`Repository "${e}" is provided as string, but no "repos" argument is provided.`);if(!(e in t))throw Error(`Repository "${e}" is not present in provided repositories.`);this.repo=t[e]}else this.repo=e;this.repos=t}async fetch({ids:e=null,repo:t=null,url:n=null,lookup:i="id__in",params:o=void 0,relations:s=null,...d}={}){var y,h;if(t??(t=this.repo),n||(n=(h=(y=t.use)==null?void 0:y.meta)==null?void 0:h.url),!n)throw Error("URL must be provided or Model must provide a `meta: Meta` with `url`");e&&i!==void 0&&(o={...o||{}},o[i]=[...e]);const l=await t.api().get(n,{...d,params:o});return s&&(l.relations=await this.relations(l.entities,s,{...d,params:{}})),l}async all({nextKey:e="next",limit:t=-1,...n}={}){const i=await this.fetch(n);let o=i.response.data[e];for(;o;){const s=await this.fetch({...n,url:o});if(s.entities&&(i.entities=i.entities!==null?i.entities.concat(s.entities):s.entities),o=s.response.data[e],t>0&&t--,!t)break}return i}async relations(e,t,n={}){var s;this._ensureRepos("relations");const i={},o=(s=this.repo.use)==null?void 0:s.fields();if(o)for(const d of t){const l=o[d];if(l instanceof a.Relation)i[d]=await this.relation(e,l,n);else throw Error(`Field ${d} is not a relation`)}return i}_ensureRepos(e){if(!this.repos)throw Error(`Query.repos is not provided although it is mandatory to call ${e}.`)}async relation(e,t,{thin:n=!1,...i}={}){var h,m;if(this._ensureRepos("relations"),typeof t=="string"){const v=(h=this.repo.use)==null?void 0:h.fields();if(!v||!v[t])throw Error(`Field ${t} is not a relation on ${this.repo.use} model`);t=v[t]}const o=t.related.constructor.entity,s=this.repos[o];if(!s)throw Error(`No repository "${o}" found.`);let d=a.collectAttr(e,t.foreignKey),l=null;if(n){l=new Set(Object.keys((m=s.pinia.state[o])==null?void 0:m.value.data).filter(M=>M in d));const v=d.difference(l);v&&(d=v)}const y=await this.all({ids:d,repo:s,...i});if(n&&l){const v=s.whereId(l).get();y.entities=[...y.entities||[],...v]}return y}}function bt(r,e=null){const t=new wt(r,e);return provide("query",t),t}class J extends S{constructor(){super(...arguments);g(this,"state",a.State.none());g(this,"nextUrl",null);g(this,"prevUrl",null);g(this,"count",null);g(this,"ids",[]);g(this,"filters",{});g(this,"dataKey","results");g(this,"nextKey","next");g(this,"prevKey","previous");g(this,"countKey","count")}static reactive({value:t,...n}){const i=super.reactive(n);return i.value=t,i.items=u.computed(()=>i.getItems()),i.prev=u.computed(()=>i.getSibling(i.value,-1)),i.next=u.computed(()=>i.getSibling(i.value,1)),i}get repo(){return this.query.repo}get model(){return this.repo.use}async fetch({append:t=!1,...n}={}){this.state.processing(),n=this.initOptions(n);const i=await this.query.fetch(n),o=[...a.collectAttr(i.entities,"id")];return this.ids=t?this.ids.concat(o):o,this.nextUrl=i.response.data[this.nextKey]||null,this.prevUrl=i.response.data[this.prevKey]||null,this.count=i.response.data[this.countKey]||this.ids.length,this.state.none(),i}getSibling(t,n){const i=this.getSiblingIndex(u.unref(t),n);return i>-1?this.items[i]:null}getSiblingIndex(t,n=1){const i=this.ids.indexOf(t.id);if(i==-1)return-1;const o=i+n;return i>-1&&o<(this.count??this.ids.length)?o:-1}getItems(){let t=this.query.repo.whereId(this.ids);if(this.relations)for(const n of this.relations)t=t.with(n);return t.get()}initOptions({filters:t=null,...n}){return!n.relations&&this.relations&&(n.relations=this.relations),!n.dataKey&&this.dataKey&&(n.dataKey=this.dataKey),!n.url&&this.url&&(n.url=this.url),t&&Object.assign(this.filters,t),this.filters&&(n.params={...this.filters,...n.params??[]}),n}async fetchNext(t){return await this.fetch({...t,url:this.nextUrl})}async fetchPrev(t){return await this.fetch({...t,url:this.prevUrl})}}function Q(r){const e=J.reactive(r);return u.provide("list",e),e}class X extends S{constructor(){super(...arguments);g(this,"confirmTKey","panel.confirm")}get name(){var t;return(t=this.props)==null?void 0:t.name}get view(){return this.panels.panel==this.name?this.panels.view:null}get value(){return this.panels.panel==this.name?this.panels.value:null}get edited(){var t;return!!((t=this.editions)!=null&&t.size)}static reactive(t){const n=super.reactive(t);return n.watcher=u.watch(()=>n.panels.panel,i=>n.onChange(i)),n.title=u.computed(()=>n.getTitle()),n.icon=u.computed(()=>n.getIcon()),n}getIcon(){var t;return((t=this.props)==null?void 0:t.icon)||null}getTitle(){var t;return(t=this.props)==null?void 0:t.title}setEdition(t,n){n?this.editions.add(t):this.editions.delete(t)}onLeave({panels:t,force:n=!1}){if(n||!this.edited)return!0;const i=b(this.confirmTKey);return confirm(i)}onChange(t){var n;t==this.name&&(this.panels.current!=this&&(this.panels.current=this),this.panels.view||(this.panels.view=(n=this.props)==null?void 0:n.index))}}class ee extends S{constructor(){super(...arguments);g(this,"panel","");g(this,"view","");g(this,"value",null);g(this,"current",null)}static readPath(t){if(!t)return{panel:"",view:""};const n=t.indexOf(".");return n<0?{panel:t,view:""}:{panel:t.substring(0,n),view:t.substring(n+1)}}show({force:t=!1,href:n=null,...i}){if(!this.current||this.current.onLeave({target:i,force:t})){if(n&&window.location.pathname!=n){if(!i.panel)throw Error("The attribute `href` requires`panel`.");window.location.href=`${n}?panel=${i.panel}&view=${i.view}`;return}this.reset(i)}}reset(t){var n;this.panel=t.panel||this.panel,this.view=t.view||((n=this.current)==null?void 0:n.index)||"",this.value=t.value}}class te extends X{constructor({query:t,...n}){var i;super(n);g(this,"showFilters",!1);this.showFilters=((i=this.props)==null?void 0:i.showFilters)||!1}static reactive(t){const n=super.reactive(t);return n.item=u.computed(i=>n.onValueChange(i)),n}get repo(){return this.props.repo}get model(){return this.repo.use}getIcon(){var t;return super.getIcon()||((t=this.model.meta)==null?void 0:t.icon)}getTitle(){var s,d;const{props:t,list:n,panels:i}=this,o=this.repo.use;if(o){if((s=this.view)!=null&&s.startsWith("list."))return b(E.model(o),3);if((d=this.view)!=null&&d.startsWith("detail.")&&i.value){if(i.value.$title)return i.value.$title;const l=b(E.model(o));return i.value.id?b("models._.title",{model:l,id:i.value.id}):b("models._.title.new",{model:l})}}return super.getTitle()}createList(){const{value:t}=u.toRefs(this.panels);return Q({value:t,query:this.query})}create(t=".detail.add"){this.target.show({panel:this.name,view:t,value:new this.model})}created(t,n=".detail.edit"){this.target.show({panel:this.name,view:n,value:t,force:!0}),this.list.fetch()}getItem(t){}}function Dt(r={}){const e=ee.reactive(r);return u.provide("panels",e),e}function Mt(r){return te.reactive(r)}function Tt(r,e){return u.defineAsyncComponent(()=>import(r).then(t=>e?Object.values(t).filter(i=>i.__name==e)[0]:t))}exports.State=a.State;exports.States=a.States;exports.assignNonEmpty=a.assignNonEmpty;exports.collectAttr=a.collectAttr;exports.config=a.config$1;Object.defineProperty(exports,"csrfToken",{enumerable:!0,get:()=>a.csrfToken});exports.filterSlots=a.filterSlots;exports.getCookie=a.getCookie;exports.getCookieList=a.getCookieList;exports.getCsrf=a.getCsrf;exports.injectOrProvide=a.injectOrProvide;exports.mapToObject=a.mapToObject;exports.reset=a.reset;exports.shallowCopy=a.shallowCopy;exports.AppContext=V;exports.Editor=C;exports.List=J;exports.ModelEditor=K;exports.ModelPanel=te;exports.Panel=X;exports.RObject=S;exports.Target=ee;exports.createApp=Z;exports.createI18n=G;exports.createPinia=vt;exports.createVuetify=z;exports.defineAsyncComponent=Tt;exports.editor=U;exports.i18n=I;exports.init=yt;exports.loadedLocalePaths=P;exports.modelEditor=Ae;exports.models=ce;exports.setLocale=gt;exports.t=b;exports.tKeys=E;exports.useAction=Se;exports.useAppContext=Me;exports.useI18n=pt;exports.useList=Q;exports.useModelPanel=Mt;exports.useModels=j;exports.usePermissions=N;exports.usePermissionsProps=De;exports.useQuery=bt;exports.useTarget=Dt;
//# sourceMappingURL=ox.cjs.map
