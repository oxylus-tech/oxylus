"use strict";var se=Object.defineProperty;var ae=(n,t,e)=>t in n?se(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>ae(n,typeof t!="symbol"?t+"":t,e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("./vue-i18n-Dg3KVpMT.cjs"),c=require("vue"),oe=require("axios"),ce=require("ox/vendor"),u=require("./theme-Bxzsxwfr.cjs");function le(n){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const e in n)if(e!=="default"){const r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:()=>n[e]})}}return t.default=n,Object.freeze(t)}const ue=le(ce);class k{static reactive(t){return c.reactive(new this(t))}constructor(t=null){t&&o.assignNonEmpty(this,t)}}const fe=Object.freeze(Object.defineProperty({__proto__:null,ContentType:o.ContentType,Group:o.Group,Meta:o.Meta,Model:o.Model,Permission:o.Permission,Permissions:o.Permissions,User:o.User},Symbol.toStringTag,{value:"Module"}));var de=Object.defineProperty,he=(n,t,e)=>t in n?de(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,D=(n,t,e)=>(he(n,typeof t!="symbol"?t+"":t,e),e);class ge{constructor(t,e,r){D(this,"repository"),D(this,"config"),D(this,"response"),D(this,"entities",null),D(this,"isSaved",!1),this.repository=t,this.config=e,this.response=r}async save(){const t=this.getDataFromResponse();if(!this.validateData(t)){console.warn("[Pinia ORM Axios] The response data could not be saved to the store because it is not an object or an array. You might want to use `dataTransformer` option to handle non-array/object response before saving it to the store.");return}let e=this.config.persistBy||"save";this.validatePersistAction(e)||(console.warn('[Pinia ORM Axios] The "persistBy" option configured is not a recognized value. Response data will be persisted by the default `save` method.'),e="save");const r=await this.repository[e](t);this.entities=Array.isArray(r)?r:[r],this.isSaved=!0}async delete(){if(this.config.delete===void 0)throw new Error("[Pinia ORM Axios] Could not delete records because the `delete` option is not set.");await this.repository.query().destroy(this.config.delete)}getDataFromResponse(){return this.config.dataTransformer?this.config.dataTransformer(this.response):this.config.dataKey?this.response.data[this.config.dataKey]:this.response.data}validateData(t){return t!==null&&typeof t=="object"}validatePersistAction(t){return["save","insert"].includes(t)}}var me=Object.defineProperty,pe=(n,t,e)=>t in n?me(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,I=(n,t,e)=>(pe(n,typeof t!="symbol"?t+"":t,e),e);class ye{constructor(t){I(this,"repository"),I(this,"config",{save:!0}),this.repository=t,this.registerActions()}get axios(){if(!this.repository.axios)throw new Error("[Pinia ORM Axios] The axios instance is not registered. Please register the axios instance to the repository.");return this.repository.axios}registerActions(){var e,r,i;const t={...(e=this.repository.config.axiosApi)==null?void 0:e.actions,...(i=(r=this.repository.getModel().$config())==null?void 0:r.axiosApi)==null?void 0:i.actions};if(t)for(const a in t){const s=t[a];typeof s=="function"?this.registerFunctionAction(a,s):this.registerObjectAction(a,s)}}registerObjectAction(t,e){this[t]=r=>this.request({...e,...r})}registerFunctionAction(t,e){this[t]=e.bind(this)}get(t,e={}){return this.request({method:"get",url:t,...e})}post(t,e={},r={}){return this.request({method:"post",url:t,data:e,...r})}put(t,e={},r={}){return this.request({method:"put",url:t,data:e,...r})}patch(t,e={},r={}){return this.request({method:"patch",url:t,data:e,...r})}delete(t,e={}){return this.request({method:"delete",url:t,...e})}async request(t){const e=this.createConfig(t),r=await this.axios.request(e);return this.createResponse(r,e)}createConfig(t){return{...this.config,...this.repository.globalApiConfig,...this.repository.apiConfig,...t}}async createResponse(t,e){const r=new ge(this.repository,e,t);return e.delete!==void 0?(await r.delete(),r):(e.save&&await r.save(),r)}}var be=Object.defineProperty,we=(n,t,e)=>t in n?be(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,P=(n,t,e)=>(we(n,typeof t!="symbol"?t+"":t,e),e);class _ extends o.Repository{constructor(){var t,e,r;super(...arguments),P(this,"axios",((e=(t=o.config)==null?void 0:t.axiosApi)==null?void 0:e.axios)||null),P(this,"globalApiConfig",((r=o.config)==null?void 0:r.axiosApi)||{}),P(this,"apiConfig",{})}api(){return ve(this)}setAxios(t){return this.axios=t,this}}function ve(n){return new ye(n)}function ke(n){const t=o.getActivePinia();return _.useModel=n,o.useRepo(_,t)}function De(n){return o.definePiniaOrmPlugin(t=>(t.config.axiosApi=n,t))}function K(n,t=!0){const e={};Array.isArray(n)||(n=Object.values(n)),t&&!n.includes(o.User)&&n.push(o.User);for(const r of n)if(r&&r.entity){if(r.entity in e)continue;o.useRepo(r),e[r.entity]=ke(r)}return c.provide("models",n),c.provide("repos",e),{models:n,repos:e}}function Me(){return{permissions:[String,Function,Object,Array]}}function V(n,t,e){const r=t instanceof o.Permissions?t:new o.Permissions(t),i=c.computed(()=>r.can(c.unref(n),c.unref(e)));return{permissions:r,allowed:i}}class U{static reactive(t){const e=c.reactive(new this(t));return e.user=c.computed(()=>{var r;return new o.User(((r=e.data)==null?void 0:r.user)||{})}),e}constructor(t={}){Object.assign(this,t),this.state=o.State.none(),this.showState=!1}load(t=void 0){this.dataEl!==void 0&&(t===void 0&&(t=this.readData(this.dataEl)),t.dataEl=this.dataEl,this.data=t,this.panel&&this.data.panel&&(this.panel.value=t)),this.models!==void 0&&(this.repos=K(this.models).repos)}readData(t){const e=document.getElementById(t);if(!e)throw"Element {elementId} not found";return e.innerText?JSON.parse(e.innerText):{}}}function Ae(n,t=!0){const e=U.reactive(n);return t&&e.dataEl&&e.load(),c.provide("context",e),c.provide("user",e.user),e}class Se{constructor(t,e){Object.assign(this,t),this.props=e,this.processing=c.ref(!1);const r=V(this.user,e.permissions,e.item);this.permissions=r.permissions,this.allowed=r.allowed}async run(...t){if(this.props.confirm&&!confirm(this.props.confirm))return;if(!this.allowed.value)throw Error("You are not allowed to execute this action");this.processing.value=!0;let e=this.props.run(this.user,this.props.item,...t);return e instanceof Promise&&(e=await e),this.processing.value=!1,this.emits&&this.emits("completed",this.props.item,...t),e}}function Te(n,t){return new Se(n,t)}const S={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function Pe(n,t,e){const r=[];let i=[];const a=q(n),s=B(n),d=e??S[t.slice(-2).toUpperCase()]??0,f=(a.getDay()-d+7)%7,y=(s.getDay()-d+7)%7;for(let h=0;h<f;h++){const m=new Date(a);m.setDate(m.getDate()-(f-h)),i.push(m)}for(let h=1;h<=s.getDate();h++){const m=new Date(n.getFullYear(),n.getMonth(),h);i.push(m),i.length===7&&(r.push(i),i=[])}for(let h=1;h<7-y;h++){const m=new Date(s);m.setDate(m.getDate()+h),i.push(m)}return i.length>0&&r.push(i),r}function xe(n,t,e){const r=e??S[t.slice(-2).toUpperCase()]??0,i=new Date(n);for(;i.getDay()!==r;)i.setDate(i.getDate()-1);return i}function Oe(n,t){const e=new Date(n),r=((S[t.slice(-2).toUpperCase()]??0)+6)%7;for(;e.getDay()!==r;)e.setDate(e.getDate()+1);return e}function q(n){return new Date(n.getFullYear(),n.getMonth(),1)}function B(n){return new Date(n.getFullYear(),n.getMonth()+1,0)}function Ee(n){const t=n.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const Ce=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function W(n){if(n==null)return new Date;if(n instanceof Date)return n;if(typeof n=="string"){let t;if(Ce.test(n))return Ee(n);if(t=Date.parse(n),!isNaN(t))return new Date(t)}return null}const L=new Date(2e3,0,2);function Re(n,t){const e=t??S[n.slice(-2).toUpperCase()]??0;return u.createRange(7).map(r=>{const i=new Date(L);return i.setDate(L.getDate()+e+r),new Intl.DateTimeFormat(n,{weekday:"narrow"}).format(i)})}function Fe(n,t,e,r){const i=W(n)??new Date,a=r==null?void 0:r[t];if(typeof a=="function")return a(i,t,e);let s={};switch(t){case"fullDate":s={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":s={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const d=i.getDate(),f=new Intl.DateTimeFormat(e,{month:"long"}).format(i);return`${d} ${f}`;case"normalDateWithWeekday":s={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":s={month:"short",day:"numeric"};break;case"year":s={year:"numeric"};break;case"month":s={month:"long"};break;case"monthShort":s={month:"short"};break;case"monthAndYear":s={month:"long",year:"numeric"};break;case"monthAndDate":s={month:"long",day:"numeric"};break;case"weekday":s={weekday:"long"};break;case"weekdayShort":s={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(e).format(i.getDate());case"hours12h":s={hour:"numeric",hour12:!0};break;case"hours24h":s={hour:"numeric",hour12:!1};break;case"minutes":s={minute:"numeric"};break;case"seconds":s={second:"numeric"};break;case"fullTime":s={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime12h":s={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime24h":s={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"fullDateTime":s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime12h":s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime24h":s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDate":s={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDateTime12h":s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"keyboardDateTime24h":s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;default:s=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(e,s).format(i)}function Ie(n,t){const e=n.toJsDate(t),r=e.getFullYear(),i=u.padStart(String(e.getMonth()+1),2,"0"),a=u.padStart(String(e.getDate()),2,"0");return`${r}-${i}-${a}`}function _e(n){const[t,e,r]=n.split("-").map(Number);return new Date(t,e-1,r)}function Le(n,t){const e=new Date(n);return e.setMinutes(e.getMinutes()+t),e}function Ye(n,t){const e=new Date(n);return e.setHours(e.getHours()+t),e}function $e(n,t){const e=new Date(n);return e.setDate(e.getDate()+t),e}function je(n,t){const e=new Date(n);return e.setDate(e.getDate()+t*7),e}function Ne(n,t){const e=new Date(n);return e.setDate(1),e.setMonth(e.getMonth()+t),e}function Ke(n){return n.getFullYear()}function Ve(n){return n.getMonth()}function Ue(n){return n.getDate()}function qe(n){return new Date(n.getFullYear(),n.getMonth()+1,1)}function Be(n){return new Date(n.getFullYear(),n.getMonth()-1,1)}function We(n){return n.getHours()}function He(n){return n.getMinutes()}function Ge(n){return new Date(n.getFullYear(),0,1)}function Ze(n){return new Date(n.getFullYear(),11,31)}function ze(n,t){return A(n,t[0])&&Xe(n,t[1])}function Je(n){const t=new Date(n);return t instanceof Date&&!isNaN(t.getTime())}function A(n,t){return n.getTime()>t.getTime()}function Qe(n,t){return A(x(n),x(t))}function Xe(n,t){return n.getTime()<t.getTime()}function Y(n,t){return n.getTime()===t.getTime()}function et(n,t){return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()}function tt(n,t){return n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()}function nt(n,t){return n.getFullYear()===t.getFullYear()}function rt(n,t,e){const r=new Date(n),i=new Date(t);switch(e){case"years":return r.getFullYear()-i.getFullYear();case"quarters":return Math.floor((r.getMonth()-i.getMonth()+(r.getFullYear()-i.getFullYear())*12)/4);case"months":return r.getMonth()-i.getMonth()+(r.getFullYear()-i.getFullYear())*12;case"weeks":return Math.floor((r.getTime()-i.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((r.getTime()-i.getTime())/(1e3*60*60*24));case"hours":return Math.floor((r.getTime()-i.getTime())/(1e3*60*60));case"minutes":return Math.floor((r.getTime()-i.getTime())/(1e3*60));case"seconds":return Math.floor((r.getTime()-i.getTime())/1e3);default:return r.getTime()-i.getTime()}}function it(n,t){const e=new Date(n);return e.setHours(t),e}function st(n,t){const e=new Date(n);return e.setMinutes(t),e}function at(n,t){const e=new Date(n);return e.setMonth(t),e}function ot(n,t){const e=new Date(n);return e.setDate(t),e}function ct(n,t){const e=new Date(n);return e.setFullYear(t),e}function x(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0)}function lt(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,999)}class ut{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return W(t)}toJsDate(t){return t}toISO(t){return Ie(this,t)}parseISO(t){return _e(t)}addMinutes(t,e){return Le(t,e)}addHours(t,e){return Ye(t,e)}addDays(t,e){return $e(t,e)}addWeeks(t,e){return je(t,e)}addMonths(t,e){return Ne(t,e)}getWeekArray(t,e){return Pe(t,this.locale,e?Number(e):void 0)}startOfWeek(t,e){return xe(t,this.locale,e?Number(e):void 0)}endOfWeek(t){return Oe(t,this.locale)}startOfMonth(t){return q(t)}endOfMonth(t){return B(t)}format(t,e){return Fe(t,e,this.locale,this.formats)}isEqual(t,e){return Y(t,e)}isValid(t){return Je(t)}isWithinRange(t,e){return ze(t,e)}isAfter(t,e){return A(t,e)}isAfterDay(t,e){return Qe(t,e)}isBefore(t,e){return!A(t,e)&&!Y(t,e)}isSameDay(t,e){return et(t,e)}isSameMonth(t,e){return tt(t,e)}isSameYear(t,e){return nt(t,e)}setMinutes(t,e){return st(t,e)}setHours(t,e){return it(t,e)}setMonth(t,e){return at(t,e)}setDate(t,e){return ot(t,e)}setYear(t,e){return ct(t,e)}getDiff(t,e,r){return rt(t,e,r)}getWeekdays(t){return Re(this.locale,t?Number(t):void 0)}getYear(t){return Ke(t)}getMonth(t){return Ve(t)}getDate(t){return Ue(t)}getNextMonth(t){return qe(t)}getPreviousMonth(t){return Be(t)}getHours(t){return We(t)}getMinutes(t){return He(t)}startOfDay(t){return x(t)}endOfDay(t){return lt(t)}startOfYear(t){return Ge(t)}endOfYear(t){return Ze(t)}}const ft=Symbol.for("vuetify:date-options"),$=Symbol.for("vuetify:date-adapter");function dt(n,t){const e=u.mergeDeep({adapter:ut,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},n);return{options:e,instance:ht(e,t)}}function ht(n,t){const e=c.reactive(typeof n.adapter=="function"?new n.adapter({locale:n.locale[t.current.value]??t.current.value,formats:n.formats}):n.adapter);return c.watch(t.current,r=>{e.locale=n.locale[r]??r??e.locale}),e}function H(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...e}=n,r=u.mergeDeep(t,e),{aliases:i={},components:a={},directives:s={}}=r,d=u.createDefaults(r.defaults),f=u.createDisplay(r.display,r.ssr),y=u.createTheme(r.theme),h=u.createIcons(r.icons),m=u.createLocale(r.locale),b=dt(r.date,m),M=u.createGoTo(r.goTo,m);return{install:g=>{for(const p in s)g.directive(p,s[p]);for(const p in a)g.component(p,a[p]);for(const p in i)g.component(p,u.defineComponent({...i[p],name:p,aliasName:i[p].name}));if(y.install(g),g.provide(u.DefaultsSymbol,d),g.provide(u.DisplaySymbol,f),g.provide(u.ThemeSymbol,y),g.provide(u.IconSymbol,h),g.provide(u.LocaleSymbol,m),g.provide(ft,b.options),g.provide($,b.instance),g.provide(u.GoToSymbol,M),u.IN_BROWSER&&r.ssr)if(g.$nuxt)g.$nuxt.hook("app:suspense:resolve",()=>{f.update()});else{const{mount:p}=g;g.mount=function(){const ie=p(...arguments);return c.nextTick(()=>f.update()),g.mount=p,ie}}u.getUid.reset(),g.mixin({computed:{$vuetify(){return c.reactive({defaults:w.call(this,u.DefaultsSymbol),display:w.call(this,u.DisplaySymbol),theme:w.call(this,u.ThemeSymbol),icons:w.call(this,u.IconSymbol),locale:w.call(this,u.LocaleSymbol),date:w.call(this,$)})}}})},defaults:d,display:f,theme:y,icons:h,locale:m,date:b,goTo:M}}const gt="3.7.3";H.version=gt;function w(n){var r,i;const t=this.$,e=((r=t.parent)==null?void 0:r.provides)??((i=t.vnode.appContext)==null?void 0:i.provides);if(e&&n in e)return e[n]}const mt={defaults:{VAppBar:{flat:!0},VAutocomplete:{variant:"filled"},VBanner:{color:"primary"},VBottomSheet:{contentClass:"rounded-t-xl overflow-hidden"},VBtn:{color:"primary",rounded:"xl"},VBtnGroup:{rounded:"xl",VBtn:{rounded:null}},VCard:{rounded:"lg"},VCheckbox:{color:"secondary",inset:!0},VChip:{rounded:"sm"},VCombobox:{variant:"filled"},VNavigationDrawer:{},VSelect:{variant:"filled"},VSlider:{color:"primary"},VTabs:{color:"primary"},VTextarea:{variant:"filled"},VTextField:{variant:"filled"},VToolbar:{VBtn:{color:null}}},icons:{defaultSet:"mdi",sets:{mdi:u.mdi}},theme:{themes:{light:{colors:{primary:"#6750a4",secondary:"#b4b0bb",tertiary:"#7d5260",error:"#b3261e",surface:"#fffbfe"}}}}},pt={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},yt={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},bt={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},wt={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},vt={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},kt={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Dt={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Mt={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},At={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},St={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Tt={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Pt={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},xt={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Ot={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Et={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Ct={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Rt={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ft={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},It={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},_t={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},j={red:pt,pink:yt,purple:bt,deepPurple:wt,indigo:vt,blue:kt,lightBlue:Dt,cyan:Mt,teal:At,green:St,lightGreen:Tt,lime:Pt,yellow:xt,amber:Ot,orange:Et,deepOrange:Ct,brown:Rt,blueGrey:Ft,grey:It,shades:_t};function G(){const t=(o.getCookieList("lang",",")||["en"]).map(e=>e.toLowerCase().replace(/[_-](\w+)/,"")).find(e=>e in o.config$1.locales);return o.createI18n({legacy:!1,fallbackLocale:"en",locale:t})}const R=G();function v(...n){return R.global.t(...n)}function Lt(n,t,e){if(!(e in o.config$1.locales))throw Error("Locale is not provided by config.");n.global.locale.value=e,E(n,t,e),document.querySelector("html").setAttribute("lang",e)}const O=new Set;function Yt({path:n="./",fallback:t=!0,...e}={}){const r=o.useI18n(e);return N(r,{path:n,fallback:t}),c.watch(()=>r.locale,()=>N(r,{path:n,fallback:t})),r}async function E(n,t,e){const r=e.replace(/[_-](\w+)/,"");if(t=`${t}locales/${r}.json`,O.has(t))return;O.add(t);const i=await fetch(t).then(a=>a.json());n.messages.value[e]={...n.messages.value[e],...i}}function N(n,{path:t="./",fallback:e=!0}={}){t.startsWith("/")||(t=(void 0)(t)),t.endsWith("/")||(t+="/");let r=E(n,t,c.unref(n.locale));return e&&n.fallbackLocale.value&&(r=r.catch(i=>E(n,t,c.unref(n.fallbackLocale))).catch(i=>{throw Error(`Could not load locale ${n.locale.value} nor its fallback ${n.fallbackLocale.value} (path: ${t}). Error: ${i}`)})),r}const C={model:n=>`models.${n.entity}`,field:n=>`fields.${n}`};function $t({App:n=null,el:t="#app",onLoad:e=!0,...r}={}){function i(){const a=Z(n,r),s=t?a.mount(t):null;return document.body.classList.remove("loading"),{app:a,el:t,vm:s}}return new Promise(a=>{if(e)return window.addEventListener("load",()=>a(i()));a(i())})}function Z(n,{props:t={},vuetify:e={},plugins:r=null}={}){return n=c.createApp(n,t),n.config.globalProperties.window=window,n.use(z(e)),n.use(R),r&&r.forEach(i=>n.use(i)),n}function z({components:n={},...t}){return t.components={...ue,...n},H({blueprint:mt,theme:{themes:{light:{dark:!1,colors:{primary:j.green.darken1,secondary:j.green.lighten4}}}},...t})}function jt({axiosConfig:n=null,baseURL:t=null}={}){t||(t=document.body.dataset.apiUrl);const e=o.createPinia(),r=o.createORM({});return r().use(De({axios:oe,...n||o.config$1.axiosConfig,baseURL:t})),o.setActivePinia(e),e.use(r)}class T{constructor(t,e=null){if(typeof t=="string"){if(!e)throw Error(`Repository "${t}" is provided as string, but no "repos" argument is provided.`);if(!(t in e))throw Error(`Repository "${t}" is not present in provided repositories.`);this.repo=e[t]}else this.repo=t;this.repos=e}async fetch({ids:t=null,repo:e=null,url:r=null,lookup:i="id__in",params:a=void 0,relations:s=null,...d}={}){var y,h;if(e??(e=this.repo),r||(r=(h=(y=e.use)==null?void 0:y.meta)==null?void 0:h.url),!r)throw Error("URL must be provided or Model must provide a `meta: Meta` with `url`");t&&i!==void 0&&(a={...a||{}},a[i]=[...t]);const f=await e.api().get(r,{...d,params:a});return s&&(f.relations=await this.relations(f.entities,s,{...d,params:{}})),f}async all({nextKey:t="next",limit:e=-1,...r}={}){const i=await this.fetch(r);let a=i.response.data[t];for(;a;){const s=await this.fetch({...r,url:a});if(s.entities&&(i.entities=i.entities!==null?i.entities.concat(s.entities):s.entities),a=s.response.data[t],e>0&&e--,!e)break}return i}async relations(t,e,r={}){var s;this._ensureRepos("relations");const i={},a=(s=this.repo.use)==null?void 0:s.fields();if(a)for(const d of e){const f=a[d];if(f instanceof o.Relation)i[d]=await this.relation(t,f,r);else throw Error(`Field ${d} is not a relation`)}return i}_ensureRepos(t){if(!this.repos)throw Error(`Query.repos is not provided although it is mandatory to call ${t}.`)}async relation(t,e,{thin:r=!1,...i}={}){var h,m;if(this._ensureRepos("relations"),typeof e=="string"){const b=(h=this.repo.use)==null?void 0:h.fields();if(!b||!b[e])throw Error(`Field ${e} is not a relation on ${this.repo.use} model`);e=b[e]}const a=e.related.constructor.entity,s=this.repos[a];if(!s)throw Error(`No repository "${a}" found.`);let d=o.collectAttr(t,e.foreignKey),f=null;if(r){f=new Set(Object.keys((m=s.pinia.state[a])==null?void 0:m.value.data).filter(M=>M in d));const b=d.difference(f);b&&(d=b)}const y=await this.all({ids:d,repo:s,...i});if(r&&f){const b=s.whereId(f).get();y.entities=[...y.entities||[],...b]}return y}}function Nt(n,t){return new T(n,t)}class F extends k{constructor(e,r={}){super(e);l(this,"state",o.State.none());l(this,"value",{});this.state||(this.state=new o.State),this.value={},this.reset(this.initial)}static reactive({initial:e,...r}){return console.log("reactive editor",e),super.reactive({initial:c.unref(e),...r})}get errors(){return this.state.isError&&this.state.data||null}reset(e=null){e===null?e=this.initial:this.initial=e,this._reset(e),this.state.none()}_reset(e){o.reset(this.value,e)}isValid(){return this._isValid()}_isValid(){return!0}get edited(){return Object.keys(this.value).some(e=>this.value[e]!=this.initial[e])}async save(e=null){var i;if(this.state.processing(),!this.isValid())return this.state.error({_:"Some of the input values are invalid"});e=this.serialize(e??this.value);const r=await this.send(e);return r.isOk?(this.reset(r.data),(i=this.saved)==null||i.call(this,this.value,this)):this.state=r,this.state}serialize(e){return e}send(e){throw"not implemented"}}class J extends F{constructor({repo:t,url:e,...r}){var i,a;e=e||((a=(i=t.use)==null?void 0:i.meta)==null?void 0:a.url),super({url:e,repo:t,...r}),window.repo=t}get fields(){return this._fields||(this._fields=this.repo&&Object.keys(this.repo.use.fields())||[]),this._fields}_reset(t){this.value=c.reactive(new this.initial.constructor),this.fields.reduce((e,r)=>(e[r]=t[r],e),this.value)}get edited(){return this.fields.some(t=>this.value[t]!=this.initial[t])}serialize(t){return t.$toJson(null,{relations:!1})}send(t){let[e,r]=["post",this.url];return t.id&&(r=`${r}${t.id}/`,e="put"),this.repo.api()[e](r,t).then(i=>o.State.ok(i.entities[0]),i=>o.State.error(i.response.data))}}class Q extends k{constructor(){super(...arguments);l(this,"state",o.State.none());l(this,"filters",{})}get repo(){return this.query.repo}get model(){return this.repo.use}queryset(e=null,r=!1){let i=this.query.repo;if(this.relations)for(const a of this.relations)i=i.with(a);return i=e?i.whereId(e):i,r?i.get().pop():i}async load(e){this.state.processing();try{!e.url&&this.url&&(e.url=this.url);let r=await fetch(e);r=await this.handleResponse(e,r)}catch(r){this.state.error(r)}return this.state.isError||this.state.none(),response}async fetch(e){return e=this.getQueryParams(e),await this.query.fetch(opts)}async handleResponse(e,r){return r}getQueryParams({filters:e=null,...r}){return!r.relations&&this.relations&&(r.relations=this.relations),!r.dataKey&&this.dataKey&&(r.dataKey=this.dataKey),!r.url&&this.url&&(r.url=this.url),e&&Object.assign(this.filters,e),this.filters&&(r.params={...this.filters,...r.params??[]}),r}}class Kt extends Q{constructor(){super(...arguments);l(this,"items",[]);l(this,"nextUrl",null);l(this,"prevUrl",null);l(this,"count",null);l(this,"dataKey","results");l(this,"nextKey","next");l(this,"prevKey","previous");l(this,"countKey","count")}get length(){return this.ids.length}get(e){return e<this.items.length?this.items[e]:null}find(e){return this.items.find(r=>r.id==e)}findIndex(e){return this.items.findIndex(r=>r.id==e)}getSibling(e,r){const i=this.find(e.id),a=i>0?i+r:-1;return a>0?this.get(a):null}async loadNext(e){return await this.load({...e,url:this.nextUrl})}async loadPrev(e){return await this.load({...e,url:this.prevUrl})}async handleResponse({append:e=!1,...r},i){if(i=await super.handleResponse(r,i),!this.state.isError){const a=[...o.collectAttr(result.entities,"id")],s=this.queryset(a).get();this.items=e?this.items.concat(s):s,this.nextUrl=i.response.data[this.nextKey]||null,this.prevUrl=i.response.data[this.prevKey]||null,this.count=i.response.data[this.countKey]||this.ids.length}return i}}class X extends k{constructor(){super(...arguments);l(this,"confirmTKey","panel.confirm")}get name(){var e;return((e=this.props)==null?void 0:e.name)||""}get view(){return this.panels.panel==this.name?this.panels.view:null}get value(){return this.panels.panel==this.name?this.panels.value:null}get edited(){var e;return!!((e=this.editions)!=null&&e.size)}static reactive(e){const r=super.reactive(e);return r.watcher=c.watch(()=>r.panels.panel,i=>r.onChange(i)),r}get icon(){var e;return((e=this.props)==null?void 0:e.icon)||null}get title(){var e;return(e=this.props)==null?void 0:e.title}setEdition(e,r){r?this.editions.add(e):this.editions.delete(e)}onLeave(){if(!this.edited)return!0;const e=v(this.confirmTKey);return confirm(e)}onChange(e){var r;e==this.name&&(this.panels.current!=this&&(this.panels.current=this),this.panels.view||(this.panels.view=(r=this.props)==null?void 0:r.index))}}class ee extends X{constructor(e){var r;super(e);l(this,"showFilters",!1);this.showFilters=((r=this.props)==null?void 0:r.showFilters)||!1}get repo(){return this.props.repo}get model(){return this.repo.use}get query(){return this.list.query}get icon(){var e;return super.icon||((e=this.model.meta)==null?void 0:e.icon)}get title(){var s,d;const{props:e,list:r,panels:i}=this,a=this.repo.use;if(a){if((s=this.view)!=null&&s.startsWith("list."))return v(C.model(a),3);if((d=this.view)!=null&&d.startsWith("detail.")&&i.value){if(i.value.$title)return i.value.$title;const f=v(C.model(a));return i.value.id?v("models._.title",{model:f,id:i.value.id}):v("models._.title.new",{model:f})}}return super.title}create(e=".detail.add"){this.panels.show({panel:this.name,view:e,value:new this.model})}created(e,r=".detail.edit"){this.panels.show({panel:this.name,view:r,value:e,force:!0}),this.list.fetch()}}class te extends k{constructor(){super(...arguments);l(this,"panel","");l(this,"view","");l(this,"value",null);l(this,"current",null)}static readPath(e){if(!e)return{panel:"",view:""};const r=e.indexOf(".");return r<0?{panel:e,view:""}:{panel:e.substring(0,r),view:e.substring(r+1)}}show({force:e=!1,href:r=null,...i}){if(e||!this.current||this.current.onLeave()){if(r&&window.location.pathname!=r){if(!i.panel)throw Error("The attribute `href` requires`panel`.");window.location.href=`${r}?panel=${i.panel}&view=${i.view}`;return}this.reset(i)}}reset({panel:e,view:r=null,value:i=null}){this.panel=e||this.panel,this.view=r||"",this.value=i}}class ne extends k{constructor(){super(...arguments);l(this,"nextUrl",null);l(this,"prevUrl",null);l(this,"count",null);l(this,"ids",[]);l(this,"dataKey","results");l(this,"nextKey","next");l(this,"prevKey","previous");l(this,"countKey","count")}get length(){return this.ids.length}get items(){return this.queryset(this.ids).get()}indexOf(e){return this.ids.indexOf(e)}async handleResponse({append:e=!1,...r},i){if(i=await super.handleResponse(r,i),this.state.isError)return i;const a=[...o.collectAttr(result.entities,"id")];return this.ids=e?this.ids.concat(a):a,this.nextUrl=result.response.data[this.nextKey]||null,this.prevUrl=result.response.data[this.prevKey]||null,this.count=result.response.data[this.countKey]||this.ids.length,this.state.none(),result}async fetchNext(e){return await this.fetch({...e,url:this.nextUrl})}async fetchPrev(e){return await this.fetch({...e,url:this.prevUrl})}}function Vt(n={}){const t=te.reactive(n);return c.provide("panels",t),t}function Ut(n){const t=ne.reactive(n);return c.provide("list",t),t}function qt({panels:n,query:t,list:e,repos:r,...i}={}){n=n??c.inject("panels"),r=r??c.inject("repos"),t=t??o.injectOrProvide("query",()=>new T(i.props.repo,r)),e=e??o.injectOrProvide("list",()=>{const{value:s}=c.toRefs(n);return SelectList.reactive({index:s,query:t})});const a=ee.reactive({panels:n,list:e,...i});return c.provide("panel",a),c.provide("item",computed(()=>a.list.item)),a}function Bt(n,t=null){const e=new T(n,t);return c.provide("query",e),e}function re({editorClass:n=F,emits:t=null,panel:e=null,...r}){t&&(r.saved??(r.saved=(a,s)=>t("saved",a,s)));const i=n.reactive(r);return e&&watch(()=>i.edited,a=>e.setEdition(i.name,a)),i}function Wt(n){return re({...n,editorClass:J})}function Ht(n,t){return c.defineAsyncComponent(()=>import(n).then(e=>t?Object.values(e).filter(i=>i.__name==t)[0]:e))}exports.State=o.State;exports.States=o.States;exports.assignNonEmpty=o.assignNonEmpty;exports.collectAttr=o.collectAttr;exports.config=o.config$1;Object.defineProperty(exports,"csrfToken",{enumerable:!0,get:()=>o.csrfToken});exports.filterSlots=o.filterSlots;exports.getCookie=o.getCookie;exports.getCookieList=o.getCookieList;exports.getCsrf=o.getCsrf;exports.injectOrProvide=o.injectOrProvide;exports.mapToObject=o.mapToObject;exports.reset=o.reset;exports.shallowCopy=o.shallowCopy;exports.AppContext=U;exports.Editor=F;exports.List=ne;exports.ModelController=Q;exports.ModelEditor=J;exports.ModelList=Kt;exports.ModelPanel=ee;exports.Panel=X;exports.Panels=te;exports.Query=T;exports.RObject=k;exports.createApp=Z;exports.createI18n=G;exports.createPinia=jt;exports.createVuetify=z;exports.defineAsyncComponent=Ht;exports.i18n=R;exports.init=$t;exports.loadedLocalePaths=O;exports.models=fe;exports.query=Nt;exports.setLocale=Lt;exports.t=v;exports.tKeys=C;exports.useAction=Te;exports.useAppContext=Ae;exports.useEditor=re;exports.useI18n=Yt;exports.useList=Ut;exports.useModelEditor=Wt;exports.useModelPanel=qt;exports.useModels=K;exports.usePanels=Vt;exports.usePermissions=V;exports.usePermissionsProps=Me;exports.useQuery=Bt;
//# sourceMappingURL=ox.cjs.map
