"use strict";var he=Object.defineProperty;var de=(r,e,t)=>e in r?he(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var l=(r,e,t)=>de(r,typeof e!="symbol"?e+"":e,t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("./index-BjJ9vESc.cjs"),u=require("vue"),fe=require("axios"),me=require("ox/vendor"),f=require("./theme-Dn1Ihkao.cjs");function pe(r){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return e.default=r,Object.freeze(e)}const ge=pe(me);function N(r,e){let t=`enums.${r}.${e}`,n=o.t(t);return n!=t?n:o.t(`enums.${r}._.${e}`)}const K={get(r,e,t){return e=="items"?Object.keys(r).filter(n=>n[0]!="_").map(n=>({value:r[n],title:N(r.__prefix,n)})):e=="toString"?n=>N(t.__prefix,n):Reflect.get(...arguments)}};function ye(r,e){return e.__prefix=r,new Proxy(e,K)}class we{constructor(e,t,n){l(this,"repository");l(this,"config");l(this,"response");l(this,"entities",null);l(this,"isSaved",!1);this.repository=e,this.config=t,this.response=n}async save(){const e=this.getDataFromResponse();if(!this.validateData(e)){console.warn("[Pinia ORM Axios] The response data could not be saved to the store because it is not an object or an array. You might want to use `dataTransformer` option to handle non-array/object response before saving it to the store.");return}let t=this.config.persistBy||"save";this.validatePersistAction(t)||(console.warn('[Pinia ORM Axios] The "persistBy" option configured is not a recognized value. Response data will be persisted by the default `save` method.'),t="save");const n=await this.repository[t](e);this.entities=Array.isArray(n)?n:[n],this.isSaved=!0}async delete(){if(this.config.delete===void 0)throw new Error("[Pinia ORM Axios] Could not delete records because the `delete` option is not set.");await this.repository.query().destroy(this.config.delete)}getDataFromResponse(){return this.config.dataTransformer?this.config.dataTransformer(this.response):this.config.dataKey?this.response.data[this.config.dataKey]:this.response.data}validateData(e){return e!==null&&typeof e=="object"}validatePersistAction(e){return["save","insert"].includes(e)}}class De{constructor(e){l(this,"repository");l(this,"config",{save:!0});this.repository=e,this.registerActions()}get axios(){if(this.repository.axios=this.repository.axios??this.repository.config.axiosApi.axios,!this.repository.axios)throw new Error("[Pinia ORM Axios] The axios instance is not registered. Please register the axios instance to the repository.");return this.repository.axios}registerActions(){var t,n,s;const e={...(t=this.repository.config.axiosApi)==null?void 0:t.actions,...(s=(n=this.repository.getModel().$config())==null?void 0:n.axiosApi)==null?void 0:s.actions};if(e)for(const i in e){const a=e[i];typeof a=="function"?this.registerFunctionAction(i,a):this.registerObjectAction(i,a)}}registerObjectAction(e,t){this[e]=n=>this.request({...t,...n})}registerFunctionAction(e,t){this[e]=t.bind(this)}get(e,t={}){return this.request({method:"get",url:e,...t})}post(e,t={},n={}){return this.request({method:"post",url:e,data:t,...n})}put(e,t={},n={}){return this.request({method:"put",url:e,data:t,...n})}patch(e,t={},n={}){return this.request({method:"patch",url:e,data:t,...n})}delete(e,t={}){return this.request({method:"delete",url:e,...t})}async request(e){const t=this.createConfig(e),n=await this.axios.request(t);return this.createResponse(n,t)}createConfig(e){return{...this.config,...this.repository.globalApiConfig,...this.repository.apiConfig,...e}}async createResponse(e,t){const n=new we(this.repository,t,e);return t.delete!==void 0?(await n.delete(),n):(t.save&&await n.save(),n)}}class ve extends o.Repository{constructor(t,n){var s,i,a;super(t,n);l(this,"axios");l(this,"globalApiConfig");l(this,"apiConfig");this.axios=((i=(s=o.config)==null?void 0:s.axiosApi)==null?void 0:i.axios)||null,this.globalApiConfig=((a=o.config)==null?void 0:a.axiosApi)||{},this.apiConfig={}}api(){return be(this)}setAxios(t){return this.axios=t,this}}function be(r){return new De(r)}function Me(r){return o.definePiniaOrmPlugin(e=>(e.config.axiosApi=r,e))}class I{constructor(e){l(this,"repo");l(this,"items");this.repo=e,this.items={}}acquireKey(){return this.constructor._lastKey++}acquire(e,t){if(t!=null&&t.length)for(var n of t)if(n in this.items){const s=this.items[n];!s.includes(e)&&s.push(e)}else this.items[n]=[e]}release(e,t){if(!(t!=null&&t.length))return;const n=[];for(var s of t){const i=this.items[s];o.lodashExports.pull(i,e),i!=null&&i.length||(n.push(s),delete this.items[s])}n.length&&this.repo.destroy(n)}releaseAcquire(e,t,n){this.release(e,o.lodashExports.difference(t,n)),this.acquire(e,o.lodashExports.difference(n,t))}flush(e){const t=[];for(var n in this.refs){const s=this.refs[n],i=s.indexOf(e);i!=-1&&(s.splice(i,1),s.length||(t.push(n),delete this.items[n]))}t.length&&this.repo.destroy(t)}clear(){this.refs={}}}l(I,"_lastKey",0);class O extends ve{constructor(t,n){super(t,n);l(this,"refs");this.refs=new I(this)}flush(){this.refs.clear(),super.flush()}}function W(r,e){var t;if(typeof e=="string"){const n=(t=r.use)==null?void 0:t.fields(),s=n&&n[e]||null;e=s instanceof o.Relation?s:null}return e}function U(r){return r instanceof o.HasMany||r instanceof o.HasManyBy||r instanceof o.HasOne||r instanceof o.BelongsTo?r.foreignKey:null}const Se=Object.freeze(Object.defineProperty({__proto__:null,ContentType:o.ContentType,Enum:ye,Group:o.Group,Meta:o.Meta,Model:o.Model,Permission:o.Permission,RefCounter:I,Repository:O,User:o.User,asRelation:W,enumProxy:K,getSourceKey:U},Symbol.toStringTag,{value:"Module"}));function _(r){o.useRepo(r);const e=o.getActivePinia();return O.useModel=r,o.useRepo(O,e)}function B(r,{useInject:e=!0,useDefaults:t=!0,key:n=null}={}){var s=e&&(u.inject("repos")||{});const i=e&&!!Object.keys(s).length;Array.isArray(r)||(r=Object.values(r)),t&&r.push(o.User);for(const a of r)if(a&&a.entity){if(a.entity in s)continue;s[a.entity]=_(a)}return!i&&u.provide("repos",s),s}class L{static reactive(e){const t=u.reactive(new this(e));return t.user=u.computed(()=>{var n;return new o.User(((n=t.data)==null?void 0:n.user)||{})}),t}constructor(e={}){Object.assign(this,e),this.state=o.State.none(),this.showState=!1}load(e=void 0){this.dataEl!==void 0&&(e===void 0&&(e=this.readData(this.dataEl)),e.dataEl=this.dataEl,this.data=e),this.models!==void 0&&(this.repos=B(this.models))}readData(e){const t=document.getElementById(e);if(!t)throw"Element {elementId} not found";return t.innerText?JSON.parse(t.innerText):{}}}function xe(r,e=!0){const t=L.reactive(r);return e&&t.dataEl&&t.load(),u.provide("context",t),u.provide("user",t.user),t}function ke({props:r,user:e,emits:t=null}){const n=u.ref(!1),s=u.computed(()=>!r.permission||e.can(r.permission,r.item));return{processing:n,run:async(...a)=>{if(r.confirm&&!confirm(r.confirm))return;if(r.href)return window.open(r.href,"_blank");n.value=!0;let c=r.run(e,r.item,...a);return c instanceof Promise&&(c=await c),n.value=!1,t&&t("completed",r.item,...a),c},allowed:s}}function S(r){const e=r.slice(-2).toUpperCase();switch(!0){case r==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case r==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(e):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(e):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(e):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(e):return{firstDay:6,firstWeekSize:1};case e==="MV":return{firstDay:5,firstWeekSize:1};case e==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function Ae(r,e,t){var y;const n=[];let s=[];const i=z(r),a=H(r),c=t??((y=S(e))==null?void 0:y.firstDay)??0,h=(i.getDay()-c+7)%7,m=(a.getDay()-c+7)%7;for(let d=0;d<h;d++){const p=new Date(i);p.setDate(p.getDate()-(h-d)),s.push(p)}for(let d=1;d<=a.getDate();d++){const p=new Date(r.getFullYear(),r.getMonth(),d);s.push(p),s.length===7&&(n.push(s),s=[])}for(let d=1;d<7-m;d++){const p=new Date(a);p.setDate(p.getDate()+d),s.push(p)}return s.length>0&&n.push(s),n}function P(r,e,t){var i;const n=t??((i=S(e))==null?void 0:i.firstDay)??0,s=new Date(r);for(;s.getDay()!==n;)s.setDate(s.getDate()-1);return s}function Te(r,e){var s;const t=new Date(r),n=((((s=S(e))==null?void 0:s.firstDay)??0)+6)%7;for(;t.getDay()!==n;)t.setDate(t.getDate()+1);return t}function z(r){return new Date(r.getFullYear(),r.getMonth(),1)}function H(r){return new Date(r.getFullYear(),r.getMonth()+1,0)}function Ee(r){const e=r.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const Oe=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function G(r){if(r==null)return new Date;if(r instanceof Date)return r;if(typeof r=="string"){let e;if(Oe.test(r))return Ee(r);if(e=Date.parse(r),!isNaN(e))return new Date(e)}return null}const Y=new Date(2e3,0,2);function Pe(r,e){var n;const t=e??((n=S(r))==null?void 0:n.firstDay)??0;return f.createRange(7).map(s=>{const i=new Date(Y);return i.setDate(Y.getDate()+t+s),new Intl.DateTimeFormat(r,{weekday:"narrow"}).format(i)})}function Re(r,e,t,n){const s=G(r)??new Date,i=n==null?void 0:n[e];if(typeof i=="function")return i(s,e,t);let a={};switch(e){case"fullDate":a={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":a={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const c=s.getDate(),h=new Intl.DateTimeFormat(t,{month:"long"}).format(s);return`${c} ${h}`;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":a={month:"short",day:"numeric"};break;case"year":a={year:"numeric"};break;case"month":a={month:"long"};break;case"monthShort":a={month:"short"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"weekday":a={weekday:"long"};break;case"weekdayShort":a={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(t).format(s.getDate());case"hours12h":a={hour:"numeric",hour12:!0};break;case"hours24h":a={hour:"numeric",hour12:!1};break;case"minutes":a={minute:"numeric"};break;case"seconds":a={second:"numeric"};break;case"fullTime":a={hour:"numeric",minute:"numeric"};break;case"fullTime12h":a={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":a={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":a={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(t,a).format(s).replace(/, /g," ");case"keyboardDateTime12h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(t,a).format(s).replace(/, /g," ");case"keyboardDateTime24h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(t,a).format(s).replace(/, /g," ");default:a=i??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(t,a).format(s)}function Ce(r,e){const t=r.toJsDate(e),n=t.getFullYear(),s=f.padStart(String(t.getMonth()+1),2,"0"),i=f.padStart(String(t.getDate()),2,"0");return`${n}-${s}-${i}`}function Ie(r){const[e,t,n]=r.split("-").map(Number);return new Date(e,t-1,n)}function Ve(r,e){const t=new Date(r);return t.setMinutes(t.getMinutes()+e),t}function Fe(r,e){const t=new Date(r);return t.setHours(t.getHours()+e),t}function A(r,e){const t=new Date(r);return t.setDate(t.getDate()+e),t}function Ne(r,e){const t=new Date(r);return t.setDate(t.getDate()+e*7),t}function Ye(r,e){const t=new Date(r);return t.setDate(1),t.setMonth(t.getMonth()+e),t}function R(r){return r.getFullYear()}function je(r){return r.getMonth()}function $e(r,e,t,n){const s=S(e),i=t??(s==null?void 0:s.firstDay)??0,a=n??(s==null?void 0:s.firstWeekSize)??1;function c(D){const v=new Date(D,0,1);return 7-C(v,P(v,e,i),"days")}let h=R(r);const m=A(P(r,e,i),6);h<R(m)&&c(h+1)>=a&&h++;const y=new Date(h,0,1),d=c(h),p=d>=a?A(y,d-7):A(y,d);return 1+C(Z(r),E(p),"weeks")}function qe(r){return r.getDate()}function Ke(r){return new Date(r.getFullYear(),r.getMonth()+1,1)}function We(r){return new Date(r.getFullYear(),r.getMonth()-1,1)}function Ue(r){return r.getHours()}function _e(r){return r.getMinutes()}function Be(r){return new Date(r.getFullYear(),0,1)}function Le(r){return new Date(r.getFullYear(),11,31)}function ze(r,e){return T(r,e[0])&&Ze(r,e[1])}function He(r){const e=new Date(r);return e instanceof Date&&!isNaN(e.getTime())}function T(r,e){return r.getTime()>e.getTime()}function Ge(r,e){return T(E(r),E(e))}function Ze(r,e){return r.getTime()<e.getTime()}function j(r,e){return r.getTime()===e.getTime()}function Je(r,e){return r.getDate()===e.getDate()&&r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()}function Qe(r,e){return r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()}function Xe(r,e){return r.getFullYear()===e.getFullYear()}function C(r,e,t){const n=new Date(r),s=new Date(e);switch(t){case"years":return n.getFullYear()-s.getFullYear();case"quarters":return Math.floor((n.getMonth()-s.getMonth()+(n.getFullYear()-s.getFullYear())*12)/4);case"months":return n.getMonth()-s.getMonth()+(n.getFullYear()-s.getFullYear())*12;case"weeks":return Math.floor((n.getTime()-s.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((n.getTime()-s.getTime())/(1e3*60*60*24));case"hours":return Math.floor((n.getTime()-s.getTime())/(1e3*60*60));case"minutes":return Math.floor((n.getTime()-s.getTime())/(1e3*60));case"seconds":return Math.floor((n.getTime()-s.getTime())/1e3);default:return n.getTime()-s.getTime()}}function et(r,e){const t=new Date(r);return t.setHours(e),t}function tt(r,e){const t=new Date(r);return t.setMinutes(e),t}function rt(r,e){const t=new Date(r);return t.setMonth(e),t}function nt(r,e){const t=new Date(r);return t.setDate(e),t}function st(r,e){const t=new Date(r);return t.setFullYear(e),t}function E(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0)}function Z(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999)}class it{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return G(e)}toJsDate(e){return e}toISO(e){return Ce(this,e)}parseISO(e){return Ie(e)}addMinutes(e,t){return Ve(e,t)}addHours(e,t){return Fe(e,t)}addDays(e,t){return A(e,t)}addWeeks(e,t){return Ne(e,t)}addMonths(e,t){return Ye(e,t)}getWeekArray(e,t){const n=t!==void 0?Number(t):void 0;return Ae(e,this.locale,n)}startOfWeek(e,t){const n=t!==void 0?Number(t):void 0;return P(e,this.locale,n)}endOfWeek(e){return Te(e,this.locale)}startOfMonth(e){return z(e)}endOfMonth(e){return H(e)}format(e,t){return Re(e,t,this.locale,this.formats)}isEqual(e,t){return j(e,t)}isValid(e){return He(e)}isWithinRange(e,t){return ze(e,t)}isAfter(e,t){return T(e,t)}isAfterDay(e,t){return Ge(e,t)}isBefore(e,t){return!T(e,t)&&!j(e,t)}isSameDay(e,t){return Je(e,t)}isSameMonth(e,t){return Qe(e,t)}isSameYear(e,t){return Xe(e,t)}setMinutes(e,t){return tt(e,t)}setHours(e,t){return et(e,t)}setMonth(e,t){return rt(e,t)}setDate(e,t){return nt(e,t)}setYear(e,t){return st(e,t)}getDiff(e,t,n){return C(e,t,n)}getWeekdays(e){const t=e!==void 0?Number(e):void 0;return Pe(this.locale,t)}getYear(e){return R(e)}getMonth(e){return je(e)}getWeek(e,t,n){const s=t!==void 0?Number(t):void 0;return $e(e,this.locale,s,n)}getDate(e){return qe(e)}getNextMonth(e){return Ke(e)}getPreviousMonth(e){return We(e)}getHours(e){return Ue(e)}getMinutes(e){return _e(e)}startOfDay(e){return E(e)}endOfDay(e){return Z(e)}startOfYear(e){return Be(e)}endOfYear(e){return Le(e)}}const ot=Symbol.for("vuetify:date-options"),$=Symbol.for("vuetify:date-adapter");function at(r,e){const t=f.mergeDeep({adapter:it,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},r);return{options:t,instance:ut(t,e)}}function ut(r,e){const t=u.reactive(typeof r.adapter=="function"?new r.adapter({locale:r.locale[e.current.value]??e.current.value,formats:r.formats}):r.adapter);return u.watch(e.current,n=>{t.locale=r.locale[n]??n??t.locale}),t}function J(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...t}=r,n=f.mergeDeep(e,t),{aliases:s={},components:i={},directives:a={}}=n,c=u.effectScope();return c.run(()=>{const h=f.createDefaults(n.defaults),m=f.createDisplay(n.display,n.ssr),y=f.createTheme(n.theme),d=f.createIcons(n.icons),p=f.createLocale(n.locale),D=at(n.date,p),v=o.createGoTo(n.goTo,p);function x(g){for(const w in a)g.directive(w,a[w]);for(const w in i)g.component(w,i[w]);for(const w in s)g.component(w,f.defineComponent({...s[w],name:w,aliasName:s[w].name}));const F=u.effectScope();if(F.run(()=>{y.install(g)}),g.onUnmount(()=>F.stop()),g.provide(f.DefaultsSymbol,h),g.provide(f.DisplaySymbol,m),g.provide(f.ThemeSymbol,y),g.provide(f.IconSymbol,d),g.provide(f.LocaleSymbol,p),g.provide(ot,D.options),g.provide($,D.instance),g.provide(o.GoToSymbol,v),f.IN_BROWSER&&n.ssr)if(g.$nuxt)g.$nuxt.hook("app:suspense:resolve",()=>{m.update()});else{const{mount:w}=g;g.mount=function(){const ce=w(...arguments);return u.nextTick(()=>m.update()),g.mount=w,ce}}g.mixin({computed:{$vuetify(){return u.reactive({defaults:M.call(this,f.DefaultsSymbol),display:M.call(this,f.DisplaySymbol),theme:M.call(this,f.ThemeSymbol),icons:M.call(this,f.IconSymbol),locale:M.call(this,f.LocaleSymbol),date:M.call(this,$)})}}})}function k(){c.stop()}return{install:x,unmount:k,defaults:h,display:m,theme:y,icons:d,locale:p,date:D,goTo:v}})}const lt="3.8.9";J.version=lt;function M(r){var n,s;const e=this.$,t=((n=e.parent)==null?void 0:n.provides)??((s=e.vnode.appContext)==null?void 0:s.provides);if(t&&r in t)return t[r]}const ct={defaults:{VAppBar:{flat:!0},VAutocomplete:{variant:"outlined"},VBanner:{color:"primary"},VBottomSheet:{contentClass:"rounded-t-xl overflow-hidden"},VBtn:{color:"primary",rounded:"xl"},VBtnGroup:{rounded:"xl",VBtn:{rounded:null}},VCard:{rounded:"lg"},VCheckbox:{color:"secondary",inset:!0},VChip:{rounded:"sm"},VCombobox:{variant:"outlined"},VDateInput:{variant:"outlined"},VDatePicker:{controlHeight:48,color:"primary",divided:!0,headerColor:"",elevation:3,rounded:"xl",VBtn:{color:"high-emphasis",rounded:"circle"}},VFileInput:{variant:"outlined"},VNavigationDrawer:{},VNumberInput:{variant:"outlined",VBtn:{color:void 0,rounded:void 0}},VSelect:{variant:"outlined"},VSlider:{color:"primary"},VTabs:{color:"primary"},VTextarea:{variant:"outlined"},VTextField:{variant:"outlined"},VToolbar:{VBtn:{color:null}}},icons:{defaultSet:"mdi",sets:{mdi:f.mdi}},theme:{themes:{light:{colors:{primary:"#6750a4",secondary:"#b4b0bb",tertiary:"#7d5260",error:"#b3261e",surface:"#fffbfe"}}}}},ht={lighten4:"#c8e6c9",darken1:"#43a047"},q={green:ht};function dt({App:r=null,el:e="#app",onLoad:t=!0,...n}={}){function s(){const i=Q(r,n),a=e?i.mount(e):null;return document.body.classList.remove("loading"),{app:i,el:e,vm:a}}return new Promise(i=>{if(t)return window.addEventListener("load",()=>i(s()));i(s())})}function Q(r,{props:e={},vuetify:t={},plugins:n=null}={}){return r=u.createApp(r,e),r.config.globalProperties.window=window,r.use(X(t)),r.use(o.i18n),o.useI18n(),n&&n.forEach(s=>r.use(s)),r}function X({components:r={},defaults:e={},...t}){return t.components={...ge,...r},J({blueprint:ct,theme:{themes:{light:{dark:!1,colors:{primary:q.green.darken1,secondary:q.green.lighten4}}}},defaults:{...e,VTextField:{variant:"underlined"},VSelect:{variant:"underlined"},VTextarea:{variant:"outlined"},VCombobox:{variant:"underlined"},VAutocomplete:{variant:"underlined"}},...t})}function ft({axiosConfig:r=null,baseURL:e=null}={}){e||(e=document.body.dataset.apiUrl);const t=o.createPinia(),n=o.createORM({plugins:[Me({axios:fe,...r||o.config$1.axiosConfig,baseURL:e})]});return o.setActivePinia(t),t.use(n)}class b{constructor(e,t=null,n){this.repo=e,this.repos=t,this.opts=n}async fetch(e={}){var p,D,v,x,k;e={...this.opts,...e};let{url:t,id:n,repo:s,lookup:i,params:a,relations:c,path:h,...m}=e;i??(i="id__in"),s??(s=this.repo);let y=null;if(Array.isArray(n)&&(n.length==1?n=n[0]:(y=n,n=null)),t||(t=(D=(p=s.use)==null?void 0:p.meta)==null?void 0:D.getUrl({path:h,id:n})),n?m.dataKey=null:"dataKey"in m||(m.dataKey=(k=(x=(v=s.use)==null?void 0:v.config)==null?void 0:x.axiosApi)==null?void 0:k.dataKey),y&&i!==void 0){if(n)throw Error("Both `ids` and `id` are provided while only one of those arguments is accepted.");a={...a||{}},a[i]=[...y]}const d=await s.api().get(t,{...m,params:a});return m.save===!1&&(d.entities=this.getEntities(d)),c&&(d.relations=await this.relations(d.entities,c,{...m,params:{}})),d}getEntities(e){const t=e.getDataFromResponse();return Array.isArray(t)?t.map(n=>this.repo.make(n)):[this.repo.make(t)]}async all({nextKey:e="next",limit:t=-1,flush:n=!1,...s}={}){const i=await this.fetch({flush:n,...s});let a=i.response.data[e];for(;a;){const c=await this.fetch({...s,url:a});if(c.entities&&(i.entities=i.entities!==null?i.entities.concat(c.entities):c.entities),a=c.response.data[e],t>0&&t--,!t)break}return i}async allOnce(e={}){return(e.repo??this.repo).first()?null:await this.all(e)}async relations(e,t,n={}){var a;this._ensureRepos("relations");const s={},i=(a=this.repo.use)==null?void 0:a.fields();if(i)for(const c of t){const h=i[c];if(h instanceof o.Relation)s[c]=await this.relation(e,h,n);else throw Error(`Field ${c} is not a relation`)}return s}_ensureRepos(e){if(!this.repos)throw Error(`Query.repos is not provided although it is mandatory to call ${e}.`)}async relation(e,t,n={}){this._ensureRepos("relations");const s=W(this.repo,t);if(!s)throw Error(`No Relation found for field ${t}.`);const i=s.related.constructor.entity,a=this.repos[i];if(!a)throw Error(`No repository "${i}" found.`);const c=U(s);if(!c)throw Error(`No source ids attributes for ${t}.`);const h=[...new Set(o.collectAttr(e,c))];return new b(a,this.repos).all({...n,id:h,repo:a})}}function ee(r,e,t=null){if(typeof r=="string"){if(!(r in e))throw Error(`Repository "${r}" is not present in provided repositories.`);return new b(e[r],e,t)}return new b(r,e,t)}class V{constructor(e){l(this,"state",o.State.none());l(this,"value",{});e&&o.assignNonEmpty(this,e),this.state||(this.state=new o.State),this.value??(this.value={}),this.empty??(this.empty={}),this.initial??(this.initial=this.props.initial||this.empty),this.valid=!0,this.reset(this.initial)}get name(){return this.props.name}get url(){return this.props.url}get errors(){return this.state.isError&&this.state.data||null}error(e){var n;const t=this.state.isError&&((n=this.state.data)==null?void 0:n[e]);return t&&this.initial[e]!=this.value[e]&&t.join(`
`)||""}discard(){this.reset(this.initial)}reset(e=null){o.reset(this.value,e??this.empty),this.state.none()}isEdited(){return!o.lodashExports.isEqual(this.value,this.initial)}async save(e=null,t={}){var s;if(this.state.processing(),this.valid===!1)return this.state.error({_:"Some of the input values are invalid"});e??(e=this.value),e instanceof FormData?t.headers={...o.config$1.axiosConfig.headers,"Content-Type":"multipart/form-data",...t.headers}:e=this.serialize(e);const n=await this.send(e,t);return n.isOk?(this.reset(n.data,!0),this.initial=o.lodashExports.cloneDeep(this.value),(s=this.saved)==null||s.call(this,this.value)):this.state=n,this.state}saved(e){var t,n;(n=(t=this.props).saved)==null||n.call(t,e,this)}serialize(e){return e}async send(e,t){throw"not implemented"}}class te{constructor(e=null){l(this,"index","list.table");l(this,"view","");l(this,"value",null);l(this,"item",null);l(this,"editions",new Set);l(this,"confirmTKey","panel.confirm");e&&o.assignNonEmpty(this,e),this.view??(this.view=this.index||"")}get name(){var e;return((e=this.props)==null?void 0:e.name)||""}get edited(){var e;return!!((e=this.editions)!=null&&e.size)}get icon(){var e;return((e=this.props)==null?void 0:e.icon)||null}get title(){var e;return(e=this.props)==null?void 0:e.title}getUrlParams(){const e={panel:this.name};return this.view!=this.index&&(e.view=this.view),this.view.startsWith("detail.")&&this.value&&(e.value=this.value),e}setEdition(e,t){t?this.editions.add(e):this.editions.delete(e)}show({view:e=null,value:t=null,silent:n=!1,force:s=!1}={}){return(e!=this.view||t!=this.value)&&(s||this.onLeave())?(this.view=e||this.index,this.value=t,!n&&this.updateLocation(),!0):!1}updateLocation(){const e=this.getUrlParams();if(e){const t=new URLSearchParams(e).toString();history.pushState(e,"",`?${t}`)}}onLeave(){if(!this.edited)return!0;const e=o.t(this.confirmTKey);return confirm(e)}}class re{constructor(e=null){l(this,"panel","");l(this,"params",{});l(this,"paramsString","");l(this,"children",{});l(this,"current");e&&o.assignNonEmpty(this,e)}readDocumentLocation(){this.paramsString=document.location.search.substring(1);const e=new URLSearchParams(this.paramsString),{panel:t,...n}=Object.fromEntries(e.entries());this.panel=t,this.params=n||{}}static readPath(e){if(!e)return{panel:"",view:""};const t=e.indexOf(".");return t<0?{panel:e,view:""}:{panel:e.substring(0,t),view:e.substring(t+1)}}register(e,t){this.children[e]||(this.children[e]=t,this.panel==t.name&&(this.current=t,t.show(this.params)))}unregister(e){delete this.children[e]}show({force:e=!1,href:t=null,...n}){if(e||!this.current||this.current.onLeave()){if(t&&window.location.pathname!=t){if(!n.panel)throw Error("The attribute `href` requires`panel`.");t=`${t}?panel=${n.panel}`,n.view&&(t=`${t}&view=${n.view||""}`),window.location.href=t;return}this.reset(n)}}reset({panel:e,silent:t=!1,...n}){var i;e&&e!=this.panel&&this.current&&!this.current.onLeave()||(this.panel=e||this.panel,this.params=n,this.current=this.children[this.panel],(i=this.current)==null||i.show({...this.params,silent:t}))}}class ne{constructor(e=null){l(this,"state",o.State.none());l(this,"save",!0);e&&o.assignNonEmpty(this,e)}get repo(){return this.query.repo}get model(){return this.repo.use}queryset(e=null,t=!1){let n=this.repo.query();if(this.relations)for(const s of this.relations)n=n.with(s);return e!==null&&(n=n.whereId(e)),t?n.first():n}async load(e={}){this.state.processing();let t=null;try{t=await this.fetch(e),t=await this.handleResponse(e,t)}catch(n){console.log(n),this.state.error(n)}return this.state.isError||this.state.none(),t}async fetch(e={}){const t=this.getQueryOptions(e);return await this.query.fetch(t)}async handleResponse(e,t){return t}getQueryOptions(e){return!e.relations&&this.relations&&this.fetchRelations&&(e.relations=this.relations),e.url||(e.url=this.url),"save"in e||(e.save=this.save),e}}class se extends ne{constructor(...t){super(...t);l(this,"ids",[]);l(this,"filters",{});l(this,"nextUrl",null);l(this,"prevUrl",null);l(this,"count",null);l(this,"page_size",null);l(this,"dataKey","results");l(this,"nextKey","next");l(this,"prevKey","previous");l(this,"countKey","count")}get length(){return this.ids.length}indexOf(t){return this.ids.indexOf(t)}drop(){this.ids=[]}reset(t=[]){this.ids=t,this.nextUrl=null,this.prevUrl=null,this.count=this.ids.length}add(t,n=null){const s=this.ids.indexOf(t);return s!=-1?s:n!==null?(this.ids.splice(n,0,t),n):(this.ids.push(t),this.ids.length-1)}remove(t){this.ids.indexOf(t)!=-1&&this.ids.splice(index,1)}getSiblingIndex(t,n){if(t===null)return-1;const s=this.ids.indexOf(t.id),i=s>=0?s+n:-1;return i>=0&&i<this.ids.length?i:-1}async loadNext(t){return await this.load({...t,url:this.nextUrl})}async loadPrev(t){return await this.load({...t,url:this.prevUrl})}getQueryOptions(t){return!("filters"in t)&&this.filters&&(t.params={...this.filters,...t.params??[]}),this.page_size&&(t.params={...t.params,page_size:this.page_size}),super.getQueryOptions(t)}async handleResponse({append:t=!1,...n},s){if(s=await super.handleResponse(n,s),!this.state.isError&&n.save!==!1){const i=o.lodashExports.map(s.entities,"id");this.setIds(i,t),this.nextUrl=s.response.data[this.nextKey]||null,this.prevUrl=s.response.data[this.prevKey]||null,this.count=s.response.data[this.countKey]||this.ids.length}return s}setIds(t,n=!1){typeof n=="number"?this.ids.splice(n,0,...t):n&&this.ids.length?this.ids=o.lodashExports.union(this.ids,t):this.ids=t}}class ie extends V{constructor(e){e.fields=Object.keys(e.props.repo.use.fields()),e.empty??(e.empty=new e.props.repo.use),super(e)}get repo(){return this.props.repo}get name(){return this.props.name||`${this.repo.use.entity}-edit`}isEdited(){return!o.lodashExports.isEqual(o.lodashExports.pick(this.value,this.fields),o.lodashExports.pick(this.initial,this.fields))}get url(){var t,n;const e=super.url||((n=(t=this.repo.use)==null?void 0:t.meta)==null?void 0:n.url);if(!e)throw Error("No url specified as parameter or in Model.meta.");return e}reset(e){(!e||!Object.keys(e).length)&&(e=this.empty);const t=this.fields.filter(n=>n in e);this.value=o.lodashExports.cloneDeep(o.lodashExports.pick(e,t))||{},this.state.none()}serialize(e){const t=this.repo.use;return new t({...this.value}).$toJson(null,{relations:!1})}async send(e,t={}){let[n,s]=["post",this.url];return this.value.id&&(s=`${s}${this.value.id}/`,n="put"),await this.repo.api()[n](s,e,t).then(i=>o.State.ok(i.entities[0]),i=>o.State.error(i.response.data))}}class oe extends te{constructor(t){var n;super(t);l(this,"showFilters",!1);this.showFilters=((n=this.props)==null?void 0:n.showFilters)||!1}get repo(){return this.props.repo}get model(){return this.repo.use}get query(){return this.list.query}get icon(){var t;return super.icon||((t=this.model.meta)==null?void 0:t.icon)}get title(){var i,a,c,h;const{props:t,list:n}=this,s=this.repo.use;if(s){if((i=this.view)!=null&&i.startsWith("list."))return o.t(o.tKeys.model(s),3);if((a=this.view)!=null&&a.startsWith("detail.")){if((c=this.value)!=null&&c.$title)return this.value.$title;const m=o.t(o.tKeys.model(s));return(h=this.value)!=null&&h.id?o.t("models._.title",{model:m,id:this.value.id}):o.t("models._.title.new",{model:m})}}return super.title}getUrlParams(){const{value:t=null,...n}=super.getUrlParams();return t!=null&&t.id&&(n.id=t.id),n}create(t="detail.edit"){this.show({view:t,value:null})}created(t,n="detail.edit"){this.show({view:n,value:t})}show({id:t=null,...n}){if(t)ee(this.repo).fetch({id:t,relations:this.relations}).then(s=>(super.show({...n,value:s.entities[0]}),s));else return super.show(n)}}function mt(r){const e=u.reactive(new re(r));u.provide("panels",e),u.onMounted(()=>{e.readDocumentLocation(),e.panel&&e.show({panel:e.panel,silent:!0,...e.params})}),window.addEventListener("popstate",n=>{n.state&&e.show({...n.state,silent:!0})});const t=document.title;return u.watch(()=>{var n;return(n=e.current)==null?void 0:n.title},n=>{n?document.title=`${n} | ${t}`:document.title=t}),e}function ae(r,e){const t=u.reactive(new e(r));return u.provide("panel",t),u.onMounted(()=>t.panels.register(t.name,t)),u.onUnmounted(()=>t.panels.unregister(t.name)),{panel:t}}function pt({query:r,repos:e,...t}){e??(e=u.inject("repos")),r??(r=new b(t.props.repo,e)),t.panels??(t.panels=u.inject("panels"));const{list:n,items:s}=ue({query:r,relations:t.props.relations,fetchRelations:t.props.fetchRelations}),{panel:i}=ae({list:n,...t},oe),a=u.computed(()=>{const h=n.getSiblingIndex(u.unref(i.value),1);return s.value[h]??null}),c=u.computed(()=>{const h=n.getSiblingIndex(u.unref(i.value),-1);return s.value[h]??null});return{panels:i.panels,panel:i,list:n,items:s,next:a,prev:c}}function ue(r,e=se){const t=u.reactive(new e(r)),n=t.repo.refs.acquireKey(),s=u.computed(()=>t.queryset(t.ids).orderBy(i=>t.ids.indexOf(i)).get());return u.watch(()=>t.ids,(i,a)=>{o.lodashExports.isEqual(u.toRaw(i),u.toRaw(a))||t.repo.refs.releaseAcquire(n,a,i)}),u.onUnmounted(()=>t.repo.refs.flush(n)),u.provide("list",t),u.provide("items",s),{list:t,items:s,listId:n}}function gt(r,e=null,t){const n=new b(r,e,t),s=o.State.none();async function i(a){s.processing();let c=null;try{c=await n.fetch(a),s.none()}catch(h){s.error(h)}return c}return{state:s,query:n,fetch:i}}function le(r,e=V){r.initial||r.props.initial;const t=u.reactive(new e(r));u.provide("editor",t);const n=u.computed(()=>t.isEdited());u.watch(()=>t.props.initial,i=>{t.initial=i||t.empty,t.reset(i||t.empty)});const s=u.inject("panel");return s&&u.watch(()=>t.edited,i=>s.setEdition(t.name,i)),{editor:t,edited:n}}function yt(r,e=ie){return le(r,e)}const wt={required(r){return r?!0:o.t("fields._.required")},errors(r){return()=>r!=null&&r.length?r.join("<br>")||!1:!0},optional(r){return e=>!e||r(e)},email(r){return/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(r)||o.t("fields.email.rule")},username(r){return/^[A-Za-z0-9@.+\-_]+$/.test(r)||"Username must not be empty. It only can contain letters, numbers and @/+/./- special characters"}};function Dt(r,e){return u.defineAsyncComponent(()=>import(r).then(t=>e?(console.log(t,t.components,Object.keys(t)),Object.values(t).filter(s=>s.__name==e)[0]):t))}exports.State=o.State;exports.States=o.States;exports.assignNonEmpty=o.assignNonEmpty;exports.collectAttr=o.collectAttr;exports.config=o.config$1;exports.createI18n=o.createI18n;Object.defineProperty(exports,"csrfToken",{enumerable:!0,get:()=>o.csrfToken});exports.excludeValues=o.excludeValues;exports.filterSlots=o.filterSlots;exports.filterValues=o.filterValues;exports.getCookie=o.getCookie;exports.getCookieList=o.getCookieList;exports.getCsrf=o.getCsrf;exports.i18n=o.i18n;exports.injectOrProvide=o.injectOrProvide;exports.mapToObject=o.mapToObject;exports.reset=o.reset;exports.shallowCopy=o.shallowCopy;exports.splitValues=o.splitValues;exports.t=o.t;exports.tKeys=o.tKeys;exports.te=o.te;exports.useI18n=o.useI18n;exports.AppContext=L;exports.Editor=V;exports.ModelController=ne;exports.ModelEditor=ie;exports.ModelList=se;exports.ModelPanel=oe;exports.Panel=te;exports.Panels=re;exports.Query=b;exports.createApp=Q;exports.createPinia=ft;exports.createVuetify=X;exports.defineAsyncComponent=Dt;exports.init=dt;exports.models=Se;exports.query=ee;exports.rules=wt;exports.useAction=ke;exports.useAppContext=xe;exports.useEditor=le;exports.useModelEditor=yt;exports.useModelList=ue;exports.useModelPanel=pt;exports.useModels=B;exports.usePanel=ae;exports.usePanels=mt;exports.useQuery=gt;exports.useRepo=_;
//# sourceMappingURL=ox.cjs.map
