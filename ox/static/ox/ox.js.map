{"version":3,"file":"ox.js","sources":["../../../assets/ox/src/models/enum.ts","../../../assets/node_modules/.pnpm/@pinia-orm+axios@1.10.2_axios@1.9.0_pinia-orm@1.10.2_pinia@2.3.1_typescript@5.8.3_vue@3_70c1ef7562696e8f15c0d4d019f256b8/node_modules/@pinia-orm/axios/dist/index.mjs","../../../assets/ox/src/models/repository.ts","../../../assets/ox/src/models/index.ts","../../../assets/ox/src/composables/models.ts","../../../assets/ox/src/composables/app.ts","../../../assets/ox/src/composables/actions.ts","../../../assets/node_modules/.pnpm/vuetify@3.8.9_typescript@5.8.3_vite-plugin-vuetify@2.1.1_vue@3.5.16_typescript@5.8.3_/node_modules/vuetify/lib/composables/date/adapters/vuetify.js","../../../assets/node_modules/.pnpm/vuetify@3.8.9_typescript@5.8.3_vite-plugin-vuetify@2.1.1_vue@3.5.16_typescript@5.8.3_/node_modules/vuetify/lib/composables/date/date.js","../../../assets/node_modules/.pnpm/vuetify@3.8.9_typescript@5.8.3_vite-plugin-vuetify@2.1.1_vue@3.5.16_typescript@5.8.3_/node_modules/vuetify/lib/framework.js","../../../assets/node_modules/.pnpm/vuetify@3.8.9_typescript@5.8.3_vite-plugin-vuetify@2.1.1_vue@3.5.16_typescript@5.8.3_/node_modules/vuetify/lib/blueprints/md3.js","../../../assets/node_modules/.pnpm/vuetify@3.8.9_typescript@5.8.3_vite-plugin-vuetify@2.1.1_vue@3.5.16_typescript@5.8.3_/node_modules/vuetify/lib/util/colors.js","../../../assets/ox/src/composables/init.ts","../../../assets/ox/src/controllers/query.ts","../../../assets/ox/src/controllers/editor.ts","../../../assets/ox/src/controllers/panel.ts","../../../assets/ox/src/controllers/panels.ts","../../../assets/ox/src/controllers/modelController.ts","../../../assets/ox/src/controllers/modelList.ts","../../../assets/ox/src/controllers/modelEditor.ts","../../../assets/ox/src/controllers/modelPanel.ts","../../../assets/ox/src/composables/controllers.ts","../../../assets/ox/src/composables/rules.ts","../../../assets/ox/src/composables/index.ts"],"sourcesContent":["import { t } from '../composables/i18n'\n\nfunction toString(prefix: string, prop: string) {\n    let key = `enums.${prefix}.${prop}`\n    let val = t(key)\n    if(val != key)\n        return val\n\n    return t(`enums.${prefix}._.${prop}`)\n}\n\n/**\n * Provide an enum and utilities for rendering enum in a list.\n */\nexport const enumProxy = {\n    get(target: Record<string, any>, prop: string, receiver) {\n        if(prop == \"items\")\n            return Object.keys(target).filter(k => k[0] != '_').map(k => ({\n                value: target[k],\n                title: toString(target.__prefix, k)\n            }))\n        if(prop == \"toString\")\n            return (k) => toString(receiver.__prefix, k)\n        return Reflect.get(...arguments)\n    },\n\n}\n\n/**\n * Create a new enum using provided field values.\n *\n * This returns a Proxy that provides the following:\n *\n * - `toString(field: string)`: return translated string for the provided field name\n * - `items`: a list of enumerated values to be used by `v-select` (with `title` and `value`).\n *\n * @param prefix - prefix used in translation, as `enums.{prefix}.{props}`.\n * @param fields - enum fields and values\n */\nexport function Enum(prefix: string, fields: Record<string, any>) {\n    fields.__prefix = prefix\n    return new Proxy(fields, enumProxy)\n}\n","import { Repository, config, useRepo, definePiniaOrmPlugin } from 'pinia-orm';\nimport { getActivePinia } from 'pinia';\n\nclass Response {\n  /**\n   * The repository that called the request.\n   */\n  repository;\n  /**\n   * The request configuration.\n   */\n  config;\n  /**\n   * The axios response instance.\n   */\n  response;\n  /**\n   * Entities created by Pinia ORM.\n   */\n  entities = null;\n  /**\n   * Whether if response data is saved to the store or not.\n   */\n  isSaved = false;\n  /**\n   * Create a new response instance.\n   */\n  constructor(repository, config, response) {\n    this.repository = repository;\n    this.config = config;\n    this.response = response;\n  }\n  /**\n   * Save response data to the store.\n   */\n  async save() {\n    const data = this.getDataFromResponse();\n    if (!this.validateData(data)) {\n      console.warn(\n        \"[Pinia ORM Axios] The response data could not be saved to the store because it is not an object or an array. You might want to use `dataTransformer` option to handle non-array/object response before saving it to the store.\"\n      );\n      return;\n    }\n    let method = this.config.persistBy || \"save\";\n    if (!this.validatePersistAction(method)) {\n      console.warn(\n        '[Pinia ORM Axios] The \"persistBy\" option configured is not a recognized value. Response data will be persisted by the default `save` method.'\n      );\n      method = \"save\";\n    }\n    const result = await this.repository[method](data);\n    this.entities = Array.isArray(result) ? result : [result];\n    this.isSaved = true;\n  }\n  /**\n   * Delete the entity record where the `delete` option is configured.\n   */\n  async delete() {\n    if (this.config.delete === void 0) {\n      throw new Error(\n        \"[Pinia ORM Axios] Could not delete records because the `delete` option is not set.\"\n      );\n    }\n    await this.repository.query().destroy(this.config.delete);\n  }\n  /**\n   * Get the response data from the axios response object. If a `dataTransformer`\n   * option is configured, it will be applied to the response object. If the\n   * `dataKey` option is configured, it will return the data from the given\n   * property within the response body.\n   */\n  getDataFromResponse() {\n    if (this.config.dataTransformer) {\n      return this.config.dataTransformer(this.response);\n    }\n    if (this.config.dataKey) {\n      return this.response.data[this.config.dataKey];\n    }\n    return this.response.data;\n  }\n  /**\n   * Get persist options if any set in config.\n   */\n  // protected getPersistOptions (): PersistOptions | undefined {\n  //   const persistOptions = this.config.persistOptions\n  //\n  //   if (!persistOptions || typeof persistOptions !== 'object') {\n  //     return\n  //   }\n  //\n  //   return Object.keys(persistOptions)\n  //     .filter(this.validatePersistAction) // Filter to avoid polluting the payload.\n  //     .reduce((carry, key) => {\n  //       carry[key] = persistOptions[key]\n  //       return carry\n  //     }, {} as PersistOptions)\n  // }\n  /**\n   * Validate the given data to ensure the Pinia ORM persist methods accept it.\n   */\n  validateData(data) {\n    return data !== null && typeof data === \"object\";\n  }\n  /**\n   * Validate the given string as to ensure it correlates with the available\n   * Pinia ORM persist methods.\n   */\n  validatePersistAction(action) {\n    return [\"save\", \"insert\"].includes(action);\n  }\n}\n\nclass Request {\n  /**\n   * The repository class.\n   */\n  repository;\n  /**\n   * The default config.\n   */\n  config = {\n    save: true\n  };\n  /**\n   * Create a new api instance.\n   */\n  constructor(repository) {\n    this.repository = repository;\n    this.registerActions();\n  }\n  /**\n   * Get the axios client.\n   */\n  get axios() {\n    this.repository.axios = this.repository.axios ?? this.repository.config.axiosApi.axios;\n    if (!this.repository.axios) {\n      throw new Error(\n        \"[Pinia ORM Axios] The axios instance is not registered. Please register the axios instance to the repository.\"\n      );\n    }\n    return this.repository.axios;\n  }\n  /**\n   * Register actions from the repository config.\n   */\n  registerActions() {\n    const actions = { ...this.repository.config.axiosApi?.actions, ...this.repository.getModel().$config()?.axiosApi?.actions };\n    if (!actions) {\n      return;\n    }\n    for (const name in actions) {\n      const action = actions[name];\n      typeof action === \"function\" ? this.registerFunctionAction(name, action) : this.registerObjectAction(name, action);\n    }\n  }\n  /**\n   * Register the given object action.\n   */\n  registerObjectAction(name, action) {\n    this[name] = (config) => {\n      return this.request({ ...action, ...config });\n    };\n  }\n  /**\n   * Register the given function action.\n   */\n  registerFunctionAction(name, action) {\n    this[name] = action.bind(this);\n  }\n  /**\n   * Perform a get request.\n   */\n  get(url, config = {}) {\n    return this.request({ method: \"get\", url, ...config });\n  }\n  /**\n   * Perform a post request.\n   */\n  post(url, data = {}, config = {}) {\n    return this.request({ method: \"post\", url, data, ...config });\n  }\n  /**\n   * Perform a put request.\n   */\n  put(url, data = {}, config = {}) {\n    return this.request({ method: \"put\", url, data, ...config });\n  }\n  /**\n   * Perform a patch request.\n   */\n  patch(url, data = {}, config = {}) {\n    return this.request({ method: \"patch\", url, data, ...config });\n  }\n  /**\n   * Perform a delete request.\n   */\n  delete(url, config = {}) {\n    return this.request({ method: \"delete\", url, ...config });\n  }\n  /**\n   * Perform an api request.\n   */\n  async request(config) {\n    const requestConfig = this.createConfig(config);\n    const axiosResponse = await this.axios.request(requestConfig);\n    return this.createResponse(axiosResponse, requestConfig);\n  }\n  /**\n   * Create a new config by merging the global config, the repository config,\n   * and the given config.\n   */\n  createConfig(config) {\n    return {\n      ...this.config,\n      ...this.repository.globalApiConfig,\n      ...this.repository.apiConfig,\n      ...config\n    };\n  }\n  /**\n   * Create a new response instance by applying a few initialization processes.\n   * For example, it saves response data if `save` option id set to `true`.\n   */\n  async createResponse(axiosResponse, config) {\n    const response = new Response(this.repository, config, axiosResponse);\n    if (config.delete !== void 0) {\n      await response.delete();\n      return response;\n    }\n    config.save && await response.save();\n    return response;\n  }\n}\n\nclass AxiosRepository extends Repository {\n  axios;\n  globalApiConfig;\n  apiConfig;\n  constructor(database, pinia) {\n    super(database, pinia);\n    this.axios = config?.axiosApi?.axios || null;\n    this.globalApiConfig = config?.axiosApi || {};\n    this.apiConfig = {};\n  }\n  api() {\n    return useAxiosApi(this);\n  }\n  setAxios(axios) {\n    this.axios = axios;\n    return this;\n  }\n}\n\nfunction useAxiosApi(repository) {\n  return new Request(repository);\n}\n\nfunction useAxiosRepo(model) {\n  const pinia = getActivePinia();\n  AxiosRepository.useModel = model;\n  return useRepo(AxiosRepository, pinia);\n}\n\nfunction createPiniaOrmAxios(axiosConfig) {\n  return definePiniaOrmPlugin((context) => {\n    context.config.axiosApi = axiosConfig;\n    return context;\n  });\n}\nconst piniaOrmPluginAxios = createPiniaOrmAxios();\n\nexport { AxiosRepository, Request, Response, createPiniaOrmAxios, piniaOrmPluginAxios, useAxiosApi, useAxiosRepo };\n","import type { Model, Database, Repository } from 'pinia-orm'\nimport type { Pinia } from 'pinia'\nimport type { ModelId } from './model'\n\nimport { difference, pull, union } from 'lodash'\nimport { AxiosRepository } from '@pinia-orm/axios'\n\n\nexport type RefKey = string|number\n\n\n/**\n * Provide reference count for items, by context key using acquire-release mechanism.\n *\n * This allows to keep memory low by keeping a registry of items being used.\n *\n * An object released with not more reference is destroyed from database.\n *\n * **Note**: once an object is tagged as acquired, it will be destroyed on release\n * no matter if there are other use outside of it.\n */\nexport class RefCounter<M extends Model> {\n    static _lastKey = 0\n\n    repo: Repository<M>\n    items: Record<RefId, RefKey[]>\n\n    constructor(repo: Repository<M>) {\n        this.repo = repo\n        this.items = {}\n    }\n\n    /** Acquire a unique context key */\n    acquireKey(): number {\n        return this.constructor._lastKey++\n    }\n\n    /** Acquire provided ids for this key */\n    acquire(key: RefKey, ids: RefId[]) {\n        if(ids?.length)\n            for(var id of ids) {\n                if(id in this.items) {\n                    const tags = this.items[id]\n                    !tags.includes(key) && tags.push(key)\n                }\n                else\n                    this.items[id] = [key]\n            }\n    }\n\n    /** Release provided ids for this key */\n    release(key: RefKey, ids: RefId[]) {\n        if(!ids?.length)\n            return\n\n        const drop = []\n        for(var id of ids) {\n            const tags = this.items[id]\n            pull(tags, key)\n            if(!tags?.length) {\n                drop.push(id)\n                delete this.items[id]\n            }\n        }\n\n        if(drop.length)\n            this.repo.destroy(drop)\n    }\n\n    /**\n     * Release and acquire for this key.\n     *\n     * This optimizes out ids\n     */\n    releaseAcquire(key: RefKey, releaseIds: RefId[], acquireIds: RefId[]) {\n        this.release(key, difference(releaseIds, acquireIds))\n        this.acquire(key, difference(acquireIds, releaseIds))\n    }\n\n    /** Release all reference for the provided context key. */\n    flush(key: RefKey) {\n        const drop = []\n        for(var id in this.refs) {\n            const tags = this.refs[id]\n            const idx = tags.indexOf(key)\n            if(idx != -1) {\n                tags.splice(idx,1)\n                if(!tags.length) {\n                    drop.push(id)\n                    delete this.items[id]\n                }\n            }\n        }\n\n        if(drop.length)\n            this.repo.destroy(drop)\n    }\n\n    /** Clear reference counter without destroying items. **/\n    clear() {\n        this.refs = {}\n    }\n\n}\n\n\n/**\n * Base repository used by Oxylus application.\n *\n * It:\n * - provides a `counter` property: used for object reference tracking\n * - AxiosRepository: used to fetch items from api.\n */\nexport class Repository<M extends Model> extends AxiosRepository<M> {\n    refs: RefCounter<M>\n\n    constructor(database: Database, pinia?: Pinia) {\n        super(database, pinia)\n        this.refs = new RefCounter(this)\n    }\n\n    flush() {\n        this.refs.clear()\n        super.flush()\n    }\n}\n","import {Relation, BelongsTo, HasMany, HasManyBy, HasOne} from 'pinia-orm'\nimport type {Repository, PrimaryKey, Model as $Model} from 'pinia-orm'\n\nimport type { ClassType } from '../utils'\n\nexport * from './enum'\nexport * from './model'\nexport * from './auth'\nexport * from './repository'\n\nimport type { Model } from './model'\n\n/** Shortcut to an object of repositories by model entity. */\nexport type Repos={[s: string]: Repository<Model>}\n\n/** Generic type for typing model classes. **/\nexport type ModelType<T extends Model> = ClassType<T>\n\n/** Return relation based on field name or Relation field. */\nexport function asRelation<M extends $Model>(repo: Repository<M>, relation: string|Relation): Relation|null {\n    if(typeof relation == \"string\") {\n        const fields = repo.use?.fields()\n        const field = fields && fields[relation] || null\n        relation = field instanceof Relation ? field : null\n    }\n    return relation\n}\n\n/**\n * For the provided relation, return the field name providing ids of related\n * models.\n */\nexport function getSourceKey(field: Relation): PrimaryKey|null  {\n    if(field instanceof HasMany || field instanceof HasManyBy || field instanceof HasOne || field instanceof BelongsTo)\n        return field.foreignKey\n    return null\n}\n","import type {Constructor, Model as $Model} from 'pinia-orm'\nimport { inject, provide } from 'vue'\nimport { getActivePinia } from 'pinia'\nimport { useRepo as $useRepo } from 'pinia-orm'\n\nimport type {Repos} from '../models'\nimport { Model, User, Repository } from '../models'\n\n\nexport type Models = (typeof Model)[] | {[name: string]: (typeof Model)}\n\n/**\n * {@link useModels} options.\n */\nexport interface IUseModelOpts {\n    /** Use injected repository if already present. */\n    useInject?: boolean\n    /** Use default models */\n    useDefaults?: boolean\n    /** Store subkey (see {@link useModel}) **/\n}\n\n\n/**\n * Use repository for the provided model.\n */\nexport function useRepo<M extends Model>(model: Constructor<M>): Repository<M> {\n    $useRepo(model)\n    const pinia = getActivePinia()\n    Repository.useModel = model as unknown as typeof $Model\n    return $useRepo(Repository<Model>, pinia)\n}\n\n/**\n * Use provided pinia-orm models, returning an object with:\n * - repos: pinia-orm api repositories as dict by entity\n * - models: pinia-orm models\n *\n * It uses injected repos by default if already provided. You\n * can disable it through options.\n *\n * `provide()` those values if not already provided.\n */\nexport function useModels(models: Models, {useInject=true, useDefaults=true, key=null}: IUseModelOpts = {}): Record<str, Repository<Model>>\n{\n    var repos : Repos = useInject && (inject('repos') || {}) as Repos\n    const injected = (useInject && !!Object.keys(repos).length)\n\n    if(!Array.isArray(models))\n       models = Object.values(models)\n\n    if(useDefaults)\n       models.push(User)\n\n    for(const model of models)\n        if(model && model.entity) {\n            if(model.entity in repos)\n                continue\n\n            // there might be a bug here, without useRepo, axios is null on repositories\n            repos[model.entity] = useRepo(model)\n        }\n\n    !injected && provide(\"repos\", repos)\n    return repos\n}\n","import {computed, reactive, provide} from 'vue'\nimport type {ComputedRef, Reactive} from 'vue'\n\nimport {User, Model} from '../models'\nimport type {Repos} from '../models'\nimport { useModels } from './models'\nimport { State } from '../utils'\nimport type {IObject} from '../utils'\n\n\n/**\n * Interface describing application data.\n *\n * Application data is initial data passed down to application from\n * Django generated page.\n */\nexport interface IAppData extends IObject {\n    //! User's data.\n    user?: IObject\n}\n\n/**\n * This provide configuration to {@link AppContext}.\n */\nexport interface IApp {\n    /**\n     * Root API url\n     */\n    apiUrl?: string\n    /**\n     * Id of `<script>` element containing initial application data.\n     */\n    dataEl?: string\n    /**\n     * Models used by application.\n     */\n    models?: (typeof Model)[]\n    /**\n     * Extra application data.\n     */\n    data?: IAppData\n}\n\n\n/**\n * This class provides context for Oxylus application.\n *\n * Which is:\n * - initial data: this is loaded from `<script>` HTML object.\n * - models: it will create adequate `pinia-orm/axios` repositories for them.\n *\n * The context is provided to Vue components in order to allow them\n * to access global information, such as current user or Panel.\n */\nexport class AppContext {\n    static reactive(opts: IApp) : IRAppContext {\n        const obj = reactive(new this(opts)) as IRAppContext\n        obj.user = computed(() => new User(obj.data?.user || {}))\n        return obj\n    }\n\n    constructor(opts: IApp = {}) {\n        Object.assign(this, opts)\n        this.state = State.none()\n        this.showState = false\n    }\n\n    /**\n     * Load data into AppData. If no `value` is provided, read it from\n     * source element.\n     */\n    load(value: any = undefined) {\n        if(this.dataEl !== undefined) {\n            if(value === undefined)\n                value = this.readData(this.dataEl)\n            value.dataEl = this.dataEl\n            this.data = value\n        }\n\n        if(this.models !== undefined) {\n            this.repos = useModels(this.models)\n        }\n    }\n\n    /**\n     * Read data from the context of provided source element.\n     * @param {String} el - id of the DOM element.\n     * @return {Object} read data\n     */\n    readData(dataEl: string): any {\n        const el = document.getElementById(dataEl)\n        if(!el)\n            throw `Element {elementId} not found`;\n        return el.innerText ? JSON.parse(el.innerText) : {};\n    }\n}\nexport interface AppContext extends IApp {\n    /** Models' repositories */\n    repos?: Repos\n    /**\n     * Application level state. This can be displayed to user using\n     * {@link AppContext.showState}.\n     *\n     * This element can display errors to users.\n     */\n    state: State\n    /**\n     * Show application state to user.\n     */\n    showState: boolean\n}\nexport interface IRAppContext extends Reactive<AppContext> {\n    user: ComputedRef<User>\n}\n\n\n/**\n * Create a new {@link AppContext} and provide the following values:\n * - `context`: {@link AppContext} object;\n * - `user`: current {@link models.User};\n */\nexport function useAppContext(opts: IApp, load: boolean = true): AppContext {\n    const obj = AppContext.reactive(opts)\n    load && obj.dataEl && obj.load()\n\n    provide('context', obj)\n    provide('user', obj.user)\n    // provide('repos')\n    return obj\n}\n","import { computed, ref } from 'vue'\n\nimport type { ComputedRef, Ref } from 'vue'\nimport type { Repository } from 'pinia-orm'\nimport type { Response } from '@pinia-orm/axios'\n\nimport { User, Model } from '../models'\nimport type { IPermissionGetCodename } from '../models'\n\n\nexport type ActionRun<M extends Model, R> = (user: User, item: M, ...args: any[]) => Promise<R>\nexport type ActionCompleted<M extends Model, R> = (user: User, item: Model, result: R) => void\n\n\nexport interface IActionProps<M extends Model, R>\n{\n    /**\n     * Value or model instance.\n     */\n    item: M\n    /**\n     * Label text displayed to user.\n     */\n    title: string\n    /**\n     * Displayed icon\n     */\n    icon: string\n    /**\n     * Displayed color\n     */\n    color?: string\n    /**\n     * Display action as a small button\n     */\n    button?: boolean\n    /**\n     * If provided, ask user for a confirmation before executing the action.\n     */\n    confirm?: string\n    /**\n     * Required permission to run the action\n     */\n    permission: IPermissionGetCodename\n    /**\n     * The function to call when action is executed\n     */\n    run: ActionRun<M,R>\n\n    /** If provided, open this link */\n    href?: string\n}\n\n\nexport interface IAction<M extends Model, R> {\n    /**\n     * Wether the action is running.\n     */\n    processing: Ref<boolean>\n    /**\n     * Action properties\n     */\n    props: ActionProps<M, R>\n}\n\n/**\n * Action's parameters, `user` MUST be provided.\n */\nexport interface IAction<M extends Model, R> {\n    /** Action components properties */\n    props: IActionProps<M, R>\n    /** The user running the action. */\n    user: User\n    /** If provided, emits `completed` once the action has been executed. */\n    emits?: (event: string, ...opts: any[]) => void\n}\n\n\n/**\n * Create a new action, returning:\n * - processing: ref to boolean indicating wether the action is processing\n * - allowed: computed ref indicating wether the action is allowed\n * - run: async function to call in order to run the method\n */\nexport function useAction<M extends Model,R>({props, user, emits=null}: IAction<M,R>) {\n    const processing = ref(false)\n    const allowed = computed(() => !props.permission || user.can(props.permission, props.item))\n\n    /** Execute the action. */\n    const run = async (...args: any[]): Promise<R> => {\n        if(props.confirm && !confirm(props.confirm))\n            return\n\n        if(props.href)\n            return window.open(props.href, '_blank')\n\n        processing.value = true\n\n        let result : R = props.run(user, props.item, ...args)\n        if(result instanceof Promise)\n            result = await result\n\n        processing.value = false\n        if(emits)\n            emits('completed', props.item, ...args)\n        return result\n    }\n    return {processing, run, allowed}\n}\n","// Utilities\nimport { createRange, padStart } from \"../../../util/index.js\"; // Types\nfunction weekInfo(locale) {\n  // https://simplelocalize.io/data/locales/\n  // then `new Intl.Locale(...).getWeekInfo()`\n  const code = locale.slice(-2).toUpperCase();\n  switch (true) {\n    case locale === 'GB-alt-variant':\n      {\n        return {\n          firstDay: 0,\n          firstWeekSize: 4\n        };\n      }\n    case locale === '001':\n      {\n        return {\n          firstDay: 1,\n          firstWeekSize: 1\n        };\n      }\n    case `AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE\n    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US\n    VE VI WS YE ZA ZW`.includes(code):\n      {\n        return {\n          firstDay: 0,\n          firstWeekSize: 1\n        };\n      }\n    case `AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV\n    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(code):\n      {\n        return {\n          firstDay: 1,\n          firstWeekSize: 1\n        };\n      }\n    case `AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS\n    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(code):\n      {\n        return {\n          firstDay: 1,\n          firstWeekSize: 4\n        };\n      }\n    case `AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY`.includes(code):\n      {\n        return {\n          firstDay: 6,\n          firstWeekSize: 1\n        };\n      }\n    case code === 'MV':\n      {\n        return {\n          firstDay: 5,\n          firstWeekSize: 1\n        };\n      }\n    case code === 'PT':\n      {\n        return {\n          firstDay: 0,\n          firstWeekSize: 4\n        };\n      }\n    default:\n      return null;\n  }\n}\nfunction getWeekArray(date, locale, firstDayOfWeek) {\n  const weeks = [];\n  let currentWeek = [];\n  const firstDayOfMonth = startOfMonth(date);\n  const lastDayOfMonth = endOfMonth(date);\n  const first = firstDayOfWeek ?? weekInfo(locale)?.firstDay ?? 0;\n  const firstDayWeekIndex = (firstDayOfMonth.getDay() - first + 7) % 7;\n  const lastDayWeekIndex = (lastDayOfMonth.getDay() - first + 7) % 7;\n  for (let i = 0; i < firstDayWeekIndex; i++) {\n    const adjacentDay = new Date(firstDayOfMonth);\n    adjacentDay.setDate(adjacentDay.getDate() - (firstDayWeekIndex - i));\n    currentWeek.push(adjacentDay);\n  }\n  for (let i = 1; i <= lastDayOfMonth.getDate(); i++) {\n    const day = new Date(date.getFullYear(), date.getMonth(), i);\n\n    // Add the day to the current week\n    currentWeek.push(day);\n\n    // If the current week has 7 days, add it to the weeks array and start a new week\n    if (currentWeek.length === 7) {\n      weeks.push(currentWeek);\n      currentWeek = [];\n    }\n  }\n  for (let i = 1; i < 7 - lastDayWeekIndex; i++) {\n    const adjacentDay = new Date(lastDayOfMonth);\n    adjacentDay.setDate(adjacentDay.getDate() + i);\n    currentWeek.push(adjacentDay);\n  }\n  if (currentWeek.length > 0) {\n    weeks.push(currentWeek);\n  }\n  return weeks;\n}\nfunction startOfWeek(date, locale, firstDayOfWeek) {\n  const day = firstDayOfWeek ?? weekInfo(locale)?.firstDay ?? 0;\n  const d = new Date(date);\n  while (d.getDay() !== day) {\n    d.setDate(d.getDate() - 1);\n  }\n  return d;\n}\nfunction endOfWeek(date, locale) {\n  const d = new Date(date);\n  const lastDay = ((weekInfo(locale)?.firstDay ?? 0) + 6) % 7;\n  while (d.getDay() !== lastDay) {\n    d.setDate(d.getDate() + 1);\n  }\n  return d;\n}\nfunction startOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth(), 1);\n}\nfunction endOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\nfunction parseLocalDate(value) {\n  const parts = value.split('-').map(Number);\n\n  // new Date() uses local time zone when passing individual date component values\n  return new Date(parts[0], parts[1] - 1, parts[2]);\n}\nconst _YYYMMDD = /^([12]\\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\\d|3[01]))$/;\nfunction date(value) {\n  if (value == null) return new Date();\n  if (value instanceof Date) return value;\n  if (typeof value === 'string') {\n    let parsed;\n    if (_YYYMMDD.test(value)) {\n      return parseLocalDate(value);\n    } else {\n      parsed = Date.parse(value);\n    }\n    if (!isNaN(parsed)) return new Date(parsed);\n  }\n  return null;\n}\nconst sundayJanuarySecond2000 = new Date(2000, 0, 2);\nfunction getWeekdays(locale, firstDayOfWeek) {\n  const daysFromSunday = firstDayOfWeek ?? weekInfo(locale)?.firstDay ?? 0;\n  return createRange(7).map(i => {\n    const weekday = new Date(sundayJanuarySecond2000);\n    weekday.setDate(sundayJanuarySecond2000.getDate() + daysFromSunday + i);\n    return new Intl.DateTimeFormat(locale, {\n      weekday: 'narrow'\n    }).format(weekday);\n  });\n}\nfunction format(value, formatString, locale, formats) {\n  const newDate = date(value) ?? new Date();\n  const customFormat = formats?.[formatString];\n  if (typeof customFormat === 'function') {\n    return customFormat(newDate, formatString, locale);\n  }\n  let options = {};\n  switch (formatString) {\n    case 'fullDate':\n      options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      break;\n    case 'fullDateWithWeekday':\n      options = {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      break;\n    case 'normalDate':\n      const day = newDate.getDate();\n      const month = new Intl.DateTimeFormat(locale, {\n        month: 'long'\n      }).format(newDate);\n      return `${day} ${month}`;\n    case 'normalDateWithWeekday':\n      options = {\n        weekday: 'short',\n        day: 'numeric',\n        month: 'short'\n      };\n      break;\n    case 'shortDate':\n      options = {\n        month: 'short',\n        day: 'numeric'\n      };\n      break;\n    case 'year':\n      options = {\n        year: 'numeric'\n      };\n      break;\n    case 'month':\n      options = {\n        month: 'long'\n      };\n      break;\n    case 'monthShort':\n      options = {\n        month: 'short'\n      };\n      break;\n    case 'monthAndYear':\n      options = {\n        month: 'long',\n        year: 'numeric'\n      };\n      break;\n    case 'monthAndDate':\n      options = {\n        month: 'long',\n        day: 'numeric'\n      };\n      break;\n    case 'weekday':\n      options = {\n        weekday: 'long'\n      };\n      break;\n    case 'weekdayShort':\n      options = {\n        weekday: 'short'\n      };\n      break;\n    case 'dayOfMonth':\n      return new Intl.NumberFormat(locale).format(newDate.getDate());\n    case 'hours12h':\n      options = {\n        hour: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'hours24h':\n      options = {\n        hour: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'minutes':\n      options = {\n        minute: 'numeric'\n      };\n      break;\n    case 'seconds':\n      options = {\n        second: 'numeric'\n      };\n      break;\n    case 'fullTime':\n      options = {\n        hour: 'numeric',\n        minute: 'numeric'\n      };\n      break;\n    case 'fullTime12h':\n      options = {\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'fullTime24h':\n      options = {\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'fullDateTime':\n      options = {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric'\n      };\n      break;\n    case 'fullDateTime12h':\n      options = {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'fullDateTime24h':\n      options = {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'keyboardDate':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      };\n      break;\n    case 'keyboardDateTime':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: 'numeric'\n      };\n      return new Intl.DateTimeFormat(locale, options).format(newDate).replace(/, /g, ' ');\n    case 'keyboardDateTime12h':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true\n      };\n      return new Intl.DateTimeFormat(locale, options).format(newDate).replace(/, /g, ' ');\n    case 'keyboardDateTime24h':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: false\n      };\n      return new Intl.DateTimeFormat(locale, options).format(newDate).replace(/, /g, ' ');\n    default:\n      options = customFormat ?? {\n        timeZone: 'UTC',\n        timeZoneName: 'short'\n      };\n  }\n  return new Intl.DateTimeFormat(locale, options).format(newDate);\n}\nfunction toISO(adapter, value) {\n  const date = adapter.toJsDate(value);\n  const year = date.getFullYear();\n  const month = padStart(String(date.getMonth() + 1), 2, '0');\n  const day = padStart(String(date.getDate()), 2, '0');\n  return `${year}-${month}-${day}`;\n}\nfunction parseISO(value) {\n  const [year, month, day] = value.split('-').map(Number);\n  return new Date(year, month - 1, day);\n}\nfunction addMinutes(date, amount) {\n  const d = new Date(date);\n  d.setMinutes(d.getMinutes() + amount);\n  return d;\n}\nfunction addHours(date, amount) {\n  const d = new Date(date);\n  d.setHours(d.getHours() + amount);\n  return d;\n}\nfunction addDays(date, amount) {\n  const d = new Date(date);\n  d.setDate(d.getDate() + amount);\n  return d;\n}\nfunction addWeeks(date, amount) {\n  const d = new Date(date);\n  d.setDate(d.getDate() + amount * 7);\n  return d;\n}\nfunction addMonths(date, amount) {\n  const d = new Date(date);\n  d.setDate(1);\n  d.setMonth(d.getMonth() + amount);\n  return d;\n}\nfunction getYear(date) {\n  return date.getFullYear();\n}\nfunction getMonth(date) {\n  return date.getMonth();\n}\nfunction getWeek(date, locale, firstDayOfWeek, firstWeekMinSize) {\n  const weekInfoFromLocale = weekInfo(locale);\n  const weekStart = firstDayOfWeek ?? weekInfoFromLocale?.firstDay ?? 0;\n  const minWeekSize = firstWeekMinSize ?? weekInfoFromLocale?.firstWeekSize ?? 1;\n  function firstWeekSize(year) {\n    const yearStart = new Date(year, 0, 1);\n    return 7 - getDiff(yearStart, startOfWeek(yearStart, locale, weekStart), 'days');\n  }\n  let year = getYear(date);\n  const currentWeekEnd = addDays(startOfWeek(date, locale, weekStart), 6);\n  if (year < getYear(currentWeekEnd) && firstWeekSize(year + 1) >= minWeekSize) {\n    year++;\n  }\n  const yearStart = new Date(year, 0, 1);\n  const size = firstWeekSize(year);\n  const d1w1 = size >= minWeekSize ? addDays(yearStart, size - 7) : addDays(yearStart, size);\n  return 1 + getDiff(endOfDay(date), startOfDay(d1w1), 'weeks');\n}\nfunction getDate(date) {\n  return date.getDate();\n}\nfunction getNextMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 1);\n}\nfunction getPreviousMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() - 1, 1);\n}\nfunction getHours(date) {\n  return date.getHours();\n}\nfunction getMinutes(date) {\n  return date.getMinutes();\n}\nfunction startOfYear(date) {\n  return new Date(date.getFullYear(), 0, 1);\n}\nfunction endOfYear(date) {\n  return new Date(date.getFullYear(), 11, 31);\n}\nfunction isWithinRange(date, range) {\n  return isAfter(date, range[0]) && isBefore(date, range[1]);\n}\nfunction isValid(date) {\n  const d = new Date(date);\n  return d instanceof Date && !isNaN(d.getTime());\n}\nfunction isAfter(date, comparing) {\n  return date.getTime() > comparing.getTime();\n}\nfunction isAfterDay(date, comparing) {\n  return isAfter(startOfDay(date), startOfDay(comparing));\n}\nfunction isBefore(date, comparing) {\n  return date.getTime() < comparing.getTime();\n}\nfunction isEqual(date, comparing) {\n  return date.getTime() === comparing.getTime();\n}\nfunction isSameDay(date, comparing) {\n  return date.getDate() === comparing.getDate() && date.getMonth() === comparing.getMonth() && date.getFullYear() === comparing.getFullYear();\n}\nfunction isSameMonth(date, comparing) {\n  return date.getMonth() === comparing.getMonth() && date.getFullYear() === comparing.getFullYear();\n}\nfunction isSameYear(date, comparing) {\n  return date.getFullYear() === comparing.getFullYear();\n}\nfunction getDiff(date, comparing, unit) {\n  const d = new Date(date);\n  const c = new Date(comparing);\n  switch (unit) {\n    case 'years':\n      return d.getFullYear() - c.getFullYear();\n    case 'quarters':\n      return Math.floor((d.getMonth() - c.getMonth() + (d.getFullYear() - c.getFullYear()) * 12) / 4);\n    case 'months':\n      return d.getMonth() - c.getMonth() + (d.getFullYear() - c.getFullYear()) * 12;\n    case 'weeks':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60 * 60 * 24 * 7));\n    case 'days':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60 * 60 * 24));\n    case 'hours':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60 * 60));\n    case 'minutes':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60));\n    case 'seconds':\n      return Math.floor((d.getTime() - c.getTime()) / 1000);\n    default:\n      {\n        return d.getTime() - c.getTime();\n      }\n  }\n}\nfunction setHours(date, count) {\n  const d = new Date(date);\n  d.setHours(count);\n  return d;\n}\nfunction setMinutes(date, count) {\n  const d = new Date(date);\n  d.setMinutes(count);\n  return d;\n}\nfunction setMonth(date, count) {\n  const d = new Date(date);\n  d.setMonth(count);\n  return d;\n}\nfunction setDate(date, day) {\n  const d = new Date(date);\n  d.setDate(day);\n  return d;\n}\nfunction setYear(date, year) {\n  const d = new Date(date);\n  d.setFullYear(year);\n  return d;\n}\nfunction startOfDay(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0, 0);\n}\nfunction endOfDay(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59, 999);\n}\nexport class VuetifyDateAdapter {\n  constructor(options) {\n    this.locale = options.locale;\n    this.formats = options.formats;\n  }\n  date(value) {\n    return date(value);\n  }\n  toJsDate(date) {\n    return date;\n  }\n  toISO(date) {\n    return toISO(this, date);\n  }\n  parseISO(date) {\n    return parseISO(date);\n  }\n  addMinutes(date, amount) {\n    return addMinutes(date, amount);\n  }\n  addHours(date, amount) {\n    return addHours(date, amount);\n  }\n  addDays(date, amount) {\n    return addDays(date, amount);\n  }\n  addWeeks(date, amount) {\n    return addWeeks(date, amount);\n  }\n  addMonths(date, amount) {\n    return addMonths(date, amount);\n  }\n  getWeekArray(date, firstDayOfWeek) {\n    const firstDay = firstDayOfWeek !== undefined ? Number(firstDayOfWeek) : undefined;\n    return getWeekArray(date, this.locale, firstDay);\n  }\n  startOfWeek(date, firstDayOfWeek) {\n    const firstDay = firstDayOfWeek !== undefined ? Number(firstDayOfWeek) : undefined;\n    return startOfWeek(date, this.locale, firstDay);\n  }\n  endOfWeek(date) {\n    return endOfWeek(date, this.locale);\n  }\n  startOfMonth(date) {\n    return startOfMonth(date);\n  }\n  endOfMonth(date) {\n    return endOfMonth(date);\n  }\n  format(date, formatString) {\n    return format(date, formatString, this.locale, this.formats);\n  }\n  isEqual(date, comparing) {\n    return isEqual(date, comparing);\n  }\n  isValid(date) {\n    return isValid(date);\n  }\n  isWithinRange(date, range) {\n    return isWithinRange(date, range);\n  }\n  isAfter(date, comparing) {\n    return isAfter(date, comparing);\n  }\n  isAfterDay(date, comparing) {\n    return isAfterDay(date, comparing);\n  }\n  isBefore(date, comparing) {\n    return !isAfter(date, comparing) && !isEqual(date, comparing);\n  }\n  isSameDay(date, comparing) {\n    return isSameDay(date, comparing);\n  }\n  isSameMonth(date, comparing) {\n    return isSameMonth(date, comparing);\n  }\n  isSameYear(date, comparing) {\n    return isSameYear(date, comparing);\n  }\n  setMinutes(date, count) {\n    return setMinutes(date, count);\n  }\n  setHours(date, count) {\n    return setHours(date, count);\n  }\n  setMonth(date, count) {\n    return setMonth(date, count);\n  }\n  setDate(date, day) {\n    return setDate(date, day);\n  }\n  setYear(date, year) {\n    return setYear(date, year);\n  }\n  getDiff(date, comparing, unit) {\n    return getDiff(date, comparing, unit);\n  }\n  getWeekdays(firstDayOfWeek) {\n    const firstDay = firstDayOfWeek !== undefined ? Number(firstDayOfWeek) : undefined;\n    return getWeekdays(this.locale, firstDay);\n  }\n  getYear(date) {\n    return getYear(date);\n  }\n  getMonth(date) {\n    return getMonth(date);\n  }\n  getWeek(date, firstDayOfWeek, firstWeekMinSize) {\n    const firstDay = firstDayOfWeek !== undefined ? Number(firstDayOfWeek) : undefined;\n    return getWeek(date, this.locale, firstDay, firstWeekMinSize);\n  }\n  getDate(date) {\n    return getDate(date);\n  }\n  getNextMonth(date) {\n    return getNextMonth(date);\n  }\n  getPreviousMonth(date) {\n    return getPreviousMonth(date);\n  }\n  getHours(date) {\n    return getHours(date);\n  }\n  getMinutes(date) {\n    return getMinutes(date);\n  }\n  startOfDay(date) {\n    return startOfDay(date);\n  }\n  endOfDay(date) {\n    return endOfDay(date);\n  }\n  startOfYear(date) {\n    return startOfYear(date);\n  }\n  endOfYear(date) {\n    return endOfYear(date);\n  }\n}\n//# sourceMappingURL=vuetify.js.map","// Composables\nimport { useLocale } from \"../locale.js\"; // Utilities\nimport { inject, reactive, watch } from 'vue';\nimport { mergeDeep } from \"../../util/index.js\"; // Types\n// Adapters\nimport { VuetifyDateAdapter } from \"./adapters/vuetify.js\";\n/** Supports module augmentation to specify date adapter types */\nexport let DateModule;\nexport const DateOptionsSymbol = Symbol.for('vuetify:date-options');\nexport const DateAdapterSymbol = Symbol.for('vuetify:date-adapter');\nexport function createDate(options, locale) {\n  const _options = mergeDeep({\n    adapter: VuetifyDateAdapter,\n    locale: {\n      af: 'af-ZA',\n      // ar: '', # not the same value for all variants\n      bg: 'bg-BG',\n      ca: 'ca-ES',\n      ckb: '',\n      cs: 'cs-CZ',\n      de: 'de-DE',\n      el: 'el-GR',\n      en: 'en-US',\n      // es: '', # not the same value for all variants\n      et: 'et-EE',\n      fa: 'fa-IR',\n      fi: 'fi-FI',\n      // fr: '', #not the same value for all variants\n      hr: 'hr-HR',\n      hu: 'hu-HU',\n      he: 'he-IL',\n      id: 'id-ID',\n      it: 'it-IT',\n      ja: 'ja-JP',\n      ko: 'ko-KR',\n      lv: 'lv-LV',\n      lt: 'lt-LT',\n      nl: 'nl-NL',\n      no: 'no-NO',\n      pl: 'pl-PL',\n      pt: 'pt-PT',\n      ro: 'ro-RO',\n      ru: 'ru-RU',\n      sk: 'sk-SK',\n      sl: 'sl-SI',\n      srCyrl: 'sr-SP',\n      srLatn: 'sr-SP',\n      sv: 'sv-SE',\n      th: 'th-TH',\n      tr: 'tr-TR',\n      az: 'az-AZ',\n      uk: 'uk-UA',\n      vi: 'vi-VN',\n      zhHans: 'zh-CN',\n      zhHant: 'zh-TW'\n    }\n  }, options);\n  return {\n    options: _options,\n    instance: createInstance(_options, locale)\n  };\n}\nexport function createDateRange(adapter, start, stop) {\n  const diff = adapter.getDiff(adapter.endOfDay(stop ?? start), adapter.startOfDay(start), 'days');\n  const datesInRange = [start];\n  for (let i = 1; i < diff; i++) {\n    const nextDate = adapter.addDays(start, i);\n    datesInRange.push(nextDate);\n  }\n  if (stop) {\n    datesInRange.push(adapter.endOfDay(stop));\n  }\n  return datesInRange;\n}\nfunction createInstance(options, locale) {\n  const instance = reactive(typeof options.adapter === 'function'\n  // eslint-disable-next-line new-cap\n  ? new options.adapter({\n    locale: options.locale[locale.current.value] ?? locale.current.value,\n    formats: options.formats\n  }) : options.adapter);\n  watch(locale.current, value => {\n    instance.locale = options.locale[value] ?? value ?? instance.locale;\n  });\n  return instance;\n}\nexport function useDate() {\n  const options = inject(DateOptionsSymbol);\n  if (!options) throw new Error('[Vuetify] Could not find injected date options');\n  const locale = useLocale();\n  return createInstance(options, locale);\n}\n//# sourceMappingURL=date.js.map","// Composables\nimport { createDate, DateAdapterSymbol, DateOptionsSymbol } from \"./composables/date/date.js\";\nimport { createDefaults, DefaultsSymbol } from \"./composables/defaults.js\";\nimport { createDisplay, DisplaySymbol } from \"./composables/display.js\";\nimport { createGoTo, GoToSymbol } from \"./composables/goto.js\";\nimport { createIcons, IconSymbol } from \"./composables/icons.js\";\nimport { createLocale, LocaleSymbol } from \"./composables/locale.js\";\nimport { createTheme, ThemeSymbol } from \"./composables/theme.js\"; // Utilities\nimport { effectScope, nextTick, reactive } from 'vue';\nimport { defineComponent, IN_BROWSER, mergeDeep } from \"./util/index.js\"; // Types\n// Exports\nexport * from \"./composables/index.js\";\nexport * from \"./types.js\";\nexport function createVuetify() {\n  let vuetify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    blueprint,\n    ...rest\n  } = vuetify;\n  const options = mergeDeep(blueprint, rest);\n  const {\n    aliases = {},\n    components = {},\n    directives = {}\n  } = options;\n  const scope = effectScope();\n  return scope.run(() => {\n    const defaults = createDefaults(options.defaults);\n    const display = createDisplay(options.display, options.ssr);\n    const theme = createTheme(options.theme);\n    const icons = createIcons(options.icons);\n    const locale = createLocale(options.locale);\n    const date = createDate(options.date, locale);\n    const goTo = createGoTo(options.goTo, locale);\n    function install(app) {\n      for (const key in directives) {\n        app.directive(key, directives[key]);\n      }\n      for (const key in components) {\n        app.component(key, components[key]);\n      }\n      for (const key in aliases) {\n        app.component(key, defineComponent({\n          ...aliases[key],\n          name: key,\n          aliasName: aliases[key].name\n        }));\n      }\n      const appScope = effectScope();\n      appScope.run(() => {\n        theme.install(app);\n      });\n      app.onUnmount(() => appScope.stop());\n      app.provide(DefaultsSymbol, defaults);\n      app.provide(DisplaySymbol, display);\n      app.provide(ThemeSymbol, theme);\n      app.provide(IconSymbol, icons);\n      app.provide(LocaleSymbol, locale);\n      app.provide(DateOptionsSymbol, date.options);\n      app.provide(DateAdapterSymbol, date.instance);\n      app.provide(GoToSymbol, goTo);\n      if (IN_BROWSER && options.ssr) {\n        if (app.$nuxt) {\n          app.$nuxt.hook('app:suspense:resolve', () => {\n            display.update();\n          });\n        } else {\n          const {\n            mount\n          } = app;\n          app.mount = function () {\n            const vm = mount(...arguments);\n            nextTick(() => display.update());\n            app.mount = mount;\n            return vm;\n          };\n        }\n      }\n      if (typeof __VUE_OPTIONS_API__ !== 'boolean' || __VUE_OPTIONS_API__) {\n        app.mixin({\n          computed: {\n            $vuetify() {\n              return reactive({\n                defaults: inject.call(this, DefaultsSymbol),\n                display: inject.call(this, DisplaySymbol),\n                theme: inject.call(this, ThemeSymbol),\n                icons: inject.call(this, IconSymbol),\n                locale: inject.call(this, LocaleSymbol),\n                date: inject.call(this, DateAdapterSymbol)\n              });\n            }\n          }\n        });\n      }\n    }\n    function unmount() {\n      scope.stop();\n    }\n    return {\n      install,\n      unmount,\n      defaults,\n      display,\n      theme,\n      icons,\n      locale,\n      date,\n      goTo\n    };\n  });\n}\nexport const version = \"3.8.9\";\ncreateVuetify.version = version;\n\n// Vue's inject() can only be used in setup\nfunction inject(key) {\n  const vm = this.$;\n  const provides = vm.parent?.provides ?? vm.vnode.appContext?.provides;\n  if (provides && key in provides) {\n    return provides[key];\n  }\n}\n//# sourceMappingURL=framework.js.map","// Icons\nimport { mdi } from \"../iconsets/mdi.js\"; // Types\nexport const md3 = {\n  defaults: {\n    VAppBar: {\n      flat: true\n    },\n    VAutocomplete: {\n      variant: 'outlined'\n    },\n    VBanner: {\n      color: 'primary'\n    },\n    VBottomSheet: {\n      contentClass: 'rounded-t-xl overflow-hidden'\n    },\n    VBtn: {\n      color: 'primary',\n      rounded: 'xl'\n    },\n    VBtnGroup: {\n      rounded: 'xl',\n      VBtn: {\n        rounded: null\n      }\n    },\n    VCard: {\n      rounded: 'lg'\n    },\n    VCheckbox: {\n      color: 'secondary',\n      inset: true\n    },\n    VChip: {\n      rounded: 'sm'\n    },\n    VCombobox: {\n      variant: 'outlined'\n    },\n    VDateInput: {\n      variant: 'outlined'\n    },\n    VDatePicker: {\n      controlHeight: 48,\n      color: 'primary',\n      divided: true,\n      headerColor: '',\n      elevation: 3,\n      rounded: 'xl',\n      VBtn: {\n        color: 'high-emphasis',\n        rounded: 'circle'\n      }\n    },\n    VFileInput: {\n      variant: 'outlined'\n    },\n    VNavigationDrawer: {\n      // VList: {\n      //   nav: true,\n      //   VListItem: {\n      //     rounded: 'xl',\n      //   },\n      // },\n    },\n    VNumberInput: {\n      variant: 'outlined',\n      VBtn: {\n        color: undefined,\n        rounded: undefined\n      }\n    },\n    VSelect: {\n      variant: 'outlined'\n    },\n    VSlider: {\n      color: 'primary'\n    },\n    VTabs: {\n      color: 'primary'\n    },\n    VTextarea: {\n      variant: 'outlined'\n    },\n    VTextField: {\n      variant: 'outlined'\n    },\n    VToolbar: {\n      VBtn: {\n        color: null\n      }\n    }\n  },\n  icons: {\n    defaultSet: 'mdi',\n    sets: {\n      mdi\n    }\n  },\n  theme: {\n    themes: {\n      light: {\n        colors: {\n          primary: '#6750a4',\n          secondary: '#b4b0bb',\n          tertiary: '#7d5260',\n          error: '#b3261e',\n          surface: '#fffbfe'\n        }\n      }\n    }\n  }\n};\n//# sourceMappingURL=md3.js.map","export const red = {\n  base: '#f44336',\n  lighten5: '#ffebee',\n  lighten4: '#ffcdd2',\n  lighten3: '#ef9a9a',\n  lighten2: '#e57373',\n  lighten1: '#ef5350',\n  darken1: '#e53935',\n  darken2: '#d32f2f',\n  darken3: '#c62828',\n  darken4: '#b71c1c',\n  accent1: '#ff8a80',\n  accent2: '#ff5252',\n  accent3: '#ff1744',\n  accent4: '#d50000'\n};\nexport const pink = {\n  base: '#e91e63',\n  lighten5: '#fce4ec',\n  lighten4: '#f8bbd0',\n  lighten3: '#f48fb1',\n  lighten2: '#f06292',\n  lighten1: '#ec407a',\n  darken1: '#d81b60',\n  darken2: '#c2185b',\n  darken3: '#ad1457',\n  darken4: '#880e4f',\n  accent1: '#ff80ab',\n  accent2: '#ff4081',\n  accent3: '#f50057',\n  accent4: '#c51162'\n};\nexport const purple = {\n  base: '#9c27b0',\n  lighten5: '#f3e5f5',\n  lighten4: '#e1bee7',\n  lighten3: '#ce93d8',\n  lighten2: '#ba68c8',\n  lighten1: '#ab47bc',\n  darken1: '#8e24aa',\n  darken2: '#7b1fa2',\n  darken3: '#6a1b9a',\n  darken4: '#4a148c',\n  accent1: '#ea80fc',\n  accent2: '#e040fb',\n  accent3: '#d500f9',\n  accent4: '#aa00ff'\n};\nexport const deepPurple = {\n  base: '#673ab7',\n  lighten5: '#ede7f6',\n  lighten4: '#d1c4e9',\n  lighten3: '#b39ddb',\n  lighten2: '#9575cd',\n  lighten1: '#7e57c2',\n  darken1: '#5e35b1',\n  darken2: '#512da8',\n  darken3: '#4527a0',\n  darken4: '#311b92',\n  accent1: '#b388ff',\n  accent2: '#7c4dff',\n  accent3: '#651fff',\n  accent4: '#6200ea'\n};\nexport const indigo = {\n  base: '#3f51b5',\n  lighten5: '#e8eaf6',\n  lighten4: '#c5cae9',\n  lighten3: '#9fa8da',\n  lighten2: '#7986cb',\n  lighten1: '#5c6bc0',\n  darken1: '#3949ab',\n  darken2: '#303f9f',\n  darken3: '#283593',\n  darken4: '#1a237e',\n  accent1: '#8c9eff',\n  accent2: '#536dfe',\n  accent3: '#3d5afe',\n  accent4: '#304ffe'\n};\nexport const blue = {\n  base: '#2196f3',\n  lighten5: '#e3f2fd',\n  lighten4: '#bbdefb',\n  lighten3: '#90caf9',\n  lighten2: '#64b5f6',\n  lighten1: '#42a5f5',\n  darken1: '#1e88e5',\n  darken2: '#1976d2',\n  darken3: '#1565c0',\n  darken4: '#0d47a1',\n  accent1: '#82b1ff',\n  accent2: '#448aff',\n  accent3: '#2979ff',\n  accent4: '#2962ff'\n};\nexport const lightBlue = {\n  base: '#03a9f4',\n  lighten5: '#e1f5fe',\n  lighten4: '#b3e5fc',\n  lighten3: '#81d4fa',\n  lighten2: '#4fc3f7',\n  lighten1: '#29b6f6',\n  darken1: '#039be5',\n  darken2: '#0288d1',\n  darken3: '#0277bd',\n  darken4: '#01579b',\n  accent1: '#80d8ff',\n  accent2: '#40c4ff',\n  accent3: '#00b0ff',\n  accent4: '#0091ea'\n};\nexport const cyan = {\n  base: '#00bcd4',\n  lighten5: '#e0f7fa',\n  lighten4: '#b2ebf2',\n  lighten3: '#80deea',\n  lighten2: '#4dd0e1',\n  lighten1: '#26c6da',\n  darken1: '#00acc1',\n  darken2: '#0097a7',\n  darken3: '#00838f',\n  darken4: '#006064',\n  accent1: '#84ffff',\n  accent2: '#18ffff',\n  accent3: '#00e5ff',\n  accent4: '#00b8d4'\n};\nexport const teal = {\n  base: '#009688',\n  lighten5: '#e0f2f1',\n  lighten4: '#b2dfdb',\n  lighten3: '#80cbc4',\n  lighten2: '#4db6ac',\n  lighten1: '#26a69a',\n  darken1: '#00897b',\n  darken2: '#00796b',\n  darken3: '#00695c',\n  darken4: '#004d40',\n  accent1: '#a7ffeb',\n  accent2: '#64ffda',\n  accent3: '#1de9b6',\n  accent4: '#00bfa5'\n};\nexport const green = {\n  base: '#4caf50',\n  lighten5: '#e8f5e9',\n  lighten4: '#c8e6c9',\n  lighten3: '#a5d6a7',\n  lighten2: '#81c784',\n  lighten1: '#66bb6a',\n  darken1: '#43a047',\n  darken2: '#388e3c',\n  darken3: '#2e7d32',\n  darken4: '#1b5e20',\n  accent1: '#b9f6ca',\n  accent2: '#69f0ae',\n  accent3: '#00e676',\n  accent4: '#00c853'\n};\nexport const lightGreen = {\n  base: '#8bc34a',\n  lighten5: '#f1f8e9',\n  lighten4: '#dcedc8',\n  lighten3: '#c5e1a5',\n  lighten2: '#aed581',\n  lighten1: '#9ccc65',\n  darken1: '#7cb342',\n  darken2: '#689f38',\n  darken3: '#558b2f',\n  darken4: '#33691e',\n  accent1: '#ccff90',\n  accent2: '#b2ff59',\n  accent3: '#76ff03',\n  accent4: '#64dd17'\n};\nexport const lime = {\n  base: '#cddc39',\n  lighten5: '#f9fbe7',\n  lighten4: '#f0f4c3',\n  lighten3: '#e6ee9c',\n  lighten2: '#dce775',\n  lighten1: '#d4e157',\n  darken1: '#c0ca33',\n  darken2: '#afb42b',\n  darken3: '#9e9d24',\n  darken4: '#827717',\n  accent1: '#f4ff81',\n  accent2: '#eeff41',\n  accent3: '#c6ff00',\n  accent4: '#aeea00'\n};\nexport const yellow = {\n  base: '#ffeb3b',\n  lighten5: '#fffde7',\n  lighten4: '#fff9c4',\n  lighten3: '#fff59d',\n  lighten2: '#fff176',\n  lighten1: '#ffee58',\n  darken1: '#fdd835',\n  darken2: '#fbc02d',\n  darken3: '#f9a825',\n  darken4: '#f57f17',\n  accent1: '#ffff8d',\n  accent2: '#ffff00',\n  accent3: '#ffea00',\n  accent4: '#ffd600'\n};\nexport const amber = {\n  base: '#ffc107',\n  lighten5: '#fff8e1',\n  lighten4: '#ffecb3',\n  lighten3: '#ffe082',\n  lighten2: '#ffd54f',\n  lighten1: '#ffca28',\n  darken1: '#ffb300',\n  darken2: '#ffa000',\n  darken3: '#ff8f00',\n  darken4: '#ff6f00',\n  accent1: '#ffe57f',\n  accent2: '#ffd740',\n  accent3: '#ffc400',\n  accent4: '#ffab00'\n};\nexport const orange = {\n  base: '#ff9800',\n  lighten5: '#fff3e0',\n  lighten4: '#ffe0b2',\n  lighten3: '#ffcc80',\n  lighten2: '#ffb74d',\n  lighten1: '#ffa726',\n  darken1: '#fb8c00',\n  darken2: '#f57c00',\n  darken3: '#ef6c00',\n  darken4: '#e65100',\n  accent1: '#ffd180',\n  accent2: '#ffab40',\n  accent3: '#ff9100',\n  accent4: '#ff6d00'\n};\nexport const deepOrange = {\n  base: '#ff5722',\n  lighten5: '#fbe9e7',\n  lighten4: '#ffccbc',\n  lighten3: '#ffab91',\n  lighten2: '#ff8a65',\n  lighten1: '#ff7043',\n  darken1: '#f4511e',\n  darken2: '#e64a19',\n  darken3: '#d84315',\n  darken4: '#bf360c',\n  accent1: '#ff9e80',\n  accent2: '#ff6e40',\n  accent3: '#ff3d00',\n  accent4: '#dd2c00'\n};\nexport const brown = {\n  base: '#795548',\n  lighten5: '#efebe9',\n  lighten4: '#d7ccc8',\n  lighten3: '#bcaaa4',\n  lighten2: '#a1887f',\n  lighten1: '#8d6e63',\n  darken1: '#6d4c41',\n  darken2: '#5d4037',\n  darken3: '#4e342e',\n  darken4: '#3e2723'\n};\nexport const blueGrey = {\n  base: '#607d8b',\n  lighten5: '#eceff1',\n  lighten4: '#cfd8dc',\n  lighten3: '#b0bec5',\n  lighten2: '#90a4ae',\n  lighten1: '#78909c',\n  darken1: '#546e7a',\n  darken2: '#455a64',\n  darken3: '#37474f',\n  darken4: '#263238'\n};\nexport const grey = {\n  base: '#9e9e9e',\n  lighten5: '#fafafa',\n  lighten4: '#f5f5f5',\n  lighten3: '#eeeeee',\n  lighten2: '#e0e0e0',\n  lighten1: '#bdbdbd',\n  darken1: '#757575',\n  darken2: '#616161',\n  darken3: '#424242',\n  darken4: '#212121'\n};\nexport const shades = {\n  black: '#000000',\n  white: '#ffffff',\n  transparent: '#ffffff00'\n};\nexport default {\n  red,\n  pink,\n  purple,\n  deepPurple,\n  indigo,\n  blue,\n  lightBlue,\n  cyan,\n  teal,\n  green,\n  lightGreen,\n  lime,\n  yellow,\n  amber,\n  orange,\n  deepOrange,\n  brown,\n  blueGrey,\n  grey,\n  shades\n};\n//# sourceMappingURL=colors.js.map","import { createApp as $createApp, reactive, watch } from 'vue'\nimport { createVuetify as $createVuetify } from 'vuetify'\nimport { md3 } from 'vuetify/blueprints'\nimport colors from 'vuetify/util/colors'\n\nimport { createPinia as $createPinia, setActivePinia } from 'pinia'\nimport { createORM } from 'pinia-orm'\nimport { createPiniaOrmAxios } from '@pinia-orm/axios'\nimport axios from 'axios'\n\nimport '../styles/index.scss'\nimport * as vendorComponents from 'ox/vendor'\nimport config from '../config'\nimport {i18n, useI18n} from './i18n'\n\n\n\n/**\n * {@link createVuetify} parameters. Theses are passed down to Vuetify's\n * plugin initialization.\n */\nexport interface ICreateVuetifyOpts extends Record<string, any> {\n    components?: Record<string,any>\n}\n\n\n/**\n * Options passed to {@link createApp}.\n */\nexport interface ICreateAppOpts {\n    /**\n     * Vue's `createApp` `props` arguments\n     */\n    props?: Record<string, any>\n    /**\n     *  Vuetify plugin's parameters (passed to {@link createVuetify})\n     */\n    vuetify?: ICreateVuetifyOpts\n    /**\n     * Plugins to add to Vue application.\n     */\n    plugins?: Record<string, any>[]\n}\n\nexport interface IInitOpts extends ICreateAppOpts {\n    /** Vue's App config. */\n    App?: any\n    /** Element selector to mount application on. */\n    el?: string\n    /**\n     * If True (default), defer application creation after page has been\n     * loaded (on `window.load` event)\n     */\n    onLoad?: boolean\n}\n\n\n/**\n * Main entry point to initialize and mount an application.\n *\n * The base `App` config is provided by `ox/components` modules.\n */\nexport function init({App=null, el='#app', onLoad=true, ...options}: IInitOpts={}) {\n    function initApp() {\n        const app = createApp(App, options)\n        const vm = el ? app.mount(el) : null\n        document.body.classList.remove('loading')\n        return {app, el, vm}\n    }\n\n    return new Promise((resolve) => {\n        if(onLoad)\n            return window.addEventListener(\n                'load', () => resolve(initApp())\n            )\n        resolve(initApp())\n    })\n}\n\n\n/**\n * Create Oxerp application (including Vuetify).\n * It also provide app's global property `window` in order to allow components\n * access to this object.\n */\nexport function createApp(app: Record<string, any>, {props={}, vuetify={}, plugins=null}: ICreateAppOpts={}) {\n    app = $createApp(app, props)\n    app.config.globalProperties.window = window\n\n    app.use(createVuetify(vuetify))\n    app.use(i18n)\n    useI18n()\n\n    plugins && plugins.forEach(plugin => app.use(plugin))\n    return app\n}\n\n\n\n/**\n * Create and return vuetify plugin with default components set.\n * This is called by `createApp`.\n */\nexport function createVuetify({components={}, defaults={}, ...opts}: ICreateVuetifyOpts) {\n    opts.components = {\n        ...vendorComponents,\n        ...components\n    }\n    return $createVuetify({\n        blueprint: md3,\n        theme: {\n            themes: {\n                light: {\n                    dark: false,\n                    colors: {\n                        primary: colors.green.darken1,\n                        secondary: colors.green.lighten4\n                    }\n                }\n            }\n        },\n        defaults: {\n            ...defaults,\n            VTextField: { variant: 'underlined', },\n            VSelect: { variant: 'underlined', },\n            VTextarea: { variant: 'outlined', },\n            VCombobox: { variant: 'underlined', },\n            VAutocomplete: { variant: 'underlined', },\n        },\n        ...opts\n    })\n}\n\n\n\n/**\n * Create Pinia and PiniaOrm plugins instances.\n * If no `baseURL` is provided, get it from `document.body.dataset.apiUrl`.\n */\nexport function createPinia({axiosConfig=null, baseURL=null}: Record<string, any>={}) {\n    if(!baseURL)\n        baseURL = document.body.dataset.apiUrl\n\n    const pinia = $createPinia()\n    const piniaOrm = createORM({\n        plugins: [\n            createPiniaOrmAxios({\n                axios,\n                ...(axiosConfig || config.axiosConfig),\n                baseURL,\n            })\n        ]\n    })\n    setActivePinia(pinia)\n    return pinia.use(piniaOrm)\n}\n","import {Repository, Relation} from 'pinia-orm'\nimport type {Model} from 'pinia-orm'\nimport type {Response} from '@pinia-orm/axios'\n\nimport {collectAttr} from '../utils'\nimport type {IObject} from '../utils'\nimport {asRelation, getSourceKey} from '../models'\nimport type {Repos} from '../models'\n\n\n/** Interface of {@link Query} class. */\nexport interface IQuery<M extends Model> {\n    /** Model repository used to store results. */\n    repo: Repository<M>\n    /**\n     * Repositories used to store relations.\n     *\n     * This argument may be ignored if there is no need to fetch\n     * relations.\n     */\n    repos: Repos\n    /** Default options to set to all {@link Query.fetch} calls */\n    opts: IQueryFetch<M>\n}\n\n/** {@link Query.fetch} parameters. */\nexport interface IQueryFetch<M extends Model> extends Partial<object> {\n    /**\n     * Fetch from this url.\n     * Usage of this argument is exclusive from {@link IQueryFetch.id} and {@link IQueryFetch.path}.\n     */\n    url?: string\n    /**\n     * Fetch item of this id.\n     * Usage of this argument is exclusive from {@link IQueryFetch.ids}\n     */\n    id?: number,\n    /** Fetch items with this id. */\n    ids?: number[] | Set<number>\n    /** Extra path to append on url. */\n    path?: string,\n    /** Model repository (instead of `Query.repo`'s one). */\n    repo?: Repository<M>\n    /** Lookup field for ids (default: `id__in`). */\n    lookup?: string\n    /** Extra GET parameters. */\n    params?: IObject\n    /** Fetch items from thoses relations. */\n    relations?: string[]\n    /** If true (default value), save items in Pinia repository */\n    save: boolean\n}\n\n/**\n * {@link Query.all} parameters.\n */\nexport interface IQueryAll<M extends Model> extends IQueryFetch<M> {\n    /**\n     * Key of object returned by server that provide url to next items.\n     */\n    nextKey?: string\n    /**\n     * Provide a limit to the number of request to do consecutivelly.\n     * If `-1`, no limit (**use with caution!**).\n     */\n    limit?: number\n}\n\n\n/**\n * This class allows to fetch objects from api, and their relations.\n *\n * It is a utility class built around ``pinia-orm/axios``, using\n * repositories' ``api().get`` method.\n *\n * It allows:\n *\n * - to fetch a model list or all values (using `next` key);\n * - to fetch relations of objects based on fields names;\n *\n * When fetching relations, please ensure that {@link Query.repos} is provided.\n *\n * @example\n * const query = new Query(repos.users, repos)\n *\n * // this fetch User model objects from API, then the related groups.\n * const result = await query.fetch({url: '/users', relations: ['groups']})\n */\nexport default class Query<M extends Model> {\n    /**\n    * @param {Repos} [repos] all models repositories\n    * @param {Repository<M>} [repo] the main repository\n    */\n    constructor(repo: Repository<M>, repos: Repos|null=null, opts: IQueryFetch<M>) {\n        this.repo = repo\n        this.repos = repos\n        this.opts = opts\n    }\n\n    /**\n     * Fetch items from api.\n     *\n     * @param [options.ids] select by ids\n     * @param {Repository} [options.repo] use this repository instead of \\\n     * ``Query.repo``.\n     * @param [options.url] use this url instead of repository's one.\n     * @param [options.id] fetch element with this id.\n     * @param [options.ids] fetch elements with those ids\n     * @param [options.lookup] query GET parameters used to get ids.\n     * @param [options.params] extra GET parameters\n     * @param [options.opts] options passed down to ``repo.api.get``\n     */\n    async fetch(options: IQueryFetch<M> = {}) : Promise<Response> {\n        options = {...this.opts, ...options}\n        let {url, id, ids, repo, lookup, params, relations, path, ...opts} = options\n\n        lookup ??= \"id__in\"\n        repo ??= this.repo\n\n        if(ids?.length === 1) {\n            id = ids[0]\n            ids = null\n        }\n\n        if(!url)\n            url = repo.use?.meta?.getUrl({path, id})\n\n        if(!id) {\n            if(!(\"dataKey\" in opts))\n                opts.dataKey = repo.use?.config?.axiosApi?.dataKey\n        }\n        else\n            opts.dataKey = null\n\n        if(ids && lookup !== undefined) {\n            if(id)\n                throw Error(\"Both `ids` and `id` are provided while only one of those arguments is accepted.\")\n            params = {...(params || {})}\n            params[lookup] = [...ids]\n        }\n        const response = await repo.api().get(url, {...opts, params})\n        if(opts.save === false)\n            response.entities = this.getEntities(response)\n\n        if(relations)\n            response.relations = await this.relations(response.entities, relations, {...opts, params: {}})\n        return response\n    }\n\n    /** Get entities from response **/\n    getEntities(response) {\n        const data = response.getDataFromResponse()\n        if(Array.isArray(data))\n            return data.map((dat) => this.repo.make(dat))\n        else\n            return [this.repo.make(data)]\n    }\n\n    /**\n     * Fetch all items from api.\n     *\n     * @param [options.nextKey] response object key to get next url\n     * @param [options.limit] max count of consecutive requests\n     * @return Response of the first request, whoses ``entities`` has \\\n     * model instances of all requests.\n     */\n    async all({nextKey='next', limit=-1, flush=false, ...opts} : IQueryAll<M> ={}) : Promise<Response> {\n        const result = await this.fetch({flush, ...opts})\n\n        let url = result.response.data[nextKey]\n        while(url) {\n            const result2 = await this.fetch({...opts, url})\n            if(result2.entities)\n                result.entities = result.entities !== null ? result.entities.concat(result2.entities) : result2.entities\n            url = result2.response.data[nextKey]\n            if(limit>0) limit--\n            if(!limit) break\n        }\n        return result\n    }\n\n    /**\n     * Fetch all from API if repository is empty (see {@link Query.all}).\n     *\n     * For arguments see {@link Query.all}.\n     *\n     * Return null if no request has been made.\n     */\n    async allOnce(options: IQueryAll<M> = {}) : Promise<Reponse|null> {\n        const repo = options.repo ?? this.repo\n        if(!repo.first())\n            return await this.all(options)\n        return null\n    }\n\n    /**\n     * Fetch related objects for the provided list and field names.\n     *\n     * @param objs - the objects to get related ids from.\n     * @param options.fields - list of field names.\n     * @param options.opts - options to pass down to {@link Quey.relation}.\n     * @return the resulting entities.\n     */\n    async relations(objs: M[], fields: string[], opts = {}) : Promise<{[s: string]: Response}>\n    {\n        this._ensureRepos(\"relations\")\n        const entities: {[s: string]: Response} = {}\n        const relations = this.repo.use?.fields()\n        if(relations)\n            for(const field of fields) {\n                const relation = relations[field]\n                if(relation instanceof Relation)\n                    entities[field] = await this.relation(objs, relation, opts)\n                else\n                    throw Error(`Field ${field} is not a relation`)\n            }\n        return entities\n    }\n\n    protected _ensureRepos(funcName: string) {\n        if(!this.repos)\n            throw Error(`Query.repos is not provided although it is mandatory to call ${funcName}.`)\n    }\n\n    /**\n     * Fetch related objects for the provided object list and field name.\n     * It uses {@link Query.all} in order to fetch all items.\n     *\n     * @param objs - the objects to get ids from.\n     * @param relation - objects' field or field name.\n     * @param options - options to pass down to `all()`.\n     */\n    async relation(objs: Array<M>, relation: string | Relation, options: IQueryAll<M> ={}) : Promise<Response> {\n        this._ensureRepos(\"relations\")\n\n        const rel = asRelation(this.repo, relation)\n        if(!rel)\n            throw Error(`No Relation found for field ${relation}.`)\n\n        const key = (<typeof Model>rel.related.constructor).entity\n        const repo2 = this.repos[key]\n        if(!repo2)\n            throw Error(`No repository \"${key}\" found.`)\n\n        const fk = getSourceKey(rel)\n        if(!fk)\n            throw Error(`No source ids attributes for ${relation}.`)\n        const ids = [... new Set(collectAttr(objs, fk))]\n        const query = new Query(repo2, this.repos)\n        return query.all({...options, ids, repo: repo2})\n    }\n\n}\nexport default interface Query<M extends Model> extends IQuery<M> {}\n\n\n/** Return a new {@link Query} based on repo's entity. */\nexport function query<M extends Model>(repo: string|Repository<M>, repos?: Repos, opts?: IQueryFetch<M>=null): Query<M> {\n    if(typeof repo == \"string\") {\n        if(!(repo in repos))\n            throw Error(`Repository \"${repo}\" is not present in provided repositories.`)\n        return new Query(repos[repo] as unknown as Repository<M>, repos, opts)\n    }\n    return new Query(repo, repos, opts)\n}\n","import { cloneDeep, isEqual, pick } from 'lodash'\nimport type { Attribute, Repository } from 'pinia-orm'\nimport type { Response } from '@pinia-orm/axios'\n\nimport Config from '../config'\nimport { assignNonEmpty, reset, State } from '../utils'\n\n\nexport interface IEditorProps<T> {\n    /**\n     * @property initial - initial value provided to the editor\n     */\n    initial: T & {[k: string]: any}\n    /**\n     * @property name - editor name\n     */\n    name?: string\n    /**\n     * @property url - url to send value to\n     */\n    url?: string\n    /**\n     * @property saved - callback to run after object has been saved\n     */\n    saved?: (item: T, editor: IEditor<T,IEditorProps<T>>) => void\n}\n\n\n/**\n * Editor class interface.\n */\nexport interface IEditor<T,P extends IEditorProps<T>> extends IEditorProps<T> {\n    [index: string]: any\n\n    props: P\n    /**\n     * @property value - current edited value\n     */\n    value: T & Record<string, any>\n    /** Empty value, if not provided generated */\n    empty: T\n    /**\n    * @property state - current editor state. Set to `State.PROCESSING` when\n    * saving instance.\n    */\n    state: State\n}\n\n\n/**\n * An Editor handles data edition without changing original value.\n * It provides utilities in order to:\n * - detect if changes have been made;\n * - reset edited values to initial state;\n * - save data to server;\n *\n * Default implementation handles raw Object edition, but not saving data to the server.\n * Note: this might lead to errors due to reactivity when returned from composable.\n */\nexport default class Editor<T extends Record, P extends IEditorProps<T>> {\n    state = State.none()\n    value: T & Record<string, any> = {} as T\n\n    constructor(options: IEditor<T,P>)\n    {\n        options && assignNonEmpty(this, options)\n        if(!this.state)\n            this.state = new State()\n\n        this.value ??= {} as T\n        this.empty ??= {} as T\n        this.initial ??= this.props.initial || this.empty\n        this.valid = true\n        this.reset(this.initial)\n    }\n\n    get name(): string { return this.props.name }\n    get url(): string|null { return this.props.url }\n\n    get errors() : any {\n        return this.state.isError && this.state.data || null\n    }\n\n    error(field: string): string|string[] {\n        const data = this.state.isError && this.state.data?.[field]\n        if(data)\n            return this.initial[field] != this.value[field] && data.join('\\n') || ''\n        return ''\n    }\n\n    /** Discard changes, resetting to initial value. */\n    discard() {\n        this.reset(this.initial)\n    }\n\n    /**\n     * Reset editor data to provided value.\n     * When value is provided, reset initial to this value.\n     */\n    reset(value: T|null = null) {\n        reset(this.value, value ?? this.empty)\n        this.state.none()\n    }\n\n    /** Return wether value has been edited or not */\n    isEdited(): boolean {\n        return !isEqual(this.value, this.initial)\n    }\n\n    /**\n     * Save data. It will `serialize()` value then `send()` it.\n     *\n     * Note: default implementation does not provide `send()` method\n     * and thus will raise an error.\n     *\n     * @param [value] if provided use this instead of `this.value`. When a form is provided, it will get\n     * @return state.\n     */\n    async save(value: T|FormData|null = null, params:Record={}): Promise<State> {\n        this.state.processing()\n\n        if(this.valid === false)\n            return this.state.error({\n                \"_\": \"Some of the input values are invalid\"\n            })\n\n        value ??= this.value\n        if(value instanceof FormData)\n            params.headers = {\n                ...Config.axiosConfig.headers,\n                'Content-Type': 'multipart/form-data',\n                ...params.headers,\n            }\n        else\n            value = this.serialize(value)\n\n        const state = await this.send(value, params)\n        if(state.isOk) {\n            this.reset(state.data as T, true)\n            this.initial = cloneDeep(this.value)\n            this.saved?.(this.value)\n        }\n        else\n            this.state = state\n        return this.state\n    }\n\n    /**\n     * This method is called when editor successfully saved the\n     * edited item to the server.\n     *\n     * By default, it will call {@link Editor.props.saved} if provided.\n     */\n    saved(item: T) {\n        this.props.saved?.(item, this)\n    }\n\n    /** Serialize value before sending. */\n    serialize<R>(value: T): any { return value }\n\n    /** Send value (not implemented, MUST BE in subclasses). */\n    async send(_: Record|FormData, params: Record): State {\n        throw \"not implemented\"\n    }\n}\nexport default interface Editor<T,P extends IEditorProps<T>> extends IEditor<T,P> {\n    // Whether edited data are valid. Default to `true`.\n    valid: boolean\n}\n","import {computed, watch} from 'vue'\nimport type {WatchHandle, Reactive} from 'vue'\n\nimport {t} from '../composables'\nimport {assignNonEmpty, State} from '../utils'\nimport type Panels from './panels'\n\n\nexport interface IPanelInfo {\n    /** The view title displayed to user. */\n    title?: string\n    /** The view's icon displayed to user. */\n    icon?: string\n}\n\n\n/** Properties of OxPanel **/\nexport interface IPanelProps extends IPanelInfo {\n    /** Panel's name */\n    name: string\n    /** Index view name **/\n    index: string\n    /** Panel's view */\n    view: string\n    /** Current value */\n    value?: any\n    /** Optional state (used with `ox-state-alert`). */\n    state?: State\n    /** Url to related help page */\n    help?: string\n}\n\n/** Component properties used by OxPanelNav */\nexport type IPanelNavProps = IPanelInfo & {\n    /** Panel's name */\n    name: string\n    /** Panels page **/\n    url?: string\n    /** Required permission */\n    permissions?: string|string[]\n    /** Item type: subheader, divider, (item by default) */\n    type?: string,\n    /** Nested items */\n    items?: Record[]\n    /** Order */\n    order: number\n}\n\nexport interface IPanel<P> extends IPanelInfo {\n    /** Panel's name */\n    readonly name: string\n    /** Panel component properties. */\n    props: P\n    /**\n    * {@link Panels} used to specify current view and value.\n    *\n    * This element may be shared among multiple panels.\n    */\n    panels: Panels\n    /**\n     * Current unsaved changes. This can be updated by component in order\n     * to prevent data loss when changing panels.\n     */\n    editions: Set<string>\n}\n\n\n/**\n * This is the base class used by panels.\n */\nexport default class Panel<P extends IPanelProps = IPanelProps>\n{\n    index: string = 'list.table'\n    view: string = ''\n    value: any = null\n    item: any = null\n    editions: Set<string> = new Set()\n\n    /**\n     * Translation key for message displayed on `confirm()` to leave unsaved\n     * changes.\n     */\n    confirmTKey = \"panel.confirm\"\n\n    /** Panel name (based on props) **/\n    get name(): string { return this.props?.name || '' }\n\n    /** Wether there are still edited items on current view. */\n    get edited(): boolean { return !!this.editions?.size }\n\n    /** Return adequate icon based on props and model **/\n    get icon(): string { return this.props?.icon || null }\n\n    /** Return panel's title based on props. */\n    get title(): string { return this.props?.title }\n\n    constructor(options: IPanel<P>|null = null) {\n        options && assignNonEmpty(this, options)\n        this.view ??= this.index || ''\n    }\n\n    /** Return URL GET parameters for the current view */\n    getUrlParams(): IObject {\n        const params = {panel: this.name}\n        if(this.view != this.index)\n            params.view = this.view\n        if(this.view.startsWith('detail.') && this.value)\n            params.value = this.value\n        return params\n    }\n\n\n    /** Set or remove an edition by name. */\n    setEdition(name: string, edited: boolean) {\n        if(edited) this.editions.add(name)\n        else this.editions.delete(name)\n    }\n\n    /**\n     * Show a view, providing optional value.\n     * @return - true if view changed\n     */\n    show({view=null, value=null, silent=false, force=false}: {view?: string, value?: any, silent?: boolean, force?: boolean}={}) {\n        if((view != this.view || value != this.value) && (force || this.onLeave())) {\n            this.view = view || this.index\n            this.value = value\n            !silent && this.updateLocation()\n            return true\n        }\n        return false\n    }\n\n    /** Update current location using History api */\n    updateLocation() {\n        const params = this.getUrlParams()\n        if(params) {\n            const url = (new URLSearchParams(params)).toString()\n            history.pushState(params, \"\", `?${url}`)\n        }\n    }\n\n    /**\n     * Called when view or panel changes. It returns `true` if view/panel can be changed.\n     *\n     * Ask user for confirmation if there is unsaved changes (aka editions).\n     *\n     * @return true if we can proceed to view/panel change.\n     */\n    onLeave() {\n        if(!this.edited)\n            return true\n\n        const msg = t(this.confirmTKey)\n        return confirm(msg)\n    }\n}\nexport default interface Panel<P extends IPanelProps=IPanelProps> extends IPanel<P> {}\n","import {provide} from 'vue'\nimport {assignNonEmpty} from '../utils'\nimport type Panel from './panel'\n\n\nexport interface IPanels {\n    /** Current panel's name. **/\n    panel: string\n    /** Display/GET parameters for the current panel. */\n    params: Record\n    silent: boolean\n}\n\n\nexport interface IPanelShow extends IPanels {\n    force?: boolean\n    href?: string\n}\n\n/**\n * This class is used to panels a panel, providing extra information such\n * as value and view. It is shared among panels.\n *\n * Use it as this provides utilities to avoid data loss and allow current\n * panel to have control over leaving it.\n */\nexport default class Panels {\n    panel: string = \"\"\n    params: Record<string, any> = {}\n    paramsString: string = ''\n    children: {[k: string]: Panel} = {}\n    current: Panel|null\n\n    constructor(options: IPanels|null = null) {\n        options && assignNonEmpty(this, options)\n    }\n\n    /**\n     * Set {@link Panels.params based on current document location.\n     */\n    readDocumentLocation() {\n        this.paramsString = document.location.search.substring(1)\n        const search = new URLSearchParams(this.paramsString)\n        const {panel, ...params} = Object.fromEntries(search.entries())\n        this.panel = panel\n        this.params = params || {}\n    }\n\n    /** Read provided path and return current panel and view */\n    static readPath(path: string) : IPanels {\n        if(!path)\n            return {panel: \"\", view: \"\"}\n\n        const idx = path.indexOf('.')\n        if(idx < 0)\n            return {panel: path, view: ''}\n        return {panel: path.substring(0, idx), view: path.substring(idx+1)}\n    }\n\n    /** Register a panel */\n    register(name: string, child: Panel) {\n        if(!this.children[name]) {\n            this.children[name] = child\n\n            // Set current to child if required\n            if(this.panel == child.name) {\n                this.current = child\n                child.show(this.params)\n            }\n        }\n    }\n\n    /** Unregister a panel */\n    unregister(name: string) {\n        delete this.children[name]\n    }\n\n    /**\n     * Show a panel, loading page provided by href if required.\n     * When there is already a panel displayed, it will call {@link Panel.onLeave} in order to eventually prevent\n     * unwanted page change.\n     */\n    show({force=false, href=null, ...options}: IPanelShow) {\n        const proceed = force || !this.current || this.current.onLeave()\n        if(!proceed)\n            return\n\n        if(href && window.location.pathname != href) {\n            if(!options.panel)\n                throw Error(\"The attribute `href` requires`panel`.\")\n\n            href = `${href}?panel=${options.panel}`\n            if(options.view)\n                href = `${href}&view=${options.view || ''}`\n            window.location.href = href\n            return\n        }\n\n        this.reset(options)\n    }\n\n    reset({panel, silent=false, ...params}: IPanels) {\n        const panelChanged = (panel && panel != this.panel)\n        if(panelChanged && this.current) {\n            if(!this.current.onLeave())\n                return\n        }\n\n        this.panel = panel || this.panel\n        this.params = params\n\n        // Set current and if yet registered, show it.\n        this.current = this.children[this.panel]\n        this.current?.show({...this.params, silent})\n    }\n}\nexport default interface Panels extends IPanels {\n    /** Current panel (set by panels) **/\n    current: Panel|null\n}\n","import type {Repository, Query as $Query} from 'pinia-orm'\nimport type {Response} from '@pinia-orm/axios'\n\nimport {State, assignNonEmpty} from '../utils'\nimport type {Model} from '../models'\n\nimport Query from './query'\nimport type {IQueryFetch} from './query'\n\n\nexport interface IModelController<M extends Model> {\n    /** Response's key used to return data */\n    dataKey: string\n    /** {@link Query} used to fetch list items. */\n    query: Query<M>\n    /** Related fields to get from pinia orm's database and eventually fetch when items are retrieved from API.  */\n    relations?: string[]\n    /** Use this URL instead of model's defined one. */\n    url?: string\n    /** Fetch related fields from API when queried */\n    fetchRelations: boolean\n    /** If true (default value), save items in Pinia repository */\n    save: boolean\n}\n\nexport interface IModelFetch<M extends Model> extends IQueryFetch<M> {\n    /** Response's key used to return data */\n    dataKey?: string\n}\n\n\n/**\n * Base controller class that handles model fetching from the server in conjunction\n * with ORM framework.\n *\n * This provides:\n * - load items from the server and manage state accordingly (using {@link Query});\n * - items are retrieved from ORM store with specified relations;\n *\n * It does not:\n * - fetch items' related objects.\n *\n * This is used for {@link ModelDetail} and {@link ModelList}.\n */\nexport default class ModelController<M extends Model, O=IModelController<M>> {\n    state = State.none()\n    save = true\n\n    /** The repository of contained items. */\n    get repo(): Repository<M> { return this.query.repo }\n\n    /** Current model. */\n    get model(): typeof Model { return (this.repo.use as typeof Model) }\n\n    constructor(options: IModelController<M>|null = null) {\n        options && assignNonEmpty(this, options)\n    }\n\n    /** Return orm's query to object. This will includes declared {@link List.relations}.\n     *\n     *   @param ids - optional id lookup\n     *   @param first - if true, return the first item\n     *   @return orm's query\n     */\n    queryset(ids: number|number[]|null=null, first=false) : $Query<M> {\n        let query = this.repo.query()\n        if(this.relations)\n            for(const relation of this.relations)\n                query = query.with(relation)\n\n        if(ids !== null)\n            query = query.whereId(ids)\n\n        return first ? query.first() : query\n    }\n\n    /**\n     * Fetch model instance from the server and select them.\n     *\n     * Calling this method updates state to:\n     * - `PROCESSING`: request is being made;\n     * - `NONE`: request has been done without error;\n     * - `ERROR`: if an error happened;\n     *\n     * Flowchart:\n     * - {@link ModelController.fetch}\n     * - {@link ModelController.handleResponse}\n     */\n    async load(options: IModelFetch<M> = {}): Promise<Response|null> {\n        this.state.processing()\n        let response = null\n        try {\n            response = await this.fetch(options)\n            response = await this.handleResponse(options, response)\n        }\n        catch(error) {\n            console.log(error)\n            this.state.error(error)\n        }\n        if(!this.state.isError)\n            this.state.none()\n        return response\n    }\n\n    /** Fetch model instance from the server.\n     *\n     * Flowchart:\n     * - {@link ModelController.getQueryParams}\n     * - {@link Query.fetch}\n     */\n    async fetch(options: IModelFetch<M> = {}) : Promise<Response> {\n        const opts = this.getQueryOptions(options)\n        return await this.query.fetch(opts)\n    }\n\n    /** Handle response from the {@link ModelContainer.fetch}'s request. */\n    async handleResponse(options: IModelFetch<M>, response: Response): Promise<Response> {\n        // TODO: handle status code\n        return response\n    }\n\n    /** Get {@link Query.fetch} options. */\n    protected getQueryOptions(options: IModelFetch<M>): IQueryFetch<M> {\n        if(!options.relations && this.relations && this.fetchRelations)\n            options.relations = this.relations\n        // if(!(\"dataKey\" in options))\n        //    options.dataKey = this.dataKey\n        if(!options.url)\n            options.url = this.url\n        if(!(\"save\" in options))\n            options.save = this.save\n        return options\n    }\n}\nexport default interface ModelController<M extends Model, O> extends IModelController<M> {\n    /** Current request's state. */\n    state: State\n}\n","import type {Response} from '@pinia-orm/axios'\nimport {union, map} from 'lodash'\n\nimport type {Model, ModelId} from '../models'\n\nimport type {IQueryFetch} from './query'\nimport type {IModelController, IModelFetch} from './modelController'\nimport ModelController from './modelController'\n\n\nexport type FilterValue = number | string\nexport type Filters = Record<string,FilterValue>\n\n\n/** Base interface of a ModelList */\nexport interface IModelList<M extends Model> extends IModelController<M> {\n    /** Provide extra GET parameters. */\n    filters?: Filters\n    /** Response's key used to return URL to previous paginated items. */\n    prevKey: string\n    /** Response's key used to return URL to next paginated items.  */\n    nextKey: string\n    /** Response's key used to return total items count. */\n    countKey: string\n}\n\n/**\n * Arguments of {@link ModelList.fetch}. It is passed down to {@link Query.fetch}.\n */\nexport interface IModelListFetch<M extends Model> extends IModelFetch<M> {\n    /** Query's GET parameters used to filter the list. */\n    filters?: Filters\n    /**\n     * Append items to list. If `false` (default), fetch results will replace\n     * current list items.\n     */\n    append?: boolean | number\n}\n\n\n/**\n * Handle a list of model instances fetched using Rest Api. It is\n * used in model's panels.\n *\n * It uses {@link Query} object in order to fetch items and relations.\n *\n * Items references are tracked using repo's {@link RefCounter}.\n *\n *\n * @example\n * const value = ref(null)\n * const list = new ModelList.reactive({\n *     query: new Query(repos.users, repos),\n *     relations: ['groups'],\n *     value,\n * })\n *\n * await list.load({url: '/users'})\n */\nexport default class ModelList<M extends Model> extends ModelController<M, IModelList<M>> {\n    // /** Reference counter key **/\n    // $id: number\n\n    ids: ModelId[] = []\n    filters: Filters = {}\n    nextUrl: string|null = null\n    prevUrl: string|null = null\n    count: number|null = null\n    page_size: number|null = null\n\n    dataKey = \"results\"\n    nextKey = \"next\"\n    prevKey = \"previous\"\n    countKey = \"count\"\n\n    get length() { return this.ids.length }\n\n    constructor(...args) {\n        super(...args)\n        // this.$id = this.refs.acquireKey()\n    }\n\n    /** Return index for id */\n    indexOf(id: number) { return this.ids.indexOf(id) }\n\n    /** Destroy list, ensuring cleaning behind the scenes */\n    drop() {\n        // this.refs.flush(this.$id)\n        this.ids = []\n    }\n\n    /** Reset list */\n    reset(ids: ModelId[] = []) {\n        // this.refs.releaseAcquire(this.$id, this.ids, ids)\n        this.ids = ids\n        this.nextUrl = null\n        this.prevUrl = null\n        this.count = this.ids.length\n    }\n\n    /** Get item index by id */\n    //findIndex(id: number): number { return this.items.findIndex((v) => v.id == id) }\n\n    /** Add item if not present in list.\n    *\n    * @param id - item id to insert\n    * @param index - if provided insert at this position\n    * @return item index if already in the list, else insertion one\n    */\n    add(id: ModelId, index?: number = null): number {\n        const idx = this.ids.indexOf(id)\n        if(idx != -1)\n            return idx\n\n        // this.refs.acquire(this.$id, id)\n        if(index !== null) {\n            this.ids.splice(index, 0 , id)\n            return index\n        }\n        this.ids.push(id)\n        return this.ids.length-1\n    }\n\n    /** Remove item by id from list if present. */\n    remove(id: ModelId) {\n        const idx = this.ids.indexOf(id)\n        if(idx != -1) {\n            this.ids.splice(index, 1)\n            // this.refs.release(this.$id, id)\n        }\n    }\n\n    /**\n     * Get item id next to provided one at the specified direction.\n     *\n     * @param item - reference item\n     * @param step - increment or decrement item index by this value.\n     * @return the target item id or null if not found.\n     */\n    getSiblingIndex(item: M|null, step: number): number {\n        if(item === null)\n            return -1\n\n        const index = this.ids.indexOf(item.id)\n        const sibling = index >= 0 ? index+step : -1\n        return sibling >= 0 && sibling < this.ids.length ? sibling : -1\n    }\n\n    /**\n     * Fetch next items from API, override `url` using {@link ModelList.nextUrl}.\n     */\n    async loadNext(options: IModelListFetch<M>): Promise<Response> {\n        return await this.load({...options, url: this.nextUrl})\n    }\n\n    /**\n     * Fetch previous items from API, override `url` using {@link ModelList.prevUrl}.\n     */\n    async loadPrev(options: IModelListFetch<M>): Promise<Response> {\n        return await this.load({...options, url: this.prevUrl})\n    }\n\n    protected getQueryOptions(options: IModelFetch<M>): IQueryFetch<M> {\n        if(!(\"filters\" in options) && this.filters)\n            options.params = {...this.filters, ...(options.params ?? [])}\n        if(this.page_size)\n            options.params = {...options.params, page_size: this.page_size}\n        return super.getQueryOptions(options)\n    }\n\n    /**\n     * Handle response from API: update owned items list and related information (next/prev url, total count).\n     *\n     * Theses informations will not be set if `options.save == false`. You\n     * can however call this method later if you need to defer persistence.\n     */\n    async handleResponse({append=false, ...options}: IModelListFetch<M>, response: Response): Promise<Response> {\n        response = await super.handleResponse(options, response)\n        if(!this.state.isError && options.save !== false) {\n            const ids = map(response.entities, 'id')\n            this.setIds(ids, append)\n            this.nextUrl = response.response.data[this.nextKey] || null\n            this.prevUrl = response.response.data[this.prevKey] || null\n            this.count = response.response.data[this.countKey] || this.ids.length\n        }\n        return response\n    }\n\n    /**\n     * Update ids with the provided ones.\n     */\n    setIds(ids?: ModelId[], append: boolean|number =false) {\n        if(typeof append == \"number\")\n            this.ids.splice(append, 0, ...ids)\n        else if(append && this.ids.length)\n            this.ids = union(this.ids, ids)\n        else\n            this.ids = ids\n    }\n}\n\nexport default interface ModelList<M extends Model> extends IModelList<M> {\n    ids: number[]\n    nextUrl: string|null\n    prevUrl: string|null\n    count: number|null\n}\n","import { cloneDeep, isEqual, pick } from 'lodash'\nimport type { Attribute, Repository } from 'pinia-orm'\nimport type { Response } from '@pinia-orm/axios'\nimport {toRaw} from 'vue'\n\nimport { State } from '../utils'\nimport Editor from './editor'\nimport type { IObject } from '../utils'\nimport type { Model } from '../models'\nimport type {IEditor, IEditorProps, IEditorSend} from './editor'\n\n\n/**\n * ModelEditor properties (as passed down to {@link OxModelEdit} component).\n */\nexport interface IModelEditorProps<T extends Model> extends IEditorProps<T> {\n    /** Related repository */\n    repo: Repository<T>\n}\n\nexport interface IModelEditorSend extends Record {\n    id: number\n}\n\n\n/**\n * Editor sub-class used to edit model instances.\n *\n * Regarding properties ({@link IModelEditorProps}):\n * - `name` defaults to `{model.entity}-edit`.\n * - `repo` is mandatory\n *\n */\nexport default class ModelEditor<T extends Model, P extends IModelEditorProps<T>> extends Editor<T,P> {\n    constructor(options : IEditor<T,P>) {\n        options.fields = Object.keys((options.props.repo.use as typeof Model).fields())\n        options.empty ??= new options.props.repo.use()\n        super(options)\n    }\n\n    get repo() { return this.props.repo }\n    get name() { return this.props.name || `${this.repo.use.entity}-edit` }\n    isEdited(): boolean {\n        return !isEqual(pick(this.value, this.fields), pick(this.initial, this.fields))\n    }\n\n    get url(): string {\n        const url = super.url || (this.repo.use as typeof Model)?.meta?.url\n        if(!url)\n            throw Error(\"No url specified as parameter or in Model.meta.\")\n        return url\n    }\n\n    reset(value: T|null): void {\n        if(!value || !Object.keys(value).length)\n            value = this.empty\n\n        const fields = this.fields.filter(k => k in value)\n        this.value = cloneDeep(pick(value, fields)) || {}\n        this.state.none()\n    }\n\n    serialize(value: T): {[k: string]: any} {\n        const cls = this.repo.use\n        const obj = new cls({...this.value})\n        return obj.$toJson(null, {relations: false})\n    }\n\n    async send(value: IModelEditorSend|FormData, params: Record = {}) : State {\n        let [func, url] = [\"post\", this.url]\n        if(this.value.id) {\n            url = `${url}${this.value.id}/`\n            func = \"put\"\n        }\n        return await this.repo.api()[func](url, value, params).then(\n            (result: Response) => State.ok(result.entities[0]),\n            (error: Response) => State.error(error.response.data)\n        )\n    }\n}\nexport default interface ModelEditor<T extends Model, P extends IModelEditorProps<T>> extends Editor<T,P> {\n    fields: string[]\n}\n","import {computed, reactive, toRefs} from 'vue'\nimport type {Reactive} from 'vue'\nimport type {Repository} from 'pinia-orm'\n\nimport {Model} from '../models'\nimport {mapToObject} from '../utils'\nimport {t, tKeys} from '../composables/i18n'\n\nimport type ModelList from './modelList'\nimport type Query from './query'\nimport type {Repos} from '../models'\n\nimport type {IPanel, IPanelProps} from './panel'\nimport type Panels from './panels'\n\nimport Panel from './panel'\nimport {query} from './query'\n\n\n/** Model panel component properties. */\nexport interface IModelPanelProps<M extends Model> extends IPanelProps {\n    /** Current repository */\n    repo: Repository<M>\n    // search: string\n    /** Current view */\n    view: string\n    /** List table headers */\n    headers?: string[]\n    /** Related fields to get from pinia orm's database and eventually fetch when items are retrieved from API.  */\n    relations?: string[]\n    /** Show filters */\n    showFilters?: boolean\n    /** Fetch related fields from API when queried */\n    fetchRelations: boolean\n    /** Search filter lookup */\n    search: string\n\n    /**\n     * Display this warning on the top of the panel.\n     */\n    warning?: string\n}\n\n/** Model panel interface. */\nexport interface IModelPanel<\n    M extends Model,\n    P extends IModelPanelProps<M> = IModelPanelProps<M>\n> extends IPanel<P>\n{\n    /** List controller used to load and handle multiple items from the server. */\n    list: ModelList<M>\n    /** Detail controller used to load and handle a single item from the server. */\n    //detail: ModelListDetail<M>\n}\n\n\n/** This class handles model panel (used by {@link OxModelPanel}. */\nexport default class ModelPanel<\n    M extends Model,\n    P extends IModelPanelProps<M> = IModelPanelProps<M>,\n> extends Panel<P>\n{\n    showFilters: boolean = false\n\n    constructor(options: IModelPanel<M,P>) {\n        super(options)\n        this.showFilters = this.props?.showFilters || false\n    }\n\n    /** Current model's repository. */\n    get repo(): Repository<M> { return this.props.repo }\n\n    /** Current model. */\n    get model(): typeof Model { return (this.repo.use as typeof Model) }\n\n    /** Query (shortcut to `this.list.query`). **/\n    get query(): Query<M> { return this.list.query }\n\n    /** Return icon based on props and model **/\n    get icon(): string { return super.icon || this.model.meta?.icon }\n\n    /** Return panel's title based on view and current item. */\n    get title(): string {\n        const {props, list} = this\n        const model = this.repo.use\n        if(model) {\n            // many items\n            if(this.view?.startsWith('list.'))\n                return t(tKeys.model(model), 3)\n\n            if(this.view?.startsWith('detail.')) {\n                if(this.value?.$title)\n                    return this.value.$title\n\n                const name = t(tKeys.model(model))\n                return this.value?.id\n                    ? t(`models._.title`, {model: name, id: this.value.id})\n                    : t(`models._.title.new`, {model: name})\n            }\n        }\n        return super.title\n    }\n\n    getUrlParams() {\n        const {value=null, ...params} = super.getUrlParams()\n        if(value?.id)\n            params.id = value.id\n        return params\n    }\n\n    /**\n     * Edit a new item.\n     *\n     * @param view - edit view.\n     */\n    create(view: string='detail.edit') {\n        this.show({view, value: null})\n    }\n\n    /** Called when an item has been created. By default, show edit view. */\n    created(value: M, view: string=\"detail.edit\") {\n        // this.list.load()\n        this.show({view, value})\n    }\n\n    show({id=null, ...params}: {view?: string, value?: M, id: number}) {\n        if(id) {\n            query(this.repo).fetch({id, relations: this.relations}).then(r => {\n                super.show({...params, value: r.entities[0]})\n                return r\n            })\n        }\n        else\n            return super.show(params)\n    }\n}\n\n\nexport default interface ModelPanel<M extends Model,P extends IModelPanelProps<M>=IModelPanelProps<M>,O=IModelPanel<M>> extends IModelPanel<M,P> {\n    showFilters: boolean\n}\n","import {\n    computed, inject, isRef, toRefs, unref, watch,\n    onMounted, onUnmounted, provide, reactive, toRaw\n} from 'vue'\nimport { isEqual } from 'lodash'\n\nimport type {ComputedRef, Reactive, Ref, WatchHandle} from 'vue'\nimport type {Repository} from 'pinia-orm'\n\nimport {State} from '../utils'\nimport type {Repos, Model} from '../models'\n\nimport {\n    Panels, Panel, ModelPanel,\n    Query, ModelList,\n    Editor, ModelEditor\n} from '../controllers'\n\nimport type {\n    IPanels, IPanel, IPanelProps,\n    IModelPanel, IModelPanelProps,\n    IModelList,\n    IEditor, IEditorProps, IModelEditorProps,\n    IQueryFetch\n} from '../controllers'\n\n\n//---- Panels\n/**\n * Create a new reactive {@link Panels} and provide it as `panels`.\n *\n * It also creates watchers in order to:\n * - update document title based on current panel's view\n * - keep track of current view's url: when a panels' getUrlParams changes, it will `History.pushState` storing those params;\n *\n * @return the reactive Panels.\n */\nexport function usePanels(options: IPanels) {\n    const panels = reactive(new Panels(options))\n    provide('panels', panels)\n\n    onMounted(() => {\n        panels.readDocumentLocation()\n        panels.panel && panels.show({\n            panel: panels.panel, silent: true,\n            ...panels.params\n        })\n    })\n\n    window.addEventListener(\"popstate\", (event) => {\n        if(event.state)\n            panels.show({...event.state, silent: true})\n    })\n\n    // we update title after history state\n    const initialTitle = document.title\n    watch(() => panels.current?.title, (val) => {\n        if(val)\n            document.title = `${val} | ${initialTitle}`\n        else\n            document.title = initialTitle\n    })\n\n    return panels\n}\n\n/** Create a new {@link Panel}.\n*\n* - (un)register the panel to object's `panels` on (un)mount.\n* - provide `panel`;\n* - watch on {@link Panel.view} calling {@link Panel.onViewChange}\n*/\nexport function usePanel<P extends IPanelProps>(options: IPanel<P>, cls: typeof Panel<P>) {\n    const panel = reactive(new cls(options))\n\n    provide('panel', panel)\n    onMounted(() => panel.panels.register(panel.name, panel))\n    onUnmounted(() => panel.panels.unregister(panel.name))\n\n    // watch(() => panel.view, (val, old) => val != old && panel.onViewChange(val))\n    return {panel}\n}\n\n/** Create a new {@link ModelPanel}. */\n// TODO: allow to pass list down\nexport function useModelPanel<M extends Model, P extends IModelPanelProps<M>>(\n    {query, repos, ...options}: IModelPanel<M,P>\n)\n{\n    repos ??= inject('repos')\n    query ??= new Query(options.props.repo, repos)\n    options.panels ??= inject('panels')\n\n    const {list, items} = useModelList({\n        query,\n        relations: options.props.relations,\n        fetchRelations: options.props.fetchRelations\n    })\n    const {panel} = usePanel({list, ...options}, ModelPanel)\n\n    const next = computed(() => {\n        const index = list.getSiblingIndex(unref(panel.value), 1)\n        return items.value[index] ?? null\n    })\n    const prev = computed(() => {\n        const index = list.getSiblingIndex(unref(panel.value), -1)\n        return items.value[index] ?? null\n    })\n\n    return {panels: panel.panels, panel, list, items, next, prev}\n}\n\n\n//---- Controllers\n/** Create a new {@link List} and provide it as `list`. */\nexport function useModelList<M extends Model>(options : IModelList<M>, cls: typeof ModelList = ModelList)\n{\n    const list = reactive(new cls(options))\n    const listId = list.repo.refs.acquireKey()\n\n    // FIXME:\n    // - we have items in order for them to be updated from repo\n    // - list stores items as items\n    // - we query items from db using list.ids (= maps of list.items)\n    // - this adds levels of indirections and extra layers\n    const items = computed(() => list.queryset(list.ids).orderBy(id => list.ids.indexOf(id)).get())\n\n    // release - acquire refs\n    watch(() => list.ids, (val, old) => {\n        if(!isEqual(toRaw(val), toRaw(old)))\n            list.repo.refs.releaseAcquire(listId, old, val)\n    })\n    onUnmounted(() => list.repo.refs.flush(listId))\n\n    provide('list', list)\n    provide('items', items)\n    return {list, items, listId}\n}\n\n/**\n * This composable return a new {@link Query}, {@link State} and a fetch\n * function that combines them.\n */\nexport function useQuery<M extends Model>(repo: Repository<M>, repos: Repos|null=null, opts: IQueryFetch<M>) {\n    const query = new Query(repo, repos, opts)\n    const state = State.none()\n\n    async function fetch(opts: IQueryFetch<M>) {\n        state.processing()\n        let resp = null\n        try {\n            resp = await query.fetch(opts)\n            state.none()\n        }\n        catch(error) {\n            state.error(error)\n        }\n        return resp\n    }\n    return {state, query, fetch}\n}\n\n\n/**\n * This composable create an new Editor and returns it as reactive object.\n *\n * - provide `editor`\n * - set default `saved` method if emits is provided\n * - watch on edition to update panel's editions\n */\nexport function useEditor<\n    T extends Record<string,any>,\n    P extends IEditorProps<T>,\n>(\n    options: IEditor<T,P>,\n    cls: typeof Editor<T,P>=Editor<T,P>\n)\n{\n    const initial = options.initial || options.props.initial\n    const editor = reactive(new cls(options))\n\n    provide('editor', editor)\n\n    const edited = computed(() => editor.isEdited())\n    watch(() => editor.props.initial, (val) => {\n        editor.initial = val || editor.empty\n        editor.reset(val || editor.empty)\n    })\n\n    const panel = inject('panel') as Panel\n    if(panel)\n        watch(() => editor.edited, (val: boolean) => panel.setEdition(editor.name, val))\n\n    return {editor, edited}\n}\n\n/** Return a new reactive {@link ModelEditor} */\nexport function useModelEditor<\n    T extends Model,\n    P extends IModelEditorProps<T>\n>(\n    options: IEditor<T,P>,\n    cls: typeof ModelEditor<T,P> = ModelEditor<T,P>\n)\n{\n    return useEditor(options, cls)\n}\n","import {t} from '../composables'\n\n/**\n * This object provide commonly used validation rules to use with form fields.\n */\nexport default {\n    /** Field is required */\n    required(value) {\n        return value ? true : t('fields._.required')\n    },\n\n    /**\n     * Validate field errors returned from the server.\n     */\n    errors(errorList) {\n        return () => (errorList?.length ? errorList.join('<br>') || false : true)\n    },\n\n    /**\n     * Return a rule whose validating value is optional.\n     *\n     * By default rules require value to be provided. This returns a new\n     * rule whose value can either be empty or must match provided rule.\n     */\n    optional(rule) {\n        return (value) => {\n            return !value || rule(value)\n        }\n    },\n\n    /** Rule validating email */\n    email(value) {\n        const allowed = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n        return allowed.test(value) || t(\"fields.email.rule\")\n    },\n\n    /** Rule validating username */\n    username(value) {\n        const allowed = /^[A-Za-z0-9@.+\\-_]+$/\n        return allowed.test(value) || \"Username must not be empty. It only can contain letters, numbers and @/+/./- special characters\"\n    },\n}\n","import { defineAsyncComponent as $defineAsyncComponent } from 'vue'\n\nexport * from './app'\nexport * from './actions'\nexport * from './init'\nexport * from './i18n'\nexport * from './models'\nexport * from './controllers'\nexport {default as rules} from './rules'\n\n\n/**\n * Similar to `defineAsyncComponent` allowing to load a component\n * by name from a provided module url.\n */\nexport function defineAsyncComponent(url: string, name: string) {\n    return $defineAsyncComponent(() => {\n        return import(url).then(mod => {\n            if(!name)\n                return mod\n            console.log(mod, mod.components, Object.keys(mod))\n            const obj = Object.values(mod).filter((y: {[k: string]: any}) => y.__name == name)[0]\n            return obj\n        })\n    })\n}\n\n\n/**\n * This exception is used in order to display the message to user\n * when it is raised.\n */\nclass UserError extends Error {}\n"],"names":["toString","prefix","prop","key","val","t","enumProxy","target","receiver","k","Enum","fields","Response","repository","config","response","__publicField","data","method","result","action","Request","actions","_a","_c","_b","name","url","requestConfig","axiosResponse","AxiosRepository","Repository","database","pinia","useAxiosApi","axios","createPiniaOrmAxios","axiosConfig","definePiniaOrmPlugin","context","RefCounter","repo","ids","id","tags","drop","pull","releaseIds","acquireIds","difference","idx","asRelation","relation","field","Relation","getSourceKey","HasMany","HasManyBy","HasOne","BelongsTo","useRepo","model","$useRepo","getActivePinia","useModels","models","useInject","useDefaults","repos","inject","injected","User","provide","AppContext","opts","obj","reactive","computed","State","value","dataEl","el","useAppContext","load","useAction","props","user","emits","processing","ref","allowed","args","weekInfo","locale","code","getWeekArray","date","firstDayOfWeek","weeks","currentWeek","firstDayOfMonth","startOfMonth","lastDayOfMonth","endOfMonth","first","firstDayWeekIndex","lastDayWeekIndex","i","adjacentDay","day","startOfWeek","d","endOfWeek","lastDay","parseLocalDate","parts","_YYYMMDD","parsed","sundayJanuarySecond2000","getWeekdays","daysFromSunday","createRange","weekday","format","formatString","formats","newDate","customFormat","options","month","toISO","adapter","year","padStart","parseISO","addMinutes","amount","addHours","addDays","addWeeks","addMonths","getYear","getMonth","getWeek","firstWeekMinSize","weekInfoFromLocale","weekStart","minWeekSize","firstWeekSize","yearStart","getDiff","currentWeekEnd","size","d1w1","endOfDay","startOfDay","getDate","getNextMonth","getPreviousMonth","getHours","getMinutes","startOfYear","endOfYear","isWithinRange","range","isAfter","isBefore","isValid","comparing","isAfterDay","isEqual","isSameDay","isSameMonth","isSameYear","unit","c","setHours","count","setMinutes","setMonth","setDate","setYear","VuetifyDateAdapter","firstDay","DateOptionsSymbol","DateAdapterSymbol","createDate","_options","mergeDeep","createInstance","instance","watch","createVuetify","vuetify","blueprint","rest","aliases","components","directives","scope","effectScope","defaults","createDefaults","display","createDisplay","theme","createTheme","icons","createIcons","createLocale","goTo","createGoTo","install","app","defineComponent","appScope","DefaultsSymbol","DisplaySymbol","ThemeSymbol","IconSymbol","LocaleSymbol","GoToSymbol","IN_BROWSER","mount","vm","nextTick","unmount","version","provides","md3","mdi","green","colors","init","App","onLoad","initApp","createApp","resolve","plugins","$createApp","i18n","useI18n","plugin","vendorComponents","$createVuetify","createPinia","baseURL","$createPinia","piniaOrm","createORM","setActivePinia","Query","lookup","params","relations","path","_e","_d","dat","nextKey","limit","flush","result2","objs","entities","funcName","rel","repo2","fk","collectAttr","query","Editor","assignNonEmpty","reset","Config","state","cloneDeep","item","_","Panel","edited","view","silent","force","msg","Panels","search","panel","child","href","ModelController","error","ModelList","index","step","sibling","append","map","union","ModelEditor","pick","cls","func","ModelPanel","list","tKeys","r","usePanels","panels","onMounted","event","initialTitle","usePanel","onUnmounted","useModelPanel","items","useModelList","next","unref","prev","listId","old","toRaw","useQuery","fetch","resp","useEditor","editor","useModelEditor","rules","errorList","rule","defineAsyncComponent","$defineAsyncComponent","mod","y"],"mappings":"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","x_google_ignoreList":[1,7,8,9,10,11]}
