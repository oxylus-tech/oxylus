"use strict";const e=require("vue"),t=require("./index-BeLa7Bpc.cjs");require("axios");const C=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{},run:{}},emits:["completed"],setup(u,{emit:r}){const n=u,l=r,s=e.inject("context"),{processing:c,permissions:i,allowed:a,run:o}=t.useAction(n,{user:s.user,emits:l});return(d,p)=>e.unref(a)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.button?(e.openBlock(),e.createBlock(t.VBtn,{key:0,variant:"text",color:n.color,icon:n.icon,title:n.title,"aria-label":n.title,onClick:e.withModifiers(e.unref(o),["stop"])},null,8,["color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(t.VListItem,{key:1,title:n.title,"base-color":n.color,"prepend-icon":n.icon,onClick:e.withModifiers(e.unref(o),["stop"])},null,8,["title","base-color","prepend-icon","onClick"]))],64)):e.createCommentVNode("",!0)}}),I=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(u){const{t:r}=t.useI18n$1(),n=e.inject("panel"),l=e.inject("repos"),s=u,c=t.makeModelApiAction({repo:l[s.item.constructor.entity],method:"delete",options:(i,a)=>({delete:s.item.id})});return(i,a)=>(e.openBlock(),e.createBlock(C,{item:s.item,button:s.button,icon:"mdi-delete",color:"error",title:e.unref(r)("actions.delete"),confirm:e.unref(r)("actions.delete.confirm"),permissions:["delete",(o,d)=>d.id],run:e.unref(c),onCompleted:a[0]||(a[0]=o=>{var d;return(d=e.unref(n))==null?void 0:d.reset("")})},null,8,["item","button","title","confirm","permissions","run"]))}}),E={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(u){e.useSlots();const r=u;return(n,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(n.$slots,"before",e.normalizeProps(e.guardReactiveProps(r))),e.renderSlot(n.$slots,"default",e.normalizeProps(e.guardReactiveProps(r))),e.renderSlot(n.$slots,"after",e.normalizeProps(e.guardReactiveProps(r)))],64))}};var T;const A=e.defineComponent({__name:"OxApp",props:{apiUrl:{},dataEl:{default:(T=document.body.dataset)==null?void 0:T.appData},models:{},data:{}},setup(u){const{t:r}=t.useI18n(),n=e.useSlots(),l=u,s=e.reactive({drawer:!0}),c=t.useAppContext(l);return(i,a)=>(e.openBlock(),e.createBlock(t.VApp,null,{default:e.withCtx(()=>[e.createVNode(t.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(r)("nav.panels"),"aria-label":e.unref(r)("nav.panels"),onClick:a[0]||(a[0]=e.withModifiers(o=>s.drawer=!s.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(n)["app-nav"]&&!s.drawer2?(e.openBlock(),e.createBlock(t.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:a[1]||(a[1]=o=>{s.drawer2=!0,s.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(t.VAppBarTitle,null,{default:e.withCtx(()=>{var o;return[(o=e.unref(c).panel)!=null&&o.title?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(c).panel.icon?(e.openBlock(),e.createBlock(t.VIcon,{key:0,icon:e.unref(c).panel.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(e.unref(c).panel.title),1)],64)):e.renderSlot(i.$slots,"title",{key:1,context:e.unref(c)})]}),_:3}),e.createVNode(t.VSpacer),a[4]||(a[4]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(i.$slots,"app-bar-right",{context:e.unref(c)})]),_:3}),e.unref(n)["nav-list"]?(e.openBlock(),e.createBlock(t.VNavigationDrawer,{key:0,theme:"dark",modelValue:s.drawer,"onUpdate:modelValue":a[2]||(a[2]=o=>s.drawer=o)},e.createSlots({default:e.withCtx(()=>[e.renderSlot(i.$slots,"nav-start",{context:e.unref(c)}),e.renderSlot(i.$slots,"nav-list",{context:e.unref(c)}),e.renderSlot(i.$slots,"nav-end",{context:e.unref(c)})]),_:2},[e.unref(n)["app-nav"]?{name:"append",fn:e.withCtx(()=>[a[5]||(a[5]=e.createElementVNode("div",{class:"text-right pa-3"},null,-1))]),key:"0"}:void 0]),1032,["modelValue"])):e.createCommentVNode("",!0),e.createVNode(t.VMain,null,{default:e.withCtx(()=>[e.createVNode(t.VTabsWindow,{modelValue:e.unref(c).panel.name,"onUpdate:modelValue":a[3]||(a[3]=o=>e.unref(c).panel.name=o)},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"default",{context:e.unref(c)})]),_:3},8,["modelValue"])]),_:3})]),_:3}))}}),L={props:{src:String,is:String},setup(u){const r=e.shallowRef(null),n=e.computed(()=>{if(u.is)return u.is;let s=u.src.substring(u.src.lastIndexOf("/")+1);if(s&&(s=s.substring(0,s.indexOf("."))),!s)throw Error("`is` not provided and could not be deducted from `src`.");return s});function l(){r.value=t.defineAsyncComponent(u.src,n.value)}return e.watch(()=>u.src,l),l(),()=>e.h(r.value,u)}},U={class:"password-error"},y={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(u){const r=u;return(n,l)=>r.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(r.errors,s=>(e.openBlock(),e.createElementBlock("div",U,[e.createVNode(t.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(s),1)]))),256)):e.createCommentVNode("",!0)}},N={__name:"OxListFilters",props:{search:String,list:Object},setup(u,{expose:r}){const{t:n}=t.useI18n(),l=u,s=e.computed(()=>l.list.filters&&Object.entries(l.list.filters).some(([a,o])=>!a.startsWith("page")&&!a.startsWith("ordering")&&!!o)),c=e.computed(()=>s.value?"mdi-filter-check":"mdi-filter-outline");function i(){l.list.filters={},l.list.fetch()}return r({icon:c,hasFilters:s,reset:i}),(a,o)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:o[2]||(o[2]=e.withModifiers(d=>u.list.fetch(),["prevent"])),class:"width-full"},[e.createVNode(t.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:c.value,readonly:""},null,8,["icon"]),l.search&&l.list.filters?(e.openBlock(),e.createBlock(t.VTextField,{key:0,label:e.unref(n)("filters.search"),density:"compact",class:"ml-2",modelValue:l.list.filters[l.search],"onUpdate:modelValue":o[0]||(o[0]=d=>l.list.filters[l.search]=d),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(a.$slots,"default",{list:u.list,filters:u.list.filters}),e.createVNode(t.VBtn,{onClick:o[1]||(o[1]=e.withModifiers(d=>u.list.fetch(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":a.$t("filters.apply"),title:e.unref(n)("filters.apply")},null,8,["aria-label","title"]),s.value?(e.openBlock(),e.createBlock(t.VBtn,{key:1,onClick:e.withModifiers(i,["stop"]),icon:"mdi-backspace","aria-label":e.unref(n)("filters.reset"),title:e.unref(n)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},G=t.genericComponent()({name:"VSlideGroupItem",props:t.makeGroupItemProps(),emits:{"group:selected":u=>!0},setup(u,r){let{slots:n}=r;const l=t.useGroupItem(u,t.VSlideGroupSymbol);return()=>{var s;return(s=n.default)==null?void 0:s.call(n,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),F={__name:"OxListKanban",props:{items:Array,itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(u,{emit:r}){const n=r,l=u;function s(a){return a=a%l.colors.length,l.colorVariant?l.colors[a]+"-"+l.colorVariant:l.colors[a]}function c(a,o,d){a[d]?!a[d].includes(o)&&a[d].push(o):a[d]=[o]}const i=e.computed(()=>{const a={};if(l.items)for(var o of l.items){const p=o[l.field];if(Array.isArray(p))if(p.length)for(var d of p)c(a,o,d);else c(a,o,null);else c(a,o,p)}return a});return(a,o)=>(e.openBlock(),e.createBlock(t.VSheet,null,{default:e.withCtx(()=>[e.createVNode(t.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.headers,(d,p)=>(e.openBlock(),e.createBlock(G,{key:d.value},{default:e.withCtx(({selectedClass:w})=>[e.createVNode(t.VCard,{width:"400",class:e.normalizeClass(["ma-3",w]),color:s(p),lines:"two"},{default:e.withCtx(()=>[e.createVNode(t.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.title),1)]),_:2},1024),e.createVNode(t.VList,{"bg-color":s(p)},{default:e.withCtx(()=>[i.value&&i.value[d.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(i.value[d.value],m=>e.renderSlot(a.$slots,"item",{key:m.id,header:d,item:m},()=>[e.createVNode(t.VListItem,{title:m[l.itemTitle],value:l.itemValue&&m[l.itemValue],onClick:k=>n("click",m)},{append:e.withCtx(()=>[e.renderSlot(a.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},$=e.defineComponent({__name:"OxListTable",props:{list:Object,headers:Array,edit:Boolean},setup(u){const{t:r}=t.useI18n$1(),n=e.useSlots(),l=t.filterSlots(n,"item.",{exclude:["item.actions"]}),s=e.inject("panel"),c=new t.Permissions("change"),i=u;function a(d){return i.list.fetch({filters:{page:d.page,page_size:d.itemsPerPage,ordering:d.sortBy.map(({key:p,order:w})=>w=="asc"?p:`-${p}`)}})}function o(d,p){s.reset(".edit",p)}return(d,p)=>{var w;return e.openBlock(),e.createBlock(t.VDataTableServer,{items:i.list.items,"item-index":"id","items-length":i.list.count||i.list.items.length,loading:(w=i.list.state)==null?void 0:w.isProcessing,headers:i.headers,"onUpdate:options":a},e.createSlots({loading:e.withCtx(()=>[e.createVNode(t.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:m})=>[u.edit?(e.openBlock(),e.createBlock(C,{key:0,icon:"mdi-pencil",button:"",title:e.unref(r)("actions.edit"),onClick:e.withModifiers(k=>e.unref(s).reset(".edit",m),["stop"]),permissions:e.unref(c),item:m,run:o},null,8,["title","onClick","permissions","item"])):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"item.actions",{value:m,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(l),(m,k)=>({name:k,fn:e.withCtx(h=>[e.renderSlot(d.$slots,k,e.normalizeProps(e.guardReactiveProps(h)))])}))]),1032,["items","items-length","loading","headers"])}}}),S={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(u){const r=e.useSlots(),n=u;let l=e.ref(!1);e.watch(()=>n.state.state,i=>{n.delay&&i==t.States.PROCESSING&&(l.value=!1,window.setTimeout(()=>{l.value=!0},5e3))});const s=e.computed(()=>{var i;return((i=n.state)==null?void 0:i.isProcessing)&&(!n.delay||l.value)}),c=e.computed(()=>{var i,a;return(a=(i=n.state)==null?void 0:i.data)==null?void 0:a.messages});return(i,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.state.isNone&&e.unref(r).none?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:0,type:"info",variant:"outline",class:"mb-3",state:u.state,title:u.noneTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"none",{state:u.state})]),_:3},8,["state","title"])):s.value?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:u.state,title:u.processingTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"processing",{state:u.state},()=>[a[0]||(a[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):n.state.isError?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:u.state,title:u.errorTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"error",{state:u.state},()=>[a[1]||(a[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(i.$slots,"error-detail",{state:u.state})]),_:3},8,["state","title"])):n.state.isOk?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:u.state,title:u.okTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"ok",{state:u.state},()=>[a[2]||(a[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),c.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,o=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(o),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"ok-detail",{state:u.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"default",{state:n.state})],64))}},q={class:"text-right"},P={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(u,{emit:r}){const n=r,l=u;return(s,c)=>(e.openBlock(),e.createElementBlock("div",q,[e.createVNode(e.unref(t.VBtn),{color:"error",class:"me-2","prepend-icon":l.resetIcon,onClick:c[0]||(c[0]=i=>n("reset")),disabled:l.disabled},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(l.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),l.state.isSending?(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>c[2]||(c[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:1,color:"primary","prepend-icon":l.validateIcon,onClick:c[1]||(c[1]=i=>n("validate")),disabled:l.disabled||l.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(l.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},K={key:0},J={class:"text-right mt-3"},j={__name:"OxLogin",props:{next:{type:String}},emits:["save","saved"],setup(u,{emit:r}){e.inject("repos");const n=u,l=e.reactive({username:"",password:""}),s=e.ref(!1),c=e.reactive(new t.State);function i(o=!0){t.reset(l,{username:"",password:""}),o&&c.none()}async function a(){c.processing();try{const o=await fetch("/api/ox/core/account/login/",{method:"POST",headers:t.config.axiosConfig.headers,body:JSON.stringify(l)});o.status==200?(l.credentials="",l.password="",c.ok(await o.json()),n.next&&(window.location.href=n.next)):c.error(await o.json())}catch(o){c.ok((o==null?void 0:o.message)||o)}}return(o,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(S),{state:c},{none:e.withCtx(({state:p})=>d[5]||(d[5]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:p})=>[n.next?(e.openBlock(),e.createElementBlock("p",K,[d[6]||(d[6]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(n.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:p})=>{var w,m;return[e.createVNode(y,{errors:(w=p.data)==null?void 0:w.username},null,8,["errors"]),e.createVNode(y,{errors:(m=p.data)==null?void 0:m.password},null,8,["errors"])]}),_:1},8,["state"]),c.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTextField,{variant:"underlined",label:"Enter login",modelValue:l.username,"onUpdate:modelValue":d[0]||(d[0]=p=>l.username=p)},null,8,["modelValue"]),e.createVNode(t.VTextField,{variant:"underlined",label:"Enter password",modelValue:l.password,"onUpdate:modelValue":d[1]||(d[1]=p=>l.password=p),type:s.value?"text":"password","append-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:append":d[2]||(d[2]=p=>s.value=!s.value)},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",J,[e.renderSlot(o.$slots,"default",{value:l.password},()=>[l.username&&l.password?(e.openBlock(),e.createBlock(P,{key:0,"validate-label":"Login!",onValidate:d[3]||(d[3]=p=>a()),onReset:d[4]||(d[4]=p=>i()),state:c},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},x={__name:"OxPanelSheet",props:{name:String,title:String,icon:String,help:String},setup(u){const r=u,n=e.ref(!1);e.onMounted(()=>{n.value=!0});const l=e.inject("panel");return e.watch(()=>r==null?void 0:r.title,s=>{l.name==r.name&&(l.title=s)}),e.watch(()=>r==null?void 0:r.icon,s=>{l.name==r.name&&(l.icon=s)}),(s,c)=>(e.openBlock(),e.createBlock(t.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[n.value&&e.unref(l).name==r.name?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:"#app-bar-right"},[e.renderSlot(s.$slots,"append-title"),r.help?(e.openBlock(),e.createBlock(t.VBtn,{key:0,class:"ml-3",href:r.help,target:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default")]),_:3}))}},O={__name:"OxPanel",props:{...t.panelProps,state:{type:Object,default:null}},setup(u){const r=e.useSlots(),n=u,l=e.inject("context"),s=e.inject("panel");return(c,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.state?(e.openBlock(),e.createBlock(S,{key:0,state:n.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),n.tabbed?(e.openBlock(),e.createBlock(t.VTabsWindowItem,{key:1,value:n.name},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"sheet",{context:e.unref(l),panel:e.unref(s)},()=>[e.createVNode(x,{name:n.name,title:n.title,icon:n.icon},e.createSlots({_:2},[e.renderList(e.unref(r),(a,o)=>({name:o,fn:e.withCtx(()=>[e.renderSlot(c.$slots,o,{context:e.unref(l),panel:e.unref(s)})])}))]),1032,["name","title","icon"])])]),_:3},8,["value"])):e.renderSlot(c.$slots,"sheet",{key:2,context:e.unref(l),panel:e.unref(s)},()=>[e.createVNode(x,{name:n.name,title:n.title,icon:n.icon},e.createSlots({_:2},[e.renderList(e.unref(r),(a,o)=>({name:o,fn:e.withCtx(()=>[e.renderSlot(c.$slots,o,{context:e.unref(l),panel:e.unref(s)})])}))]),1032,["name","title","icon"])])],64))}},_={__name:"OxModelEdit",props:{value:{type:Object,default:()=>null},valueModifiers:{}},emits:["update:value"],setup(u){e.inject("context");const r=e.useModel(u,"value"),n=e.computed(()=>{var p;return(p=r.value)==null?void 0:p.constructor}),l=e.inject("panel");function s(p){l.value&&p&&(l.value.title=`Edit ${p.$title}`)}s(r.value),e.watch(r,s);const c=e.ref(null),i=e.useSlots(),a=t.filterSlots(i,"tab.",{exclude:"tab.default"}),o=t.filterSlots(i,"window.",{exclude:"window.default"}),d=e.computed(()=>({panel:l,value:r.value,model:n.value}));return(p,w)=>r.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(a)&&Object.keys(e.unref(a)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTabs,{modelValue:c.value,"onUpdate:modelValue":w[0]||(w[0]=m=>c.value=m)},{default:e.withCtx(()=>[e.renderSlot(p.$slots,"tab.default",e.normalizeProps(e.guardReactiveProps(d.value)),()=>{var m,k;return[e.createVNode(t.VTab,{text:(k=(m=n.value)==null?void 0:m.meta)==null?void 0:k.verbose,value:"model"},null,8,["text"])]}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(m,k)=>e.renderSlot(p.$slots,k,e.mergeProps({ref_for:!0},d.value))),256))]),_:3},8,["modelValue"]),e.createVNode(t.VTabsWindow,{modelValue:c.value,"onUpdate:modelValue":w[1]||(w[1]=m=>c.value=m)},{default:e.withCtx(()=>[e.createVNode(t.VTabsWindowItem,{value:"model"},{default:e.withCtx(()=>[e.renderSlot(p.$slots,"window.default",e.normalizeProps(e.guardReactiveProps(d.value)))]),_:3}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),(m,k)=>(e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:m},{default:e.withCtx(()=>[e.renderSlot(p.$slots,k,e.mergeProps({ref_for:!0},d.value))]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(p.$slots,"window.default",e.normalizeProps(e.mergeProps({key:1},d.value)))],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(" Nothing to edit ")],64))}},M=e.defineComponent({__name:"OxModelPanel",props:{...t.useApiListProps(),...t.panelProps,search:String,view:String,headers:Array,showFilters:{type:Boolean,default:!1}},setup(u){const{t:r}=t.useI18n$1(),n=e.useSlots(),l=t.filterSlots(n,"views.list."),s=t.filterSlots(n,"item."),c=t.filterSlots(n,"views.edit."),i=u,a=e.inject("repos"),o=e.inject("panel"),{value:d}=e.toRefs(o),p=e.useTemplateRef("filters"),w=e.computed(()=>t.mapToObject(t.useApiListProps(),i)),m=e.computed(()=>t.useApiList({...w.value,value:d},{repos:a}));e.computed(()=>{var v;return((v=m.value)==null?void 0:v.items)||[]});const k=e.ref(i.showFilters);e.watch(()=>o.view,v=>{v||(o.view=i.view||"list.table")});function h(v=".add"){o.reset(v,new i.repo.use)}function R(v){var f;o.reset(".edit",v,{force:!0}),(f=m.value)==null||f.fetch()}const z=e.computed(()=>{if(i.title)return i.title;const v=e.unref(m).repo.use;if(v===null)return"";if(o.view.startsWith("list."))return r(`models.${v.entity}`,3);if(!o.value)return"";const f=o.value.$title;if(f)return f;const V=r(`models.${v.entity}`);return o.value.id?r("models._.title",{model:V,id:o.value.id}):r("models._.title.new",{model:V})}),W=e.computed(()=>{var v,f;return i.icon?i.icon:((f=(v=i.repo.use)==null?void 0:v.meta)==null?void 0:f.icon)||null}),g=e.computed(()=>({panel:o,list:e.unref(m),items:e.unref(m).items,value:o.value}));return(v,f)=>(e.openBlock(),e.createBlock(O,{name:i.name,title:z.value,icon:W.value,state:m.value.state,tabbed:i.tabbed},{"append-title":e.withCtx(()=>{var V;return[e.renderSlot(v.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(g.value))),e.unref(o).view.startsWith("list.")?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(v.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(g.value))),e.unref(p)?(e.openBlock(),e.createBlock(t.VBtn,{key:0,title:k.value?e.unref(r)("filters.hide"):e.unref(r)("filters.show"),"aria-label":k.value?e.unref(r)("filters.hide"):e.unref(r)("filters.show"),onClick:f[0]||(f[0]=B=>k.value=!k.value),active:k.value},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:e.unref(p).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):(V=e.unref(o).value)!=null&&V.id?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(v.$slots,"nav.item",e.normalizeProps(e.guardReactiveProps(g.value))),e.unref(o).view=="edit"?(e.openBlock(),e.createBlock(t.VMenu,{key:0},{activator:e.withCtx(({props:B})=>[e.createVNode(t.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},B),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(t.VList,null,{default:e.withCtx(()=>[e.renderSlot(v.$slots,"item.actions",e.normalizeProps(e.guardReactiveProps(g.value)))]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtn,{disabled:!m.value.prev,title:e.unref(r)("prev"),"aria-label":e.unref(r)("prev"),onClick:f[1]||(f[1]=e.withModifiers(B=>e.unref(o).value=m.value.prev,["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(t.VBtn,{disabled:!m.value.next,title:e.unref(r)("next"),"aria-label":e.unref(r)("next"),onClick:f[2]||(f[2]=e.withModifiers(B=>e.unref(o).value=m.value.next,["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(o).view,"onUpdate:modelValue":f[4]||(f[4]=B=>e.unref(o).view=B),density:"compact",variant:"tonal"},{default:e.withCtx(()=>{var B;return[e.createVNode(t.VBtn,{value:"list.table",title:e.unref(r)("panels.nav.table"),"aria-label":e.unref(r)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[7]||(f[7]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(n)["views.list.cards"]?(e.openBlock(),e.createBlock(t.VBtn,{key:0,value:"list.cards",title:e.unref(r)("panels.nav.cards"),"aria-label":e.unref(r)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[8]||(f[8]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(n)["views.list.kanban"]?(e.openBlock(),e.createBlock(t.VBtn,{key:1,value:"list.kanban",title:e.unref(r)("panels.nav.kanban"),"aria-label":e.unref(r)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[9]||(f[9]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(n)["views.add"]?(e.openBlock(),e.createBlock(t.VBtn,{key:2,value:"add",onClick:f[3]||(f[3]=e.withModifiers(b=>h(),["stop"])),title:e.unref(r)("panels.nav.add"),"aria-label":e.unref(r)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[10]||(f[10]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(n)["views.edit"]||e.unref(c)?(e.openBlock(),e.createBlock(t.VBtn,{key:3,value:"edit",disabled:!((B=e.unref(o).value)!=null&&B.id),title:e.unref(r)("panels.nav.edit"),"aria-label":e.unref(r)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[11]||(f[11]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(v.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(g.value)))]}),_:3},8,["modelValue"])]}),default:e.withCtx(()=>[e.withDirectives(e.createVNode(N,{ref_key:"filters",ref:p,list:m.value,search:i.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(V=>[e.renderSlot(v.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(V)))]),_:3},8,["list","search"]),[[e.vShow,e.unref(o).view.startsWith("list.")&&k.value]]),e.createVNode(t.VWindow,{modelValue:e.unref(o).view,"onUpdate:modelValue":f[6]||(f[6]=V=>e.unref(o).view=V)},{default:e.withCtx(()=>[e.unref(n)["views.list.table"]?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(t.VWindowItem,{key:0,value:"list.table"},{default:e.withCtx(()=>[e.createVNode($,{list:m.value,headers:u.headers,edit:""},e.createSlots({_:2},[e.renderList(e.unref(s),(V,B)=>({name:B,fn:e.withCtx(b=>[e.renderSlot(v.$slots,B,e.normalizeProps(e.guardReactiveProps(b)))])}))]),1032,["list","headers"])]),_:3})),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(V,B)=>(e.openBlock(),e.createBlock(t.VWindowItem,{value:"list."+V},{default:e.withCtx(()=>[e.renderSlot(v.$slots,B,e.mergeProps({ref_for:!0},g.value))]),_:2},1032,["value"]))),256)),e.unref(n)["views.edit"]||e.unref(c)?(e.openBlock(),e.createBlock(t.VWindowItem,{key:1,value:"edit"},{default:e.withCtx(()=>[e.createVNode(_,{value:e.unref(o).value,"onUpdate:value":f[5]||(f[5]=V=>e.unref(o).value=V)},e.createSlots({_:2},[e.renderList(e.unref(c),(V,B)=>({name:V,fn:e.withCtx(b=>[e.renderSlot(v.$slots,B,e.normalizeProps(e.guardReactiveProps(b)))])}))]),1032,["value"])]),_:3})):e.createCommentVNode("",!0),e.unref(n)["views.add"]?(e.openBlock(),e.createBlock(t.VWindowItem,{key:2,value:"add"},{default:e.withCtx(()=>[e.renderSlot(v.$slots,"views.add",e.mergeProps(g.value,{saved:V=>R(V)}))]),_:3})):e.createCommentVNode("",!0)]),_:3},8,["modelValue"])]),_:3},8,["name","title","icon","state","tabbed"]))}}),D={__name:"OxPanelNav",props:t.panelNavProps,setup(u,{expose:r}){const n=u,l=e.inject("panel"),s=e.computed(()=>!n.auto||l.name==n.name),c=e.computed(()=>{const i=l.name==n.name&&l.edited?"*":"";return n.title+i});return r({title:c,name:n.name}),(i,a)=>s.value?(e.openBlock(),e.createBlock(t.VListItem,{key:0,active:e.unref(l).name==n.name,"prepend-icon":n.icon,title:n.title,onClick:a[0]||(a[0]=e.withModifiers(o=>e.unref(l).reset(n.name,n.data,n),["stop"]))},null,8,["active","prepend-icon","title"])):e.createCommentVNode("",!0)}},Y=Object.freeze(Object.defineProperty({__proto__:null,OxAction:C,OxActionModelDelete:I,OxActions:E,OxApp:A,OxComponent:L,OxFieldDetails:y,OxListFilters:N,OxListKanban:F,OxListTable:$,OxLogin:j,OxModelEdit:_,OxModelPanel:M,OxPanel:O,OxPanelNav:D,OxPanelSheet:x,OxStateAlert:S,OxValidationBtn:P},Symbol.toStringTag,{value:"Module"}));exports._sfc_main=C;exports._sfc_main$1=I;exports._sfc_main$10=M;exports._sfc_main$11=O;exports._sfc_main$12=x;exports._sfc_main$13=D;exports._sfc_main$14=_;exports._sfc_main$15=S;exports._sfc_main$16=P;exports._sfc_main$2=E;exports._sfc_main$3=A;exports._sfc_main$4=L;exports._sfc_main$5=y;exports._sfc_main$6=N;exports._sfc_main$7=F;exports._sfc_main$8=$;exports._sfc_main$9=j;exports.components=Y;
//# sourceMappingURL=index-9LoTsTBT.cjs.map
