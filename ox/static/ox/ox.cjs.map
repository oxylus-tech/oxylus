{"version":3,"file":"ox.cjs","sources":["../../../assets/ox/src/composables/panel.ts","../../../assets/ox/node_modules/@pinia-orm/axios/dist/index.mjs","../../../assets/ox/src/composables/models.ts","../../../assets/ox/src/composables/app.ts","../../../assets/ox/src/composables/actions.ts","../../../assets/ox/src/composables/edit.ts","../../../assets/ox/node_modules/vuetify/lib/composables/date/adapters/vuetify.mjs","../../../assets/ox/node_modules/vuetify/lib/composables/date/date.mjs","../../../assets/ox/node_modules/vuetify/lib/framework.mjs","../../../assets/ox/node_modules/vuetify/lib/blueprints/md3.mjs","../../../assets/ox/src/composables/i18n.ts","../../../assets/ox/src/composables/init.ts","../../../assets/ox/src/composables/api.ts","../../../assets/ox/src/composables/list.ts","../../../assets/ox/src/composables/model_panel.ts","../../../assets/ox/src/composables/index.ts"],"sourcesContent":["import { computed, provide, reactive, watch } from 'vue'\nimport { assignNonEmpty } from '../utils'\nimport type { ComputedRef, Reactive } from 'vue'\nimport type { Composer } from 'vue-i18n'\nimport type {IObject} from '../utils/index.ts'\nimport {t, tKeys} from '../composables'\n\n\nexport interface IPanelInfo {\n    /**\n     * Panel's name\n     */\n    name: string\n    /**\n     * The view title displayed to user.\n     */\n    title?: string\n    /**\n     * The view's icon displayed to user.\n     */\n    icon?: string\n}\n\n/**\n * {@link Panel} base interface.\n */\nexport interface IPanel extends IPanelInfo {\n    /**\n     * Current view's name.\n     */\n    view?: string\n    /**\n     * Current value or model instance displayed by the view.\n     */\n    value?: any\n    /**\n     * Default view. It is set when panel name changes to the\n     * provided view.\n     */\n    index?: string\n}\n\n/**\n * Target a panel and its views.\n *\n * A path can take the following formats:\n * - `panel_name.view_name`: an absolute path.\n * - `panel_name`: default view of this panel.\n * - `.view_name`: a view in the current panel.\n * - ``: an empty string -> default app view\n *\n * Note: panel names CAN NOT contains dots, but view names can. This is in\n * order to allow namespacing views, such as `detail.edit`, or `list.kanban`.\n */\nexport interface IPanelTarget {\n    /**\n     * Path to target panel and view\n     */\n    path: string\n    /**\n     * Page location. If it is different from the current page,\n     * page will be reloaded on {@link Panel.show}.\n     */\n    href?: string\n    /**\n     * Value attached to the view.\n     */\n    value?: any\n    /**\n     * If true, don't check and ask for user confirmation when there\n     * are element edited and not saved.\n     */\n    force?: boolean\n}\n\n/**\n * Component properties used by OxPanel\n */\nexport interface IPanelProps extends IPanelInfo {\n    /**\n     * When provided, will display an alert whenever state is not none,\n     * using `OxStateAlert`.\n     */\n    state?: state,\n}\n\n/**\n * Component properties used by OxPanelSheet\n */\nexport interface IPanelSheetProps extends IPanelInfo {\n    /**\n     * Url to help (user manual)\n     */\n    help?: string\n}\n\n/**\n * Component properties used by OxPanelNav\n */\nexport type IPanelNavProps = IPanelInfo & IPanelTarget & {\n    /**\n     * Only display the navigation item when panel is active.\n     */\n    auto: boolean\n}\n\n/**\n * Reactive {@link Panel}.\n */\nexport interface IRPanel extends Reactive<Panel> {}\n\n\n/**\n * This class is used to manage application's panels and views displayed to user.\n *\n * This class only contains information related to the current view\n * shown to the user. It is owned by an {@link AppContext} and provided\n * to panel components in order to handle:\n *\n * - the current view being displayed, including title, icons, permissions\n * - the views being edited.\n * - changing views and pages and prevent user to accidentaly loose edition being made on current value.\n *\n * @example\n *\n * panel = inject('panel')\n * // this change current view using relative path. View is named: `detail.view`.\n * panel.reset('.detail.edit', item)\n */\nexport class Panel {\n    view: string = 'list.table'\n    index: string = 'list.table'\n    confirm: string = \"There are unsaved changes on the current page. Are you sure to proceed?\"\n\n    static reactive(options: IPanel): IRPanel {\n        return reactive(new this(options)) as IRPanel\n    }\n\n    constructor(options: Panel) {\n        assignNonEmpty(this, options)\n    }\n\n    /**\n     * Wether there are still edited items on current view.\n     */\n    get edited(): boolean { return !!this.editions?.size }\n\n    /**\n     * Set or remove an edition by name.\n     */\n    setEdition(name: string, edited: boolean) {\n        if(edited) this.editions.add(name)\n        else this.editions.delete(name)\n    }\n\n    /**\n     * Change the current panel and view.\n     *\n     * @param path - view's path.\n     * @param value - value or model instance associated with the view\n     * @param options - view's informations.\n     * @param reset - if provided, {@link Panel.reset} with these options\n     */\n    show({path=\"\", value=null, force=false, href=\"\"}: IPanelTarget ={}, reset: IPanel|null = null) {\n        if(!this.askConfirmation(force))\n            return\n\n        if(href && window.location.pathname != href) {\n            window.location.href = `${href}?panel=${path}`\n            return\n        }\n\n        if(reset)\n            this.reset(reset)\n\n        const [name, view] = this.splitPath(path)\n        if(name)\n            this.name = name\n        this.view = view || this.index\n        this.value = value\n        this.editions = new Set()\n    }\n\n    /**\n     * Reset current panel informations.\n     *\n     * @param options - update those informations;\n     * @param name - if provided, only update information if current panel name is this one.\n     */\n    reset(options: IPanel, name: string|null=null) {\n        if(!name || name == this.name)\n            Object.assign(this, options)\n    }\n\n    /**\n     * Ask user for confirmation if there is unsaved changes (aka editions).\n     * @return true if we can discard changes.\n     */\n    askConfirmation(force: boolean = false) {\n        if(force || !this.edited)\n            return true\n\n        return confirm(this.confirm)\n    }\n\n    protected splitPath(path: string): string[] {\n        if(!path)\n            return [\"\", \"\"]\n        const idx = path.indexOf('.')\n        if(idx < 0)\n            return [path, '']\n        return [path.substring(0, idx), path.substring(idx+1)]\n    }\n\n    /**\n     * Return panel's title based on current view and value.\n     *\n     * @param t - vue-i18n composer.\n     * @return a string with the title or empty if none is suitable.\n     */\n    getTitle(): string {\n        const model = this.value?.constructor\n        if(model instanceof Model) {\n            // many items\n            if(this.view?.startsWith('list.'))\n                return t(tKeys(model), 3)\n\n            if(this.value) {\n                if(this.value.title)\n                    return this.value.title\n\n                const name = t(tKeys(model))\n                return this.value.id\n                    ? t(`models._.title`, {model: name, id: this.value.id})\n                    : t(`models._.title.new`, {model: name})\n            }\n        }\n        return ''\n    }\n}\nexport interface Panel extends IPanel {\n    /**\n     * Set of editions being made in current view. It is reset\n     * on view change.\n     */\n    editions?: Set<string>\n    /**\n     * User confirmation message displayed when {@link Panel.show} is\n     * called there are still changes in the current view.\n     */\n    confirm?: string\n}\n\n\n// TODO\n/*\nexport function usePanel(path, value, props: IObject): IRPanel {\n    const panel = Panel.reactive(props)\n    provide('panel', panel)\n    return { panel }\n}*/\n\n\nexport function useModelPanelProps({name=\"\", relations=[], headers=[]}={}) : IObject {\n    return {\n        name: {type: String, default: name},\n        tabbed: {type: Boolean, default: false},\n        relations: {type: Array, default: () => relations},\n        headers: {type: Array, default: () => [\n            ...headers, {key: 'actions', title: 'Actions'}\n        ]},\n    }\n}\n","import { Repository, config, useRepo, definePiniaOrmPlugin } from 'pinia-orm';\nimport { getActivePinia } from 'pinia';\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass Response {\n  /**\n   * Create a new response instance.\n   */\n  constructor(repository, config, response) {\n    /**\n     * The repository that called the request.\n     */\n    __publicField$2(this, \"repository\");\n    /**\n     * The request configuration.\n     */\n    __publicField$2(this, \"config\");\n    /**\n     * The axios response instance.\n     */\n    __publicField$2(this, \"response\");\n    /**\n     * Entities created by Pinia ORM.\n     */\n    __publicField$2(this, \"entities\", null);\n    /**\n     * Whether if response data is saved to the store or not.\n     */\n    __publicField$2(this, \"isSaved\", false);\n    this.repository = repository;\n    this.config = config;\n    this.response = response;\n  }\n  /**\n   * Save response data to the store.\n   */\n  async save() {\n    const data = this.getDataFromResponse();\n    if (!this.validateData(data)) {\n      console.warn(\n        \"[Pinia ORM Axios] The response data could not be saved to the store because it is not an object or an array. You might want to use `dataTransformer` option to handle non-array/object response before saving it to the store.\"\n      );\n      return;\n    }\n    let method = this.config.persistBy || \"save\";\n    if (!this.validatePersistAction(method)) {\n      console.warn(\n        '[Pinia ORM Axios] The \"persistBy\" option configured is not a recognized value. Response data will be persisted by the default `save` method.'\n      );\n      method = \"save\";\n    }\n    const result = await this.repository[method](data);\n    this.entities = Array.isArray(result) ? result : [result];\n    this.isSaved = true;\n  }\n  /**\n   * Delete the entity record where the `delete` option is configured.\n   */\n  async delete() {\n    if (this.config.delete === void 0) {\n      throw new Error(\n        \"[Pinia ORM Axios] Could not delete records because the `delete` option is not set.\"\n      );\n    }\n    await this.repository.query().destroy(this.config.delete);\n  }\n  /**\n   * Get the response data from the axios response object. If a `dataTransformer`\n   * option is configured, it will be applied to the response object. If the\n   * `dataKey` option is configured, it will return the data from the given\n   * property within the response body.\n   */\n  getDataFromResponse() {\n    if (this.config.dataTransformer) {\n      return this.config.dataTransformer(this.response);\n    }\n    if (this.config.dataKey) {\n      return this.response.data[this.config.dataKey];\n    }\n    return this.response.data;\n  }\n  /**\n   * Get persist options if any set in config.\n   */\n  // protected getPersistOptions (): PersistOptions | undefined {\n  //   const persistOptions = this.config.persistOptions\n  //\n  //   if (!persistOptions || typeof persistOptions !== 'object') {\n  //     return\n  //   }\n  //\n  //   return Object.keys(persistOptions)\n  //     .filter(this.validatePersistAction) // Filter to avoid polluting the payload.\n  //     .reduce((carry, key) => {\n  //       carry[key] = persistOptions[key]\n  //       return carry\n  //     }, {} as PersistOptions)\n  // }\n  /**\n   * Validate the given data to ensure the Pinia ORM persist methods accept it.\n   */\n  validateData(data) {\n    return data !== null && typeof data === \"object\";\n  }\n  /**\n   * Validate the given string as to ensure it correlates with the available\n   * Pinia ORM persist methods.\n   */\n  validatePersistAction(action) {\n    return [\"save\", \"insert\"].includes(action);\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass Request {\n  /**\n   * Create a new api instance.\n   */\n  constructor(repository) {\n    /**\n     * The repository class.\n     */\n    __publicField$1(this, \"repository\");\n    /**\n     * The default config.\n     */\n    __publicField$1(this, \"config\", {\n      save: true\n    });\n    this.repository = repository;\n    this.registerActions();\n  }\n  /**\n   * Get the axios client.\n   */\n  get axios() {\n    if (!this.repository.axios) {\n      throw new Error(\n        \"[Pinia ORM Axios] The axios instance is not registered. Please register the axios instance to the repository.\"\n      );\n    }\n    return this.repository.axios;\n  }\n  /**\n   * Register actions from the repository config.\n   */\n  registerActions() {\n    const actions = { ...this.repository.config.axiosApi?.actions, ...this.repository.getModel().$config()?.axiosApi?.actions };\n    if (!actions) {\n      return;\n    }\n    for (const name in actions) {\n      const action = actions[name];\n      typeof action === \"function\" ? this.registerFunctionAction(name, action) : this.registerObjectAction(name, action);\n    }\n  }\n  /**\n   * Register the given object action.\n   */\n  registerObjectAction(name, action) {\n    this[name] = (config) => {\n      return this.request({ ...action, ...config });\n    };\n  }\n  /**\n   * Register the given function action.\n   */\n  registerFunctionAction(name, action) {\n    this[name] = action.bind(this);\n  }\n  /**\n   * Perform a get request.\n   */\n  get(url, config = {}) {\n    return this.request({ method: \"get\", url, ...config });\n  }\n  /**\n   * Perform a post request.\n   */\n  post(url, data = {}, config = {}) {\n    return this.request({ method: \"post\", url, data, ...config });\n  }\n  /**\n   * Perform a put request.\n   */\n  put(url, data = {}, config = {}) {\n    return this.request({ method: \"put\", url, data, ...config });\n  }\n  /**\n   * Perform a patch request.\n   */\n  patch(url, data = {}, config = {}) {\n    return this.request({ method: \"patch\", url, data, ...config });\n  }\n  /**\n   * Perform a delete request.\n   */\n  delete(url, config = {}) {\n    return this.request({ method: \"delete\", url, ...config });\n  }\n  /**\n   * Perform an api request.\n   */\n  async request(config) {\n    const requestConfig = this.createConfig(config);\n    const axiosResponse = await this.axios.request(requestConfig);\n    return this.createResponse(axiosResponse, requestConfig);\n  }\n  /**\n   * Create a new config by merging the global config, the repository config,\n   * and the given config.\n   */\n  createConfig(config) {\n    return {\n      ...this.config,\n      ...this.repository.globalApiConfig,\n      ...this.repository.apiConfig,\n      ...config\n    };\n  }\n  /**\n   * Create a new response instance by applying a few initialization processes.\n   * For example, it saves response data if `save` option id set to `true`.\n   */\n  async createResponse(axiosResponse, config) {\n    const response = new Response(this.repository, config, axiosResponse);\n    if (config.delete !== void 0) {\n      await response.delete();\n      return response;\n    }\n    config.save && await response.save();\n    return response;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AxiosRepository extends Repository {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"axios\", config?.axiosApi?.axios || null);\n    __publicField(this, \"globalApiConfig\", config?.axiosApi || {});\n    __publicField(this, \"apiConfig\", {});\n  }\n  api() {\n    return useAxiosApi(this);\n  }\n  setAxios(axios) {\n    this.axios = axios;\n    return this;\n  }\n}\n\nfunction useAxiosApi(repository) {\n  return new Request(repository);\n}\n\nfunction useAxiosRepo(model) {\n  const pinia = getActivePinia();\n  AxiosRepository.useModel = model;\n  return useRepo(AxiosRepository, pinia);\n}\n\nfunction createPiniaOrmAxios(axiosConfig) {\n  return definePiniaOrmPlugin((context) => {\n    context.config.axiosApi = axiosConfig;\n    return context;\n  });\n}\nconst piniaOrmPluginAxios = createPiniaOrmAxios();\n\nexport { AxiosRepository, Request, Response, createPiniaOrmAxios, piniaOrmPluginAxios, useAxiosApi, useAxiosRepo };\n","import { provide, computed, unref } from 'vue'\nimport { getActivePinia } from 'pinia'\nimport { useRepo } from 'pinia-orm'\nimport { useAxiosRepo } from '@pinia-orm/axios'\nimport type {Ref} from 'vue'\nimport type {Repository} from 'pinia-orm'\n\nimport { Model, User, Permissions } from '../models'\nimport type {Repos, IPermissionItem} from '../models'\n\n\nexport type Models = (typeof Model)[] | {[name: string]: (typeof Model)}\n\n/**\n * Use provided pinia-orm models, returning an object with:\n * - repos: pinia-orm api repositories as dict by entity\n * - models: pinia-orm models\n *\n * `provide()` those values\n */\nexport function useModels(models: Models, defaults: boolean = true) {\n    const repos: Repos = {}\n\n    if(!Array.isArray(models))\n       models = Object.values(models)\n\n    if(defaults && !(models as (typeof Model)[]).includes(User))\n       models.push(User)\n\n    for(const model of models)\n        if(model && model.entity) {\n            if(model.entity in repos)\n                continue\n\n            // there might be a bug here, without useRepo, axios is\n            // null on repositories\n            useRepo(model)\n            repos[model.entity] = useAxiosRepo(model) as Repository\n        }\n\n    provide(\"models\", models)\n    provide(\"repos\", repos)\n    return { models, repos, }\n}\n\n\nexport function usePermissionsProps() {\n    return {\n        permissions: [String, Function, Object, Array],\n    }\n}\n\n\nexport function usePermissions(user: User|Ref<User>, perms: IPermissionItem[], value: Model) {\n    const permissions = perms instanceof Permissions ? perms : new Permissions(perms)\n    const allowed = computed(() => permissions.can(unref(user), unref(value)))\n    return { permissions, allowed }\n}\n","import {computed, reactive, provide} from 'vue'\nimport type {ComputedRef, Reactive} from 'vue'\n\nimport {User, Model} from '../models'\nimport type {Repos} from '../models'\nimport { Panel } from './panel'\nimport { useModels } from './models'\nimport { State } from '../utils'\nimport type {IObject} from '../utils'\n\n\n/**\n * Interface describing application data.\n *\n * Application data is initial data passed down to application from\n * Django generated page.\n */\nexport interface IAppData extends IObject {\n    panel: string\n    user: IObject\n}\n\n/**\n * This provide configuration to {@link AppContext}.\n */\nexport interface IApp {\n    /**\n     * Root API url\n     */\n    apiUrl?: string\n    /**\n     * Id of `<script>` element containing initial application data.\n     */\n    dataEl?: string\n    /**\n     * Models used by application.\n     */\n    models?: (typeof Model)[]\n    /**\n     * Extra application data.\n     */\n    data?: IAppData\n}\n\n\n/**\n * This class provides context for Oxylus application.\n *\n * Which is:\n * - initial data: this is loaded from `<script>` HTML object.\n * - models: it will create adequate `pinia-orm/axios` repositories for them.\n * - panel: current Panel information.\n *\n * The context is provided to Vue components in order to allow them\n * to access global information, such as current user or Panel.\n */\nexport class AppContext {\n    static reactive(opts: IApp) : IRAppContext {\n        const obj = reactive(new this(opts)) as IRAppContext\n        obj.user = computed(() => new User(obj.data?.user || {}))\n        return obj\n    }\n\n    constructor(opts: IApp = {}) {\n        Object.assign(this, opts)\n        this.panel = new Panel()\n        this.state = State.none()\n        this.showState = false\n    }\n\n    /**\n     * Load data into AppData. If no `value` is provided, read it from\n     * source element.\n     */\n    load(value: any = undefined) {\n        if(this.dataEl !== undefined) {\n            if(value === undefined)\n                value = this.readData(this.dataEl)\n            value.dataEl = this.dataEl\n            this.data = value\n            if(this.panel && this.data.panel)\n                this.panel.value = value\n        }\n\n        if(this.models !== undefined) {\n            this.repos = useModels(this.models).repos\n        }\n    }\n\n    /**\n     * Read data from the context of provided source element.\n     * @param {String} el - id of the DOM element.\n     * @return {Object} read data\n     */\n    readData(dataEl: string): any {\n        const el = document.getElementById(dataEl)\n        if(!el)\n            throw `Element {elementId} not found`;\n        return el.innerText ? JSON.parse(el.innerText) : {};\n    }\n}\nexport interface AppContext extends IApp {\n    /**\n     * Models' repositories\n     */\n    repos?: Repos\n    /**\n     * Current panel\n     */\n    panel: Panel\n    /**\n     * Application level state. This can be displayed to user using\n     * {@link AppContext.showState}.\n     *\n     * This element can display errors to users.\n     */\n    state: State\n    /**\n     * Show application state to user.\n     */\n    showState: boolean\n}\nexport interface IRAppContext extends Reactive<AppContext> {\n    user: ComputedRef<User>\n}\n\n\n/**\n * Create a new {@link AppContext} and provide the following values:\n * - `context`: {@link AppContext} object;\n * - `user`: current {@link models.User};\n * - `panel`: application {@link Panel};\n */\nexport function useAppContext(opts: IApp, load: boolean = true): AppContext {\n    const obj = AppContext.reactive(opts)\n    load && obj.dataEl && obj.load()\n\n    provide('context', obj)\n    provide('user', obj.user)\n    provide('panel', obj.panel)\n    // provide('repos')\n    return obj\n}\n","import { ref } from 'vue'\n\nimport type { ComputedRef, Ref } from 'vue'\nimport type { Repository } from 'pinia-orm'\nimport type { Response } from '@pinia-orm/axios'\n\nimport { usePermissions, usePermissionsProps } from './models'\nimport { User, Model } from '../models'\nimport type { IPermissionItem, Permissions } from '../models'\n\n\nexport type ActionRun<M extends Model, R> = (user: User, item: M, ...args: any[]) => Promise<R>\nexport type ActionCompleted<M extends Model, R> = (user: User, item: Model, result: R) => void\n\n\nexport interface ActionProps<M extends Model, R>\n{\n    /**\n     * Value or model instance.\n     */\n    item: M\n    /**\n     * Label text displayed to user.\n     */\n    title: string\n    /**\n     * Displayed icon\n     */\n    icon: string\n    /**\n     * Displayed color\n     */\n    color?: string\n    /**\n     * Display action as a small button\n     */\n    button?: boolean\n    /**\n     * If provided, ask user for a confirmation before executing the action.\n     */\n    confirm?: string\n    /**\n     * Required permission to run the action\n     */\n    permissions: IPermissionItem[]\n    /**\n     * The function to call when action is executed\n     */\n    run: ActionRun<M,R>\n}\n\n\nexport interface IAction<M extends Model, R> {\n    /**\n     * Wether the action is running.\n     */\n    processing: Ref<boolean>\n    /**\n     * List of required {@link Permission} to run the action.\n     */\n    permissions: Permissions\n    /**\n     * Wether the user is allowed to run the action.\n     */\n    allowed: ComputedRef<boolean>\n    /**\n     * Action properties\n     */\n    props: ActionProps<M, R>\n}\n\n/**\n * Action's parameters, `user` MUST be provided.\n */\ntype ActionOpts = {\n    /**\n     * The user running the action.\n     */\n    user: User\n    /**\n     * If provided, emits `completed` once the action has been\n     * executed.\n     */\n    emits?: (event: string, ...opts: any[]) => void\n}\n\n\n/**\n * An `Action` is a function executable by the user.\n *\n * This class provides:\n * - user permissions check: {@link ActionProps.permissions}, {@link Action.permissions}, {@link Action.allowed}\n * - running status: {@link Action.processing}\n * - event emits when action is done: `completed` ({@link ActionCompleted})\n */\nclass Action<M extends Model, R> {\n    constructor(opts: ActionOpts, props: ActionProps<M,R>) {\n        Object.assign(this, opts)\n        this.props = props\n\n        this.processing = ref(false)\n        const perms = usePermissions(this.user, props.permissions, props.item)\n        this.permissions = perms.permissions\n        this.allowed = perms.allowed\n    }\n\n    /**\n     * Execute the action.\n     */\n    async run(...args: any[]): Promise<R> {\n        if(this.props.confirm && !confirm(this.props.confirm))\n            return\n        if(!this.allowed.value)\n            throw Error(`You are not allowed to execute this action`)\n\n        this.processing.value = true\n        let result : R = this.props.run(this.user, this.props.item, ...args)\n        if(result instanceof Promise)\n            result = await result\n\n        this.processing.value = false\n        if(this.emits)\n            this.emits('completed', this.props.item, ...args)\n        return result\n    }\n}\n\ninterface Action<M extends Model, R> extends IAction<M,R> {}\n\n\n/**\n * Create a new {@link Action}.\n *\n * Important note: the object is NOT reactive, although some of its\n * attributes are.\n */\nexport function useAction<M extends Model,R>(opts: ActionOpts, props: ActionProps<M,R>) : Action<M,R> {\n    return new Action(opts, props)\n}\n","import { computed, isRef, ref, reactive, toRaw, watch, unref } from 'vue'\nimport type { ComputedRef, Reactive } from 'vue'\nimport type { Field } from 'pinia-orm'\nimport type { Repository } from '@pinia-orm/axios'\n\nimport { reset, State } from '../utils'\nimport type { IObject } from '../utils'\nimport type { Model } from '../models'\n\n\n/**\n * Editor class interface.\n */\nexport interface IEditor<T> {\n    [index: string]: any\n\n    /**\n     * @property initial - initial value provided to the editor\n     */\n    initial: T\n    /**\n     * @property value - current edited value\n     */\n    value: T\n    /**\n     * @property name - editor name\n     */\n    name?: string\n    /**\n     * @property url - url to send value to\n     */\n    url?: string\n    /**\n    * @property state - current editor state. Set to `State.PROCESSING` when\n    * saving instance.\n    */\n    state: State,\n\n    /**\n     * @property saved - callback to run after object has been saved\n     */\n    saved?: (item: T, editor: IEditor<T>) => void\n}\n\n\n/**\n * Reactive Editor class interface.\n */\nexport interface IREditor<T> extends Reactive<Editor<T>> {\n    /**\n     * Value has been edited.\n     */\n    edited: ComputedRef<boolean>\n    /**\n     * Input data are valid.\n     */\n    valid: ComputedRef<boolean>\n}\n\n/**\n * An Editor handle data edition without changing original value.\n * It provides utilities in order to:\n * - detect if changes have been made;\n * - reset edited values to initial state;\n * - save data to server;\n *\n * Default implementation handles raw Object edition, but not saving data to the server.\n * Note: this might lead to errors due to reactivity when returned from composable.\n */\nexport class Editor<T extends IObject> {\n    static reactive<T>({initial, ...opts}: IEditor<T>) : IREditor<T> {\n        const obj = reactive(new this({initial: unref(initial), ...opts})) as IREditor<T>\n        obj.edited = computed(() => obj.isEdited())\n        // obj.valid = computed(() => obj.isValid())\n        isRef(initial) && watch(initial, (v: T) => obj.reset(v))\n        return obj\n    }\n\n    constructor(attrs: IEditor<T>, _attrs: IObject={})\n    {\n        Object.assign(this, attrs)\n        Object.assign(this, _attrs)\n        if(!this.state)\n            this.state = new State()\n\n        this.value = {} as T\n        this.reset(this.initial)\n    }\n\n    get errors() : any {\n        return this.state.isError && this.state.data || null\n    }\n\n    /**\n    * Reset editor editor data to initial.\n    * When value is provided, reset initial to this value.\n    */\n    reset(initial: T|null = null): void {\n        if(initial !== null)\n            this.initial = initial\n        else\n            initial = this.initial\n        this._reset(initial)\n        this.state.none()\n    }\n\n    _reset(value: T) {\n        reset(this.value, value)\n    }\n\n    isValid(): boolean {\n        return this._isValid()\n    }\n\n    _isValid(): boolean { return true }\n\n\n    isEdited(): boolean {\n        return Object.keys(this.value).some(k => this.value[k] != this.initial[k])\n    }\n\n    /**\n     * Save data. It will `serialize()` value then `send()` it.\n     *\n     * Note: default implementation does not provide `send()` method\n     * and thus will raise an error.\n     *\n     * @param [value] if provided use this instead of `this.value`.\n     * @return state.\n     */\n    async save(value: T|null = null): Promise<State> {\n        this.state.processing()\n        if(!this.isValid())\n            return this.state.error({\n                \"_\": \"Some of the input values are invalid\"\n            })\n        value = this.serialize(value ?? this.value)\n        const state = await this.send(value)\n        if(state.isOk) {\n            this.reset(state.data as T)\n            this.saved?.(this.value, this)\n        }\n        else\n            this.state = state\n        return this.state\n    }\n\n    /**\n     * Serialize value before sending\n     */\n    serialize<R>(value: T): any { return value }\n\n    /**\n     * Send value (not implemented, MUST BE in subclasses).\n     */\n    send<D>(_: D): Promise<State> {\n        throw \"not implemented\"\n    }\n}\nexport interface Editor<T> extends IEditor<T> {}\n\n\n/**\n * ModelEditor interface.\n */\ninterface IModelEditor<T extends Model> extends IEditor<T> {\n    repo: Repository\n    initial: T & {[k: string]: any}\n    value: T & {[k:string]: any}\n}\n\n\n/**\n * Editor sub-class used to edit model instances.\n */\nexport class ModelEditor<T extends Model> extends Editor<T> {\n\n    constructor({repo, url, ...opts} : IModelEditor<T>) {\n        url = url || repo.use?.meta?.url\n        super({url, ...opts}, {repo})\n    }\n\n    get fields() : {[k: string]: Field} {\n        // we need to use a getter since we can't initialize this.fields\n        // before calling super.constructor (which imply this.reset)\n        if(!this._fields)\n            this._fields = Object.keys((this.repo.use as typeof Model).fields())\n        return this._fields\n    }\n\n    _reset(val: T): void {\n        this.value = reactive(new this.initial.constructor())\n        this.fields.reduce((dst, k) => { dst[k] = val[k]; return dst}, this.value)\n    }\n\n    isEdited(): boolean {\n        return this.fields.some((k:string) => this.value[k] != this.initial[k])\n    }\n\n    serialize(value: T): {[k: string]: any} {\n        return value.$toJson(null, {relations: false})\n    }\n\n    send<D>(value: D) : Promise<State> {\n        let [func, url] = [\"post\", this.url]\n        if(value.id) {\n            url = `${url}${value.id}/`\n            func = \"put\"\n        }\n        return this.repo.api()[func](url, value).then(\n            (result: Response) => State.ok(result.entities[0]),\n            (error: Response) => State.error(error.response.data)\n        )\n    }\n}\n\n\n// /**\n//  * Editor subclass used to edit ordered arrays.\n//  */\n// export class ArrayEditor extends Editor {\n//     _reset(val) { this.value = this.bind ? val : [...val] }\n//     isEdited() { this.value != this.initial }\n// }\n//\n//\n// /**\n//  * Editor subclass used to edit unordered arrays.\n//  */\n// export class CollectionEditor extends ArrayEditor {\n//     isEdited() {\n//         return this.value.length != this.initial.length ||\n//             this.value.some(v => this.initial.indexOf(v) == -1)\n//     }\n// }\n\n\n/**\n * This composable create an new Editor and returns it as reactive object.\n * It register the newly created editor when `editors` and `key` are provided.\n */\nexport function editor({editorClass=Editor, emits=null, panel=null, ...opts}) {\n    // provide default saved method\n    if(emits)\n        opts.saved ??= ((item: IObject, editor) => emits('saved', item, editor))\n\n    const editor = editorClass.reactive(opts)\n    if(panel)\n        watch(() => editor.edited, (val) => panel.setEdition(editor.name, val))\n    return editor\n}\n\nexport function modelEditor(opts) {\n    return editor({...opts, editorClass: ModelEditor})\n}\n\n// export function arrayEditor(opts) {\n//     return editor({...opts, editorClass: ArrayEditor})\n// }\n//\n// export function collectionEditor(opts) {\n//     return editor({...opts, editorClass: CollectionEditor})\n// }\n","// Utilities\nimport { createRange, padStart } from \"../../../util/index.mjs\"; // Types\nconst firstDay = {\n  '001': 1,\n  AD: 1,\n  AE: 6,\n  AF: 6,\n  AG: 0,\n  AI: 1,\n  AL: 1,\n  AM: 1,\n  AN: 1,\n  AR: 1,\n  AS: 0,\n  AT: 1,\n  AU: 1,\n  AX: 1,\n  AZ: 1,\n  BA: 1,\n  BD: 0,\n  BE: 1,\n  BG: 1,\n  BH: 6,\n  BM: 1,\n  BN: 1,\n  BR: 0,\n  BS: 0,\n  BT: 0,\n  BW: 0,\n  BY: 1,\n  BZ: 0,\n  CA: 0,\n  CH: 1,\n  CL: 1,\n  CM: 1,\n  CN: 1,\n  CO: 0,\n  CR: 1,\n  CY: 1,\n  CZ: 1,\n  DE: 1,\n  DJ: 6,\n  DK: 1,\n  DM: 0,\n  DO: 0,\n  DZ: 6,\n  EC: 1,\n  EE: 1,\n  EG: 6,\n  ES: 1,\n  ET: 0,\n  FI: 1,\n  FJ: 1,\n  FO: 1,\n  FR: 1,\n  GB: 1,\n  'GB-alt-variant': 0,\n  GE: 1,\n  GF: 1,\n  GP: 1,\n  GR: 1,\n  GT: 0,\n  GU: 0,\n  HK: 0,\n  HN: 0,\n  HR: 1,\n  HU: 1,\n  ID: 0,\n  IE: 1,\n  IL: 0,\n  IN: 0,\n  IQ: 6,\n  IR: 6,\n  IS: 1,\n  IT: 1,\n  JM: 0,\n  JO: 6,\n  JP: 0,\n  KE: 0,\n  KG: 1,\n  KH: 0,\n  KR: 0,\n  KW: 6,\n  KZ: 1,\n  LA: 0,\n  LB: 1,\n  LI: 1,\n  LK: 1,\n  LT: 1,\n  LU: 1,\n  LV: 1,\n  LY: 6,\n  MC: 1,\n  MD: 1,\n  ME: 1,\n  MH: 0,\n  MK: 1,\n  MM: 0,\n  MN: 1,\n  MO: 0,\n  MQ: 1,\n  MT: 0,\n  MV: 5,\n  MX: 0,\n  MY: 1,\n  MZ: 0,\n  NI: 0,\n  NL: 1,\n  NO: 1,\n  NP: 0,\n  NZ: 1,\n  OM: 6,\n  PA: 0,\n  PE: 0,\n  PH: 0,\n  PK: 0,\n  PL: 1,\n  PR: 0,\n  PT: 0,\n  PY: 0,\n  QA: 6,\n  RE: 1,\n  RO: 1,\n  RS: 1,\n  RU: 1,\n  SA: 0,\n  SD: 6,\n  SE: 1,\n  SG: 0,\n  SI: 1,\n  SK: 1,\n  SM: 1,\n  SV: 0,\n  SY: 6,\n  TH: 0,\n  TJ: 1,\n  TM: 1,\n  TR: 1,\n  TT: 0,\n  TW: 0,\n  UA: 1,\n  UM: 0,\n  US: 0,\n  UY: 1,\n  UZ: 1,\n  VA: 1,\n  VE: 0,\n  VI: 0,\n  VN: 1,\n  WS: 0,\n  XK: 1,\n  YE: 0,\n  ZA: 0,\n  ZW: 0\n};\nfunction getWeekArray(date, locale, firstDayOfWeek) {\n  const weeks = [];\n  let currentWeek = [];\n  const firstDayOfMonth = startOfMonth(date);\n  const lastDayOfMonth = endOfMonth(date);\n  const first = firstDayOfWeek ?? firstDay[locale.slice(-2).toUpperCase()] ?? 0;\n  const firstDayWeekIndex = (firstDayOfMonth.getDay() - first + 7) % 7;\n  const lastDayWeekIndex = (lastDayOfMonth.getDay() - first + 7) % 7;\n  for (let i = 0; i < firstDayWeekIndex; i++) {\n    const adjacentDay = new Date(firstDayOfMonth);\n    adjacentDay.setDate(adjacentDay.getDate() - (firstDayWeekIndex - i));\n    currentWeek.push(adjacentDay);\n  }\n  for (let i = 1; i <= lastDayOfMonth.getDate(); i++) {\n    const day = new Date(date.getFullYear(), date.getMonth(), i);\n\n    // Add the day to the current week\n    currentWeek.push(day);\n\n    // If the current week has 7 days, add it to the weeks array and start a new week\n    if (currentWeek.length === 7) {\n      weeks.push(currentWeek);\n      currentWeek = [];\n    }\n  }\n  for (let i = 1; i < 7 - lastDayWeekIndex; i++) {\n    const adjacentDay = new Date(lastDayOfMonth);\n    adjacentDay.setDate(adjacentDay.getDate() + i);\n    currentWeek.push(adjacentDay);\n  }\n  if (currentWeek.length > 0) {\n    weeks.push(currentWeek);\n  }\n  return weeks;\n}\nfunction startOfWeek(date, locale, firstDayOfWeek) {\n  const day = firstDayOfWeek ?? firstDay[locale.slice(-2).toUpperCase()] ?? 0;\n  const d = new Date(date);\n  while (d.getDay() !== day) {\n    d.setDate(d.getDate() - 1);\n  }\n  return d;\n}\nfunction endOfWeek(date, locale) {\n  const d = new Date(date);\n  const lastDay = ((firstDay[locale.slice(-2).toUpperCase()] ?? 0) + 6) % 7;\n  while (d.getDay() !== lastDay) {\n    d.setDate(d.getDate() + 1);\n  }\n  return d;\n}\nfunction startOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth(), 1);\n}\nfunction endOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\nfunction parseLocalDate(value) {\n  const parts = value.split('-').map(Number);\n\n  // new Date() uses local time zone when passing individual date component values\n  return new Date(parts[0], parts[1] - 1, parts[2]);\n}\nconst _YYYMMDD = /^([12]\\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\\d|3[01]))$/;\nfunction date(value) {\n  if (value == null) return new Date();\n  if (value instanceof Date) return value;\n  if (typeof value === 'string') {\n    let parsed;\n    if (_YYYMMDD.test(value)) {\n      return parseLocalDate(value);\n    } else {\n      parsed = Date.parse(value);\n    }\n    if (!isNaN(parsed)) return new Date(parsed);\n  }\n  return null;\n}\nconst sundayJanuarySecond2000 = new Date(2000, 0, 2);\nfunction getWeekdays(locale, firstDayOfWeek) {\n  const daysFromSunday = firstDayOfWeek ?? firstDay[locale.slice(-2).toUpperCase()] ?? 0;\n  return createRange(7).map(i => {\n    const weekday = new Date(sundayJanuarySecond2000);\n    weekday.setDate(sundayJanuarySecond2000.getDate() + daysFromSunday + i);\n    return new Intl.DateTimeFormat(locale, {\n      weekday: 'narrow'\n    }).format(weekday);\n  });\n}\nfunction format(value, formatString, locale, formats) {\n  const newDate = date(value) ?? new Date();\n  const customFormat = formats?.[formatString];\n  if (typeof customFormat === 'function') {\n    return customFormat(newDate, formatString, locale);\n  }\n  let options = {};\n  switch (formatString) {\n    case 'fullDate':\n      options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      break;\n    case 'fullDateWithWeekday':\n      options = {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      break;\n    case 'normalDate':\n      const day = newDate.getDate();\n      const month = new Intl.DateTimeFormat(locale, {\n        month: 'long'\n      }).format(newDate);\n      return `${day} ${month}`;\n    case 'normalDateWithWeekday':\n      options = {\n        weekday: 'short',\n        day: 'numeric',\n        month: 'short'\n      };\n      break;\n    case 'shortDate':\n      options = {\n        month: 'short',\n        day: 'numeric'\n      };\n      break;\n    case 'year':\n      options = {\n        year: 'numeric'\n      };\n      break;\n    case 'month':\n      options = {\n        month: 'long'\n      };\n      break;\n    case 'monthShort':\n      options = {\n        month: 'short'\n      };\n      break;\n    case 'monthAndYear':\n      options = {\n        month: 'long',\n        year: 'numeric'\n      };\n      break;\n    case 'monthAndDate':\n      options = {\n        month: 'long',\n        day: 'numeric'\n      };\n      break;\n    case 'weekday':\n      options = {\n        weekday: 'long'\n      };\n      break;\n    case 'weekdayShort':\n      options = {\n        weekday: 'short'\n      };\n      break;\n    case 'dayOfMonth':\n      return new Intl.NumberFormat(locale).format(newDate.getDate());\n    case 'hours12h':\n      options = {\n        hour: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'hours24h':\n      options = {\n        hour: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'minutes':\n      options = {\n        minute: 'numeric'\n      };\n      break;\n    case 'seconds':\n      options = {\n        second: 'numeric'\n      };\n      break;\n    case 'fullTime':\n      options = {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'fullTime12h':\n      options = {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'fullTime24h':\n      options = {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'fullDateTime':\n      options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'fullDateTime12h':\n      options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'fullDateTime24h':\n      options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'keyboardDate':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      };\n      break;\n    case 'keyboardDateTime':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: false\n      };\n      break;\n    case 'keyboardDateTime12h':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: true\n      };\n      break;\n    case 'keyboardDateTime24h':\n      options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: false\n      };\n      break;\n    default:\n      options = customFormat ?? {\n        timeZone: 'UTC',\n        timeZoneName: 'short'\n      };\n  }\n  return new Intl.DateTimeFormat(locale, options).format(newDate);\n}\nfunction toISO(adapter, value) {\n  const date = adapter.toJsDate(value);\n  const year = date.getFullYear();\n  const month = padStart(String(date.getMonth() + 1), 2, '0');\n  const day = padStart(String(date.getDate()), 2, '0');\n  return `${year}-${month}-${day}`;\n}\nfunction parseISO(value) {\n  const [year, month, day] = value.split('-').map(Number);\n  return new Date(year, month - 1, day);\n}\nfunction addMinutes(date, amount) {\n  const d = new Date(date);\n  d.setMinutes(d.getMinutes() + amount);\n  return d;\n}\nfunction addHours(date, amount) {\n  const d = new Date(date);\n  d.setHours(d.getHours() + amount);\n  return d;\n}\nfunction addDays(date, amount) {\n  const d = new Date(date);\n  d.setDate(d.getDate() + amount);\n  return d;\n}\nfunction addWeeks(date, amount) {\n  const d = new Date(date);\n  d.setDate(d.getDate() + amount * 7);\n  return d;\n}\nfunction addMonths(date, amount) {\n  const d = new Date(date);\n  d.setDate(1);\n  d.setMonth(d.getMonth() + amount);\n  return d;\n}\nfunction getYear(date) {\n  return date.getFullYear();\n}\nfunction getMonth(date) {\n  return date.getMonth();\n}\nfunction getDate(date) {\n  return date.getDate();\n}\nfunction getNextMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 1);\n}\nfunction getPreviousMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() - 1, 1);\n}\nfunction getHours(date) {\n  return date.getHours();\n}\nfunction getMinutes(date) {\n  return date.getMinutes();\n}\nfunction startOfYear(date) {\n  return new Date(date.getFullYear(), 0, 1);\n}\nfunction endOfYear(date) {\n  return new Date(date.getFullYear(), 11, 31);\n}\nfunction isWithinRange(date, range) {\n  return isAfter(date, range[0]) && isBefore(date, range[1]);\n}\nfunction isValid(date) {\n  const d = new Date(date);\n  return d instanceof Date && !isNaN(d.getTime());\n}\nfunction isAfter(date, comparing) {\n  return date.getTime() > comparing.getTime();\n}\nfunction isAfterDay(date, comparing) {\n  return isAfter(startOfDay(date), startOfDay(comparing));\n}\nfunction isBefore(date, comparing) {\n  return date.getTime() < comparing.getTime();\n}\nfunction isEqual(date, comparing) {\n  return date.getTime() === comparing.getTime();\n}\nfunction isSameDay(date, comparing) {\n  return date.getDate() === comparing.getDate() && date.getMonth() === comparing.getMonth() && date.getFullYear() === comparing.getFullYear();\n}\nfunction isSameMonth(date, comparing) {\n  return date.getMonth() === comparing.getMonth() && date.getFullYear() === comparing.getFullYear();\n}\nfunction isSameYear(date, comparing) {\n  return date.getFullYear() === comparing.getFullYear();\n}\nfunction getDiff(date, comparing, unit) {\n  const d = new Date(date);\n  const c = new Date(comparing);\n  switch (unit) {\n    case 'years':\n      return d.getFullYear() - c.getFullYear();\n    case 'quarters':\n      return Math.floor((d.getMonth() - c.getMonth() + (d.getFullYear() - c.getFullYear()) * 12) / 4);\n    case 'months':\n      return d.getMonth() - c.getMonth() + (d.getFullYear() - c.getFullYear()) * 12;\n    case 'weeks':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60 * 60 * 24 * 7));\n    case 'days':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60 * 60 * 24));\n    case 'hours':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60 * 60));\n    case 'minutes':\n      return Math.floor((d.getTime() - c.getTime()) / (1000 * 60));\n    case 'seconds':\n      return Math.floor((d.getTime() - c.getTime()) / 1000);\n    default:\n      {\n        return d.getTime() - c.getTime();\n      }\n  }\n}\nfunction setHours(date, count) {\n  const d = new Date(date);\n  d.setHours(count);\n  return d;\n}\nfunction setMinutes(date, count) {\n  const d = new Date(date);\n  d.setMinutes(count);\n  return d;\n}\nfunction setMonth(date, count) {\n  const d = new Date(date);\n  d.setMonth(count);\n  return d;\n}\nfunction setDate(date, day) {\n  const d = new Date(date);\n  d.setDate(day);\n  return d;\n}\nfunction setYear(date, year) {\n  const d = new Date(date);\n  d.setFullYear(year);\n  return d;\n}\nfunction startOfDay(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0, 0);\n}\nfunction endOfDay(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59, 999);\n}\nexport class VuetifyDateAdapter {\n  constructor(options) {\n    this.locale = options.locale;\n    this.formats = options.formats;\n  }\n  date(value) {\n    return date(value);\n  }\n  toJsDate(date) {\n    return date;\n  }\n  toISO(date) {\n    return toISO(this, date);\n  }\n  parseISO(date) {\n    return parseISO(date);\n  }\n  addMinutes(date, amount) {\n    return addMinutes(date, amount);\n  }\n  addHours(date, amount) {\n    return addHours(date, amount);\n  }\n  addDays(date, amount) {\n    return addDays(date, amount);\n  }\n  addWeeks(date, amount) {\n    return addWeeks(date, amount);\n  }\n  addMonths(date, amount) {\n    return addMonths(date, amount);\n  }\n  getWeekArray(date, firstDayOfWeek) {\n    return getWeekArray(date, this.locale, firstDayOfWeek ? Number(firstDayOfWeek) : undefined);\n  }\n  startOfWeek(date, firstDayOfWeek) {\n    return startOfWeek(date, this.locale, firstDayOfWeek ? Number(firstDayOfWeek) : undefined);\n  }\n  endOfWeek(date) {\n    return endOfWeek(date, this.locale);\n  }\n  startOfMonth(date) {\n    return startOfMonth(date);\n  }\n  endOfMonth(date) {\n    return endOfMonth(date);\n  }\n  format(date, formatString) {\n    return format(date, formatString, this.locale, this.formats);\n  }\n  isEqual(date, comparing) {\n    return isEqual(date, comparing);\n  }\n  isValid(date) {\n    return isValid(date);\n  }\n  isWithinRange(date, range) {\n    return isWithinRange(date, range);\n  }\n  isAfter(date, comparing) {\n    return isAfter(date, comparing);\n  }\n  isAfterDay(date, comparing) {\n    return isAfterDay(date, comparing);\n  }\n  isBefore(date, comparing) {\n    return !isAfter(date, comparing) && !isEqual(date, comparing);\n  }\n  isSameDay(date, comparing) {\n    return isSameDay(date, comparing);\n  }\n  isSameMonth(date, comparing) {\n    return isSameMonth(date, comparing);\n  }\n  isSameYear(date, comparing) {\n    return isSameYear(date, comparing);\n  }\n  setMinutes(date, count) {\n    return setMinutes(date, count);\n  }\n  setHours(date, count) {\n    return setHours(date, count);\n  }\n  setMonth(date, count) {\n    return setMonth(date, count);\n  }\n  setDate(date, day) {\n    return setDate(date, day);\n  }\n  setYear(date, year) {\n    return setYear(date, year);\n  }\n  getDiff(date, comparing, unit) {\n    return getDiff(date, comparing, unit);\n  }\n  getWeekdays(firstDayOfWeek) {\n    return getWeekdays(this.locale, firstDayOfWeek ? Number(firstDayOfWeek) : undefined);\n  }\n  getYear(date) {\n    return getYear(date);\n  }\n  getMonth(date) {\n    return getMonth(date);\n  }\n  getDate(date) {\n    return getDate(date);\n  }\n  getNextMonth(date) {\n    return getNextMonth(date);\n  }\n  getPreviousMonth(date) {\n    return getPreviousMonth(date);\n  }\n  getHours(date) {\n    return getHours(date);\n  }\n  getMinutes(date) {\n    return getMinutes(date);\n  }\n  startOfDay(date) {\n    return startOfDay(date);\n  }\n  endOfDay(date) {\n    return endOfDay(date);\n  }\n  startOfYear(date) {\n    return startOfYear(date);\n  }\n  endOfYear(date) {\n    return endOfYear(date);\n  }\n}\n//# sourceMappingURL=vuetify.mjs.map","// Composables\nimport { useLocale } from \"../locale.mjs\"; // Utilities\nimport { inject, reactive, watch } from 'vue';\nimport { mergeDeep } from \"../../util/index.mjs\"; // Types\n// Adapters\nimport { VuetifyDateAdapter } from \"./adapters/vuetify.mjs\";\n/** Supports module augmentation to specify date adapter types */\nexport let DateModule;\nexport const DateOptionsSymbol = Symbol.for('vuetify:date-options');\nexport const DateAdapterSymbol = Symbol.for('vuetify:date-adapter');\nexport function createDate(options, locale) {\n  const _options = mergeDeep({\n    adapter: VuetifyDateAdapter,\n    locale: {\n      af: 'af-ZA',\n      // ar: '', # not the same value for all variants\n      bg: 'bg-BG',\n      ca: 'ca-ES',\n      ckb: '',\n      cs: 'cs-CZ',\n      de: 'de-DE',\n      el: 'el-GR',\n      en: 'en-US',\n      // es: '', # not the same value for all variants\n      et: 'et-EE',\n      fa: 'fa-IR',\n      fi: 'fi-FI',\n      // fr: '', #not the same value for all variants\n      hr: 'hr-HR',\n      hu: 'hu-HU',\n      he: 'he-IL',\n      id: 'id-ID',\n      it: 'it-IT',\n      ja: 'ja-JP',\n      ko: 'ko-KR',\n      lv: 'lv-LV',\n      lt: 'lt-LT',\n      nl: 'nl-NL',\n      no: 'no-NO',\n      pl: 'pl-PL',\n      pt: 'pt-PT',\n      ro: 'ro-RO',\n      ru: 'ru-RU',\n      sk: 'sk-SK',\n      sl: 'sl-SI',\n      srCyrl: 'sr-SP',\n      srLatn: 'sr-SP',\n      sv: 'sv-SE',\n      th: 'th-TH',\n      tr: 'tr-TR',\n      az: 'az-AZ',\n      uk: 'uk-UA',\n      vi: 'vi-VN',\n      zhHans: 'zh-CN',\n      zhHant: 'zh-TW'\n    }\n  }, options);\n  return {\n    options: _options,\n    instance: createInstance(_options, locale)\n  };\n}\nfunction createInstance(options, locale) {\n  const instance = reactive(typeof options.adapter === 'function'\n  // eslint-disable-next-line new-cap\n  ? new options.adapter({\n    locale: options.locale[locale.current.value] ?? locale.current.value,\n    formats: options.formats\n  }) : options.adapter);\n  watch(locale.current, value => {\n    instance.locale = options.locale[value] ?? value ?? instance.locale;\n  });\n  return instance;\n}\nexport function useDate() {\n  const options = inject(DateOptionsSymbol);\n  if (!options) throw new Error('[Vuetify] Could not find injected date options');\n  const locale = useLocale();\n  return createInstance(options, locale);\n}\n\n// https://stackoverflow.com/questions/274861/how-do-i-calculate-the-week-number-given-a-date/275024#275024\nexport function getWeek(adapter, value) {\n  const date = adapter.toJsDate(value);\n  let year = date.getFullYear();\n  let d1w1 = new Date(year, 0, 1);\n  if (date < d1w1) {\n    year = year - 1;\n    d1w1 = new Date(year, 0, 1);\n  } else {\n    const tv = new Date(year + 1, 0, 1);\n    if (date >= tv) {\n      year = year + 1;\n      d1w1 = tv;\n    }\n  }\n  const diffTime = Math.abs(date.getTime() - d1w1.getTime());\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  return Math.floor(diffDays / 7) + 1;\n}\n//# sourceMappingURL=date.mjs.map","// Composables\nimport { createDate, DateAdapterSymbol, DateOptionsSymbol } from \"./composables/date/date.mjs\";\nimport { createDefaults, DefaultsSymbol } from \"./composables/defaults.mjs\";\nimport { createDisplay, DisplaySymbol } from \"./composables/display.mjs\";\nimport { createGoTo, GoToSymbol } from \"./composables/goto.mjs\";\nimport { createIcons, IconSymbol } from \"./composables/icons.mjs\";\nimport { createLocale, LocaleSymbol } from \"./composables/locale.mjs\";\nimport { createTheme, ThemeSymbol } from \"./composables/theme.mjs\"; // Utilities\nimport { nextTick, reactive } from 'vue';\nimport { defineComponent, getUid, IN_BROWSER, mergeDeep } from \"./util/index.mjs\"; // Types\nexport * from \"./composables/index.mjs\";\nexport function createVuetify() {\n  let vuetify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    blueprint,\n    ...rest\n  } = vuetify;\n  const options = mergeDeep(blueprint, rest);\n  const {\n    aliases = {},\n    components = {},\n    directives = {}\n  } = options;\n  const defaults = createDefaults(options.defaults);\n  const display = createDisplay(options.display, options.ssr);\n  const theme = createTheme(options.theme);\n  const icons = createIcons(options.icons);\n  const locale = createLocale(options.locale);\n  const date = createDate(options.date, locale);\n  const goTo = createGoTo(options.goTo, locale);\n  const install = app => {\n    for (const key in directives) {\n      app.directive(key, directives[key]);\n    }\n    for (const key in components) {\n      app.component(key, components[key]);\n    }\n    for (const key in aliases) {\n      app.component(key, defineComponent({\n        ...aliases[key],\n        name: key,\n        aliasName: aliases[key].name\n      }));\n    }\n    theme.install(app);\n    app.provide(DefaultsSymbol, defaults);\n    app.provide(DisplaySymbol, display);\n    app.provide(ThemeSymbol, theme);\n    app.provide(IconSymbol, icons);\n    app.provide(LocaleSymbol, locale);\n    app.provide(DateOptionsSymbol, date.options);\n    app.provide(DateAdapterSymbol, date.instance);\n    app.provide(GoToSymbol, goTo);\n    if (IN_BROWSER && options.ssr) {\n      if (app.$nuxt) {\n        app.$nuxt.hook('app:suspense:resolve', () => {\n          display.update();\n        });\n      } else {\n        const {\n          mount\n        } = app;\n        app.mount = function () {\n          const vm = mount(...arguments);\n          nextTick(() => display.update());\n          app.mount = mount;\n          return vm;\n        };\n      }\n    }\n    getUid.reset();\n    if (typeof __VUE_OPTIONS_API__ !== 'boolean' || __VUE_OPTIONS_API__) {\n      app.mixin({\n        computed: {\n          $vuetify() {\n            return reactive({\n              defaults: inject.call(this, DefaultsSymbol),\n              display: inject.call(this, DisplaySymbol),\n              theme: inject.call(this, ThemeSymbol),\n              icons: inject.call(this, IconSymbol),\n              locale: inject.call(this, LocaleSymbol),\n              date: inject.call(this, DateAdapterSymbol)\n            });\n          }\n        }\n      });\n    }\n  };\n  return {\n    install,\n    defaults,\n    display,\n    theme,\n    icons,\n    locale,\n    date,\n    goTo\n  };\n}\nexport const version = \"3.7.3\";\ncreateVuetify.version = version;\n\n// Vue's inject() can only be used in setup\nfunction inject(key) {\n  const vm = this.$;\n  const provides = vm.parent?.provides ?? vm.vnode.appContext?.provides;\n  if (provides && key in provides) {\n    return provides[key];\n  }\n}\n//# sourceMappingURL=framework.mjs.map","// Icons\nimport { mdi } from \"../iconsets/mdi.mjs\"; // Types\nexport const md3 = {\n  defaults: {\n    VAppBar: {\n      flat: true\n    },\n    VAutocomplete: {\n      variant: 'filled'\n    },\n    VBanner: {\n      color: 'primary'\n    },\n    VBottomSheet: {\n      contentClass: 'rounded-t-xl overflow-hidden'\n    },\n    VBtn: {\n      color: 'primary',\n      rounded: 'xl'\n    },\n    VBtnGroup: {\n      rounded: 'xl',\n      VBtn: {\n        rounded: null\n      }\n    },\n    VCard: {\n      rounded: 'lg'\n    },\n    VCheckbox: {\n      color: 'secondary',\n      inset: true\n    },\n    VChip: {\n      rounded: 'sm'\n    },\n    VCombobox: {\n      variant: 'filled'\n    },\n    VNavigationDrawer: {\n      // VList: {\n      //   nav: true,\n      //   VListItem: {\n      //     rounded: 'xl',\n      //   },\n      // },\n    },\n    VSelect: {\n      variant: 'filled'\n    },\n    VSlider: {\n      color: 'primary'\n    },\n    VTabs: {\n      color: 'primary'\n    },\n    VTextarea: {\n      variant: 'filled'\n    },\n    VTextField: {\n      variant: 'filled'\n    },\n    VToolbar: {\n      VBtn: {\n        color: null\n      }\n    }\n  },\n  icons: {\n    defaultSet: 'mdi',\n    sets: {\n      mdi\n    }\n  },\n  theme: {\n    themes: {\n      light: {\n        colors: {\n          primary: '#6750a4',\n          secondary: '#b4b0bb',\n          tertiary: '#7d5260',\n          error: '#b3261e',\n          surface: '#fffbfe'\n        }\n      }\n    }\n  }\n};\n//# sourceMappingURL=md3.mjs.map","import { unref, watch } from 'vue'\nimport {useI18n as $useI18n, createI18n as $createI18n} from 'vue-i18n'\nimport type { Composer } from 'vue-i18n'\nimport type { Model } from 'pinia-orm'\n\nimport config from '../config'\nimport {getCookieList} from '../utils'\n\n\n/**\n * Initialize vue-i18n, looking in cookies in order to load the right locale.\n */\nexport function createI18n() {\n    // remove country specific locale as they are not provided by locales\n    // client side\n    const candidates = (getCookieList(\"lang\", \",\") || [\"en\"]).map(\n        x => x.toLowerCase().replace(/[_-](\\w+)/, \"\")\n    )\n    const locale = candidates.find(x => x in config.locales)\n    return $createI18n({\n        legacy: false,\n        fallbackLocale: 'en',\n        locale\n    })\n}\n\n\n/**\n * Main vue-i18n instance used by Oxylus application.\n */\nexport const i18n = createI18n()\n\n\n/**\n * Shortcut to {@link i18n} `t()` function.\n */\nexport function t(...args): string {\n    return i18n.global.t(...args)\n}\n\n\n/**\n * Set locale (load it if required).\n */\nexport function setLocale(i18n: Composer, path: string, locale: string) {\n    if(!(locale in config.locales))\n        throw Error(\"Locale is not provided by config.\")\n\n    i18n.global.locale.value = locale\n    loadLocaleFrom(i18n, path, locale)\n\n    // FIXME: axios.defaults.headers.common['Accept-Language'] support?\n\n    document.querySelector('html').setAttribute('lang', locale)\n}\n\n/**\n * Keeps track of already loaded locales (by path)\n */\nexport const loadedLocalePaths = new Set()\n\n\nexport interface IUseI18n {\n    path?: string,\n    fallback?: boolean,\n}\n\n/**\n * This composable return vue-i18n's `t()` function and watch for\n * locale change in order to dynamically load corresponding message file.\n *\n * @param {String} [options.path] parent path of locales' dir.\n * @param {Boolean} [options.fallback] if true, use fallback locale\n * @param [options.opts] passed down to vue-i18n's ``useI18n``.\n * @return ``t()`` function.\n */\nexport function useI18n({path=\"./\", fallback=true, ...opts}: IUseI18n={}) {\n    const i18n = $useI18n(opts)\n    loadLocale(i18n, {path, fallback})\n    watch(() => i18n.locale, () => loadLocale(i18n, {path, fallback}))\n    return i18n\n}\n\n\n/**\n * Load locale of specific name and add it to composer's messages.\n */\nasync function loadLocaleFrom(i18n: Composer, path: string, locale: string) {\n    const locale2 = locale.replace(/[_-](\\w+)/, '')\n    path = `${path}locales/${locale2}.json`\n    if(loadedLocalePaths.has(path))\n        return\n\n    loadedLocalePaths.add(path)\n\n    const messages = await fetch(path).then(r => r.json())\n    // we don't use setLocaleMessage, because we merge locales\n    // from different apps\n    i18n.messages.value[locale] = {\n        ...i18n.messages.value[locale],\n        ...messages\n    }\n}\n\n\n/**\n * Load locale using provided path and i18n locale composer.\n *\n * @param i18n - vue-i18n locale Composer;\n * @param [options.path] path to parent directory of locale dir;\n * @param [options.fallback] if True, use fallback locale whenever required.\n */\nfunction loadLocale(i18n: Composer, {path=\"./\", fallback=true}={}): Promise<void> {\n    if(!path.startsWith('/'))\n        path = import.meta.resolve(path)\n    if(!path.endsWith('/'))\n        path += '/'\n\n    let promise = loadLocaleFrom(i18n, path, unref(i18n.locale))\n    if(fallback && i18n.fallbackLocale.value)\n        promise = promise.catch((error) => loadLocaleFrom(i18n, path, unref(i18n.fallbackLocale) as string))\n            .catch((error) => {\n                throw Error(\n                    `Could not load locale ${i18n.locale.value} nor its fallback ${i18n.fallbackLocale.value} (path: ${path}). Error: ${error}`\n                )\n            })\n    return promise\n}\n\n\nexport const tKeys = {\n    model: (model: Model) => `models.${model.entity}`,\n    field: (field: string) => `fields.${field}`\n}\n","import { createApp as $createApp, reactive, watch } from 'vue'\nimport { createVuetify as $createVuetify } from 'vuetify'\nimport { md3 } from 'vuetify/blueprints'\n\nimport { createPinia as $createPinia, setActivePinia } from 'pinia'\nimport { createORM } from 'pinia-orm'\nimport { createPiniaOrmAxios } from '@pinia-orm/axios'\nimport axios from 'axios'\n\nimport '../styles/index.scss'\nimport * as vendorComponents from 'ox/vendor'\nimport config from '../config'\nimport {i18n} from './i18n'\n\nimport type {IObject} from '../utils'\n\n\n/**\n * {@link createVuetify} parameters. Theses are passed down to Vuetify's\n * plugin initialization.\n */\nexport interface ICreateVuetifyOpts extends IObject {\n    components?: IObject[]\n}\n\n\n/**\n * Options passed to {@link createApp}.\n */\nexport interface ICreateAppOpts {\n    /**\n     * Vue's `createApp` `props` arguments\n     */\n    props: IObject\n    /**\n     *  Vuetify plugin's parameters (passed to {@link createVuetify})\n     */\n    vuetify: ICreateVuetifyOpts\n    /**\n     * Plugins to add to Vue application.\n     */\n    plugins?: IObject[]\n}\n\nexport interface IInitOpts extends ICreateAppOpts {\n    /**\n     * Vue's App config.\n     */\n    App: IObject\n    /**\n     * Element selector to mount application on.\n     */\n    el: string\n    /**\n     * If True (default), defer application creation after page has been\n     * loaded (on `window.load` event)\n     */\n    onLoad: boolean\n}\n\n\n/**\n * Main entry point to initialize and mount an application.\n *\n * The base `App` config is provided by `ox/components` modules.\n */\nexport function init({App=null, el='#app', onLoad=true, ...options}: IInitOpts={}) {\n    function initApp() {\n        const app = createApp(App, options)\n        const vm = el ? app.mount(el) : null\n        document.body.classList.remove('loading')\n        return {app, el, vm}\n    }\n\n    return new Promise((resolve) => {\n        if(onLoad)\n            return window.addEventListener(\n                'load', () => resolve(initApp())\n            )\n        resolve(initApp())\n    })\n}\n\n\n/**\n * Create Oxerp application (including Vuetify).\n * It also provide app's global property `window` in order to allow components\n * access to this object.\n */\nexport function createApp(app: IObject, {props={}, vuetify={}, plugins=null}: ICreateAppOpts={}) {\n    app = $createApp(app, props)\n    app.config.globalProperties.window = window\n\n    app.use(createVuetify(vuetify))\n    app.use(i18n)\n    plugins && plugins.forEach(plugin => app.use(plugin))\n    return app\n}\n\n\n\n/**\n * Create and return vuetify plugin with default components set.\n * This is called by `createApp`.\n */\nexport function createVuetify({components={}, ...opts}: ICreateVuetifyOpts) {\n    opts.components = {\n        ...vendorComponents,\n        ...components\n    }\n    return $createVuetify({\n        blueprint: md3,\n        theme: {},\n        ...opts\n    })\n}\n\n\n\n/**\n * Create Pinia and PiniaOrm plugins instances.\n * If no `baseURL` is provided, get it from `document.body.dataset.apiUrl`.\n */\nexport function createPinia({axiosConfig=null, baseURL=null}: IObject={}) {\n    if(!baseURL)\n        baseURL = document.body.dataset.apiUrl\n\n    const pinia = $createPinia()\n    const piniaOrm = createORM({})\n    // temp workaround: createORM does not keep provided plugins\n    // using {plugins: ...} later\n    piniaOrm().use(\n        createPiniaOrmAxios({\n            axios,\n            ...(axiosConfig || config.axiosConfig),\n            baseURL,\n        })\n    )\n    setActivePinia(pinia)\n    return pinia.use(piniaOrm)\n}\n","import {Repository} from 'pinia-orm'\nimport {Relation} from 'pinia-orm'\nimport {Response} from '@pinia-orm/axios'\n\nimport {collectAttr} from '../utils'\nimport {Meta, Model} from '../models'\nimport type {Repos} from '../models'\n\n\n/**\n * Interface of {@link Query} class.\n */\nexport interface IQuery<M extends Model> {\n    /**\n     * Model repository used to store results.\n     */\n    repo: Repository<M>\n    /**\n     * Repositories used to store relations.\n     *\n     * This argument may be ignored if there is no need to fetch\n     * relations.\n     */\n    repos: Repos\n}\n\n/**\n * {@link Query.fetch} parameters.\n */\nexport interface IQueryFetch<M extends Model> extends Partial<object> {\n    /**\n     * Fetch from this url\n     */\n    url?: string\n    /**\n     * Fetch items with this id\n     */\n    ids?: number[] | Set<number>\n    /**\n     * Model repository (instead of `Query.repo`'s one)\n     */\n    repo?: Repository<Model>\n    /**\n     * Lookup field for ids (default: `id__in`)\n     */\n    lookup?: string\n    /**\n     * Extra GET parameters.\n     */\n    params?: object\n    /**\n     * Fetch items from thoses relations.\n     */\n    relations?: string[]\n}\n\n/**\n * {@link Query.all} parameters.\n */\nexport interface IQueryAll<M extends Model> extends IQueryFetch<M> {\n    /**\n     * Key of object returned by server that provide url to next items.\n     */\n    nextKey?: string\n    /**\n     * Provide a limit to the number of request to do consecutivelly.\n     * If `-1`, no limit (**use with caution!**).\n     */\n    limit?: number\n}\n\n\n/**\n * This class allows to fetch objects from api, and optionally their\n * relations.\n *\n * It is a utility class built around ``pinia-orm/axios``, using\n * repositories' ``api().get`` method.\n *\n * It allows:\n *\n * - to fetch a model list or all values (using `next` key);\n * - to fetch relations of objects based on fields names;\n *\n * When fetching relations, please ensure that {@link Query.repos} is provided.\n *\n * @example\n * const query = new Query(repos.users, repos)\n *\n * // this fetch User model objects from API, then the related groups.\n * const result = await query.fetch({url: '/users', relations: ['groups']})\n */\nexport class Query<M extends Model> {\n    /**\n    * @param {Repos} [repos] all models repositories\n    * @param {Repository<M>} [repo] the main repository\n    */\n    constructor(repo: string|Repository<M>, repos: Repos|null=null) {\n        if(typeof(repo) == \"string\") {\n            if(!repos)\n                throw Error(`Repository \"${repo}\" is provided as string, but no \"repos\" argument is provided.`)\n            if(!(repo in repos))\n                throw Error(`Repository \"${repo}\" is not present in provided repositories.`)\n            this.repo = repos[repo]\n        }\n        else\n            this.repo = repo\n        this.repos = repos\n    }\n\n    /**\n     * Fetch items from api.\n     *\n     * @param [options.ids] select by ids\n     * @param {Repository} [options.repo] use this repository instead of \\\n     * ``Query.repo``.\n     * @param [options.url] use this url instead of repository's one.\n     * @param [options.lookup] query GET parameters used to get ids.\n     * @param [options.params] extra GET parameters\n     * @param [options.opts] options passed down to ``repo.api.get``\n     */\n    async fetch({ids=null, repo=null, url=null, lookup=\"id__in\", params=undefined, relations=null, ...opts}: IQueryFetch<M> = {}) : Promise<Response> {\n        repo ??= this.repo\n        if(!url)\n            url = repo.use?.meta?.url\n        if(!url)\n            throw Error(\"URL must be provided or Model must provide a `meta: Meta` with `url`\")\n\n        if(ids && lookup !== undefined) {\n            params = {...(params || {})}\n            params[lookup] = [...ids]\n        }\n        const response = await repo.api().get(url, {...opts, params})\n\n        if(relations)\n            response.relations = await this.relations(response.entities, relations, {...opts, params: {}})\n        return response\n    }\n\n    /**\n     * Fetch all items from api.\n     *\n     * @param [options.nextKey] response object key to get next url\n     * @param [options.limit] max count of consecutive requests\n     * @return Response of the first request, whoses ``entities`` has \\\n     * model instances of all requests.\n     */\n    async all({nextKey='next', limit=-1, ...opts} : IQueryAll<M> ={}) : Promise<Response> {\n        const result = await this.fetch(opts)\n\n        let url = result.response.data[nextKey]\n        while(url) {\n            const result2 = await this.fetch({...opts, url})\n            if(result2.entities)\n                result.entities = result.entities !== null ? result.entities.concat(result2.entities) : result2.entities\n            url = result2.response.data[nextKey]\n            if(limit>0) limit--\n            if(!limit) break\n        }\n        return result\n    }\n\n    /**\n     * Fetch related objects for the provided list and field names.\n     *\n     * @param objs - the objects to get related ids from.\n     * @param options.fields - list of field names.\n     * @param options.opts - options to pass down to 'relation'.\n     * @return the resulting entities.\n     */\n    async relations(objs: M[], fields: string[], opts = {}) : Promise<{[s: string]: Response}>\n    {\n        this._ensureRepos(\"relations\")\n        const entities: {[s: string]: Response} = {}\n        const relations = this.repo.use?.fields()\n        if(relations)\n            for(const field of fields) {\n                const relation = relations[field]\n                if(relation instanceof Relation)\n                    entities[field] = await this.relation(objs, relation, opts)\n                else\n                    throw Error(`Field ${field} is not a relation`)\n            }\n        return entities\n    }\n\n    protected _ensureRepos(funcName: string) {\n        if(!this.repos)\n            throw Error(`Query.repos is not provided although it is mandatory to call ${funcName}.`)\n    }\n\n    /**\n     * Fetch related objects for the provided object list and field name.\n     * It uses {@link Query.all} in order to fetch all items.\n     *\n     * @param objs - the objects to get ids from.\n     * @param relation - objects' field or field name.\n     * @param [options.thin] if True, only fetch objects not already present in repos.\n     * @param options.opts - extra options to pass down to `all()`.\n     */\n    async relation(objs: Array<Model>, relation: string | Relation, {thin=false, ...opts} : {thin?: boolean}={}) : Promise<Response> {\n        this._ensureRepos(\"relations\")\n\n        if(typeof relation == \"string\") {\n            const fields = this.repo.use?.fields()\n            if(!fields || !(fields[relation]))\n                throw Error(`Field ${relation} is not a relation on ${this.repo.use} model`)\n            relation = fields[relation] as Relation\n        }\n\n        const key = (<typeof Model>relation.related.constructor).entity\n        const repo2 = this.repos[key]\n        if(!repo2)\n            throw Error(`No repository \"${key}\" found.`)\n\n        let ids = collectAttr(objs, relation.foreignKey)\n        let dbIds = null\n        if(thin) {\n            dbIds = new Set(Object.keys(repo2.pinia.state[key]?.value.data).filter(i => i in ids))\n            const missingIds = ids.difference(dbIds)\n            if(missingIds)\n                ids = missingIds\n        }\n\n        const result = await this.all({ids, repo: repo2, ...opts})\n        if(thin && dbIds) {\n            const dbObjs = repo2.whereId(dbIds).get()\n            result.entities = [...(result.entities || []), ...dbObjs]\n        }\n        return result\n    }\n}\n\nexport interface Query<M extends Model> extends IQuery<M> {}\n\n\n/**\n * This composable return a new query from provided arguments.\n */\nexport function query(repo: Repository, repos: Repos|null=null) {\n    return new Query(repo, repos)\n}\n","import {computed, provide, reactive, unref} from 'vue'\nimport {Repository} from 'pinia-orm'\nimport type {ComputedRef, Reactive, Ref} from 'vue'\n\nimport {Query} from './api'\nimport type {IQueryFetch} from './api'\nimport {Model} from '../models'\nimport type {Repos} from '../models'\nimport {collectAttr, assignNonEmpty, State} from '../utils'\nimport type {IObject} from '../utils'\n\n\nexport type FilterValue = number | string\nexport type Filters = IObject<FilterValue>\n\n\n/**\n * Base interface of an List\n */\nexport interface IList<M extends Model> {\n    /**\n     * {@link Query} used to fetch list items.\n     */\n    query: Query<M>\n    /**\n     * Query's GET parameters used to filter the list.\n     */\n    filters?: Filters\n    relations?: string[]\n    url?: string\n    dataKey: string\n    prevKey: string\n    nextKey: string\n    countKey: string\n}\n\n/**\n * Component properties of an List.\n */\nexport interface IListProps {\n    repo?: Object\n    url: string\n    relations?: string[]\n    dataKey?: string\n    prevKey?: string\n    nextKey?: string\n    countKey?: string\n    showFilters: boolean\n}\n\n\n/**\n * Reactive List interface options\n */\nexport interface IRListOpts<M extends Model> extends IList<M> {\n    value?: any\n}\n\n/**\n * Interface of reactive List\n */\nexport interface IRList<M extends Model> extends Reactive<List<M>> {\n    value?: Ref<M>|M\n    items: ComputedRef<M[]>\n    prev: ComputedRef<M|null>\n    next: ComputedRef<M|null>\n}\n\n\n/**\n * Arguments of {@link List.fetch}. It is passed down to {@link Query.fetch}.\n */\nexport interface IListFetch<M extends Model> extends IQueryFetch<M> {\n    /**\n     * Append items to list. If `false` (default), fetch results will replace\n     * current list items.\n     */\n    append?: boolean\n}\n\n\n/**\n * Handle a list of model instances fetched using Rest Api. It is\n * used in model's panels.\n *\n * It uses {@link Query} object in order to fetch items and relations.\n *\n *\n * @example\n * const value = ref(null)\n * const list = new List.reactive({\n *     query: new Query(repos.users, repos),\n *     relations: ['groups'],\n *     value,\n * })\n *\n * await list.fetch({url: '/users'})\n */\nexport class List<M extends Model> {\n    dataKey = \"results\"\n    nextKey = \"next\"\n    prevKey = \"previous\"\n    countKey = \"count\"\n\n    /**\n     * Return a reactive object version.\n     */\n    static reactive<M extends Model>({value, ...options} : IRListOpts<M>): this {\n        const obj = reactive(new this(options)) as IRList<M>\n        obj.value = value\n        obj.items = computed(() => obj.getItems())\n        obj.prev = computed(() => obj.getSibling(obj.value, -1))\n        obj.next = computed(() => obj.getSibling(obj.value, 1))\n        return obj\n    }\n\n    constructor(options: IList<M>) {\n        assignNonEmpty(this, options)\n        if(!this.filters)\n            this.filters = {}\n        this.state = State.none()\n        this.ids = []\n        this.nextUrl = this.nextUrl ?? null\n        this.prevUrl = this.prevUrl ?? null\n    }\n\n    /**\n     * Items' repository\n     */\n    get repo() { return this.query.repo }\n\n    /**\n     * Items' model.\n     */\n    get model() { return this.repo.use }\n\n    /**\n     * Fetch items from API (using self's {@link Query.fetch}).\n     */\n    async fetch({append=false, ...opts}: IListFetch<M> ={}) {\n        this.state.processing()\n        opts = this.initOptions(opts)\n\n        const result = await this.query.fetch(opts)\n        const ids = [...collectAttr(result.entities, 'id')]\n        this.ids = append ? this.ids.concat(ids) : ids\n\n        this.nextUrl = result.response.data[this.nextKey] || null\n        this.prevUrl = result.response.data[this.prevKey] || null\n        this.count = result.response.data[this.countKey] || this.ids.length\n\n        this.state.none()\n        return result\n    }\n\n    /**\n     * Get siblings of a value for the provided IRList.\n     *\n     * Arguments are the same as {@link List.getSiblingIndex}.\n     *\n     * **Note**: this method is only available on the reactive object.\n     */\n    getSibling<M extends Model>(value: Ref<M>|M, dir: number): M {\n        const idx = this.getSiblingIndex(unref(value), dir)\n        return idx > -1 ? this.items[idx] : null\n    }\n\n\n    /**\n     * Get index of an item's sibling on specified direction.\n     *\n     * @param value - item to look sibling of.\n     * @param dir - direction (next: `1`, previous: `-1`)\n     * @return the index of the sibling or `-1` if none found.\n     */\n    getSiblingIndex(value: M, dir: number=1) : number {\n        // TODO: fetch next or prev\n        const idx: number = this.ids.indexOf(value.id)\n        if(idx == -1)\n            return -1\n\n        const idx2 = idx+dir\n        return (idx > -1 /*&& idx2 > -1*/ && idx2 < (this.count ?? this.ids.length)) ? idx2 : -1\n    }\n\n    /**\n     * Return list items (fetched from repository)\n     * @return an array of items.\n     */\n    getItems() : Array<M> {\n        let items = this.query.repo.whereId(this.ids)\n        if(this.relations)\n            for(const relation of this.relations)\n                items = items.with(relation)\n        return items.get()\n    }\n\n    protected initOptions({filters=null, ...opts}) {\n        if(!opts.relations && this.relations)\n            opts.relations = this.relations\n        if(!opts.dataKey && this.dataKey)\n            opts.dataKey = this.dataKey\n        if(!opts.url && this.url)\n            opts.url = this.url\n\n        if(filters)\n            Object.assign(this.filters, filters)\n\n        if(this.filters)\n            opts.params = {...this.filters, ...(opts.params ?? [])}\n        return opts\n    }\n\n    /**\n     * Fetch next items from API, override `url` using {@link List.nextUrl}.\n     */\n    async fetchNext(opts: IListFetch<M>) {\n        return await this.fetch({...opts, url: this.nextUrl})\n    }\n\n    /**\n     * Fetch previous items from API, override `url` using {@link List.prevUrl}.\n     */\n    async fetchPrev(opts: IListFetch<M>) {\n        return await this.fetch({...opts, url: this.prevUrl})\n    }\n}\n\nexport interface List<M extends Model> extends IList<M> {\n    state: State\n    nextUrl?: string|null\n    prevUrl?: string|null\n    count?: number|null\n    ids: number[]\n}\n\nexport type ListOpts<M extends Model> = IRListOpts<M> & {\n    query?: Query<M>,\n    repos?: Repos,\n    repo?: Repository<M>,\n    value?: any\n}\n\n\n/**\n * Create a new {@link List} and provide it as `list`.\n *\n * If no `query` if provided, create one using `repo` and `repos`.\n */\nexport function useList<M extends Model>({repo=null,  repos=null, query=null, ...opts} : ListOpts<M>) : IRList<M>\n{\n    query ??= new Query(repo, repos)\n    const list = List.reactive<M>({query, ...opts})\n    provide('list', list)\n    return list\n}\n","import {computed, reactive, toRefs} from 'vue'\nimport type {Reactive} from 'vue'\n\nimport {Model} from '../models'\nimport {mapToObject} from '../utils'\nimport {useList} from './list'\nimport {t, tKeys} from './i18n'\n\nimport type {IList, IListProps} from './list'\nimport type {IPanel, IPanelProps} from './panel'\nimport type {Repos} from '../models'\n\nimport {OxList} from 'ox/components'\n\n\n/**\n * Model panel component properties.\n */\nexport type IModelPanelProps = IListProps & IPanelProps & {\n    search: string\n    view: string\n    headers?: string[]\n}\n\n/**\n * Model panel interface.\n */\nexport interface IModelPanel {\n    panel: IPanel\n    repos: Repos\n    props: IModelPanelProps\n    list: IList\n}\n\n/**\n * Reactive model panel interface.\n */\nexport interface IRModelPanel extends Reactive<IModelPanel> {\n    title: ComputedRef<string>,\n    icon: ComputedRef<string>,\n}\n\n\n/**\n * This class handles model panel (used by {@link OxModelPanel}.\n *\n * It is connected to the current {@link Panel}.\n *\n */\nclass ModelPanel {\n    showFilters: boolean = false\n\n    /**\n     * Instanciate and return a reactive model panel.\n     */\n    static reactive<M extends Model>(options: IModelPanel): IRModelPanel<M> {\n        console.log(options)\n        const obj = reactive(new this(options))\n        obj.title = computed(() => obj.getTitle())\n        obj.icon = computed(() => obj.getIcon())\n        return obj\n    }\n\n    constructor(options: IModelPanel) {\n        Object.assign(this, options)\n        if(!this.list)\n            this.list = this.getList()\n        this.showFilters = this.props?.showFilters || false\n    }\n\n    /**\n     * Current model's repository.\n     */\n    get repo() { return this.props.repo }\n\n    /**\n     * Current model.\n     */\n    get model() { return this.repo.use }\n    /**\n     * Current panel's view.\n     */\n    get view() { return this.panel.view }\n\n    getIcon(): string { return this.props?.icon || this.model.meta?.icon || null }\n\n    /**\n     * Return panel's title based on view and current item.\n     */\n    getTitle(): string {\n        const {props, list, panel} = this\n        if(this.props.title)\n            return this.props.title\n\n        const model = this.repo.use\n        if(model) {\n            // many items\n            if(this.view?.startsWith('list.'))\n                return t(tKeys.model(model), 3)\n\n            if(panel.value) {\n                if(panel.value.$title)\n                    return panel.value.$title\n\n                const name = t(tKeys.model(model))\n                return panel.value.id\n                    ? t(`models._.title`, {model: name, id: panel.value.id})\n                    : t(`models._.title.new`, {model: name})\n            }\n        }\n        return ''\n    }\n\n    /**\n     * Get instance of list.\n     */\n    getList() {\n        const listProps = mapToObject(OxList.props, this.props)\n        const {value} = toRefs(this.panel)\n        return useList({...listProps, value, repos: this.repos})\n    }\n\n    /**\n     * Edit a new item.\n     *\n     * @param path - path to edit view.\n     */\n    create(path:string='.detail.add') {\n        this.panel.show({path, value: new this.model()})\n    }\n\n    /**\n     * Called when an item has been created. By default, show edit view.\n     */\n    created(item, path: string=\".detail.edit\") {\n        this.panel.show({path, value: item, force: true})\n        this.list.fetch()\n    }\n}\n\nexport interface ModelPanel extends IModelPanel {\n    showFilters: boolean\n}\n\n\nexport function useModelPanel(options: IModelPanel) : IRModelPanel<M> {\n    return ModelPanel.reactive(options)\n}\n","import { defineAsyncComponent as $defineAsyncComponent } from 'vue'\n\nexport * from './app'\nexport * from './actions'\nexport * from './edit'\nexport * from './init'\nexport * from './i18n'\nexport * from './list'\nexport * from './models'\nexport * from './panel'\nexport * from './model_panel'\nexport * from './api'\n\n\n/**\n * Similar to `defineAsyncComponent` allowing to load a component\n * by name from a provided module url.\n */\nexport function defineAsyncComponent(url: string, name: string) {\n    return $defineAsyncComponent(() => {\n        return import(url).then(module => {\n            if(!name)\n                return module\n            const obj = Object.values(module).filter(y => y.__name == name)[0]\n            return obj\n        })\n    })\n}\n\n\n/**\n * This exception is used in order to display the message to user\n * when it is raised.\n */\nclass UserError extends Error {}\n"],"names":["Panel","options","__publicField","assignNonEmpty","reactive","_a","name","edited","path","value","force","href","reset","view","idx","model","_b","t","tKeys","useModelPanelProps","relations","headers","__defProp$2","__defNormalProp$2","obj","key","__publicField$2","Response","repository","config","response","data","method","result","action","__defProp$1","__defNormalProp$1","__publicField$1","Request","actions","_c","url","requestConfig","axiosResponse","__defProp","__defNormalProp","AxiosRepository","Repository","useAxiosApi","axios","useAxiosRepo","pinia","getActivePinia","useRepo","createPiniaOrmAxios","axiosConfig","definePiniaOrmPlugin","context","useModels","models","defaults","repos","User","provide","usePermissionsProps","usePermissions","user","perms","permissions","Permissions","allowed","computed","unref","AppContext","opts","State","dataEl","el","useAppContext","load","Action","props","ref","args","useAction","Editor","initial","isRef","watch","v","attrs","_attrs","k","state","_","ModelEditor","repo","val","dst","func","error","editor","editorClass","emits","panel","item","modelEditor","firstDay","getWeekArray","date","locale","firstDayOfWeek","weeks","currentWeek","firstDayOfMonth","startOfMonth","lastDayOfMonth","endOfMonth","first","firstDayWeekIndex","lastDayWeekIndex","i","adjacentDay","day","startOfWeek","d","endOfWeek","lastDay","parseLocalDate","parts","_YYYMMDD","parsed","sundayJanuarySecond2000","getWeekdays","daysFromSunday","createRange","weekday","format","formatString","formats","newDate","customFormat","month","toISO","adapter","year","padStart","parseISO","addMinutes","amount","addHours","addDays","addWeeks","addMonths","getYear","getMonth","getDate","getNextMonth","getPreviousMonth","getHours","getMinutes","startOfYear","endOfYear","isWithinRange","range","isAfter","isBefore","isValid","comparing","isAfterDay","startOfDay","isEqual","isSameDay","isSameMonth","isSameYear","getDiff","unit","c","setHours","count","setMinutes","setMonth","setDate","setYear","endOfDay","VuetifyDateAdapter","DateOptionsSymbol","DateAdapterSymbol","createDate","_options","mergeDeep","createInstance","instance","createVuetify","vuetify","blueprint","rest","aliases","components","directives","createDefaults","display","createDisplay","theme","createTheme","icons","createIcons","createLocale","goTo","createGoTo","app","defineComponent","DefaultsSymbol","DisplaySymbol","ThemeSymbol","IconSymbol","LocaleSymbol","GoToSymbol","IN_BROWSER","mount","vm","nextTick","getUid","inject","version","provides","md3","mdi","createI18n","getCookieList","x","$createI18n","i18n","setLocale","loadedLocalePaths","useI18n","fallback","$useI18n","loadLocale","loadLocaleFrom","locale2","messages","r","promise","field","init","App","onLoad","initApp","createApp","resolve","plugins","$createApp","plugin","vendorComponents","$createVuetify","createPinia","baseURL","$createPinia","piniaOrm","createORM","setActivePinia","Query","ids","lookup","params","nextKey","limit","result2","objs","fields","entities","relation","Relation","funcName","thin","repo2","collectAttr","dbIds","missingIds","dbObjs","query","List","append","dir","idx2","items","filters","useList","list","ModelPanel","listProps","mapToObject","OxList","toRefs","useModelPanel","defineAsyncComponent","$defineAsyncComponent","module","y"],"mappings":"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EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,iBAAkB,EAClB,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GA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","x_google_ignoreList":[1,6,7,8,9]}
