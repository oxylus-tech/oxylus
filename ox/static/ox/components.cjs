"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),v=require("ox"),t=require("./VAlert-BQiprWaW.cjs"),g=require("./vue-i18n-Dj9D8z9S.cjs"),B=require("./theme-Bxzsxwfr.cjs"),Z=require("ox/vendor"),P=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{},run:{}},emits:["completed"],setup(o,{emit:u}){const l=o,r=u,a=e.inject("context"),i=v.useAction({user:a.user,emits:r},l);async function d(...n){await i.run(...n)}return(n,m)=>e.unref(i).allowed?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.button?(e.openBlock(),e.createBlock(t.VBtn,{key:0,variant:"text",color:l.color,icon:l.icon,title:l.title,"aria-label":l.title,onClick:e.withModifiers(d,["stop"])},null,8,["color","icon","title","aria-label"])):(e.openBlock(),e.createBlock(t.VListItem,{key:1,title:l.title,"base-color":l.color,"prepend-icon":l.icon,onClick:e.withModifiers(d,["stop"])},null,8,["title","base-color","prepend-icon"]))],64)):e.createCommentVNode("",!0)}}),D=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(o){const{t:u}=g.useI18n(),l=e.inject("panel"),r=e.inject("repos"),a=o;async function i(d,n){return await r[n.constructor.entity].api().delete(n.$url(),{delete:a.item.id})}return(d,n)=>(e.openBlock(),e.createBlock(P,{item:a.item,button:a.button,icon:"mdi-delete",color:"error",title:e.unref(u)("actions.delete"),confirm:e.unref(u)("actions.delete.confirm"),permissions:["delete",(m,s)=>s.id],run:i,onCompleted:n[0]||(n[0]=m=>{var s;return(s=e.unref(l))==null?void 0:s.show()})},null,8,["item","button","title","confirm","permissions"]))}}),_={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(o){e.useSlots();const u=o;return(l,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(l.$slots,"before",e.normalizeProps(e.guardReactiveProps(u))),e.renderSlot(l.$slots,"default",e.normalizeProps(e.guardReactiveProps(u))),e.renderSlot(l.$slots,"after",e.normalizeProps(e.guardReactiveProps(u)))],64))}};function ee(o){const u=e.shallowRef(o());let l=-1;function r(){clearInterval(l)}function a(){r(),e.nextTick(()=>u.value=o())}function i(d){const n=d?getComputedStyle(d):{transitionDuration:.2},m=parseFloat(n.transitionDuration)*1e3||200;if(r(),u.value<=0)return;const s=performance.now();l=window.setInterval(()=>{const c=performance.now()-s+m;u.value=Math.max(o()-c,0),u.value<=0&&r()},m)}return e.onScopeDispose(r),{clear:r,time:u,start:i,reset:a}}const te=B.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...t.makeLocationProps({location:"bottom"}),...t.makePositionProps(),...t.makeRoundedProps(),...t.makeVariantProps(),...B.makeThemeProps(),...B.omit(t.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ne=B.genericComponent()({name:"VSnackbar",props:te(),emits:{"update:modelValue":o=>!0},setup(o,u){let{slots:l}=u;const r=B.useProxiedModel(o,"modelValue"),{positionClasses:a}=t.usePosition(o),{scopeId:i}=t.useScopeId(),{themeClasses:d}=B.provideTheme(o),{colorClasses:n,colorStyles:m,variantClasses:s}=t.useVariant(o),{roundedClasses:c}=t.useRounded(o),p=ee(()=>Number(o.timeout)),V=e.ref(),k=e.ref(),f=e.shallowRef(!1),w=e.shallowRef(0),y=e.ref(),x=e.inject(t.VuetifyLayoutKey,void 0);B.useToggleScope(()=>!!x,()=>{const b=t.useLayout();e.watchEffect(()=>{y.value=b.mainStyles.value})}),e.watch(r,h),e.watch(()=>o.timeout,h),e.onMounted(()=>{r.value&&h()});let T=-1;function h(){p.reset(),window.clearTimeout(T);const b=Number(o.timeout);if(!r.value||b===-1)return;const S=B.refElement(k.value);p.start(S),T=window.setTimeout(()=>{r.value=!1},b)}function q(){p.reset(),window.clearTimeout(T)}function Y(){f.value=!0,q()}function M(){f.value=!1,h()}function H(b){w.value=b.touches[0].clientY}function J(b){Math.abs(w.value-b.changedTouches[0].clientY)>50&&(r.value=!1)}function Q(){f.value&&M()}const X=e.computed(()=>o.location.split(" ").reduce((b,S)=>(b[`v-snackbar--${S}`]=!0,b),{}));return t.useRender(()=>{const b=t.VOverlay.filterProps(o),S=!!(l.default||l.text||o.text);return e.createVNode(t.VOverlay,e.mergeProps({ref:V,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":o.multiLine&&!o.vertical,"v-snackbar--timer":!!o.timer,"v-snackbar--vertical":o.vertical},X.value,a.value,o.class],style:[y.value,o.style]},b,{modelValue:r.value,"onUpdate:modelValue":N=>r.value=N,contentProps:e.mergeProps({class:["v-snackbar__wrapper",d.value,n.value,c.value,s.value],style:[m.value],onPointerenter:Y,onPointerleave:M},b.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:H,onTouchend:J,onAfterLeave:Q},i),{default:()=>{var N,R;return[t.genOverlays(!1,"v-snackbar"),o.timer&&!f.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(t.VProgressLinear,{ref:k,color:typeof o.timer=="string"?o.timer:"info",max:o.timeout,"model-value":p.time.value},null)]),S&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((N=l.text)==null?void 0:N.call(l))??o.text,(R=l.default)==null?void 0:R.call(l)]),l.actions&&e.createVNode(t.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[l.actions({isActive:r})])]})]},activator:l.activator})}),t.forwardRefs({},V)}}),oe={class:"nav-home"},le=["src"];var F;const j=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(F=document.body.dataset)==null?void 0:F.appData},models:{},data:{}},setup(o){const{t:u}=v.useI18n(),l=e.useSlots(),r=o,a=e.reactive({drawer:!0}),i=v.useAppContext(r),d=v.usePanels();return e.watch(()=>[i.state.state,i.state.data],()=>{i.showState=!0}),e.onErrorCaptured((n,m,s)=>{i.state.error(`${n}`)}),(n,m)=>(e.openBlock(),e.createBlock(t.VApp,null,{default:e.withCtx(()=>[e.createVNode(ne,{modelValue:e.unref(i).showState,"onUpdate:modelValue":m[0]||(m[0]=s=>e.unref(i).showState=s),color:e.unref(i).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(t.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(u)("nav.panels"),"aria-label":e.unref(u)("nav.panels"),onClick:m[1]||(m[1]=e.withModifiers(s=>a.drawer=!a.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(l)["app-nav"]&&!a.drawer2?(e.openBlock(),e.createBlock(t.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:m[2]||(m[2]=s=>{a.drawer2=!0,a.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(t.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(t.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"title",{context:e.unref(i)})]),_:3}),e.createVNode(t.VSpacer),m[5]||(m[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(n.$slots,"app-bar-right",{context:e.unref(i)})]),_:3}),e.createVNode(t.VNavigationDrawer,{theme:"dark",modelValue:a.drawer,"onUpdate:modelValue":m[3]||(m[3]=s=>a.drawer=s)},e.createSlots({default:e.withCtx(()=>[e.createElementVNode("a",oe,[n.logo?(e.openBlock(),e.createElementBlock("img",{key:0,src:n.logo,class:"logo"},null,8,le)):e.createCommentVNode("",!0)]),e.renderSlot(n.$slots,"nav-start",{context:e.unref(i)}),e.renderSlot(n.$slots,"nav-list",{context:e.unref(i)})]),_:2},[e.unref(l)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.renderSlot(n.$slots,"nav-end",{context:e.unref(i)})]),key:"0"}:void 0]),1032,["modelValue"]),e.createVNode(t.VMain,null,{default:e.withCtx(()=>[e.renderSlot(n.$slots,"main",{},()=>[e.createVNode(t.VTabsWindow,{modelValue:e.unref(d).panel,"onUpdate:modelValue":m[4]||(m[4]=s=>e.unref(d).panel=s)},{default:e.withCtx(s=>[e.renderSlot(n.$slots,"default",e.mergeProps(s,{context:e.unref(i)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),z={props:{src:String,is:String},setup(o){const u=e.shallowRef(null),l=e.computed(()=>{if(o.is)return o.is;let a=o.src.substring(o.src.lastIndexOf("/")+1);if(a&&(a=a.substring(0,a.indexOf("."))),!a)throw Error("`is` not provided and could not be deducted from `src`.");return a});function r(){u.value=v.defineAsyncComponent(o.src,l.value)}return e.watch(()=>o.src,r),r(),()=>e.h(u.value,o)}},re={class:"password-error"},$={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(o){const u=o;return(l,r)=>u.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.errors,a=>(e.openBlock(),e.createElementBlock("div",re,[e.createVNode(t.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(a),1)]))),256)):e.createCommentVNode("",!0)}},A={__name:"OxListFilters",props:{search:String},setup(o,{expose:u}){const{t:l}=v.useI18n(),r=e.inject("list"),a=o,i=e.computed(()=>{const m=r.filters;return m&&Object.entries(m).some(([s,c])=>!s.startsWith("page")&&!s.startsWith("ordering")&&!!c)}),d=e.computed(()=>i.value?"mdi-filter-check":"mdi-filter-outline");function n(){r.filters={},r.load()}return u({icon:d,hasFilters:i,reset:n}),(m,s)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:s[2]||(s[2]=e.withModifiers(c=>e.unref(r).fetch(),["prevent"])),class:"width-full"},[e.createVNode(t.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:d.value,readonly:""},null,8,["icon"]),a.search&&e.unref(r).filters?(e.openBlock(),e.createBlock(t.VTextField,{key:0,label:e.unref(l)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(r).filters[a.search],"onUpdate:modelValue":s[0]||(s[0]=c=>e.unref(r).filters[a.search]=c),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(m.$slots,"default",{list:e.unref(r),filters:e.unref(r).filters}),e.createVNode(t.VBtn,{onClick:s[1]||(s[1]=e.withModifiers(c=>e.unref(r).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":m.$t("filters.apply"),title:e.unref(l)("filters.apply")},null,8,["aria-label","title"]),i.value?(e.openBlock(),e.createBlock(t.VBtn,{key:1,onClick:e.withModifiers(n,["stop"]),icon:"mdi-backspace","aria-label":e.unref(l)("filters.reset"),title:e.unref(l)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},ae=B.genericComponent()({name:"VSlideGroupItem",props:t.makeGroupItemProps(),emits:{"group:selected":o=>!0},setup(o,u){let{slots:l}=u;const r=t.useGroupItem(o,t.VSlideGroupSymbol);return()=>{var a;return(a=l.default)==null?void 0:a.call(l,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}}),U={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(o,{emit:u}){const l=u,r=e.inject("list"),a=o,i=e.computed(()=>r.items);function d(s){return s=s%a.colors.length,a.colorVariant?a.colors[s]+"-"+a.colorVariant:a.colors[s]}function n(s,c,p){s[p]?!s[p].includes(c)&&s[p].push(c):s[p]=[c]}const m=e.computed(()=>{const s={};if(i.value)for(var c of i.value){const V=c[a.field];if(Array.isArray(V))if(V.length)for(var p of V)n(s,c,p);else n(s,c,null);else n(s,c,V)}return s});return(s,c)=>(e.openBlock(),e.createBlock(t.VSheet,null,{default:e.withCtx(()=>[e.createVNode(t.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.headers,(p,V)=>(e.openBlock(),e.createBlock(ae,{key:p.value},{default:e.withCtx(({selectedClass:k})=>[e.createVNode(t.VCard,{width:"400",class:e.normalizeClass(["ma-3",k]),color:d(V),lines:"two"},{default:e.withCtx(()=>[e.createVNode(t.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p.title),1)]),_:2},1024),e.createVNode(t.VList,{"bg-color":d(V)},{default:e.withCtx(()=>[m.value&&m.value[p.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(m.value[p.value],f=>e.renderSlot(s.$slots,"item",{key:f.id,header:p,item:f},()=>[e.createVNode(t.VListItem,{title:f[a.itemTitle],value:a.itemValue&&f[a.itemValue],onClick:w=>l("click",f)},{append:e.withCtx(()=>[e.renderSlot(s.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},L=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(o){const{t:u}=v.useI18n(),l=e.useSlots(),r=g.filterSlots(l,"item.",{exclude:["item.actions"]}),a=e.inject("panel"),i=e.inject("list"),d=new g.Permissions("change"),n=o,m=e.computed(()=>n.headers.reduce((p,V)=>(p.push(typeof V=="string"?{key:V,title:u(v.tKeys.field(V))}:V),p),[]));function s(p){return i.fetch({filters:{page:p.page,page_size:p.itemsPerPage,ordering:p.sortBy.map(({key:V,order:k})=>k=="asc"?V:`-${V}`)}})}function c(p,V){a.show({view:"detail.edit",value:V})}return(p,V)=>{var k;return e.openBlock(),e.createBlock(t.VDataTableServer,{items:e.unref(i).items,"item-index":"id","items-length":e.unref(i).count||e.unref(i).items.length,loading:(k=e.unref(i).state)==null?void 0:k.isProcessing,headers:m.value,"onUpdate:options":s},e.createSlots({loading:e.withCtx(()=>[e.createVNode(t.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:f})=>[o.edit?(e.openBlock(),e.createBlock(P,{key:0,icon:"mdi-pencil",button:"",title:e.unref(u)("actions.edit"),permissions:e.unref(d),item:f,run:c},null,8,["title","permissions","item"])):e.createCommentVNode("",!0),e.renderSlot(p.$slots,"item.actions",{value:f,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(r),(f,w)=>({name:w,fn:e.withCtx(y=>[e.renderSlot(p.$slots,w,e.normalizeProps(e.guardReactiveProps(y)))])}))]),1032,["items","items-length","loading","headers"])}}}),C={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(o){const u=e.useSlots(),l=o;let r=e.ref(!1);e.watch(()=>l.state.state,d=>{l.delay&&d==g.States.PROCESSING&&(r.value=!1,window.setTimeout(()=>{r.value=!0},5e3))});const a=e.computed(()=>{var d;return((d=l.state)==null?void 0:d.isProcessing)&&(!l.delay||r.value)}),i=e.computed(()=>{var d,n;return(n=(d=l.state)==null?void 0:d.data)==null?void 0:n.messages});return(d,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.state.isNone&&e.unref(u).none?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:o.state,title:o.noneTitle},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"none",{state:o.state})]),_:3},8,["state","title"])):a.value?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:o.state,title:o.processingTitle},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"processing",{state:o.state},()=>[n[0]||(n[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):l.state.isError?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:o.state,title:o.errorTitle},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"error",{state:o.state},()=>[n[1]||(n[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(d.$slots,"error-detail",{state:o.state})]),_:3},8,["state","title"])):l.state.isOk?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:o.state,title:o.okTitle},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"ok",{state:o.state},()=>[n[2]||(n[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),i.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,m=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(m),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"ok-detail",{state:o.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"default",{state:l.state})],64))}},se={class:"text-right"},O={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(o,{emit:u}){const l=u,r=o;return(a,i)=>(e.openBlock(),e.createElementBlock("div",se,[e.createVNode(e.unref(t.VBtn),{color:"error",class:"me-2","prepend-icon":r.resetIcon,onClick:i[0]||(i[0]=d=>l("reset")),disabled:r.disabled},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(r.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),r.state.isSending?(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>i[2]||(i[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:1,color:"primary","prepend-icon":r.validateIcon,onClick:i[1]||(i[1]=d=>l("validate")),disabled:r.disabled||r.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(r.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},ie={key:0},ue={class:"text-right mt-3"},W={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(o,{emit:u}){const l=e.useTemplateRef("password"),r=o,a=e.reactive({username:"",password:""}),i=e.ref(!1),d=e.reactive(new g.State);function n(s=!0){g.reset(a,{username:"",password:""}),s&&d.none()}async function m(){d.processing();try{const s=await fetch(r.url,{method:"POST",headers:g.config$1.axiosConfig.headers,body:JSON.stringify(a)});s.status==200?(a.credentials="",a.password="",d.ok(await s.json()),r.next&&(window.location.href=r.next)):d.error(await s.json())}catch(s){d.ok((s==null?void 0:s.message)||s)}}return(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(C),{state:d},{none:e.withCtx(({state:p})=>c[7]||(c[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:p})=>[r.next?(e.openBlock(),e.createElementBlock("p",ie,[c[8]||(c[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(r.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:p})=>{var V,k;return[e.createVNode($,{errors:(V=p.data)==null?void 0:V.username},null,8,["errors"]),e.createVNode($,{errors:(k=p.data)==null?void 0:k.password},null,8,["errors"])]}),_:1},8,["state"]),d.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTextField,{variant:"underlined",label:"Enter login",modelValue:a.username,"onUpdate:modelValue":c[0]||(c[0]=p=>a.username=p),onKeyup:c[1]||(c[1]=e.withKeys(e.withModifiers(p=>e.unref(l).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(t.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:a.password,"onUpdate:modelValue":c[2]||(c[2]=p=>a.password=p),type:i.value?"text":"password","append-icon":i.value?"mdi-eye":"mdi-eye-off","onClick:append":c[3]||(c[3]=p=>i.value=!i.value),onKeyup:c[4]||(c[4]=e.withKeys(e.withModifiers(p=>m(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",ue,[e.renderSlot(s.$slots,"default",{value:a.password},()=>[a.username&&a.password?(e.openBlock(),e.createBlock(O,{key:0,"validate-label":"Login!",onValidate:c[5]||(c[5]=p=>m()),onReset:c[6]||(c[6]=p=>n()),state:d},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},I=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(o){const u=e.useSlots(),l=o,r=v.filterSlots(u,"views."),a=e.ref(!1);e.onMounted(()=>{a.value=!0}),e.onUnmounted(()=>{a.value=!1});const i=e.inject("panels"),d=e.inject("panel");return(n,m)=>(e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:l.name},{default:e.withCtx(()=>[l.state?(e.openBlock(),e.createBlock(C,{key:0,state:l.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(t.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!a.value||e.unref(i).panel!=l.name},[l.icon?(e.openBlock(),e.createBlock(t.VIcon,{key:0,icon:l.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(l.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!a.value||e.unref(i).panel!=l.name},[e.renderSlot(n.$slots,"append-title"),l.help?(e.openBlock(),e.createBlock(t.VBtn,{key:0,class:"ml-3",href:l.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(n.$slots,"top"),e.renderSlot(n.$slots,"default",{},()=>[e.unref(r)?(e.openBlock(),e.createBlock(t.VWindow,{key:0,modelValue:e.unref(d).view,"onUpdate:modelValue":m[0]||(m[0]=s=>e.unref(d).view=s)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(s,c)=>(e.openBlock(),e.createBlock(t.VWindowItem,{key:s,value:s},{default:e.withCtx(()=>[e.renderSlot(n.$slots,c)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(n.$slots,"bottom")]),_:3})]),_:3},8,["value"]))}}),de={class:"mb-3"},E=e.defineComponent({__name:"OxModelEdit",props:{repo:{},initial:{},name:{},url:{},saved:{type:Function}},setup(o){const{t:u}=v.useI18n(),l=o,r=v.useModelEditor({props:l}),a=e.computed(()=>r.repo.model),{value:i,edited:d}=e.toRefs(r),n=e.ref(null),m=e.useSlots(),s=v.filterSlots(m,"tab.",{exclude:"tab.default"}),c=v.filterSlots(m,"window.",{exclude:"window.default"}),p=e.computed(()=>({value:i.value,model:a.value}));return(V,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(C,{state:e.unref(r).state},null,8,["state"]),e.createElementVNode("div",de,[e.unref(d)?(e.openBlock(),e.createBlock(O,{key:0,onValidate:k[0]||(k[0]=f=>e.unref(r).save()),onReset:k[1]||(k[1]=f=>e.unref(r).discard()),state:e.unref(r).state,"validate-disabled":!e.unref(r).valid},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)]),e.unref(s)&&Object.keys(e.unref(s)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTabs,{modelValue:n.value,"onUpdate:modelValue":k[2]||(k[2]=f=>n.value=f)},{default:e.withCtx(()=>[e.renderSlot(V.$slots,"tab.default",e.normalizeProps(e.guardReactiveProps(p.value)),()=>[e.createVNode(t.VTab,{text:e.unref(u)(`models.${a.value.entity}`),value:"model"},null,8,["text"])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),(f,w)=>e.renderSlot(V.$slots,w,e.mergeProps({ref_for:!0},p.value))),256))]),_:3},8,["modelValue"]),e.createVNode(t.VTabsWindow,{modelValue:n.value,"onUpdate:modelValue":k[3]||(k[3]=f=>n.value=f)},{default:e.withCtx(()=>[e.createVNode(t.VTabsWindowItem,{value:"model"},{default:e.withCtx(()=>[e.renderSlot(V.$slots,"window.default",e.normalizeProps(e.guardReactiveProps(p.value)))]),_:3}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(f,w)=>(e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:f},{default:e.withCtx(()=>[e.renderSlot(V.$slots,w,e.mergeProps({ref_for:!0},p.value))]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(V.$slots,"window.default",e.normalizeProps(e.mergeProps({key:1},p.value)))],64))}}),G=e.defineComponent({__name:"OxModelPanel",props:{repo:{},search:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(o){const u=e.useSlots(),l=v.filterSlots(u,"views.list."),r=v.filterSlots(u,"item."),a=v.filterSlots(u,"views.detail.edit."),i=e.useTemplateRef("filters"),d=o,n=e.inject("panel")??v.useModelPanel({props:d}),m=n.panels,s=n.list,{showFilters:c}=e.toRefs(n),p=e.computed(()=>[...d.headers,{key:"actions",title:v.t("actions")}]),V=e.computed(()=>({panel:n,panels:m,list:s,value:n.value}));return(k,f)=>(e.openBlock(),e.createBlock(I,{name:d.name,title:e.unref(n).title,icon:e.unref(n).icon,state:e.unref(s).state,index:d.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(k.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(V.value))),e.unref(n).view.startsWith("list.")?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(k.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(V.value))),e.unref(i)?(e.openBlock(),e.createBlock(t.VBtn,{key:0,title:e.unref(c)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),"aria-label":e.unref(c)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),onClick:f[0]||(f[0]=w=>c.value=!e.unref(c)),active:e.unref(c)},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:e.unref(i).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(n).view.startsWith("detail.")&&e.unref(n).value?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(k.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(V.value))),e.unref(n).view=="detail.edit"&&e.unref(n).value?(e.openBlock(),e.createBlock(t.VMenu,{key:0},{activator:e.withCtx(({props:w})=>[e.createVNode(t.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},w),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(t.VList,null,{default:e.withCtx(()=>[e.renderSlot(k.$slots,"item.actions",{value:e.unref(n).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtn,{disabled:!e.unref(n).prev,title:e.unref(v.t)("prev"),"aria-label":e.unref(v.t)("prev"),onClick:f[1]||(f[1]=e.withModifiers(w=>e.unref(n).show({value:e.unref(n).prev}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(t.VBtn,{disabled:!e.unref(n).next,title:e.unref(v.t)("next"),"aria-label":e.unref(v.t)("next"),onClick:f[2]||(f[2]=e.withModifiers(w=>e.unref(n).show({value:e.unref(n).next}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(n).view,"onUpdate:modelValue":f[4]||(f[4]=w=>e.unref(n).view=w),density:"compact",variant:"tonal"},{default:e.withCtx(()=>{var w;return[e.createVNode(t.VBtn,{value:"list.table",title:e.unref(v.t)("panels.nav.table"),"aria-label":e.unref(v.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[5]||(f[5]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(u)["views.list.cards"]?(e.openBlock(),e.createBlock(t.VBtn,{key:0,value:"list.cards",title:e.unref(v.t)("panels.nav.cards"),"aria-label":e.unref(v.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[6]||(f[6]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(u)["views.list.kanban"]?(e.openBlock(),e.createBlock(t.VBtn,{key:1,value:"list.kanban",title:e.unref(v.t)("panels.nav.kanban"),"aria-label":e.unref(v.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[7]||(f[7]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(a)?(e.openBlock(),e.createBlock(t.VBtn,{key:2,value:"detail.add",onClick:f[3]||(f[3]=e.withModifiers(y=>e.unref(n).create(),["stop"])),title:e.unref(v.t)("panels.nav.add"),"aria-label":e.unref(v.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[8]||(f[8]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(u)["views.detail.edit"]||e.unref(a)?(e.openBlock(),e.createBlock(t.VBtn,{key:3,value:"detail.edit",disabled:!((w=e.unref(n).value)!=null&&w.id),title:e.unref(v.t)("panels.nav.edit"),"aria-label":e.unref(v.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>f[9]||(f[9]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(k.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(V.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[e.withDirectives(e.createVNode(A,{ref_key:"filters",ref:i,search:d.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(w=>[e.renderSlot(k.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(w)))]),_:3},8,["search"]),[[e.vShow,e.unref(n).view.startsWith("list.")&&e.unref(c)]])]),_:2},[e.unref(u)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(L,{headers:p.value,edit:""},e.createSlots({_:2},[e.renderList(e.unref(r),(w,y)=>({name:y,fn:e.withCtx(x=>[e.renderSlot(k.$slots,y,e.normalizeProps(e.guardReactiveProps(x)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(l),(w,y)=>({name:y,fn:e.withCtx(()=>[e.renderSlot(k.$slots,y,e.normalizeProps(e.guardReactiveProps(V.value)))])})),e.unref(u)["views.detail.edit"]||e.unref(a)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(E,{repo:e.unref(n).repo,initial:e.unref(n).value,name:`${e.unref(n).model.entity}-edit`,saved:w=>e.unref(n).value=w},e.createSlots({_:2},[e.renderList(e.unref(a),(w,y)=>({name:w,fn:e.withCtx(x=>[e.renderSlot(k.$slots,y,e.normalizeProps(e.guardReactiveProps(x)))])}))]),1032,["repo","initial","name","saved"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),K=e.defineComponent({__name:"OxPanelNav",props:{title:{},icon:{},panel:{},href:{},auto:{type:Boolean}},setup(o){const u=o,l=e.inject("panels");return e.computed(()=>!u.auto||panel.name==u.name),(r,a)=>(e.openBlock(),e.createBlock(t.VListItem,{active:e.unref(l).panel==u.name,"prepend-icon":u.icon,title:u.title,onClick:a[0]||(a[0]=e.withModifiers(i=>e.unref(l).show(u),["stop"]))},null,8,["active","prepend-icon","title"]))}}),ce=Object.freeze(Object.defineProperty({__proto__:null,OxAction:P,OxActionModelDelete:D,OxActions:_,OxApp:j,OxComponent:z,OxFieldDetails:$,OxListFilters:A,OxListKanban:U,OxListTable:L,OxLogin:W,OxModelEdit:E,OxModelPanel:G,OxPanel:I,OxPanelNav:K,OxStateAlert:C,OxValidationBtn:O},Symbol.toStringTag,{value:"Module"})),pe={el:"#app",delimiters:["[[","]]"],components:{...ce,...Z.components}};exports.App=pe;exports.OxAction=P;exports.OxActionModelDelete=D;exports.OxActions=_;exports.OxApp=j;exports.OxComponent=z;exports.OxFieldDetails=$;exports.OxListFilters=A;exports.OxListKanban=U;exports.OxListTable=L;exports.OxLogin=W;exports.OxModelEdit=E;exports.OxModelPanel=G;exports.OxPanel=I;exports.OxPanelNav=K;exports.OxStateAlert=C;exports.OxValidationBtn=O;
//# sourceMappingURL=components.cjs.map
