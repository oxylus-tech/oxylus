"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),p=require("ox"),t=require("./VAlert-Ba8QxjnX.cjs"),h=require("./theme-DrG8E7S0.cjs"),N=require("./auth-CUqEAC3P.cjs"),te=require("ox/vendor"),L=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{type:[String,Function,Array]},run:{},href:{}},emits:["completed"],setup(a,{emit:i}){const o=a,r=i,n=e.inject("context"),{run:c,processing:s,allowed:u}=p.useAction({user:n.user,emits:r,props:o});return(l,d)=>e.unref(u)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o.button?(e.openBlock(),e.createBlock(t.VBtn,{key:0,variant:"text",disabled:e.unref(s),color:o.color,icon:o.icon,title:o.title,"aria-label":o.title,onClick:e.withModifiers(e.unref(c),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(t.VListItem,{key:1,title:o.title,"base-color":o.color,"prepend-icon":o.icon,disabled:e.unref(s),onClick:e.withModifiers(e.unref(c),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),z=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(a){const i=e.inject("panel"),o=e.inject("repos"),r=a;async function n(c,s){return await o[s.constructor.entity].api().delete(s.$url(),{delete:r.item.id})}return(c,s)=>(e.openBlock(),e.createBlock(L,{item:r.item,button:r.button,icon:"mdi-delete",color:"error",title:e.unref(p.t)("actions.delete"),confirm:e.unref(p.t)("actions.delete.confirm"),permissions:["delete",(u,l)=>l.id],run:n,onCompleted:s[0]||(s[0]=u=>{var l;return(l=e.unref(i))==null?void 0:l.show({view:e.unref(i).index})})},null,8,["item","button","title","confirm","permissions"]))}}),U={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(a){e.useSlots();const i=a;return(o,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(o.$slots,"before",e.normalizeProps(e.guardReactiveProps(i))),e.renderSlot(o.$slots,"default",e.normalizeProps(e.guardReactiveProps(i))),e.renderSlot(o.$slots,"after",e.normalizeProps(e.guardReactiveProps(i)))],64))}};function oe(a){const i=e.shallowRef(a());let o=-1;function r(){clearInterval(o)}function n(){r(),e.nextTick(()=>i.value=a())}function c(s){const u=s?getComputedStyle(s):{transitionDuration:.2},l=parseFloat(u.transitionDuration)*1e3||200;if(r(),i.value<=0)return;const d=performance.now();o=window.setInterval(()=>{const m=performance.now()-d+l;i.value=Math.max(a()-m,0),i.value<=0&&r()},l)}return e.onScopeDispose(r),{clear:r,time:i,start:c,reset:n}}const ne=h.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...t.makeLocationProps({location:"bottom"}),...t.makePositionProps(),...t.makeRoundedProps(),...t.makeVariantProps(),...h.makeThemeProps(),...h.omit(t.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),le=h.genericComponent()({name:"VSnackbar",props:ne(),emits:{"update:modelValue":a=>!0},setup(a,i){let{slots:o}=i;const r=h.useProxiedModel(a,"modelValue"),{positionClasses:n}=t.usePosition(a),{scopeId:c}=t.useScopeId(),{themeClasses:s}=h.provideTheme(a),{colorClasses:u,colorStyles:l,variantClasses:d}=t.useVariant(a),{roundedClasses:m}=t.useRounded(a),f=oe(()=>Number(a.timeout)),v=e.ref(),k=e.ref(),y=e.shallowRef(!1),C=e.shallowRef(0),S=e.ref(),E=e.inject(t.VuetifyLayoutKey,void 0);h.useToggleScope(()=>!!E,()=>{const B=t.useLayout();e.watchEffect(()=>{S.value=B.mainStyles.value})}),e.watch(r,w),e.watch(()=>a.timeout,w),e.onMounted(()=>{r.value&&w()});let x=-1;function w(){f.reset(),window.clearTimeout(x);const B=Number(a.timeout);if(!r.value||B===-1)return;const $=h.refElement(k.value);f.start($),x=window.setTimeout(()=>{r.value=!1},B)}function V(){f.reset(),window.clearTimeout(x)}function b(){y.value=!0,V()}function g(){y.value=!1,w()}function I(B){C.value=B.touches[0].clientY}function X(B){Math.abs(C.value-B.changedTouches[0].clientY)>50&&(r.value=!1)}function Z(){y.value&&g()}const ee=e.computed(()=>a.location.split(" ").reduce((B,$)=>(B[`v-snackbar--${$}`]=!0,B),{}));return t.useRender(()=>{const B=t.VOverlay.filterProps(a),$=!!(o.default||o.text||a.text);return e.createVNode(t.VOverlay,e.mergeProps({ref:v,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":a.multiLine&&!a.vertical,"v-snackbar--timer":!!a.timer,"v-snackbar--vertical":a.vertical},ee.value,n.value,a.class],style:[S.value,a.style]},B,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,contentProps:e.mergeProps({class:["v-snackbar__wrapper",s.value,u.value,m.value,d.value],style:[l.value],onPointerenter:b,onPointerleave:g},B.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:I,onTouchend:X,onAfterLeave:Z},c),{default:()=>{var T,_;return[t.genOverlays(!1,"v-snackbar"),a.timer&&!y.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(t.VProgressLinear,{ref:k,color:typeof a.timer=="string"?a.timer:"info",max:a.timeout,"model-value":f.time.value},null)]),$&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((T=o.text)==null?void 0:T.call(o))??a.text,(_=o.default)==null?void 0:_.call(o)]),o.actions&&e.createVNode(t.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[o.actions({isActive:r})])]})]},activator:o.activator})}),t.forwardRefs({},v)}}),re={class:"nav-home"};var j;const G=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(j=document.body.dataset)==null?void 0:j.appData},models:{},data:{}},setup(a){const i=e.useSlots(),o=a,r=e.reactive({drawer:!0}),n=p.useAppContext(o),c=p.usePanels();return e.onMounted(()=>{c.panel=n.data.panel}),e.watch(()=>[n.state.state,n.state.data],()=>{n.showState=!0}),e.onErrorCaptured((s,u,l)=>{n.state.error(`${s}`)}),(s,u)=>(e.openBlock(),e.createBlock(t.VApp,null,{default:e.withCtx(()=>[e.createVNode(le,{modelValue:e.unref(n).showState,"onUpdate:modelValue":u[0]||(u[0]=l=>e.unref(n).showState=l),color:e.unref(n).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(n).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(t.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(p.t)("nav.panels"),"aria-label":e.unref(p.t)("nav.panels"),onClick:u[1]||(u[1]=e.withModifiers(l=>r.drawer=!r.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(i)["app-nav"]&&!r.drawer2?(e.openBlock(),e.createBlock(t.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:u[2]||(u[2]=l=>{r.drawer2=!0,r.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(t.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(t.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"title",{context:e.unref(n)})]),_:3}),e.createVNode(t.VSpacer),e.renderSlot(s.$slots,"app-bar-left",{context:e.unref(n)}),u[5]||(u[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(s.$slots,"app-bar-right",{context:e.unref(n)})]),_:3}),e.createVNode(t.VNavigationDrawer,{theme:"dark",modelValue:r.drawer,"onUpdate:modelValue":u[3]||(u[3]=l=>r.drawer=l)},e.createSlots({default:e.withCtx(()=>[e.createElementVNode("a",re,[s.logo?(e.openBlock(),e.createBlock(t.VImg,{key:0,src:s.logo,class:"logo"},null,8,["src"])):e.createCommentVNode("",!0)]),e.renderSlot(s.$slots,"nav-start",{context:e.unref(n)}),e.renderSlot(s.$slots,"nav-list",{context:e.unref(n)})]),_:2},[e.unref(i)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.renderSlot(s.$slots,"nav-end",{context:e.unref(n)})]),key:"0"}:void 0]),1032,["modelValue"]),e.createVNode(t.VMain,null,{default:e.withCtx(()=>[e.renderSlot(s.$slots,"main",{},()=>[e.createVNode(t.VTabsWindow,{modelValue:e.unref(c).panel,"onUpdate:modelValue":u[4]||(u[4]=l=>e.unref(c).panel=l)},{default:e.withCtx(l=>[e.renderSlot(s.$slots,"default",e.mergeProps(l,{context:e.unref(n)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),W={props:{src:String,is:String},setup(a){const i=e.shallowRef(null),o=e.computed(()=>{if(a.is)return a.is;let n=a.src.substring(a.src.lastIndexOf("/")+1);if(n&&(n=n.substring(0,n.indexOf("."))),!n)throw Error("`is` not provided and could not be deducted from `src`.");return n});function r(){i.value=p.defineAsyncComponent(a.src,o.value)}return e.watch(()=>a.src,r),r(),()=>e.h(i.value,a)}},ae={class:"text-error"},P={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(a){const i=a;return(o,r)=>i.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(i.errors,n=>(e.openBlock(),e.createElementBlock("div",ae,[e.createVNode(t.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(n),1)]))),256)):e.createCommentVNode("",!0)}},M={__name:"OxListFilters",props:{search:String},setup(a,{expose:i}){const o=e.inject("list"),r=a,n=e.computed(()=>{const u=o.filters;return u&&Object.entries(u).some(([l,d])=>!l.startsWith("page")&&!l.startsWith("ordering")&&!!d)}),c=e.computed(()=>n.value?"mdi-filter-check":"mdi-filter-outline");function s(){o.filters={},o.load()}return e.watch(()=>Object.values(o.filters),()=>o.load()),i({icon:c,hasFilters:n,reset:s}),(u,l)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:l[2]||(l[2]=e.withModifiers(d=>e.unref(o).load(),["prevent"])),class:"width-full"},[e.createVNode(t.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:c.value,readonly:""},null,8,["icon"]),r.search&&e.unref(o).filters?(e.openBlock(),e.createBlock(t.VTextField,{key:0,label:e.unref(p.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(o).filters[r.search],"onUpdate:modelValue":l[0]||(l[0]=d=>e.unref(o).filters[r.search]=d),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(u.$slots,"default",{list:e.unref(o),filters:e.unref(o).filters}),e.createVNode(t.VBtn,{onClick:l[1]||(l[1]=e.withModifiers(d=>e.unref(o).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":u.$t("filters.apply"),title:e.unref(p.t)("filters.apply")},null,8,["aria-label","title"]),n.value?(e.openBlock(),e.createBlock(t.VBtn,{key:1,onClick:e.withModifiers(s,["stop"]),icon:"mdi-backspace","aria-label":e.unref(p.t)("filters.reset"),title:e.unref(p.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},se={class:"flex-row justify-right"},K=e.defineComponent({__name:"OxFormList",props:e.mergeModels({editable:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){var l;const i=e.useModel(a,"modelValue"),o=e.ref({}),r=a,{editable:n}=e.toRefs(r),c=e.ref([]);(l=i.value)!=null&&l.length||c.value.push(-1);function s(){i.value.push(o.value),o.value={}}function u(d){confirm(p.t("actions.delete.confirm"))&&r.editable&&i.value.splice(d)}return(d,m)=>(e.openBlock(),e.createBlock(t.VList,{opened:c.value,"onUpdate:opened":m[3]||(m[3]=f=>c.value=f)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(f,v)=>(e.openBlock(),e.createBlock(t.VListGroup,{key:v,value:v},{activator:e.withCtx(({props:k})=>[e.createVNode(t.VListItem,e.mergeProps({ref_for:!0},k),{append:e.withCtx(()=>[e.createElementVNode("div",{onClick:m[0]||(m[0]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(d.$slots,"item.actions",{item:f,index:v,editable:e.unref(n)}),e.unref(n)?(e.openBlock(),e.createBlock(t.VBtn,{key:0,type:"button",class:"ml-2",size:"small",onClick:e.withModifiers(y=>u(v),["stop","prevent"]),color:"error","aria-label":e.unref(p.t)("actions.remove"),title:e.unref(p.t)("actions.remove"),icon:"mdi-delete"},null,8,["onClick","aria-label","title"])):e.createCommentVNode("",!0)])]),default:e.withCtx(()=>[e.createVNode(t.VListItemTitle,null,{default:e.withCtx(()=>[e.renderSlot(d.$slots,"item.title",{item:f})]),_:2},1024)]),_:2},1040)]),default:e.withCtx(()=>[e.renderSlot(d.$slots,"item",{item:f,index:v})]),_:2},1032,["value"]))),128)),i.value.length?(e.openBlock(),e.createBlock(t.VDivider,{key:0})):e.createCommentVNode("",!0),e.unref(n)?(e.openBlock(),e.createBlock(t.VListGroup,{key:1,value:-1},{activator:e.withCtx(({props:f})=>[e.createVNode(t.VListItem,e.mergeProps(f,{title:e.unref(p.t)("actions.add_item"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),default:e.withCtx(()=>[e.renderSlot(d.$slots,"item",{item:o.value,edit:!0}),o.value?(e.openBlock(),e.createBlock(t.VListItem,{key:0},{default:e.withCtx(()=>[e.createElementVNode("div",se,[o.value?(e.openBlock(),e.createBlock(t.VBtn,{key:0,size:"small",onClick:m[1]||(m[1]=f=>o.value={}),color:"secondary","prepend-icon":"mdi-backspace","aria-label":e.unref(p.t)("actions.discard")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(p.t)("actions.discard")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0),o.value?(e.openBlock(),e.createBlock(t.VBtn,{key:1,size:"small",onClick:m[2]||(m[2]=f=>s()),color:"primary","prepend-icon":"mdi-plus","aria-label":e.unref(p.t)("actions.add")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(p.t)("actions.add")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0)])]),_:1})):e.createCommentVNode("",!0)]),_:3})):e.createCommentVNode("",!0)]),_:3},8,["opened"]))}}),ie=h.genericComponent()({name:"VSlideGroupItem",props:t.makeGroupItemProps(),emits:{"group:selected":a=>!0},setup(a,i){let{slots:o}=i;const r=t.useGroupItem(a,t.VSlideGroupSymbol);return()=>{var n;return(n=o.default)==null?void 0:n.call(o,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}}),q={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(a,{emit:i}){const o=i;e.inject("list");const r=e.inject("items"),n=a;function c(l){return l=l%n.colors.length,n.colorVariant?n.colors[l]+"-"+n.colorVariant:n.colors[l]}function s(l,d,m){l[m]?!l[m].includes(d)&&l[m].push(d):l[m]=[d]}const u=e.computed(()=>{const l={};if(r.value)for(var d of r.value){const f=d[n.field];if(Array.isArray(f))if(f.length)for(var m of f)s(l,d,m);else s(l,d,null);else s(l,d,f)}return l});return(l,d)=>(e.openBlock(),e.createBlock(t.VSheet,null,{default:e.withCtx(()=>[e.createVNode(t.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.headers,(m,f)=>(e.openBlock(),e.createBlock(ie,{key:m.value},{default:e.withCtx(({selectedClass:v})=>[e.createVNode(t.VCard,{width:"400",class:e.normalizeClass(["ma-3",v]),color:c(f),lines:"two"},{default:e.withCtx(()=>[e.createVNode(t.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.title),1)]),_:2},1024),e.createVNode(t.VList,{"bg-color":c(f)},{default:e.withCtx(()=>[u.value&&u.value[m.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.value[m.value],k=>e.renderSlot(l.$slots,"item",{key:k.id,header:m,item:k},()=>[e.createVNode(t.VListItem,{title:k[n.itemTitle],value:n.itemValue&&k[n.itemValue],onClick:y=>o("click",k)},{append:e.withCtx(()=>[e.renderSlot(l.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},F=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(a){const i=e.useSlots(),o=N.filterSlots(i,"item.",{exclude:["item.actions"]}),r=e.inject("panel"),n=e.inject("list"),c=e.inject("items"),s=new N.Permissions(["change"]),u=a,l=e.computed(()=>u.headers.reduce((f,v)=>(f.push(typeof v=="string"?{key:v,title:p.t(p.tKeys.field(v))}:v),f),[]));function d(f){n.filters.page=f.page,n.filters.page_size=f.itemsPerPage,n.filters.ordering=f.sortBy.map(({key:v,order:k})=>k=="asc"?v:`-${v}`)}function m(f,v){r.show({view:"detail.edit",value:v})}return(f,v)=>{var k;return e.openBlock(),e.createBlock(t.VDataTableServer,{items:e.unref(c),"item-index":"id","items-length":e.unref(n).count||e.unref(c).length,loading:(k=e.unref(n).state)==null?void 0:k.isProcessing,headers:l.value,class:"align-top-table","onUpdate:options":d},e.createSlots({loading:e.withCtx(()=>[e.createVNode(t.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:y})=>[a.edit?(e.openBlock(),e.createBlock(L,{key:0,icon:"mdi-pencil",button:"",title:e.unref(p.t)("actions.edit"),permissions:e.unref(s),item:y,run:m},null,8,["title","permissions","item"])):e.createCommentVNode("",!0),e.renderSlot(f.$slots,"item.actions",{value:y,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(o),(y,C)=>({name:C,fn:e.withCtx(S=>[e.renderSlot(f.$slots,C,e.normalizeProps(e.guardReactiveProps(S)))])}))]),1032,["items","items-length","loading","headers"])}}}),O={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(a){const i=e.useSlots(),o=a;let r=e.ref(!1);e.watch(()=>o.state.state,s=>{o.delay&&s==N.States.PROCESSING&&(r.value=!1,window.setTimeout(()=>{r.value=!0},5e3))});const n=e.computed(()=>{var s;return((s=o.state)==null?void 0:s.isProcessing)&&(!o.delay||r.value)}),c=e.computed(()=>{var s,u;return(u=(s=o.state)==null?void 0:s.data)==null?void 0:u.messages});return(s,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[o.state.isNone&&e.unref(i).none?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:a.state,title:a.noneTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"none",{state:a.state})]),_:3},8,["state","title"])):n.value?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:a.state,title:a.processingTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"processing",{state:a.state},()=>[u[0]||(u[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):o.state.isError?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:a.state,title:a.errorTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"error",{state:a.state},()=>[u[1]||(u[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(s.$slots,"error-detail",{state:a.state})]),_:3},8,["state","title"])):o.state.isOk?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:a.state,title:a.okTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"ok",{state:a.state},()=>[u[2]||(u[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),c.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,l=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(l),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"ok-detail",{state:a.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default",{state:o.state})],64))}},ue={class:"text-right"},A={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(a,{emit:i}){const o=i,r=a;return(n,c)=>(e.openBlock(),e.createElementBlock("div",ue,[e.createVNode(e.unref(t.VBtn),{color:"error",class:"me-2","prepend-icon":r.resetIcon,onClick:c[0]||(c[0]=s=>o("reset")),disabled:r.disabled},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(r.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),r.state.isSending?(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>c[2]||(c[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:1,color:"primary","prepend-icon":r.validateIcon,onClick:c[1]||(c[1]=s=>o("validate")),disabled:r.disabled||r.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(r.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},de={key:0},ce={class:"text-right mt-3"},Y={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(a,{emit:i}){const o=e.useTemplateRef("password"),r=a,n=e.reactive({username:"",password:""}),c=e.ref(!1),s=e.reactive(new N.State);function u(d=!0){N.reset(n,{username:"",password:""}),d&&s.none()}async function l(){s.processing();try{const d=await fetch(r.url,{method:"POST",headers:N.config$1.axiosConfig.headers,body:JSON.stringify(n)});d.status==200?(n.credentials="",n.password="",s.ok(await d.json()),r.next&&(window.location.href=r.next)):s.error(await d.json())}catch(d){s.ok((d==null?void 0:d.message)||d)}}return(d,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(O),{state:s},{none:e.withCtx(({state:f})=>m[7]||(m[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:f})=>[r.next?(e.openBlock(),e.createElementBlock("p",de,[m[8]||(m[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(r.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:f})=>{var v,k;return[e.createVNode(P,{errors:(v=f.data)==null?void 0:v.username},null,8,["errors"]),e.createVNode(P,{errors:(k=f.data)==null?void 0:k.password},null,8,["errors"])]}),_:1},8,["state"]),s.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTextField,{variant:"underlined",label:"Enter login",modelValue:n.username,"onUpdate:modelValue":m[0]||(m[0]=f=>n.username=f),onKeyup:m[1]||(m[1]=e.withKeys(e.withModifiers(f=>e.unref(o).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(t.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:n.password,"onUpdate:modelValue":m[2]||(m[2]=f=>n.password=f),type:c.value?"text":"password","append-icon":c.value?"mdi-eye":"mdi-eye-off","onClick:append":m[3]||(m[3]=f=>c.value=!c.value),onKeyup:m[4]||(m[4]=e.withKeys(e.withModifiers(f=>l(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",ce,[e.renderSlot(d.$slots,"default",{value:n.password},()=>[n.username&&n.password?(e.openBlock(),e.createBlock(A,{key:0,"validate-label":"Login!",onValidate:m[5]||(m[5]=f=>l()),onReset:m[6]||(m[6]=f=>u()),state:s},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},D=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(a){const i=e.useSlots(),o=a,r=p.filterSlots(i,"views."),n=e.ref(!1);e.onMounted(()=>{n.value=!0}),e.onUnmounted(()=>{n.value=!1});const c=e.inject("panels"),s=e.inject("panel");return(u,l)=>(e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:o.name},{default:e.withCtx(()=>[o.state?(e.openBlock(),e.createBlock(O,{key:0,state:o.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(t.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!n.value||e.unref(c).panel!=o.name},[o.icon?(e.openBlock(),e.createBlock(t.VIcon,{key:0,icon:o.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!n.value||e.unref(c).panel!=o.name},[e.renderSlot(u.$slots,"append-title"),o.help?(e.openBlock(),e.createBlock(t.VBtn,{key:0,class:"ml-3",href:o.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(u.$slots,"top"),e.renderSlot(u.$slots,"default",{},()=>[e.unref(r)?(e.openBlock(),e.createBlock(t.VWindow,{key:0,modelValue:e.unref(s).view,"onUpdate:modelValue":l[0]||(l[0]=d=>e.unref(s).view=d)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(d,m)=>(e.openBlock(),e.createBlock(t.VWindowItem,{key:d,value:d},{default:e.withCtx(()=>[e.renderSlot(u.$slots,m)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(u.$slots,"bottom")]),_:3})]),_:3},8,["value"]))}}),R=e.defineComponent({__name:"OxView",props:{title:String},setup(a){const i=a,o=e.ref(null),r=e.useSlots(),n=p.filterSlots(r,"tab.",{exclude:"tab.default"}),c=p.filterSlots(r,"window.");return(s,u)=>e.unref(n)&&Object.keys(e.unref(n)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTabs,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=l=>o.value=l)},{default:e.withCtx(()=>[e.unref(r).default?e.renderSlot(s.$slots,"tab",{key:0},()=>[e.createVNode(t.VTab,{text:i==null?void 0:i.title,value:"default"},null,8,["text"])]):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(l,d)=>(e.openBlock(),e.createBlock(t.VTab,{value:l},{default:e.withCtx(()=>[e.renderSlot(s.$slots,d)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"]),e.createVNode(t.VTabsWindow,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=l=>o.value=l)},{default:e.withCtx(()=>[e.unref(r).default?(e.openBlock(),e.createBlock(t.VTabsWindowItem,{key:0,value:"default"},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default")]),_:3})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(l,d)=>(e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:l},{default:e.withCtx(()=>[e.renderSlot(s.$slots,d)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(s.$slots,"default",{key:1})}}),pe={class:"mb-3"},H=e.defineComponent({__name:"OxModelEdit",props:{repo:{},empty:{},initial:{},name:{},url:{},saved:{type:Function}},setup(a,{expose:i}){const o=a,{editor:r,edited:n}=p.useModelEditor({props:o});e.computed(()=>r.repo.use);const{value:c}=e.toRefs(r);return i({editor:r,edited:n,value:c}),(s,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(O,{state:e.unref(r).state},null,8,["state"]),e.createElementVNode("div",pe,[e.unref(n)?(e.openBlock(),e.createBlock(A,{key:0,onValidate:u[0]||(u[0]=l=>e.unref(r).save()),onReset:u[1]||(u[1]=l=>e.unref(r).discard()),state:e.unref(r).state,"validate-disabled":!e.unref(r).valid},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)]),e.createVNode(t.VContainer,null,{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default",{editor:e.unref(r),edited:e.unref(n),value:e.unref(c),model:e.unref(r).repo.use})]),_:3})],64))}}),J=e.defineComponent({__name:"OxModelPanel",props:{repo:{},search:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(a){const i=e.useSlots(),o=p.filterSlots(i,"views.list."),r=p.filterSlots(i,"item."),n=p.filterSlots(i,"views.detail.edit."),c=e.useTemplateRef("filters"),s=a,u=e.inject("context"),{panel:l,list:d,items:m,next:f,prev:v}=e.inject("panel")??p.useModelPanel({props:s}),k=l.panels,y=e.computed(()=>{var w;return u.user.can([l.model,(w=l.value)!=null&&w.id?"change":"add"])}),{showFilters:C}=e.toRefs(l),S=e.computed(()=>[...s.headers,{key:"actions",title:p.t("actions")}]);function E(w){l.value.value=w}const x=e.computed(()=>({panel:l,panels:k,list:d,items:m,context:u,value:l.value}));return(w,V)=>(e.openBlock(),e.createBlock(D,{name:s.name,title:e.unref(l).title,icon:e.unref(l).icon,state:e.unref(d).state,index:s.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(w.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(x.value))),e.unref(l).view.startsWith("list.")?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(w.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(x.value))),e.unref(c)?(e.openBlock(),e.createBlock(t.VBtn,{key:0,title:e.unref(C)?e.unref(p.t)("filters.hide"):e.unref(p.t)("filters.show"),"aria-label":e.unref(C)?e.unref(p.t)("filters.hide"):e.unref(p.t)("filters.show"),onClick:V[0]||(V[0]=b=>C.value=!e.unref(C)),active:e.unref(C)},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:e.unref(c).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(l).view.startsWith("detail.")&&e.unref(l).value?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(w.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(x.value))),e.unref(l).view=="detail.edit"&&e.unref(l).value?(e.openBlock(),e.createBlock(t.VMenu,{key:0},{activator:e.withCtx(({props:b})=>[e.createVNode(t.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},b),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(p.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(t.VList,null,{default:e.withCtx(()=>[e.renderSlot(w.$slots,"item.actions",{value:e.unref(l).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtn,{disabled:!e.unref(v),title:e.unref(p.t)("prev"),"aria-label":e.unref(p.t)("prev"),onClick:V[1]||(V[1]=e.withModifiers(b=>e.unref(l).show({value:e.unref(v)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(t.VBtn,{disabled:!e.unref(f),title:e.unref(p.t)("next"),"aria-label":e.unref(p.t)("next"),onClick:V[2]||(V[2]=e.withModifiers(b=>e.unref(l).show({value:e.unref(f)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(l).view,"onUpdate:modelValue":V[4]||(V[4]=b=>e.unref(l).view=b),density:"compact",variant:"tonal",mandatory:""},{default:e.withCtx(()=>{var b;return[e.createVNode(t.VBtn,{value:"list.table",title:e.unref(p.t)("panels.nav.table"),"aria-label":e.unref(p.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[5]||(V[5]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(i)["views.list.cards"]?(e.openBlock(),e.createBlock(t.VBtn,{key:0,value:"list.cards",title:e.unref(p.t)("panels.nav.cards"),"aria-label":e.unref(p.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[6]||(V[6]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.list.kanban"]?(e.openBlock(),e.createBlock(t.VBtn,{key:1,value:"list.kanban",title:e.unref(p.t)("panels.nav.kanban"),"aria-label":e.unref(p.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[7]||(V[7]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(n)?(e.openBlock(),e.createBlock(t.VBtn,{key:2,value:"detail.add",onClick:V[3]||(V[3]=e.withModifiers(g=>e.unref(l).create(),["stop"])),title:e.unref(p.t)("panels.nav.add"),"aria-label":e.unref(p.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[8]||(V[8]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.detail.edit"]||e.unref(n)?(e.openBlock(),e.createBlock(t.VBtn,{key:3,value:"detail.edit",disabled:!((b=e.unref(l).value)!=null&&b.id),title:e.unref(p.t)("panels.nav.edit"),"aria-label":e.unref(p.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[9]||(V[9]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(w.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(x.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[e.withDirectives(e.createVNode(M,{ref_key:"filters",ref:c,search:s.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(b=>[e.renderSlot(w.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(b)))]),_:3},8,["search"]),[[e.vShow,e.unref(l).view.startsWith("list.")&&e.unref(C)]])]),_:2},[e.unref(i)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(F,{headers:S.value,edit:""},e.createSlots({_:2},[e.renderList(e.unref(r),(b,g)=>({name:g,fn:e.withCtx(I=>[e.renderSlot(w.$slots,g,e.normalizeProps(e.guardReactiveProps(I)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(o),(b,g)=>({name:g,fn:e.withCtx(()=>[e.renderSlot(w.$slots,g,e.normalizeProps(e.guardReactiveProps(x.value)))])})),(e.unref(i)["views.detail.edit"]||e.unref(n))&&y.value?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(e.unref(R),{title:e.unref(p.t)(`models.${e.unref(l).model.entity}`)},e.createSlots({_:2},[e.renderList(e.unref(n),(b,g)=>({name:b,fn:e.withCtx(()=>[e.renderSlot(w.$slots,g,{saved:E,value:e.unref(l).value})])}))]),1032,["title"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),Q=e.defineComponent({__name:"OxPanelNav",props:{title:{},icon:{},panel:{},href:{},auto:{type:Boolean}},setup(a){const i=a,o=e.inject("panels");return e.computed(()=>!i.auto||panel.name==i.name),(r,n)=>(e.openBlock(),e.createBlock(t.VListItem,{active:e.unref(o).panel==i.panel,"prepend-icon":i.icon,title:i.title,onClick:n[0]||(n[0]=e.withModifiers(c=>e.unref(o).show(i),["stop"]))},null,8,["active","prepend-icon","title"]))}}),me=Object.freeze(Object.defineProperty({__proto__:null,OxAction:L,OxActionModelDelete:z,OxActions:U,OxApp:G,OxComponent:W,OxFieldDetails:P,OxFormList:K,OxListFilters:M,OxListKanban:q,OxListTable:F,OxLogin:Y,OxModelEdit:H,OxModelPanel:J,OxPanel:D,OxPanelNav:Q,OxStateAlert:O,OxValidationBtn:A,OxView:R},Symbol.toStringTag,{value:"Module"})),fe={el:"#app",delimiters:["[[","]]"],components:{...me,...te.components}};exports.App=fe;exports.OxAction=L;exports.OxActionModelDelete=z;exports.OxActions=U;exports.OxApp=G;exports.OxComponent=W;exports.OxFieldDetails=P;exports.OxFormList=K;exports.OxListFilters=M;exports.OxListKanban=q;exports.OxListTable=F;exports.OxLogin=Y;exports.OxModelEdit=H;exports.OxModelPanel=J;exports.OxPanel=D;exports.OxPanelNav=Q;exports.OxStateAlert=O;exports.OxValidationBtn=A;exports.OxView=R;
//# sourceMappingURL=components.cjs.map
