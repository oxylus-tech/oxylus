"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),f=require("ox"),t=require("./VAlert-BQiprWaW.cjs"),C=require("./vue-i18n-zIih8GXQ.cjs"),S=require("./theme-Bxzsxwfr.cjs"),ee=require("ox/vendor"),P=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{},run:{}},emits:["completed"],setup(o,{emit:d}){const n=o,l=d,r=e.inject("context"),s=f.useAction({user:r.user,emits:l},n);async function i(...m){await s.run(...m)}return(m,u)=>e.unref(s).allowed?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.button?(e.openBlock(),e.createBlock(t.VBtn,{key:0,variant:"text",color:n.color,icon:n.icon,title:n.title,"aria-label":n.title,onClick:e.withModifiers(i,["stop"])},null,8,["color","icon","title","aria-label"])):(e.openBlock(),e.createBlock(t.VListItem,{key:1,title:n.title,"base-color":n.color,"prepend-icon":n.icon,onClick:e.withModifiers(i,["stop"])},null,8,["title","base-color","prepend-icon"]))],64)):e.createCommentVNode("",!0)}}),R=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(o){const{t:d}=C.useI18n(),n=e.inject("panels"),l=e.inject("repos"),r=o;async function s(i,m){return await l[m.constructor.entity].api().delete(m.$url(),{delete:r.item.id})}return(i,m)=>(e.openBlock(),e.createBlock(P,{item:r.item,button:r.button,icon:"mdi-delete",color:"error",title:e.unref(d)("actions.delete"),confirm:e.unref(d)("actions.delete.confirm"),permissions:["delete",(u,a)=>a.id],run:s,onCompleted:m[0]||(m[0]=u=>{var a;return(a=e.unref(n))==null?void 0:a.show()})},null,8,["item","button","title","confirm","permissions"]))}}),D={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(o){e.useSlots();const d=o;return(n,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(n.$slots,"before",e.normalizeProps(e.guardReactiveProps(d))),e.renderSlot(n.$slots,"default",e.normalizeProps(e.guardReactiveProps(d))),e.renderSlot(n.$slots,"after",e.normalizeProps(e.guardReactiveProps(d)))],64))}};function te(o){const d=e.shallowRef(o());let n=-1;function l(){clearInterval(n)}function r(){l(),e.nextTick(()=>d.value=o())}function s(i){const m=i?getComputedStyle(i):{transitionDuration:.2},u=parseFloat(m.transitionDuration)*1e3||200;if(l(),d.value<=0)return;const a=performance.now();n=window.setInterval(()=>{const p=performance.now()-a+u;d.value=Math.max(o()-p,0),d.value<=0&&l()},u)}return e.onScopeDispose(l),{clear:l,time:d,start:s,reset:r}}const ne=S.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...t.makeLocationProps({location:"bottom"}),...t.makePositionProps(),...t.makeRoundedProps(),...t.makeVariantProps(),...S.makeThemeProps(),...S.omit(t.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),oe=S.genericComponent()({name:"VSnackbar",props:ne(),emits:{"update:modelValue":o=>!0},setup(o,d){let{slots:n}=d;const l=S.useProxiedModel(o,"modelValue"),{positionClasses:r}=t.usePosition(o),{scopeId:s}=t.useScopeId(),{themeClasses:i}=S.provideTheme(o),{colorClasses:m,colorStyles:u,variantClasses:a}=t.useVariant(o),{roundedClasses:p}=t.useRounded(o),c=te(()=>Number(o.timeout)),v=e.ref(),w=e.ref(),k=e.shallowRef(!1),b=e.shallowRef(0),V=e.ref(),g=e.inject(t.VuetifyLayoutKey,void 0);S.useToggleScope(()=>!!g,()=>{const x=t.useLayout();e.watchEffect(()=>{V.value=x.mainStyles.value})}),e.watch(l,B),e.watch(()=>o.timeout,B),e.onMounted(()=>{l.value&&B()});let y=-1;function B(){c.reset(),window.clearTimeout(y);const x=Number(o.timeout);if(!l.value||x===-1)return;const h=S.refElement(w.value);c.start(h),y=window.setTimeout(()=>{l.value=!1},x)}function Y(){c.reset(),window.clearTimeout(y)}function H(){k.value=!0,Y()}function M(){k.value=!1,B()}function J(x){b.value=x.touches[0].clientY}function Q(x){Math.abs(b.value-x.changedTouches[0].clientY)>50&&(l.value=!1)}function X(){k.value&&M()}const Z=e.computed(()=>o.location.split(" ").reduce((x,h)=>(x[`v-snackbar--${h}`]=!0,x),{}));return t.useRender(()=>{const x=t.VOverlay.filterProps(o),h=!!(n.default||n.text||o.text);return e.createVNode(t.VOverlay,e.mergeProps({ref:v,class:["v-snackbar",{"v-snackbar--active":l.value,"v-snackbar--multi-line":o.multiLine&&!o.vertical,"v-snackbar--timer":!!o.timer,"v-snackbar--vertical":o.vertical},Z.value,r.value,o.class],style:[V.value,o.style]},x,{modelValue:l.value,"onUpdate:modelValue":N=>l.value=N,contentProps:e.mergeProps({class:["v-snackbar__wrapper",i.value,m.value,p.value,a.value],style:[u.value],onPointerenter:H,onPointerleave:M},x.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:J,onTouchend:Q,onAfterLeave:X},s),{default:()=>{var N,F;return[t.genOverlays(!1,"v-snackbar"),o.timer&&!k.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(t.VProgressLinear,{ref:w,color:typeof o.timer=="string"?o.timer:"info",max:o.timeout,"model-value":c.time.value},null)]),h&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((N=n.text)==null?void 0:N.call(n))??o.text,(F=n.default)==null?void 0:F.call(n)]),n.actions&&e.createVNode(t.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[n.actions({isActive:l})])]})]},activator:n.activator})}),t.forwardRefs({},v)}});var j;const _=e.defineComponent({__name:"OxApp",props:{apiUrl:{},dataEl:{default:(j=document.body.dataset)==null?void 0:j.appData},models:{},data:{}},setup(o){const{t:d}=f.useI18n(),n=e.useSlots(),l=o,r=e.reactive({drawer:!0}),s=f.useAppContext(l),i=f.useTarget();return e.watch(()=>[s.state.state,s.state.data],()=>{s.showState=!0}),e.onErrorCaptured((m,u,a)=>{s.state.error(`${m}`)}),(m,u)=>(e.openBlock(),e.createBlock(t.VApp,null,{default:e.withCtx(()=>[e.createVNode(oe,{modelValue:e.unref(s).showState,"onUpdate:modelValue":u[0]||(u[0]=a=>e.unref(s).showState=a),color:e.unref(s).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(t.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(d)("nav.panels"),"aria-label":e.unref(d)("nav.panels"),onClick:u[1]||(u[1]=e.withModifiers(a=>r.drawer=!r.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(n)["app-nav"]&&!r.drawer2?(e.openBlock(),e.createBlock(t.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:u[2]||(u[2]=a=>{r.drawer2=!0,r.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(t.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(t.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(m.$slots,"title",{context:e.unref(s)})]),_:3}),e.createVNode(t.VSpacer),u[5]||(u[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(m.$slots,"app-bar-right",{context:e.unref(s)})]),_:3}),e.unref(n)["nav-list"]?(e.openBlock(),e.createBlock(t.VNavigationDrawer,{key:0,theme:"dark",modelValue:r.drawer,"onUpdate:modelValue":u[3]||(u[3]=a=>r.drawer=a)},e.createSlots({default:e.withCtx(()=>[e.renderSlot(m.$slots,"nav-start",{context:e.unref(s)}),e.renderSlot(m.$slots,"nav-list",{context:e.unref(s)}),e.renderSlot(m.$slots,"nav-end",{context:e.unref(s)})]),_:2},[e.unref(n)["app-nav"]?{name:"append",fn:e.withCtx(()=>[u[6]||(u[6]=e.createElementVNode("div",{class:"text-right pa-3"},null,-1))]),key:"0"}:void 0]),1032,["modelValue"])):e.createCommentVNode("",!0),e.createVNode(t.VMain,null,{default:e.withCtx(()=>[e.renderSlot(m.$slots,"main",{},()=>[e.createVNode(t.VTabsWindow,{modelValue:e.unref(i).panel,"onUpdate:modelValue":u[4]||(u[4]=a=>e.unref(i).panel=a)},{default:e.withCtx(a=>[e.renderSlot(m.$slots,"default",e.mergeProps(a,{context:e.unref(s)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),z={props:{src:String,is:String},setup(o){const d=e.shallowRef(null),n=e.computed(()=>{if(o.is)return o.is;let r=o.src.substring(o.src.lastIndexOf("/")+1);if(r&&(r=r.substring(0,r.indexOf("."))),!r)throw Error("`is` not provided and could not be deducted from `src`.");return r});function l(){d.value=f.defineAsyncComponent(o.src,n.value)}return e.watch(()=>o.src,l),l(),()=>e.h(d.value,o)}},re={class:"password-error"},$={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(o){const d=o;return(n,l)=>d.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.errors,r=>(e.openBlock(),e.createElementBlock("div",re,[e.createVNode(t.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(r),1)]))),256)):e.createCommentVNode("",!0)}},K=e.defineComponent({__name:"OxList",props:{repo:{},url:{},relations:{},dataKey:{},prevKey:{},nextKey:{},countKey:{},showFilters:{type:Boolean}},setup(o,{expose:d}){const n=o,l=e.inject("query"),r=e.inject("panels"),{value:s}=e.toRefs(r),i=f.useList({...n,query:l,value:s});return d({list:i,value:s}),(m,u)=>e.renderSlot(m.$slots,"default",{list:e.unref(i),value:e.unref(s)})}}),O={__name:"OxListFilters",props:{search:String},setup(o,{expose:d}){const{t:n}=f.useI18n(),l=e.inject("list"),r=o,s=e.computed(()=>{const u=l.filters;return u&&Object.entries(u).some(([a,p])=>!a.startsWith("page")&&!a.startsWith("ordering")&&!!p)}),i=e.computed(()=>s.value?"mdi-filter-check":"mdi-filter-outline");function m(){l.filters={},l.fetch()}return d({icon:i,hasFilters:s,reset:m}),(u,a)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:a[2]||(a[2]=e.withModifiers(p=>e.unref(l).fetch(),["prevent"])),class:"width-full"},[e.createVNode(t.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(t.VAppBarNavIcon,{icon:i.value,readonly:""},null,8,["icon"]),r.search&&e.unref(l).filters?(e.openBlock(),e.createBlock(t.VTextField,{key:0,label:e.unref(n)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(l).filters[r.search],"onUpdate:modelValue":a[0]||(a[0]=p=>e.unref(l).filters[r.search]=p),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(u.$slots,"default",{list:e.unref(l),filters:e.unref(l).filters}),e.createVNode(t.VBtn,{onClick:a[1]||(a[1]=e.withModifiers(p=>e.unref(l).fetch(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":u.$t("filters.apply"),title:e.unref(n)("filters.apply")},null,8,["aria-label","title"]),s.value?(e.openBlock(),e.createBlock(t.VBtn,{key:1,onClick:e.withModifiers(m,["stop"]),icon:"mdi-backspace","aria-label":e.unref(n)("filters.reset"),title:e.unref(n)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},le=S.genericComponent()({name:"VSlideGroupItem",props:t.makeGroupItemProps(),emits:{"group:selected":o=>!0},setup(o,d){let{slots:n}=d;const l=t.useGroupItem(o,t.VSlideGroupSymbol);return()=>{var r;return(r=n.default)==null?void 0:r.call(n,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),U={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(o,{emit:d}){const n=d,l=e.inject("list"),r=o,s=e.computed(()=>l.items);function i(a){return a=a%r.colors.length,r.colorVariant?r.colors[a]+"-"+r.colorVariant:r.colors[a]}function m(a,p,c){a[c]?!a[c].includes(p)&&a[c].push(p):a[c]=[p]}const u=e.computed(()=>{const a={};if(s.value)for(var p of s.value){const v=p[r.field];if(Array.isArray(v))if(v.length)for(var c of v)m(a,p,c);else m(a,p,null);else m(a,p,v)}return a});return(a,p)=>(e.openBlock(),e.createBlock(t.VSheet,null,{default:e.withCtx(()=>[e.createVNode(t.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.headers,(c,v)=>(e.openBlock(),e.createBlock(le,{key:c.value},{default:e.withCtx(({selectedClass:w})=>[e.createVNode(t.VCard,{width:"400",class:e.normalizeClass(["ma-3",w]),color:i(v),lines:"two"},{default:e.withCtx(()=>[e.createVNode(t.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.title),1)]),_:2},1024),e.createVNode(t.VList,{"bg-color":i(v)},{default:e.withCtx(()=>[u.value&&u.value[c.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.value[c.value],k=>e.renderSlot(a.$slots,"item",{key:k.id,header:c,item:k},()=>[e.createVNode(t.VListItem,{title:k[r.itemTitle],value:r.itemValue&&k[r.itemValue],onClick:b=>n("click",k)},{append:e.withCtx(()=>[e.renderSlot(a.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},T=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(o){const{t:d}=f.useI18n(),n=e.useSlots(),l=C.filterSlots(n,"item.",{exclude:["item.actions"]}),r=e.inject("panels"),s=e.inject("list"),i=new C.Permissions("change"),m=o,u=e.computed(()=>m.headers.reduce((c,v)=>(c.push(typeof v=="string"?{key:v,title:d(f.tKeys.field(v))}:v),c),[]));function a(c){return s.fetch({filters:{page:c.page,page_size:c.itemsPerPage,ordering:c.sortBy.map(({key:v,order:w})=>w=="asc"?v:`-${v}`)}})}function p(c,v){r.show({view:"detail.edit",value:v})}return(c,v)=>{var w;return e.openBlock(),e.createBlock(t.VDataTableServer,{items:e.unref(s).items,"item-index":"id","items-length":e.unref(s).count||e.unref(s).items.length,loading:(w=e.unref(s).state)==null?void 0:w.isProcessing,headers:u.value,"onUpdate:options":a},e.createSlots({loading:e.withCtx(()=>[e.createVNode(t.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:k})=>[o.edit?(e.openBlock(),e.createBlock(P,{key:0,icon:"mdi-pencil",button:"",title:e.unref(d)("actions.edit"),permissions:e.unref(i),item:k,run:p},null,8,["title","permissions","item"])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"item.actions",{value:k,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(l),(k,b)=>({name:b,fn:e.withCtx(V=>[e.renderSlot(c.$slots,b,e.normalizeProps(e.guardReactiveProps(V)))])}))]),1032,["items","items-length","loading","headers"])}}}),L={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(o){const d=e.useSlots(),n=o;let l=e.ref(!1);e.watch(()=>n.state.state,i=>{n.delay&&i==C.States.PROCESSING&&(l.value=!1,window.setTimeout(()=>{l.value=!0},5e3))});const r=e.computed(()=>{var i;return((i=n.state)==null?void 0:i.isProcessing)&&(!n.delay||l.value)}),s=e.computed(()=>{var i,m;return(m=(i=n.state)==null?void 0:i.data)==null?void 0:m.messages});return(i,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.state.isNone&&e.unref(d).none?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:o.state,title:o.noneTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"none",{state:o.state})]),_:3},8,["state","title"])):r.value?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:o.state,title:o.processingTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"processing",{state:o.state},()=>[m[0]||(m[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):n.state.isError?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:o.state,title:o.errorTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"error",{state:o.state},()=>[m[1]||(m[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(i.$slots,"error-detail",{state:o.state})]),_:3},8,["state","title"])):n.state.isOk?(e.openBlock(),e.createBlock(e.unref(t.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:o.state,title:o.okTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"ok",{state:o.state},()=>[m[2]||(m[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),s.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,u=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(u),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"ok-detail",{state:o.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"default",{state:n.state})],64))}},ae={class:"text-right"},A={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(o,{emit:d}){const n=d,l=o;return(r,s)=>(e.openBlock(),e.createElementBlock("div",ae,[e.createVNode(e.unref(t.VBtn),{color:"error",class:"me-2","prepend-icon":l.resetIcon,onClick:s[0]||(s[0]=i=>n("reset")),disabled:l.disabled},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(l.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),l.state.isSending?(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>s[2]||(s[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(t.VBtn),{key:1,color:"primary","prepend-icon":l.validateIcon,onClick:s[1]||(s[1]=i=>n("validate")),disabled:l.disabled||l.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(l.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},se={key:0},ie={class:"text-right mt-3"},G={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(o,{emit:d}){const n=e.useTemplateRef("password"),l=o,r=e.reactive({username:"",password:""}),s=e.ref(!1),i=e.reactive(new C.State);function m(a=!0){C.reset(r,{username:"",password:""}),a&&i.none()}async function u(){i.processing();try{const a=await fetch(l.url,{method:"POST",headers:C.config$1.axiosConfig.headers,body:JSON.stringify(r)});a.status==200?(r.credentials="",r.password="",i.ok(await a.json()),l.next&&(window.location.href=l.next)):i.error(await a.json())}catch(a){i.ok((a==null?void 0:a.message)||a)}}return(a,p)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(L),{state:i},{none:e.withCtx(({state:c})=>p[7]||(p[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:c})=>[l.next?(e.openBlock(),e.createElementBlock("p",se,[p[8]||(p[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(l.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:c})=>{var v,w;return[e.createVNode($,{errors:(v=c.data)==null?void 0:v.username},null,8,["errors"]),e.createVNode($,{errors:(w=c.data)==null?void 0:w.password},null,8,["errors"])]}),_:1},8,["state"]),i.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTextField,{variant:"underlined",label:"Enter login",modelValue:r.username,"onUpdate:modelValue":p[0]||(p[0]=c=>r.username=c),onKeyup:p[1]||(p[1]=e.withKeys(e.withModifiers(c=>e.unref(n).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(t.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:r.password,"onUpdate:modelValue":p[2]||(p[2]=c=>r.password=c),type:s.value?"text":"password","append-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:append":p[3]||(p[3]=c=>s.value=!s.value),onKeyup:p[4]||(p[4]=e.withKeys(e.withModifiers(c=>u(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",ie,[e.renderSlot(a.$slots,"default",{value:r.password},()=>[r.username&&r.password?(e.openBlock(),e.createBlock(A,{key:0,"validate-label":"Login!",onValidate:p[5]||(p[5]=c=>u()),onReset:p[6]||(p[6]=c=>m()),state:i},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},I=e.defineComponent({__name:"OxPanel",props:{index:{},state:{},help:{},name:{},title:{},icon:{}},setup(o){const d=e.useSlots(),n=o,l=f.filterSlots(d,"views.");console.log(l);const r=e.ref(!1);e.onMounted(()=>{r.value=!0});const s=e.inject("panels");return(i,m)=>{const u=e.resolveComponent("ox-state-alert");return e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:n.name,"onGroup:selected":m[1]||(m[1]=a=>e.unref(s).reset({panel:n.name}))},{default:e.withCtx(()=>[n.state?(e.openBlock(),e.createBlock(u,{key:0,state:n.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(t.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!r.value||e.unref(s).panel!=n.name},[n.icon?(e.openBlock(),e.createBlock(t.VIcon,{key:0,icon:n.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!r.value||e.unref(s).panel!=n.name},[e.renderSlot(i.$slots,"append-title"),n.help?(e.openBlock(),e.createBlock(t.VBtn,{key:0,class:"ml-3",href:n.help,target:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(i.$slots,"top"),e.renderSlot(i.$slots,"default",{},()=>[e.unref(l)?(e.openBlock(),e.createBlock(t.VWindow,{key:0,modelValue:e.unref(s).view,"onUpdate:modelValue":m[0]||(m[0]=a=>e.unref(s).view=a)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(a,p)=>(e.openBlock(),e.createBlock(t.VWindowItem,{key:a,value:a},{default:e.withCtx(()=>[e.renderSlot(i.$slots,p)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(i.$slots,"bottom")]),_:3})]),_:3},8,["value"])}}}),E={__name:"OxModelEdit",props:e.mergeModels({subtitle:String},{value:{type:Object,default:()=>null},valueModifiers:{}}),emits:["update:value"],setup(o){const{t:d}=f.useI18n();e.inject("context");const n=e.useModel(o,"value"),l=e.computed(()=>{var c;return(c=n.value)==null?void 0:c.constructor}),r=e.inject("panels");function s(c){r.value&&c&&(r.value.title=`Edit ${c.$title}`)}s(n.value),e.watch(n,s);const i=e.ref(null),m=e.useSlots(),u=C.filterSlots(m,"tab.",{exclude:"tab.default"}),a=C.filterSlots(m,"window.",{exclude:"window.default"}),p=e.computed(()=>({panels:r,value:n.value,model:l.value}));return(c,v)=>n.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(u)&&Object.keys(e.unref(u)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(t.VTabs,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=w=>i.value=w)},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"tab.default",e.normalizeProps(e.guardReactiveProps(p.value)),()=>[e.createVNode(t.VTab,{text:e.unref(d)(`models.${l.value.entity}`),value:"model"},null,8,["text"])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(w,k)=>e.renderSlot(c.$slots,k,e.mergeProps({ref_for:!0},p.value))),256))]),_:3},8,["modelValue"]),e.createVNode(t.VTabsWindow,{modelValue:i.value,"onUpdate:modelValue":v[1]||(v[1]=w=>i.value=w)},{default:e.withCtx(()=>[e.createVNode(t.VTabsWindowItem,{value:"model"},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"window.default",e.normalizeProps(e.guardReactiveProps(p.value)))]),_:3}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(w,k)=>(e.openBlock(),e.createBlock(t.VTabsWindowItem,{value:w},{default:e.withCtx(()=>[e.renderSlot(c.$slots,k,e.mergeProps({ref_for:!0},p.value))]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(c.$slots,"window.default",e.normalizeProps(e.mergeProps({key:1},p.value)))],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(" Nothing to edit ")],64))}},W=e.defineComponent({__name:"OxModelPanel",props:{repo:{},url:{},relations:{},dataKey:{},prevKey:{},nextKey:{},countKey:{},showFilters:{type:Boolean},index:{default:"list.table"},state:{},help:{},name:{},title:{},icon:{},search:{},view:{},headers:{}},setup(o){const d=e.useSlots(),n=f.filterSlots(d,"views.list."),l=f.filterSlots(d,"item."),r=f.filterSlots(d,"views.detail.edit."),s=e.useTemplateRef("filters"),i=o,m=e.inject("repos"),u=e.inject("panels"),a=f.injectOrProvide("query",()=>new f.Query({repos:m,repo:i.repo})),p=f.injectOrProvide("list",()=>new f.List(a),!0),c=f.useModelPanel({list:p,query:a,panels:u,props:i}),{showFilters:v}=e.toRefs(c),w=e.computed(()=>[...i.headers,{key:"actions",title:f.t("actions")}]),k=e.computed(()=>({panel:c,panels:u,list:p,value:u.value}));return(b,V)=>(e.openBlock(),e.createBlock(I,{name:i.name,title:e.unref(c).title,icon:e.unref(c).icon,state:e.unref(p).state,index:i.index},e.createSlots({"append-title":e.withCtx(()=>{var g;return[e.renderSlot(b.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(k.value))),e.unref(u).view.startsWith("list.")?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(b.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(k.value))),e.unref(s)?(e.openBlock(),e.createBlock(t.VBtn,{key:0,title:e.unref(v)?e.unref(f.t)("filters.hide"):e.unref(f.t)("filters.show"),"aria-label":e.unref(v)?e.unref(f.t)("filters.hide"):e.unref(f.t)("filters.show"),onClick:V[0]||(V[0]=y=>v.value=!e.unref(v)),active:e.unref(v)},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:e.unref(s).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(u).view.startsWith("detail.")&&((g=e.unref(u).value)!=null&&g.id)?(e.openBlock(),e.createBlock(t.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(b.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(k.value))),e.unref(u).view=="detail.edit"&&e.unref(u).value?(e.openBlock(),e.createBlock(t.VMenu,{key:0},{activator:e.withCtx(({props:y})=>[e.createVNode(t.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},y),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(f.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(t.VList,null,{default:e.withCtx(()=>[e.renderSlot(b.$slots,"item.actions",{value:e.unref(u).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtn,{disabled:!e.unref(p).prev,title:e.unref(f.t)("prev"),"aria-label":e.unref(f.t)("prev"),onClick:V[1]||(V[1]=e.withModifiers(y=>e.unref(u).value=e.unref(p).prev,["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(t.VBtn,{disabled:!e.unref(p).next,title:e.unref(f.t)("next"),"aria-label":e.unref(f.t)("next"),onClick:V[2]||(V[2]=e.withModifiers(y=>e.unref(u).value=e.unref(p).next,["stop"]))},{default:e.withCtx(()=>[e.createVNode(t.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(t.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(u).view,"onUpdate:modelValue":V[4]||(V[4]=y=>e.unref(u).view=y),density:"compact",variant:"tonal"},{default:e.withCtx(()=>{var y;return[e.createVNode(t.VBtn,{value:"list.table",title:e.unref(f.t)("panels.nav.table"),"aria-label":e.unref(f.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[6]||(V[6]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(d)["views.list.cards"]?(e.openBlock(),e.createBlock(t.VBtn,{key:0,value:"list.cards",title:e.unref(f.t)("panels.nav.cards"),"aria-label":e.unref(f.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[7]||(V[7]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(d)["views.list.kanban"]?(e.openBlock(),e.createBlock(t.VBtn,{key:1,value:"list.kanban",title:e.unref(f.t)("panels.nav.kanban"),"aria-label":e.unref(f.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[8]||(V[8]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(d)["views.detail.add"]?(e.openBlock(),e.createBlock(t.VBtn,{key:2,value:"detail.add",onClick:V[3]||(V[3]=e.withModifiers(B=>e.unref(c).create(),["stop"])),title:e.unref(f.t)("panels.nav.add"),"aria-label":e.unref(f.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[9]||(V[9]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(d)["views.detail.edit"]||e.unref(r)?(e.openBlock(),e.createBlock(t.VBtn,{key:3,value:"detail.edit",disabled:!((y=e.unref(u).value)!=null&&y.id),title:e.unref(f.t)("panels.nav.edit"),"aria-label":e.unref(f.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(t.VIcon,null,{default:e.withCtx(()=>V[10]||(V[10]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(b.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(k.value)))]}),_:3},8,["modelValue"])]}),top:e.withCtx(()=>[e.withDirectives(e.createVNode(O,{ref_key:"filters",ref:s,search:i.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(g=>[e.renderSlot(b.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(g)))]),_:3},8,["search"]),[[e.vShow,e.unref(u).view.startsWith("list.")&&e.unref(v)]])]),_:2},[e.unref(d)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(T,{headers:w.value,edit:""},e.createSlots({_:2},[e.renderList(e.unref(l),(g,y)=>({name:y,fn:e.withCtx(B=>[e.renderSlot(b.$slots,y,e.normalizeProps(e.guardReactiveProps(B)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(n),(g,y)=>({name:y,fn:e.withCtx(()=>[e.renderSlot(b.$slots,y,e.normalizeProps(e.guardReactiveProps(k.value)))])})),e.unref(d)["views.detail.edit"]||e.unref(r)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(E,{value:e.unref(u).value,"onUpdate:value":V[5]||(V[5]=g=>e.unref(u).value=g)},e.createSlots({_:2},[e.renderList(e.unref(r),(g,y)=>({name:g,fn:e.withCtx(B=>[e.renderSlot(b.$slots,y,e.normalizeProps(e.guardReactiveProps(B)))])}))]),1032,["value"])]),key:"1"}:void 0,e.unref(d)["views.detail.add"]?{name:"views.detail.add",fn:e.withCtx(()=>[e.renderSlot(b.$slots,"views.detail.add",e.mergeProps(k.value,{saved:g=>e.unref(c).created(g)}))]),key:"2"}:void 0]),1032,["name","title","icon","state","index"]))}}),q=e.defineComponent({__name:"OxPanelNav",props:{name:{},title:{},icon:{},panel:{},view:{},value:{},href:{},auto:{type:Boolean}},setup(o){const d=o,n=e.inject("panels");return e.computed(()=>!d.auto||panel.name==d.name),(l,r)=>(e.openBlock(),e.createBlock(t.VListItem,{active:e.unref(n).panel==d.name,"prepend-icon":d.icon,title:d.title,onClick:r[0]||(r[0]=e.withModifiers(s=>e.unref(n).show(d),["stop"]))},null,8,["active","prepend-icon","title"]))}}),ue=Object.freeze(Object.defineProperty({__proto__:null,OxAction:P,OxActionModelDelete:R,OxActions:D,OxApp:_,OxComponent:z,OxFieldDetails:$,OxList:K,OxListFilters:O,OxListKanban:U,OxListTable:T,OxLogin:G,OxModelEdit:E,OxModelPanel:W,OxPanel:I,OxPanelNav:q,OxStateAlert:L,OxValidationBtn:A},Symbol.toStringTag,{value:"Module"})),de={el:"#app",delimiters:["[[","]]"],components:{...ue,...ee.components}};exports.App=de;exports.OxAction=P;exports.OxActionModelDelete=R;exports.OxActions=D;exports.OxApp=_;exports.OxComponent=z;exports.OxFieldDetails=$;exports.OxList=K;exports.OxListFilters=O;exports.OxListKanban=U;exports.OxListTable=T;exports.OxLogin=G;exports.OxModelEdit=E;exports.OxModelPanel=W;exports.OxPanel=I;exports.OxPanelNav=q;exports.OxStateAlert=L;exports.OxValidationBtn=A;
//# sourceMappingURL=components.cjs.map
