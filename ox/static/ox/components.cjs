"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),k=require("ox"),n=require("./VAlert-BQiprWaW.cjs"),B=require("./vue-i18n-cb0Kp5kl.cjs"),g=require("./theme-Bxzsxwfr.cjs"),te=require("ox/vendor"),$=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{},run:{}},emits:["completed"],setup(l,{emit:i}){const t=l,o=i,r=e.inject("context"),s=k.useAction({user:r.user,emits:o},t);async function a(...u){await s.run(...u)}return(u,c)=>e.unref(s).allowed?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.button?(e.openBlock(),e.createBlock(n.VBtn,{key:0,variant:"text",color:t.color,icon:t.icon,title:t.title,"aria-label":t.title,onClick:e.withModifiers(a,["stop"])},null,8,["color","icon","title","aria-label"])):(e.openBlock(),e.createBlock(n.VListItem,{key:1,title:t.title,"base-color":t.color,"prepend-icon":t.icon,onClick:e.withModifiers(a,["stop"])},null,8,["title","base-color","prepend-icon"]))],64)):e.createCommentVNode("",!0)}}),D=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(l){const{t:i}=B.useI18n(),t=e.inject("panel"),o=e.inject("repos"),r=l;async function s(a,u){return await o[u.constructor.entity].api().delete(u.$url(),{delete:r.item.id})}return(a,u)=>(e.openBlock(),e.createBlock($,{item:r.item,button:r.button,icon:"mdi-delete",color:"error",title:e.unref(i)("actions.delete"),confirm:e.unref(i)("actions.delete.confirm"),permissions:["delete",(c,p)=>p.id],run:s,onCompleted:u[0]||(u[0]=c=>{var p;return(p=e.unref(t))==null?void 0:p.show()})},null,8,["item","button","title","confirm","permissions"]))}}),_={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(l){e.useSlots();const i=l;return(t,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(t.$slots,"before",e.normalizeProps(e.guardReactiveProps(i))),e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps(i))),e.renderSlot(t.$slots,"after",e.normalizeProps(e.guardReactiveProps(i)))],64))}};function ne(l){const i=e.shallowRef(l());let t=-1;function o(){clearInterval(t)}function r(){o(),e.nextTick(()=>i.value=l())}function s(a){const u=a?getComputedStyle(a):{transitionDuration:.2},c=parseFloat(u.transitionDuration)*1e3||200;if(o(),i.value<=0)return;const p=performance.now();t=window.setInterval(()=>{const m=performance.now()-p+c;i.value=Math.max(l()-m,0),i.value<=0&&o()},c)}return e.onScopeDispose(o),{clear:o,time:i,start:s,reset:r}}const oe=g.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...n.makeLocationProps({location:"bottom"}),...n.makePositionProps(),...n.makeRoundedProps(),...n.makeVariantProps(),...g.makeThemeProps(),...g.omit(n.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),le=g.genericComponent()({name:"VSnackbar",props:oe(),emits:{"update:modelValue":l=>!0},setup(l,i){let{slots:t}=i;const o=g.useProxiedModel(l,"modelValue"),{positionClasses:r}=n.usePosition(l),{scopeId:s}=n.useScopeId(),{themeClasses:a}=g.provideTheme(l),{colorClasses:u,colorStyles:c,variantClasses:p}=n.useVariant(l),{roundedClasses:m}=n.useRounded(l),d=ne(()=>Number(l.timeout)),v=e.ref(),V=e.ref(),f=e.shallowRef(!1),y=e.shallowRef(0),w=e.ref(),x=e.inject(n.VuetifyLayoutKey,void 0);g.useToggleScope(()=>!!x,()=>{const b=n.useLayout();e.watchEffect(()=>{w.value=b.mainStyles.value})}),e.watch(o,h),e.watch(()=>l.timeout,h),e.onMounted(()=>{o.value&&h()});let O=-1;function h(){d.reset(),window.clearTimeout(O);const b=Number(l.timeout);if(!o.value||b===-1)return;const S=g.refElement(V.value);d.start(S),O=window.setTimeout(()=>{o.value=!1},b)}function H(){d.reset(),window.clearTimeout(O)}function J(){f.value=!0,H()}function F(){f.value=!1,h()}function Q(b){y.value=b.touches[0].clientY}function X(b){Math.abs(y.value-b.changedTouches[0].clientY)>50&&(o.value=!1)}function Z(){f.value&&F()}const ee=e.computed(()=>l.location.split(" ").reduce((b,S)=>(b[`v-snackbar--${S}`]=!0,b),{}));return n.useRender(()=>{const b=n.VOverlay.filterProps(l),S=!!(t.default||t.text||l.text);return e.createVNode(n.VOverlay,e.mergeProps({ref:v,class:["v-snackbar",{"v-snackbar--active":o.value,"v-snackbar--multi-line":l.multiLine&&!l.vertical,"v-snackbar--timer":!!l.timer,"v-snackbar--vertical":l.vertical},ee.value,r.value,l.class],style:[w.value,l.style]},b,{modelValue:o.value,"onUpdate:modelValue":C=>o.value=C,contentProps:e.mergeProps({class:["v-snackbar__wrapper",a.value,u.value,m.value,p.value],style:[c.value],onPointerenter:J,onPointerleave:F},b.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:Q,onTouchend:X,onAfterLeave:Z},s),{default:()=>{var C,j;return[n.genOverlays(!1,"v-snackbar"),l.timer&&!f.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(n.VProgressLinear,{ref:V,color:typeof l.timer=="string"?l.timer:"info",max:l.timeout,"model-value":d.time.value},null)]),S&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((C=t.text)==null?void 0:C.call(t))??l.text,(j=t.default)==null?void 0:j.call(t)]),t.actions&&e.createVNode(n.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[t.actions({isActive:o})])]})]},activator:t.activator})}),n.forwardRefs({},v)}});var R;const z=e.defineComponent({__name:"OxApp",props:{apiUrl:{},dataEl:{default:(R=document.body.dataset)==null?void 0:R.appData},models:{},data:{}},setup(l){const{t:i}=k.useI18n(),t=e.useSlots(),o=l,r=e.reactive({drawer:!0}),s=k.useAppContext(o);return e.watch(()=>[s.state.state,s.state.data],()=>{s.showState=!0}),e.onErrorCaptured((a,u,c)=>{s.state.error(`${a}`)}),(a,u)=>(e.openBlock(),e.createBlock(n.VApp,null,{default:e.withCtx(()=>[e.createVNode(le,{modelValue:e.unref(s).showState,"onUpdate:modelValue":u[0]||(u[0]=c=>e.unref(s).showState=c),color:e.unref(s).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(n.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(i)("nav.panels"),"aria-label":e.unref(i)("nav.panels"),onClick:u[1]||(u[1]=e.withModifiers(c=>r.drawer=!r.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(t)["app-nav"]&&!r.drawer2?(e.openBlock(),e.createBlock(n.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:u[2]||(u[2]=c=>{r.drawer2=!0,r.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(n.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(n.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"title",{context:e.unref(s)})]),_:3}),e.createVNode(n.VSpacer),u[5]||(u[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(a.$slots,"app-bar-right",{context:e.unref(s)})]),_:3}),e.unref(t)["nav-list"]?(e.openBlock(),e.createBlock(n.VNavigationDrawer,{key:0,theme:"dark",modelValue:r.drawer,"onUpdate:modelValue":u[3]||(u[3]=c=>r.drawer=c)},e.createSlots({default:e.withCtx(()=>[e.renderSlot(a.$slots,"nav-start",{context:e.unref(s)}),e.renderSlot(a.$slots,"nav-list",{context:e.unref(s)}),e.renderSlot(a.$slots,"nav-end",{context:e.unref(s)})]),_:2},[e.unref(t)["app-nav"]?{name:"append",fn:e.withCtx(()=>[u[6]||(u[6]=e.createElementVNode("div",{class:"text-right pa-3"},null,-1))]),key:"0"}:void 0]),1032,["modelValue"])):e.createCommentVNode("",!0),e.createVNode(n.VMain,null,{default:e.withCtx(()=>[e.createVNode(n.VTabsWindow,{modelValue:e.unref(s).panel.name,"onUpdate:modelValue":u[4]||(u[4]=c=>e.unref(s).panel.name=c)},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"default",{context:e.unref(s)})]),_:3},8,["modelValue"])]),_:3})]),_:3}))}}),K={props:{src:String,is:String},setup(l){const i=e.shallowRef(null),t=e.computed(()=>{if(l.is)return l.is;let r=l.src.substring(l.src.lastIndexOf("/")+1);if(r&&(r=r.substring(0,r.indexOf("."))),!r)throw Error("`is` not provided and could not be deducted from `src`.");return r});function o(){i.value=k.defineAsyncComponent(l.src,t.value)}return e.watch(()=>l.src,o),o(),()=>e.h(i.value,l)}},re={class:"password-error"},N={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(l){const i=l;return(t,o)=>i.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(i.errors,r=>(e.openBlock(),e.createElementBlock("div",re,[e.createVNode(n.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(r),1)]))),256)):e.createCommentVNode("",!0)}},U=e.defineComponent({__name:"OxList",props:{repo:{},url:{},relations:{},dataKey:{},prevKey:{},nextKey:{},countKey:{},showFilters:{type:Boolean}},setup(l,{expose:i}){const t=l,o=e.inject("repos"),r=e.inject("panel"),{value:s}=e.toRefs(r),a=k.useList({...t,value:s,repos:o});return i({list:a,value:s}),(u,c)=>e.renderSlot(u.$slots,"default",{list:e.unref(a),value:e.unref(s)})}}),T={__name:"OxListFilters",props:{search:String},setup(l,{expose:i}){const{t}=k.useI18n(),o=e.inject("list"),r=l,s=e.computed(()=>{const c=o.filters;return c&&Object.entries(c).some(([p,m])=>!p.startsWith("page")&&!p.startsWith("ordering")&&!!m)}),a=e.computed(()=>s.value?"mdi-filter-check":"mdi-filter-outline");function u(){o.filters={},o.fetch()}return i({icon:a,hasFilters:s,reset:u}),(c,p)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:p[2]||(p[2]=e.withModifiers(m=>e.unref(o).fetch(),["prevent"])),class:"width-full"},[e.createVNode(n.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:a.value,readonly:""},null,8,["icon"]),r.search&&e.unref(o).filters?(e.openBlock(),e.createBlock(n.VTextField,{key:0,label:e.unref(t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(o).filters[r.search],"onUpdate:modelValue":p[0]||(p[0]=m=>e.unref(o).filters[r.search]=m),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"default",{list:e.unref(o),filters:e.unref(o).filters}),e.createVNode(n.VBtn,{onClick:p[1]||(p[1]=e.withModifiers(m=>e.unref(o).fetch(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":c.$t("filters.apply"),title:e.unref(t)("filters.apply")},null,8,["aria-label","title"]),s.value?(e.openBlock(),e.createBlock(n.VBtn,{key:1,onClick:e.withModifiers(u,["stop"]),icon:"mdi-backspace","aria-label":e.unref(t)("filters.reset"),title:e.unref(t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},ae=g.genericComponent()({name:"VSlideGroupItem",props:n.makeGroupItemProps(),emits:{"group:selected":l=>!0},setup(l,i){let{slots:t}=i;const o=n.useGroupItem(l,n.VSlideGroupSymbol);return()=>{var r;return(r=t.default)==null?void 0:r.call(t,{isSelected:o.isSelected.value,select:o.select,toggle:o.toggle,selectedClass:o.selectedClass.value})}}}),G={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(l,{emit:i}){const t=i,o=e.inject("list"),r=l,s=e.computed(()=>o.items);function a(p){return p=p%r.colors.length,r.colorVariant?r.colors[p]+"-"+r.colorVariant:r.colors[p]}function u(p,m,d){p[d]?!p[d].includes(m)&&p[d].push(m):p[d]=[m]}const c=e.computed(()=>{const p={};if(s.value)for(var m of s.value){const v=m[r.field];if(Array.isArray(v))if(v.length)for(var d of v)u(p,m,d);else u(p,m,null);else u(p,m,v)}return p});return(p,m)=>(e.openBlock(),e.createBlock(n.VSheet,null,{default:e.withCtx(()=>[e.createVNode(n.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.headers,(d,v)=>(e.openBlock(),e.createBlock(ae,{key:d.value},{default:e.withCtx(({selectedClass:V})=>[e.createVNode(n.VCard,{width:"400",class:e.normalizeClass(["ma-3",V]),color:a(v),lines:"two"},{default:e.withCtx(()=>[e.createVNode(n.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.title),1)]),_:2},1024),e.createVNode(n.VList,{"bg-color":a(v)},{default:e.withCtx(()=>[c.value&&c.value[d.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(c.value[d.value],f=>e.renderSlot(p.$slots,"item",{key:f.id,header:d,item:f},()=>[e.createVNode(n.VListItem,{title:f[r.itemTitle],value:r.itemValue&&f[r.itemValue],onClick:y=>t("click",f)},{append:e.withCtx(()=>[e.renderSlot(p.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},L=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(l){const{t:i}=k.useI18n(),t=e.useSlots(),o=B.filterSlots(t,"item.",{exclude:["item.actions"]}),r=e.inject("panel"),s=e.inject("list"),a=new B.Permissions("change"),u=l,c=e.computed(()=>u.headers.reduce((d,v)=>(d.push(typeof v=="string"?{key:v,title:i(k.tKeys.field(v))}:v),d),[]));function p(d){return s.fetch({filters:{page:d.page,page_size:d.itemsPerPage,ordering:d.sortBy.map(({key:v,order:V})=>V=="asc"?v:`-${v}`)}})}function m(d,v){r.show({path:".detail.edit",value:v})}return(d,v)=>{var V;return e.openBlock(),e.createBlock(n.VDataTableServer,{items:e.unref(s).items,"item-index":"id","items-length":e.unref(s).count||e.unref(s).items.length,loading:(V=e.unref(s).state)==null?void 0:V.isProcessing,headers:c.value,"onUpdate:options":p},e.createSlots({loading:e.withCtx(()=>[e.createVNode(n.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:f})=>[l.edit?(e.openBlock(),e.createBlock($,{key:0,icon:"mdi-pencil",button:"",title:e.unref(i)("actions.edit"),permissions:e.unref(a),item:f,run:m},null,8,["title","permissions","item"])):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"item.actions",{value:f,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(o),(f,y)=>({name:y,fn:e.withCtx(w=>[e.renderSlot(d.$slots,y,e.normalizeProps(e.guardReactiveProps(w)))])}))]),1032,["items","items-length","loading","headers"])}}}),P={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(l){const i=e.useSlots(),t=l;let o=e.ref(!1);e.watch(()=>t.state.state,a=>{t.delay&&a==B.States.PROCESSING&&(o.value=!1,window.setTimeout(()=>{o.value=!0},5e3))});const r=e.computed(()=>{var a;return((a=t.state)==null?void 0:a.isProcessing)&&(!t.delay||o.value)}),s=e.computed(()=>{var a,u;return(u=(a=t.state)==null?void 0:a.data)==null?void 0:u.messages});return(a,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[t.state.isNone&&e.unref(i).none?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:l.state,title:l.noneTitle},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"none",{state:l.state})]),_:3},8,["state","title"])):r.value?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:l.state,title:l.processingTitle},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"processing",{state:l.state},()=>[u[0]||(u[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):t.state.isError?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:l.state,title:l.errorTitle},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"error",{state:l.state},()=>[u[1]||(u[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(a.$slots,"error-detail",{state:l.state})]),_:3},8,["state","title"])):t.state.isOk?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:l.state,title:l.okTitle},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"ok",{state:l.state},()=>[u[2]||(u[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),s.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,c=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(c),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(a.$slots,"ok-detail",{state:l.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(a.$slots,"default",{state:t.state})],64))}},se={class:"text-right"},A={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(l,{emit:i}){const t=i,o=l;return(r,s)=>(e.openBlock(),e.createElementBlock("div",se,[e.createVNode(e.unref(n.VBtn),{color:"error",class:"me-2","prepend-icon":o.resetIcon,onClick:s[0]||(s[0]=a=>t("reset")),disabled:o.disabled},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(o.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),o.state.isSending?(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>s[2]||(s[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:1,color:"primary","prepend-icon":o.validateIcon,onClick:s[1]||(s[1]=a=>t("validate")),disabled:o.disabled||o.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(o.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},ie={key:0},ue={class:"text-right mt-3"},W={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(l,{emit:i}){const t=e.useTemplateRef("password"),o=l,r=e.reactive({username:"",password:""}),s=e.ref(!1),a=e.reactive(new B.State);function u(p=!0){B.reset(r,{username:"",password:""}),p&&a.none()}async function c(){a.processing();try{const p=await fetch(o.url,{method:"POST",headers:B.config$1.axiosConfig.headers,body:JSON.stringify(r)});p.status==200?(r.credentials="",r.password="",a.ok(await p.json()),o.next&&(window.location.href=o.next)):a.error(await p.json())}catch(p){a.ok((p==null?void 0:p.message)||p)}}return(p,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(P),{state:a},{none:e.withCtx(({state:d})=>m[7]||(m[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:d})=>[o.next?(e.openBlock(),e.createElementBlock("p",ie,[m[8]||(m[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(o.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:d})=>{var v,V;return[e.createVNode(N,{errors:(v=d.data)==null?void 0:v.username},null,8,["errors"]),e.createVNode(N,{errors:(V=d.data)==null?void 0:V.password},null,8,["errors"])]}),_:1},8,["state"]),a.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTextField,{variant:"underlined",label:"Enter login",modelValue:r.username,"onUpdate:modelValue":m[0]||(m[0]=d=>r.username=d),onKeyup:m[1]||(m[1]=e.withKeys(e.withModifiers(d=>e.unref(t).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(n.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:r.password,"onUpdate:modelValue":m[2]||(m[2]=d=>r.password=d),type:s.value?"text":"password","append-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:append":m[3]||(m[3]=d=>s.value=!s.value),onKeyup:m[4]||(m[4]=e.withKeys(e.withModifiers(d=>c(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",ue,[e.renderSlot(p.$slots,"default",{value:r.password},()=>[r.username&&r.password?(e.openBlock(),e.createBlock(A,{key:0,"validate-label":"Login!",onValidate:m[5]||(m[5]=d=>c()),onReset:m[6]||(m[6]=d=>u()),state:a},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},I=e.defineComponent({__name:"OxPanelSheet",props:{help:{},name:{},title:{},icon:{}},setup(l){const i=l,t=e.ref(!1);e.onMounted(()=>{t.value=!0});const o=e.inject("panel");return(r,s)=>(e.openBlock(),e.createBlock(n.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!t.value||e.unref(o).name!=i.name},[i.icon?(e.openBlock(),e.createBlock(n.VIcon,{key:0,icon:i.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(i.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!t.value||e.unref(o).name!=i.name},[e.renderSlot(r.$slots,"append-title"),i.help?(e.openBlock(),e.createBlock(n.VBtn,{key:0,class:"ml-3",href:i.help,target:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(r.$slots,"default")]),_:3}))}}),E=e.defineComponent({__name:"OxPanel",props:{state:{},name:{},title:{},icon:{}},setup(l){const i=e.useSlots(),t=k.filterSlots(i,"views.",{exclude:["views.before","views.after"]}),o=l;e.inject("context");const r=e.inject("panel");return(s,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[o.state?(e.openBlock(),e.createBlock(P,{key:0,state:o.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(n.VTabsWindowItem,{value:o.name,"onGroup:selected":a[1]||(a[1]=u=>e.unref(r).reset(o,o.name))},{default:e.withCtx(()=>[e.createVNode(I,{name:o.name,title:o.title,icon:o.icon},{"append-title":e.withCtx(()=>[e.renderSlot(s.$slots,"append-title")]),default:e.withCtx(()=>[e.renderSlot(s.$slots,"views.before"),e.createVNode(n.VWindow,{modelValue:e.unref(r).view,"onUpdate:modelValue":a[0]||(a[0]=u=>e.unref(r).view=u)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t),(u,c)=>(e.openBlock(),e.createBlock(n.VWindowItem,{key:u,value:u},{default:e.withCtx(()=>[e.renderSlot(s.$slots,c)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"]),e.renderSlot(s.$slots,"views.after")]),_:3},8,["name","title","icon"])]),_:3},8,["value"])],64))}}),M={__name:"OxModelEdit",props:e.mergeModels({subtitle:String},{value:{type:Object,default:()=>null},valueModifiers:{}}),emits:["update:value"],setup(l){const{t:i}=k.useI18n();e.inject("context");const t=e.useModel(l,"value"),o=e.computed(()=>{var d;return(d=t.value)==null?void 0:d.constructor}),r=e.inject("panel");function s(d){r.value&&d&&(r.value.title=`Edit ${d.$title}`)}s(t.value),e.watch(t,s);const a=e.ref(null),u=e.useSlots(),c=B.filterSlots(u,"tab.",{exclude:"tab.default"}),p=B.filterSlots(u,"window.",{exclude:"window.default"}),m=e.computed(()=>({panel:r,value:t.value,model:o.value}));return(d,v)=>t.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(c)&&Object.keys(e.unref(c)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTabs,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=V=>a.value=V)},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"tab.default",e.normalizeProps(e.guardReactiveProps(m.value)),()=>[e.createVNode(n.VTab,{text:e.unref(i)(`models.${o.value.entity}`),value:"model"},null,8,["text"])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(V,f)=>e.renderSlot(d.$slots,f,e.mergeProps({ref_for:!0},m.value))),256))]),_:3},8,["modelValue"]),e.createVNode(n.VTabsWindow,{modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=V=>a.value=V)},{default:e.withCtx(()=>[e.createVNode(n.VTabsWindowItem,{value:"model"},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"window.default",e.normalizeProps(e.guardReactiveProps(m.value)))]),_:3}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(V,f)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:V},{default:e.withCtx(()=>[e.renderSlot(d.$slots,f,e.mergeProps({ref_for:!0},m.value))]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(d.$slots,"window.default",e.normalizeProps(e.mergeProps({key:1},m.value)))],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(" Nothing to edit ")],64))}},q=e.defineComponent({__name:"OxModelPanel",props:{repo:{},url:{},relations:{},dataKey:{},prevKey:{},nextKey:{},countKey:{},showFilters:{type:Boolean},state:{},name:{},title:{},icon:{},search:{},view:{},headers:{}},setup(l){const i=e.useSlots(),t=k.filterSlots(i,"views.list."),o=k.filterSlots(i,"item."),r=k.filterSlots(i,"views.detail.edit."),s=e.useTemplateRef("filters"),a=l,u=e.inject("repos"),c=e.inject("panel"),p=k.useModelPanel({repos:u,panel:c,props:a}),{list:m,showFilters:d}=p,v=e.computed(()=>({panel:c,list:m,value:c.value}));return(V,f)=>(e.openBlock(),e.createBlock(E,{name:a.name,title:e.unref(p).title,icon:e.unref(p).icon,state:e.unref(m).state},e.createSlots({"append-title":e.withCtx(()=>{var y;return[e.renderSlot(V.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(v.value))),e.unref(c).view.startsWith("list.")?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(V.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(v.value))),e.unref(s)?(e.openBlock(),e.createBlock(n.VBtn,{key:0,title:e.unref(d)?e.unref(k.t)("filters.hide"):e.unref(k.t)("filters.show"),"aria-label":e.unref(d)?e.unref(k.t)("filters.hide"):e.unref(k.t)("filters.show"),onClick:f[0]||(f[0]=w=>d.value=!e.unref(d)),active:e.unref(d)},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:e.unref(s).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(c).view.startsWith("detail.")&&((y=e.unref(c).value)!=null&&y.id)?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(V.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(v.value))),e.unref(c).view=="detail.edit"&&e.unref(c).value?(e.openBlock(),e.createBlock(n.VMenu,{key:0},{activator:e.withCtx(({props:w})=>[e.createVNode(n.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},w),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(k.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(n.VList,null,{default:e.withCtx(()=>[e.renderSlot(V.$slots,"item.actions",{value:e.unref(c).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtn,{disabled:!e.unref(m).prev,title:e.unref(k.t)("prev"),"aria-label":e.unref(k.t)("prev"),onClick:f[1]||(f[1]=e.withModifiers(w=>e.unref(c).value=e.unref(m).prev,["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(n.VBtn,{disabled:!e.unref(m).next,title:e.unref(k.t)("next"),"aria-label":e.unref(k.t)("next"),onClick:f[2]||(f[2]=e.withModifiers(w=>e.unref(c).value=e.unref(m).next,["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(c).view,"onUpdate:modelValue":f[4]||(f[4]=w=>e.unref(c).view=w),density:"compact",variant:"tonal"},{default:e.withCtx(()=>{var w;return[e.createVNode(n.VBtn,{value:"list.table",title:e.unref(k.t)("panels.nav.table"),"aria-label":e.unref(k.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>f[6]||(f[6]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(i)["views.list.cards"]?(e.openBlock(),e.createBlock(n.VBtn,{key:0,value:"list.cards",title:e.unref(k.t)("panels.nav.cards"),"aria-label":e.unref(k.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>f[7]||(f[7]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.list.kanban"]?(e.openBlock(),e.createBlock(n.VBtn,{key:1,value:"list.kanban",title:e.unref(k.t)("panels.nav.kanban"),"aria-label":e.unref(k.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>f[8]||(f[8]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.detail.add"]?(e.openBlock(),e.createBlock(n.VBtn,{key:2,value:"detail.add",onClick:f[3]||(f[3]=e.withModifiers(x=>V.create(),["stop"])),title:e.unref(k.t)("panels.nav.add"),"aria-label":e.unref(k.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>f[9]||(f[9]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.detail.edit"]||e.unref(r)?(e.openBlock(),e.createBlock(n.VBtn,{key:3,value:"detail.edit",disabled:!((w=e.unref(c).value)!=null&&w.id),title:e.unref(k.t)("panels.nav.edit"),"aria-label":e.unref(k.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>f[10]||(f[10]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(V.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(v.value)))]}),_:3},8,["modelValue"])]}),"views.before":e.withCtx(()=>[e.withDirectives(e.createVNode(T,{ref_key:"filters",ref:s,search:a.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(y=>[e.renderSlot(V.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(y)))]),_:3},8,["search"]),[[e.vShow,e.unref(c).view.startsWith("list.")&&e.unref(d)]])]),_:2},[e.unref(i)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(L,{headers:V.headers,edit:""},e.createSlots({_:2},[e.renderList(e.unref(o),(y,w)=>({name:w,fn:e.withCtx(x=>[e.renderSlot(V.$slots,w,e.normalizeProps(e.guardReactiveProps(x)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(t),(y,w)=>({name:w,fn:e.withCtx(()=>[e.renderSlot(V.$slots,w,e.normalizeProps(e.guardReactiveProps(v.value)))])})),e.unref(i)["views.detail.edit"]||e.unref(r)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(M,{value:e.unref(c).value,"onUpdate:value":f[5]||(f[5]=y=>e.unref(c).value=y)},e.createSlots({_:2},[e.renderList(e.unref(r),(y,w)=>({name:y,fn:e.withCtx(x=>[e.renderSlot(V.$slots,w,e.normalizeProps(e.guardReactiveProps(x)))])}))]),1032,["value"])]),key:"1"}:void 0,e.unref(i)["views.detail.add"]?{name:"views.detail.add",fn:e.withCtx(()=>[e.renderSlot(V.$slots,"views.detail.add",e.mergeProps(v.value,{saved:y=>V.model_panel.created(y)}))]),key:"2"}:void 0]),1032,["name","title","icon","state"]))}}),Y=e.defineComponent({__name:"OxPanelNav",props:{name:{},title:{},icon:{},path:{},href:{},value:{},force:{type:Boolean},auto:{type:Boolean}},setup(l,{expose:i}){const t=l,o=e.inject("panel"),r=e.computed(()=>!t.auto||o.name==t.name),s=e.computed(()=>{const a=o.name==t.name&&o.edited?"*":"";return t.title+a});return i({title:s,name:t.name}),(a,u)=>r.value?(e.openBlock(),e.createBlock(n.VListItem,{key:0,active:e.unref(o).name==t.name,"prepend-icon":t.icon,title:t.title,onClick:u[0]||(u[0]=e.withModifiers(c=>e.unref(o).show({path:t.path??t.name}),["stop"]))},null,8,["active","prepend-icon","title"])):e.createCommentVNode("",!0)}}),de=Object.freeze(Object.defineProperty({__proto__:null,OxAction:$,OxActionModelDelete:D,OxActions:_,OxApp:z,OxComponent:K,OxFieldDetails:N,OxList:U,OxListFilters:T,OxListKanban:G,OxListTable:L,OxLogin:W,OxModelEdit:M,OxModelPanel:q,OxPanel:E,OxPanelNav:Y,OxPanelSheet:I,OxStateAlert:P,OxValidationBtn:A},Symbol.toStringTag,{value:"Module"})),ce={el:"#app",delimiters:["[[","]]"],components:{...de,...te.components}};exports.App=ce;exports.OxAction=$;exports.OxActionModelDelete=D;exports.OxActions=_;exports.OxApp=z;exports.OxComponent=K;exports.OxFieldDetails=N;exports.OxList=U;exports.OxListFilters=T;exports.OxListKanban=G;exports.OxListTable=L;exports.OxLogin=W;exports.OxModelEdit=M;exports.OxModelPanel=q;exports.OxPanel=E;exports.OxPanelNav=Y;exports.OxPanelSheet=I;exports.OxStateAlert=P;exports.OxValidationBtn=A;
//# sourceMappingURL=components.cjs.map
