"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),V=require("ox"),l=require("./VAlert-Dj0RKqk_.cjs"),S=require("./theme-BS02m0hV.cjs"),U=require("./lodash-DHSgm9t9.cjs"),Te=require("ox/vendor"),W=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{type:[String,Function,Array]},run:{},href:{}},emits:["completed"],setup(t,{emit:d}){const n=t,u=d,a=e.inject("context"),{run:r,processing:i,allowed:f}=V.useAction({user:a.user,emits:u,props:n});return(o,s)=>e.unref(f)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.button?(e.openBlock(),e.createBlock(l.VBtn,{key:0,variant:"text",disabled:e.unref(i),color:n.color,icon:n.icon,title:n.title,"aria-label":n.title,onClick:e.withModifiers(e.unref(r),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(l.VListItem,{key:1,title:n.title,"base-color":n.color,"prepend-icon":n.icon,disabled:e.unref(i),onClick:e.withModifiers(e.unref(r),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),ie=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(t){const d=e.inject("panel"),n=e.inject("repos"),u=t;async function a(r,i){return await n[i.constructor.entity].api().delete(i.$url(),{delete:u.item.id})}return(r,i)=>(e.openBlock(),e.createBlock(W,{item:u.item,button:u.button,icon:"mdi-delete",color:"error",title:e.unref(V.t)("actions.delete"),confirm:e.unref(V.t)("actions.delete.confirm"),permissions:["delete",(f,o)=>o.id],run:a,onCompleted:i[0]||(i[0]=f=>{var o;return(o=e.unref(d))==null?void 0:o.show({view:e.unref(d).index})})},null,8,["item","button","title","confirm","permissions"]))}}),ue={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(t){e.useSlots();const d=t;return(n,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(n.$slots,"before",e.normalizeProps(e.guardReactiveProps(d))),e.renderSlot(n.$slots,"default",e.normalizeProps(e.guardReactiveProps(d))),e.renderSlot(n.$slots,"after",e.normalizeProps(e.guardReactiveProps(d)))],64))}},Le=e.defineComponent({__name:"OxAppNavItem",props:{title:{},icon:{},name:{},url:{},permissions:{},type:{},items:{},order:{}},setup(t){const d=t;e.ref(null);const n=e.inject("user"),u=e.inject("panels");e.computed(()=>!d.auto||panel.name==d.name);function a(i){return i.permissions&&!n.can(i.permissions)?!1:i.items?i.items.some(f=>a(f)):!0}function r(){const i={panel:d.name,href:d.url};console.log(d,i),u.show(i)}return(i,f)=>{const o=e.resolveComponent("ox-app-nav-item",!0);return a(d)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[d.type=="subheader"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VListSubheader,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.title),1)]),_:1}),d.items?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.items,s=>(e.openBlock(),e.createBlock(o,e.mergeProps({ref_for:!0},s),null,16))),256)):e.createCommentVNode("",!0)],64)):d.type=="group"?(e.openBlock(),e.createBlock(l.VListGroup,{key:1,value:d.name},{activator:e.withCtx(({props:s})=>[e.createVNode(l.VListItem,e.mergeProps(s,{title:d.title,"prepend-icon":d.icon}),null,16,["title","prepend-icon"])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.items,(s,c)=>(e.openBlock(),e.createBlock(o,e.mergeProps({key:c,ref_for:!0},s),null,16))),128))]),_:1},8,["value"])):d.type=="divider"?(e.openBlock(),e.createBlock(l.VDivider,{key:2})):(e.openBlock(),e.createBlock(l.VListItem,{key:3,active:e.unref(u).panel==d.name,value:d.name,"prepend-icon":d.icon,title:d.title,onClick:e.withModifiers(r,["stop"])},null,8,["active","value","prepend-icon","title"]))],64)):e.createCommentVNode("",!0)}}}),Fe={__name:"OxAppNav",props:e.mergeModels({items:Array},{drawer:{},drawerModifiers:{}}),emits:["update:drawer"],setup(t){e.inject("context");const d=e.inject("panels"),n=e.useModel(t,"drawer"),u=e.ref([]),a=t,r=e.computed(()=>(i(a.items),a.items));function i(o){u.value=f(o)}function f(o){if(d.panel){for(const s of o)if(s.items){const c=f(s.items);if(c)return[c,s.name]}else if(s.name==d.panel)return[s.name]}}return(o,s)=>(e.openBlock(),e.createBlock(l.VNavigationDrawer,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=c=>n.value=c),theme:"dark"},{append:e.withCtx(()=>[e.createVNode(l.VList,null,{default:e.withCtx(()=>[e.renderSlot(o.$slots,"append")]),_:3})]),default:e.withCtx(()=>[e.renderSlot(o.$slots,"prepend"),e.createVNode(l.VList,{opened:u.value,"onUpdate:opened":s[0]||(s[0]=c=>u.value=c),density:"compact"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(c,m)=>(e.openBlock(),e.createBlock(e.unref(Le),e.mergeProps({key:m,ref_for:!0},c),null,16))),128))]),_:1},8,["opened"])]),_:3},8,["modelValue"]))}};function Ie(t){const d=e.shallowRef(t());let n=-1;function u(){clearInterval(n)}function a(){u(),e.nextTick(()=>d.value=t())}function r(i){const f=i?getComputedStyle(i):{transitionDuration:.2},o=parseFloat(f.transitionDuration)*1e3||200;if(u(),d.value<=0)return;const s=performance.now();n=window.setInterval(()=>{const c=performance.now()-s+o;d.value=Math.max(t()-c,0),d.value<=0&&u()},o)}return e.onScopeDispose(u),{clear:u,time:d,start:r,reset:a}}const Ae=S.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...l.makeLocationProps({location:"bottom"}),...l.makePositionProps(),...l.makeRoundedProps(),...l.makeVariantProps(),...S.makeThemeProps(),...S.omit(l.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Me=S.genericComponent()({name:"VSnackbar",props:Ae(),emits:{"update:modelValue":t=>!0},setup(t,d){let{slots:n}=d;const u=S.useProxiedModel(t,"modelValue"),{positionClasses:a}=l.usePosition(t),{scopeId:r}=l.useScopeId(),{themeClasses:i}=S.provideTheme(t),{colorClasses:f,colorStyles:o,variantClasses:s}=l.useVariant(t),{roundedClasses:c}=l.useRounded(t),m=Ie(()=>Number(t.timeout)),h=e.ref(),y=e.ref(),b=e.shallowRef(!1),A=e.shallowRef(0),B=e.ref(),v=e.inject(l.VuetifyLayoutKey,void 0);S.useToggleScope(()=>!!v,()=>{const O=l.useLayout();e.watchEffect(()=>{B.value=O.mainStyles.value})}),e.watch(u,k),e.watch(()=>t.timeout,k),e.onMounted(()=>{u.value&&k()});let g=-1;function k(){m.reset(),window.clearTimeout(g);const O=Number(t.timeout);if(!u.value||O===-1)return;const _=S.refElement(y.value);m.start(_),g=window.setTimeout(()=>{u.value=!1},O)}function C(){m.reset(),window.clearTimeout(g)}function L(){b.value=!0,C()}function M(){b.value=!1,k()}function z(O){A.value=O.touches[0].clientY}function D(O){Math.abs(A.value-O.changedTouches[0].clientY)>50&&(u.value=!1)}function Q(){b.value&&M()}const K=e.computed(()=>t.location.split(" ").reduce((O,_)=>(O[`v-snackbar--${_}`]=!0,O),{}));return l.useRender(()=>{const O=l.VOverlay.filterProps(t),_=!!(n.default||n.text||t.text);return e.createVNode(l.VOverlay,e.mergeProps({ref:h,class:["v-snackbar",{"v-snackbar--active":u.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},K.value,a.value,t.class],style:[B.value,t.style]},O,{modelValue:u.value,"onUpdate:modelValue":N=>u.value=N,contentProps:e.mergeProps({class:["v-snackbar__wrapper",i.value,f.value,c.value,s.value],style:[o.value],onPointerenter:L,onPointerleave:M},O.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:z,onTouchend:D,onAfterLeave:Q},r),{default:()=>{var N,G;return[l.genOverlays(!1,"v-snackbar"),t.timer&&!b.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(l.VProgressLinear,{ref:y,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":m.time.value},null)]),_&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((N=n.text)==null?void 0:N.call(n))??t.text,(G=n.default)==null?void 0:G.call(n)]),n.actions&&e.createVNode(l.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[n.actions({isActive:u})])]})]},activator:n.activator})}),l.forwardRefs({},h)}}),Ee={class:"nav-home"};var se;const ce=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(se=document.body.dataset)==null?void 0:se.appData},models:{},data:{}},setup(t){const d=e.useSlots(),n=V.filterSlots(d,"panels."),u=t,a=e.reactive({drawer:!0}),r=V.useAppContext(u),i=V.usePanels();return e.onMounted(()=>{i.panel=r.data.panel}),e.watch(()=>[r.state.state,r.state.data],()=>{r.showState=!0}),e.onErrorCaptured((f,o,s)=>{r.state.error(`${f}`)}),(f,o)=>(e.openBlock(),e.createBlock(l.VApp,null,{default:e.withCtx(()=>[e.createVNode(Me,{modelValue:e.unref(r).showState,"onUpdate:modelValue":o[0]||(o[0]=s=>e.unref(r).showState=s),color:e.unref(r).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(l.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(l.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(V.t)("nav.panels"),"aria-label":e.unref(V.t)("nav.panels"),onClick:o[1]||(o[1]=e.withModifiers(s=>a.drawer=!a.drawer,["stop"]))},null,8,["title","aria-label"])]),default:e.withCtx(()=>[e.createVNode(l.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(l.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(f.$slots,"title",{context:e.unref(r)})]),_:3}),e.createVNode(l.VSpacer),e.renderSlot(f.$slots,"app-bar-left",{context:e.unref(r)}),o[5]||(o[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(f.$slots,"app-bar-right",{context:e.unref(r)})]),_:3}),e.createVNode(e.unref(Fe),{drawer:a.drawer,"onUpdate:drawer":o[3]||(o[3]=s=>a.drawer=s),items:e.unref(r).data.nav},e.createSlots({prepend:e.withCtx(()=>[e.createElementVNode("a",Ee,[f.logo?(e.openBlock(),e.createBlock(l.VImg,{key:0,src:f.logo,class:"logo"},null,8,["src"])):e.createCommentVNode("",!0)]),e.renderSlot(f.$slots,"nav-start",{context:e.unref(r)})]),_:2},[e.unref(d)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.createVNode(l.VList,{opened:a.opened,"onUpdate:opened":o[2]||(o[2]=s=>a.opened=s)},{default:e.withCtx(()=>[e.renderSlot(f.$slots,"nav-end",{context:e.unref(r)})]),_:3},8,["opened"])]),key:"0"}:void 0]),1032,["drawer","items"]),e.createVNode(l.VMain,null,{default:e.withCtx(()=>[e.renderSlot(f.$slots,"main",{},()=>[e.createVNode(l.VTabsWindow,{modelValue:e.unref(i).panel,"onUpdate:modelValue":o[4]||(o[4]=s=>e.unref(i).panel=s)},{default:e.withCtx(s=>[e.renderSlot(f.$slots,"default",e.mergeProps(s,{context:e.unref(r)})),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(c,m)=>(e.openBlock(),e.createBlock(l.VTabsWindowItem,{key:m,value:c},{default:e.withCtx(()=>[e.renderSlot(f.$slots,m,e.mergeProps({ref_for:!0},s,{context:e.unref(r)}))]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),Re=S.propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...l.makeFilterProps({filterKeys:["title"]}),...l.makeSelectProps(),...S.omit(l.makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...l.makeTransitionProps({transition:!1})},"VAutocomplete"),De=S.genericComponent()({name:"VAutocomplete",props:Re(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,d){let{slots:n}=d;const{t:u}=S.useLocale(),a=e.ref(),r=e.shallowRef(!1),i=e.shallowRef(!0),f=e.shallowRef(!1),o=e.ref(),s=e.ref(),c=e.shallowRef(-1),{items:m,transformIn:h,transformOut:y}=l.useItems(t),{textColorClasses:b,textColorStyles:A}=l.useTextColor(()=>{var p;return(p=a.value)==null?void 0:p.color}),B=S.useProxiedModel(t,"search",""),v=S.useProxiedModel(t,"modelValue",[],p=>h(p===null?[null]:S.wrapInArray(p)),p=>{const w=y(p);return t.multiple?w:w[0]??null}),g=e.computed(()=>typeof t.counterValue=="function"?t.counterValue(v.value):typeof t.counterValue=="number"?t.counterValue:v.value.length),k=l.useForm(t),{filteredItems:C,getMatches:L}=l.useFilter(t,m,()=>i.value?"":B.value),M=e.computed(()=>t.hideSelected?C.value.filter(p=>!v.value.some(w=>w.value===p.value)):C.value),z=e.computed(()=>!!(t.chips||n.chip)),D=e.computed(()=>z.value||!!n.selection),Q=e.computed(()=>v.value.map(p=>p.props.value)),K=e.computed(()=>{var w;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&B.value===((w=M.value[0])==null?void 0:w.title))&&M.value.length>0&&!i.value&&!f.value}),O=e.computed(()=>t.hideNoData&&!M.value.length||k.isReadonly.value||k.isDisabled.value),_=S.useProxiedModel(t,"menu"),N=e.computed({get:()=>_.value,set:p=>{var w;_.value&&!p&&((w=o.value)!=null&&w.ΨopenChildren.size)||p&&O.value||(_.value=p)}}),G=e.computed(()=>N.value?t.closeText:t.openText),X=e.ref(),we=l.useScrolling(X,a);function ge(p){t.openOnClear&&(N.value=!0),B.value=""}function he(){O.value||(N.value=!0)}function ye(p){O.value||(r.value&&(p.preventDefault(),p.stopPropagation()),N.value=!N.value)}function be(p){var w;p.key!==" "&&S.checkPrintable(p)&&((w=a.value)==null||w.focus())}function xe(p){var x,T,E,R,P;if(k.isReadonly.value)return;const w=(x=a.value)==null?void 0:x.selectionStart,$=v.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(p.key)&&p.preventDefault(),["Enter","ArrowDown"].includes(p.key)&&(N.value=!0),["Escape"].includes(p.key)&&(N.value=!1),K.value&&["Enter","Tab"].includes(p.key)&&!v.value.some(I=>{let{value:F}=I;return F===M.value[0].value})&&j(M.value[0]),p.key==="ArrowDown"&&K.value&&((T=X.value)==null||T.focus("next")),["Backspace","Delete"].includes(p.key)){if(!t.multiple&&D.value&&v.value.length>0&&!B.value)return j(v.value[0],!1);if(~c.value){p.preventDefault();const I=c.value;j(v.value[c.value],!1),c.value=I>=$-1?$-2:I}else p.key==="Backspace"&&!B.value&&(c.value=$-1);return}if(t.multiple)if(p.key==="ArrowLeft"){if(c.value<0&&w&&w>0)return;const I=c.value>-1?c.value-1:$-1;if(v.value[I])c.value=I;else{const F=((E=B.value)==null?void 0:E.length)??null;c.value=-1,(R=a.value)==null||R.setSelectionRange(F,F)}}else if(p.key==="ArrowRight"){if(c.value<0)return;const I=c.value+1;v.value[I]?c.value=I:(c.value=-1,(P=a.value)==null||P.setSelectionRange(0,0))}else~c.value&&S.checkPrintable(p)&&(c.value=-1)}function Be(p){if(S.matchesSelector(a.value,":autofill")||S.matchesSelector(a.value,":-webkit-autofill")){const w=m.value.find($=>$.title===p.target.value);w&&j(w)}}function Ce(){var p;t.eager&&((p=s.value)==null||p.calculateVisibleItems())}function Se(){var p;r.value&&(i.value=!0,(p=a.value)==null||p.focus())}function Ne(p){r.value=!0,setTimeout(()=>{f.value=!0})}function Pe(p){f.value=!1}function $e(p){(p==null||p===""&&!t.multiple&&!D.value)&&(v.value=[])}const Z=e.shallowRef(!1);function j(p){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!p||p.props.disabled))if(t.multiple){const $=v.value.findIndex(T=>(t.valueComparator||S.deepEqual)(T.value,p.value)),x=w??!~$;if(~$){const T=x?[...v.value,p]:[...v.value];T.splice($,1),v.value=T}else x&&(v.value=[...v.value,p]);t.clearOnSelect&&(B.value="")}else{const $=w!==!1;v.value=$?[p]:[],B.value=$&&!D.value?p.title:"",e.nextTick(()=>{N.value=!1,i.value=!0})}}return e.watch(r,(p,w)=>{var $;p!==w&&(p?(Z.value=!0,B.value=t.multiple||D.value?"":String((($=v.value.at(-1))==null?void 0:$.props.title)??""),i.value=!0,e.nextTick(()=>Z.value=!1)):(!t.multiple&&B.value==null&&(v.value=[]),N.value=!1,(t.multiple||D.value)&&(B.value=""),c.value=-1))}),e.watch(B,p=>{!r.value||Z.value||(p&&(N.value=!0),i.value=!p)}),e.watch(N,()=>{if(!t.hideSelected&&N.value&&v.value.length){const p=M.value.findIndex(w=>v.value.some($=>w.value===$.value));S.IN_BROWSER&&window.requestAnimationFrame(()=>{var w;p>=0&&((w=s.value)==null||w.scrollToIndex(p))})}}),e.watch(()=>t.items,(p,w)=>{N.value||r.value&&!w.length&&p.length&&(N.value=!0)}),e.watch(v,p=>{var w;!t.multiple&&!D.value&&(B.value=((w=p[0])==null?void 0:w.title)??"")}),l.useRender(()=>{const p=!!(!t.hideNoData||M.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),w=v.value.length>0,$=l.VTextField.filterProps(t);return e.createVNode(l.VTextField,e.mergeProps({ref:a},$,{modelValue:B.value,"onUpdate:modelValue":[x=>B.value=x,$e],focused:r.value,"onUpdate:focused":x=>r.value=x,validationValue:v.externalValue,counterValue:g.value,dirty:w,onChange:Be,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":N.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!D.value,"v-autocomplete--selecting-index":c.value>-1},t.class],style:t.style,readonly:k.isReadonly.value,placeholder:w?void 0:t.placeholder,"onClick:clear":ge,"onMousedown:control":he,onKeydown:xe}),{...n,default:()=>e.createVNode(e.Fragment,null,[e.createVNode(l.VMenu,e.mergeProps({ref:o,modelValue:N.value,"onUpdate:modelValue":x=>N.value=x,activator:"parent",contentClass:"v-autocomplete__content",disabled:O.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Ce,onAfterLeave:Se},t.menuProps),{default:()=>[p&&e.createVNode(l.VList,e.mergeProps({ref:X,selected:Q.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:x=>x.preventDefault(),onKeydown:be,onFocusin:Ne,onFocusout:Pe,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},we,t.listProps),{default:()=>{var x,T,E;return[(x=n["prepend-item"])==null?void 0:x.call(n),!M.value.length&&!t.hideNoData&&(((T=n["no-data"])==null?void 0:T.call(n))??e.createVNode(l.VListItem,{key:"no-data",title:u(t.noDataText)},null)),e.createVNode(l.VVirtualScroll,{ref:s,renderless:!0,items:M.value,itemKey:"value"},{default:R=>{var re;let{item:P,index:I,itemRef:F}=R;const ae=e.mergeProps(P.props,{ref:F,key:P.value,active:K.value&&I===0?!0:void 0,onClick:()=>j(P,null)});return((re=n.item)==null?void 0:re.call(n,{item:P,index:I,props:ae}))??e.createVNode(l.VListItem,e.mergeProps(ae,{role:"option"}),{prepend:Y=>{let{isSelected:Oe}=Y;return e.createVNode(e.Fragment,null,[t.multiple&&!t.hideSelected?e.createVNode(l.VCheckboxBtn,{key:P.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,P.props.prependAvatar&&e.createVNode(l.VAvatar,{image:P.props.prependAvatar},null),P.props.prependIcon&&e.createVNode(l.VIcon,{icon:P.props.prependIcon},null)])},title:()=>{var Y;return i.value?P.title:l.highlightResult("v-autocomplete",P.title,(Y=L(P))==null?void 0:Y.title)}})}}),(E=n["append-item"])==null?void 0:E.call(n)]}})]}),v.value.map((x,T)=>{function E(F){F.stopPropagation(),F.preventDefault(),j(x,!1)}const R={"onClick:close":E,onKeydown(F){F.key!=="Enter"&&F.key!==" "||(F.preventDefault(),F.stopPropagation(),E(F))},onMousedown(F){F.preventDefault(),F.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},P=z.value?!!n.chip:!!n.selection,I=P?S.ensureValidVNode(z.value?n.chip({item:x,index:T,props:R}):n.selection({item:x,index:T})):void 0;if(!(P&&!I))return e.createVNode("div",{key:x.value,class:["v-autocomplete__selection",T===c.value&&["v-autocomplete__selection--selected",b.value]],style:T===c.value?A.value:{}},[z.value?n.chip?e.createVNode(l.VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:x.title}}},{default:()=>[I]}):e.createVNode(l.VChip,e.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:x.title,disabled:x.props.disabled},R),null):I??e.createVNode("span",{class:"v-autocomplete__selection-text"},[x.title,t.multiple&&T<v.value.length-1&&e.createVNode("span",{class:"v-autocomplete__selection-comma"},[e.createTextVNode(",")])])])})]),"append-inner":function(){var R,P;for(var x=arguments.length,T=new Array(x),E=0;E<x;E++)T[E]=arguments[E];return e.createVNode(e.Fragment,null,[(R=n["append-inner"])==null?void 0:R.call(n,...T),t.menuIcon?e.createVNode(l.VIcon,{class:"v-autocomplete__menu-icon",color:(P=a.value)==null?void 0:P.fieldIconColor,icon:t.menuIcon,onMousedown:ye,onClick:S.noop,"aria-label":u(G.value),title:u(G.value),tabindex:"-1"},null):void 0])}})}),l.forwardRefs({isFocused:r,isPristine:i,menu:N,search:B,filteredItems:C,select:j},a)}}),de=e.defineComponent({__name:"OxAutocomplete",props:e.mergeModels({repo:{},lookup:{default:"search"},filters:{},prevKey:{},nextKey:{},countKey:{},dataKey:{},query:{},relations:{},url:{},fetchRelations:{type:Boolean},save:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var B;const d=e.useSlots(),n=e.useModel(t,"modelValue"),u=e.ref(null),a=e.ref(""),r=t,i=e.useAttrs(),f=e.inject("repos"),o=V.excludeValues(r,["repo","search"]),{list:s,items:c}=V.useModelList({...(B=o.value)==null?void 0:B[1],filters:r.filters||{},save:!1,query:V.query(r.repo,f)});var m=null;async function h(v){if(v){const g=s.findIndex(v);if(g!=-1)u.value=s.items[g];else if(m!=v){m=v;const C=(await s.load({id:v,append:0})).entities[0];u.value=C.id==v?C:null}}else u.value=null;return u}const y=U.lodashExports.debounce(async()=>{const v=await s.load();return u.value&&s.add(u.value),v},200);function b(v){v[r.lookup]=a.value,U.lodashExports.isEqual(e.toRaw(s.filters),e.toRaw(v))||(s.filters={...r.filters},s.filters[r.lookup]=a.value,y())}function A(v){const g=s.filters[r.lookup];v&&v!="<empty string>"&&v!=g&&(s.filters[r.lookup]=v,y().then(k=>{h(n.value),a.value=v}))}return e.onMounted(()=>{r.filters&&Object.values(r.filters).length?b(r.filters):s.load(),h(n.value)}),e.watch(()=>r.filters,v=>b(v)),e.watch(a,A),e.watch(n,(v,g)=>v!=g&&h(v)),(v,g)=>(e.openBlock(),e.createBlock(e.unref(De),e.mergeProps(e.unref(i),{items:e.unref(c),loading:e.unref(s).state.isProcessing,modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=k=>n.value=k),search:a.value,"onUpdate:search":g[1]||(g[1]=k=>a.value=k)}),e.createSlots({_:2},[e.renderList(e.unref(d),(k,C)=>({name:C,fn:e.withCtx(L=>[e.renderSlot(v.$slots,C,e.normalizeProps(e.guardReactiveProps(L)))])}))]),1040,["items","loading","modelValue","search"]))}}),fe={props:{src:String,is:String},setup(t){const d=e.shallowRef(null),n=e.computed(()=>{if(t.is)return t.is;let a=t.src.substring(t.src.lastIndexOf("/")+1);if(a&&(a=a.substring(0,a.indexOf("."))),!a)throw Error("`is` not provided and could not be deducted from `src`.");return a});function u(){d.value=V.defineAsyncComponent(t.src,n.value)}return e.watch(()=>t.src,u),u(),()=>e.h(d.value,t)}},_e={class:"text-error"},H={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(t){const d=t;return(n,u)=>d.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.errors,a=>(e.openBlock(),e.createElementBlock("div",_e,[e.createVNode(l.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(a),1)]))),256)):e.createCommentVNode("",!0)}},te={__name:"OxListFilters",props:{search:String},setup(t,{expose:d}){const n=e.inject("list"),u=t,a=e.computed(()=>{const f=n.filters;return f&&Object.entries(f).some(([o,s])=>!o.startsWith("page")&&!o.startsWith("ordering")&&!!s)}),r=e.computed(()=>a.value?"mdi-filter-check":"mdi-filter-outline");function i(){n.filters={},n.load()}return d({icon:r,hasFilters:a,reset:i}),(f,o)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:o[2]||(o[2]=e.withModifiers(s=>e.unref(n).load(),["prevent"])),class:"width-full"},[e.createVNode(l.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(l.VAppBarNavIcon,{icon:r.value,readonly:""},null,8,["icon"]),u.search&&e.unref(n).filters?(e.openBlock(),e.createBlock(l.VTextField,{key:0,label:e.unref(V.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(n).filters[u.search],"onUpdate:modelValue":o[0]||(o[0]=s=>e.unref(n).filters[u.search]=s),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(f.$slots,"default",{list:e.unref(n),filters:e.unref(n).filters}),e.createVNode(l.VBtn,{onClick:o[1]||(o[1]=e.withModifiers(s=>e.unref(n).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":f.$t("filters.apply"),title:e.unref(V.t)("filters.apply")},null,8,["aria-label","title"]),a.value?(e.openBlock(),e.createBlock(l.VBtn,{key:1,onClick:e.withModifiers(i,["stop"]),icon:"mdi-backspace","aria-label":e.unref(V.t)("filters.reset"),title:e.unref(V.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},je=S.propsFactory({...l.makeComponentProps(),...l.makeFormProps()},"VForm"),ee=S.genericComponent()({name:"VForm",props:je(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,d){let{slots:n,emit:u}=d;const a=l.createForm(t),r=e.ref();function i(o){o.preventDefault(),a.reset()}function f(o){const s=o,c=a.validate();s.then=c.then.bind(c),s.catch=c.catch.bind(c),s.finally=c.finally.bind(c),u("submit",s),s.defaultPrevented||c.then(m=>{var y;let{valid:h}=m;h&&((y=r.value)==null||y.submit())}),s.preventDefault()}return l.useRender(()=>{var o;return e.createVNode("form",{ref:r,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:i,onSubmit:f},[(o=n.default)==null?void 0:o.call(n,a)])}),l.forwardRefs(a,r)}}),Ue={class:"flex-row justify-right"},pe=e.defineComponent({__name:"OxFormList",props:e.mergeModels({useModel:Function,editable:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var s;const d=e.useModel(t,"modelValue"),n=e.inject("user"),u=e.ref({}),a=t,r=e.computed(()=>({add:a.editable&&n.can([a.useModel,"add"]),change:a.editable&&n.can([a.useModel,"change"]),delete:a.editable&&n.can([a.useModel,"delete"])})),i=e.ref([]);(s=d.value)!=null&&s.length||i.value.push(-1);function f(){d.value.push(u.value),u.value={}}function o(c){confirm(V.t("actions.delete.confirm"))&&a.delete&&d.value.splice(c)}return(c,m)=>(e.openBlock(),e.createBlock(l.VList,{opened:i.value,"onUpdate:opened":m[3]||(m[3]=h=>i.value=h)},{default:e.withCtx(()=>{var h;return[(h=d.value)!=null&&h.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.value,(y,b)=>(e.openBlock(),e.createBlock(l.VListGroup,{key:b,value:b},{activator:e.withCtx(({props:A})=>[e.createVNode(l.VListItem,e.mergeProps({ref_for:!0},A),{append:e.withCtx(()=>[e.createElementVNode("div",{onClick:m[0]||(m[0]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(c.$slots,"item.actions",e.mergeProps({item:y,index:b,ref_for:!0},A)),r.value.delete?(e.openBlock(),e.createBlock(l.VBtn,{key:0,type:"button",class:"ml-2",size:"small",onClick:e.withModifiers(B=>o(b),["stop","prevent"]),color:"error","aria-label":e.unref(V.t)("actions.remove"),title:e.unref(V.t)("actions.remove"),icon:"mdi-delete"},null,8,["onClick","aria-label","title"])):e.createCommentVNode("",!0)])]),default:e.withCtx(()=>[e.createVNode(l.VListItemTitle,null,{default:e.withCtx(()=>[e.renderSlot(c.$slots,"item.title",{item:y})]),_:2},1024)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(ee,{disabled:!r.value.change},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"item",{item:y,index:b,editable:r.value.change})]),_:2},1032,["disabled"])]),_:2},1032,["value"]))),128)):(e.openBlock(),e.createBlock(l.VListItem,{key:1,title:e.unref(V.t)("lists.empty")},null,8,["title"])),r.value.add?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[d.value.length?(e.openBlock(),e.createBlock(l.VDivider,{key:0})):e.createCommentVNode("",!0),e.createVNode(l.VListGroup,{value:-1},{activator:e.withCtx(({props:y})=>[e.createVNode(l.VListItem,e.mergeProps(y,{title:e.unref(V.t)("actions.add_item"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),default:e.withCtx(()=>[e.createVNode(ee,null,{default:e.withCtx(()=>[e.renderSlot(c.$slots,"item",{item:u.value,edit:!0})]),_:3}),u.value?(e.openBlock(),e.createBlock(l.VListItem,{key:0},{default:e.withCtx(()=>[e.createElementVNode("div",Ue,[u.value?(e.openBlock(),e.createBlock(l.VBtn,{key:0,size:"small",onClick:m[1]||(m[1]=y=>u.value={}),color:"secondary","prepend-icon":"mdi-backspace","aria-label":e.unref(V.t)("actions.discard")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(V.t)("actions.discard")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0),u.value?(e.openBlock(),e.createBlock(l.VBtn,{key:1,size:"small",onClick:m[2]||(m[2]=y=>f()),color:"primary","prepend-icon":"mdi-plus","aria-label":e.unref(V.t)("actions.add")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(V.t)("actions.add")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0)])]),_:1})):e.createCommentVNode("",!0)]),_:3})],64)):e.createCommentVNode("",!0)]}),_:3},8,["opened"]))}}),ze=S.genericComponent()({name:"VSlideGroupItem",props:l.makeGroupItemProps(),emits:{"group:selected":t=>!0},setup(t,d){let{slots:n}=d;const u=l.useGroupItem(t,l.VSlideGroupSymbol);return()=>{var a;return(a=n.default)==null?void 0:a.call(n,{isSelected:u.isSelected.value,select:u.select,toggle:u.toggle,selectedClass:u.selectedClass.value})}}}),me={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(t,{emit:d}){const n=d;e.inject("list");const u=e.inject("items"),a=t;function r(o){return o=o%a.colors.length,a.colorVariant?a.colors[o]+"-"+a.colorVariant:a.colors[o]}function i(o,s,c){o[c]?!o[c].includes(s)&&o[c].push(s):o[c]=[s]}const f=e.computed(()=>{const o={};if(u.value)for(var s of u.value){const m=s[a.field];if(Array.isArray(m))if(m.length)for(var c of m)i(o,s,c);else i(o,s,null);else i(o,s,m)}return o});return(o,s)=>(e.openBlock(),e.createBlock(l.VSheet,null,{default:e.withCtx(()=>[e.createVNode(l.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.headers,(c,m)=>(e.openBlock(),e.createBlock(ze,{key:c.value},{default:e.withCtx(({selectedClass:h})=>[e.createVNode(l.VCard,{width:"400",class:e.normalizeClass(["ma-3",h]),color:r(m),lines:"two"},{default:e.withCtx(()=>[e.createVNode(l.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.title),1)]),_:2},1024),e.createVNode(l.VList,{"bg-color":r(m)},{default:e.withCtx(()=>[f.value&&f.value[c.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(f.value[c.value],y=>e.renderSlot(o.$slots,"item",{key:y.id,header:c,item:y},()=>[e.createVNode(l.VListItem,{title:y[a.itemTitle],value:a.itemValue&&y[a.itemValue],onClick:b=>n("click",y)},{append:e.withCtx(()=>[e.renderSlot(o.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},le=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(t){const d=e.useSlots(),n=U.filterSlots(d,"item.",{exclude:["item.actions"]}),u=e.inject("panel"),a=e.inject("list"),r=e.inject("items"),i=e.inject("user"),f=t,o=e.computed(()=>f.headers.reduce((m,h)=>(m.push(typeof h=="string"?{key:h,title:V.t(V.tKeys.field(h))}:h),m),[]));function s(m){a.filters.page=m.page,a.filters.page_size=m.itemsPerPage,a.filters.ordering=m.sortBy.map(({key:h,order:y})=>y=="asc"?h:`-${h}`)}function c(m,h){u.show({view:"detail.edit",value:h})}return(m,h)=>{var y;return e.openBlock(),e.createBlock(l.VDataTableServer,{items:e.unref(r),"item-index":"id","items-length":e.unref(a).count||e.unref(r).length,"items-per-page":f.itemsPerPage,loading:(y=e.unref(a).state)==null?void 0:y.isProcessing,headers:o.value,"no-data-text":e.unref(V.t)("lists.empty"),class:"align-top-table","onUpdate:options":s},e.createSlots({loading:e.withCtx(()=>[e.createVNode(l.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:b})=>[e.unref(i).can([b.constructor,"change"])?(e.openBlock(),e.createBlock(W,{key:0,icon:"mdi-pencil",button:"",title:e.unref(V.t)("actions.edit"),item:b,run:c},null,8,["title","item"])):e.unref(i).can([b.constructor,"view"])?(e.openBlock(),e.createBlock(W,{key:1,icon:"mdi-eye-outline",button:"",title:e.unref(V.t)("actions.edit"),item:b,run:c},null,8,["title","item"])):e.createCommentVNode("",!0),e.renderSlot(m.$slots,"item.actions",{value:b,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(n),(b,A)=>({name:A,fn:e.withCtx(B=>[e.renderSlot(m.$slots,A,e.normalizeProps(e.guardReactiveProps(B)))])}))]),1032,["items","items-length","items-per-page","loading","headers","no-data-text"])}}}),q={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(t){const d=e.useSlots(),n=t;let u=e.ref(!1);e.watch(()=>n.state.state,i=>{n.delay&&i==U.States.PROCESSING&&(u.value=!1,window.setTimeout(()=>{u.value=!0},5e3))});const a=e.computed(()=>{var i;return((i=n.state)==null?void 0:i.isProcessing)&&(!n.delay||u.value)}),r=e.computed(()=>{var i,f;return(f=(i=n.state)==null?void 0:i.data)==null?void 0:f.messages});return(i,f)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.state.isNone&&e.unref(d).none?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:t.state,title:t.noneTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"none",{state:t.state})]),_:3},8,["state","title"])):a.value?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.processingTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"processing",{state:t.state},()=>[f[0]||(f[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):n.state.isError?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.errorTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"error",{state:t.state},()=>[f[1]||(f[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(i.$slots,"error-detail",{state:t.state})]),_:3},8,["state","title"])):n.state.isOk?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.okTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"ok",{state:t.state},()=>[f[2]||(f[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),r.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,o=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(o),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"ok-detail",{state:t.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"default",{state:n.state})],64))}},Ke={class:"text-right"},J={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(t,{emit:d}){const n=d,u=t;return(a,r)=>(e.openBlock(),e.createElementBlock("div",Ke,[e.createVNode(e.unref(l.VBtn),{color:"error",class:"me-2","prepend-icon":u.resetIcon,onClick:r[0]||(r[0]=i=>n("reset")),disabled:u.disabled},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(u.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),u.state.isSending||u.state.isProcessing?(e.openBlock(),e.createBlock(e.unref(l.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>r[2]||(r[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(l.VBtn),{key:1,color:"primary","prepend-icon":u.validateIcon,onClick:r[1]||(r[1]=i=>n("validate")),disabled:u.disabled||u.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(u.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},Ge={key:0},We={class:"text-right mt-3"},ve={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(t,{emit:d}){const n=e.useTemplateRef("password"),u=t,a=e.reactive({username:"",password:""}),r=e.ref(!1),i=e.reactive(new U.State);function f(s=!0){U.reset(a,{username:"",password:""}),s&&i.none()}async function o(){i.processing();try{const s=await fetch(u.url,{method:"POST",headers:U.config$1.axiosConfig.headers,body:JSON.stringify(a)});s.status==200?(a.credentials="",a.password="",i.ok(await s.json()),u.next&&(window.location.href=u.next)):i.error(await s.json())}catch(s){i.ok((s==null?void 0:s.message)||s)}}return(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(q),{state:i},{none:e.withCtx(({state:m})=>c[7]||(c[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:m})=>[u.next?(e.openBlock(),e.createElementBlock("p",Ge,[c[8]||(c[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(u.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:m})=>{var h,y;return[e.createVNode(H,{errors:(h=m.data)==null?void 0:h.username},null,8,["errors"]),e.createVNode(H,{errors:(y=m.data)==null?void 0:y.password},null,8,["errors"])]}),_:1},8,["state"]),i.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VTextField,{variant:"underlined",label:"Enter login",modelValue:a.username,"onUpdate:modelValue":c[0]||(c[0]=m=>a.username=m),onKeyup:c[1]||(c[1]=e.withKeys(e.withModifiers(m=>e.unref(n).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(l.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:a.password,"onUpdate:modelValue":c[2]||(c[2]=m=>a.password=m),type:r.value?"text":"password","append-icon":r.value?"mdi-eye":"mdi-eye-off","onClick:append":c[3]||(c[3]=m=>r.value=!r.value),onKeyup:c[4]||(c[4]=e.withKeys(e.withModifiers(m=>o(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",We,[e.renderSlot(s.$slots,"default",{value:a.password},()=>[a.username&&a.password?(e.openBlock(),e.createBlock(J,{key:0,"validate-label":"Login!",onValidate:c[5]||(c[5]=m=>o()),onReset:c[6]||(c[6]=m=>f()),state:i},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},ne=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(t){const d=e.useSlots(),n=t,u=V.filterSlots(d,"views."),a=e.ref(!1);e.onMounted(()=>{a.value=!0}),e.onUnmounted(()=>{a.value=!1});const r=e.inject("panels"),i=e.inject("panel");return(f,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.state?(e.openBlock(),e.createBlock(q,{key:0,state:n.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(l.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!a.value||e.unref(r).panel!=n.name},[n.icon?(e.openBlock(),e.createBlock(l.VIcon,{key:0,icon:n.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!a.value||e.unref(r).panel!=n.name},[e.renderSlot(f.$slots,"append-title"),n.help?(e.openBlock(),e.createBlock(l.VBtn,{key:0,class:"ml-3",href:n.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(f.$slots,"top"),e.renderSlot(f.$slots,"default",{},()=>[e.unref(u)?(e.openBlock(),e.createBlock(l.VWindow,{key:0,modelValue:e.unref(i).view,"onUpdate:modelValue":o[0]||(o[0]=s=>e.unref(i).view=s)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(s,c)=>(e.openBlock(),e.createBlock(l.VWindowItem,{key:s,value:s},{default:e.withCtx(()=>[e.renderSlot(f.$slots,c)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(f.$slots,"bottom")]),_:3})],64))}}),oe=e.defineComponent({__name:"OxView",props:{title:String},setup(t){const d=t,n=e.ref(null),u=e.useSlots(),a=V.filterSlots(u,"tab.",{exclude:"tab.default"}),r=V.filterSlots(u,"window.");return(i,f)=>e.unref(a)&&Object.keys(e.unref(a)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VTabs,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=o=>n.value=o)},{default:e.withCtx(()=>[e.unref(u).default?e.renderSlot(i.$slots,"tab",{key:0},()=>[e.createVNode(l.VTab,{text:d==null?void 0:d.title,value:"default"},null,8,["text"])]):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(o,s)=>(e.openBlock(),e.createBlock(l.VTab,{value:o},{default:e.withCtx(()=>[e.renderSlot(i.$slots,s)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"]),e.createVNode(l.VTabsWindow,{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=o=>n.value=o)},{default:e.withCtx(()=>[e.unref(u).default?(e.openBlock(),e.createBlock(l.VTabsWindowItem,{key:0,value:"default"},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"default")]),_:3})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(o,s)=>(e.openBlock(),e.createBlock(l.VTabsWindowItem,{value:o},{default:e.withCtx(()=>[e.renderSlot(i.$slots,s)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(i.$slots,"default",{key:1})}}),qe={class:"mb-3"},Ve=e.defineComponent({__name:"OxModelEdit",props:{repo:{},initial:{},name:{},url:{},saved:{type:Function}},setup(t,{expose:d}){const n=e.ref(null),u=e.inject("context"),a=t,{editor:r,edited:i}=V.useModelEditor({props:a}),f=e.computed(()=>u.user.can([r.repo.use,"change"])),o=e.computed(()=>({editor:r,edited:i,editable:f.value,disabled:!f.value,value:r.value,model:r.repo.use}));return e.watch(()=>r.errors&&Object.values(r.errors),()=>n.value.validate()),d({editor:r,edited:i}),(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(q,{state:e.unref(r).state},null,8,["state"]),e.createElementVNode("div",qe,[f.value&&e.unref(i)?(e.openBlock(),e.createBlock(J,{key:0,onValidate:c[0]||(c[0]=m=>e.unref(r).save()),onReset:c[1]||(c[1]=m=>e.unref(r).discard()),state:e.unref(r).state,"validate-disabled":e.unref(r).valid===!1},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)]),e.createVNode(l.VContainer,{class:"ox-model-edit"},{default:e.withCtx(()=>[e.createVNode(ee,{ref_key:"form",ref:n,modelValue:e.unref(r).valid,"onUpdate:modelValue":c[2]||(c[2]=m=>e.unref(r).valid=m),disabled:!f.value},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default",e.normalizeProps(e.guardReactiveProps(o.value)))]),_:3},8,["modelValue","disabled"]),e.renderSlot(s.$slots,"append",e.normalizeProps(e.guardReactiveProps(o.value)))]),_:3})],64))}}),ke=e.defineComponent({__name:"OxModelPanel",props:{repo:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},fetchRelations:{type:Boolean,default:!0},search:{default:"search"},warning:{},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(t){const d=e.useSlots(),n=V.filterSlots(d,"views.list."),u=V.filterSlots(d,"item."),a=V.filterSlots(d,"views.detail.edit."),r=e.useTemplateRef("filters"),i=t,f=e.inject("context"),{panel:o,list:s,items:c,next:m,prev:h}=e.inject("panel")??V.useModelPanel({props:i}),y=o.panels;e.computed(()=>{var g;return f.user.can([o.model,(g=o.value)!=null&&g.id?"change":"add"])});const{showFilters:b}=e.toRefs(o),A=e.computed(()=>[...i.headers,{key:"actions",title:V.t("actions")}]);function B(g){g!=null&&g.id?o.value=o.repo.whereId(g.id).first():o.value=g,s.load()}const v=e.computed(()=>({panel:o,panels:y,list:s,items:c,context:f,value:o.value}));return e.watch(()=>Object.values(s.filters),()=>s.load()),(g,k)=>(e.openBlock(),e.createBlock(ne,{name:i.name,title:e.unref(o).title,icon:e.unref(o).icon,state:e.unref(s).state,index:i.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(g.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(v.value))),e.unref(o).view.startsWith("list.")?(e.openBlock(),e.createBlock(l.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(g.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(v.value))),e.unref(r)?(e.openBlock(),e.createBlock(l.VBtn,{key:0,title:e.unref(b)?e.unref(V.t)("filters.hide"):e.unref(V.t)("filters.show"),"aria-label":e.unref(b)?e.unref(V.t)("filters.hide"):e.unref(V.t)("filters.show"),onClick:k[0]||(k[0]=C=>b.value=!e.unref(b)),active:e.unref(b)},{default:e.withCtx(()=>[e.createVNode(l.VIcon,{icon:e.unref(r).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(o).view.startsWith("detail.")&&e.unref(o).value?(e.openBlock(),e.createBlock(l.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(g.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(v.value))),e.unref(o).view=="detail.edit"&&e.unref(o).value?(e.openBlock(),e.createBlock(l.VMenu,{key:0},{activator:e.withCtx(({props:C})=>[e.createVNode(l.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},C),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(V.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(l.VList,null,{default:e.withCtx(()=>[e.renderSlot(g.$slots,"item.actions",{value:e.unref(o).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(l.VBtn,{disabled:!e.unref(h),title:e.unref(V.t)("prev"),"aria-label":e.unref(V.t)("prev"),onClick:k[1]||(k[1]=e.withModifiers(C=>e.unref(o).show({view:e.unref(o).view,value:e.unref(h)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(l.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(l.VBtn,{disabled:!e.unref(m),title:e.unref(V.t)("next"),"aria-label":e.unref(V.t)("next"),onClick:k[2]||(k[2]=e.withModifiers(C=>e.unref(o).show({view:e.unref(o).view,value:e.unref(m)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(l.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(l.VBtnToggle,{class:"ml-3",color:"secondary",density:"compact",variant:"tonal",mandatory:"",modelValue:e.unref(o).view,"onUpdate:modelValue":k[8]||(k[8]=C=>e.unref(o).view=C)},{default:e.withCtx(()=>{var C;return[e.createVNode(l.VBtn,{value:"list.table",onClick:k[3]||(k[3]=e.withModifiers(L=>e.unref(o).show({view:"list.table"}),["stop"])),title:e.unref(V.t)("panels.nav.table"),"aria-label":e.unref(V.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>k[9]||(k[9]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(d)["views.list.cards"]?(e.openBlock(),e.createBlock(l.VBtn,{key:0,value:"list.cards",onClick:k[4]||(k[4]=e.withModifiers(L=>e.unref(o).show({view:"list.cards"}),["stop"])),title:e.unref(V.t)("panels.nav.cards"),"aria-label":e.unref(V.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>k[10]||(k[10]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(d)["views.list.kanban"]?(e.openBlock(),e.createBlock(l.VBtn,{key:1,value:"list.kanban",onClick:k[5]||(k[5]=e.withModifiers(L=>e.unref(o).show({view:"list.kanban"}),["stop"])),title:e.unref(V.t)("panels.nav.kanban"),"aria-label":e.unref(V.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>k[11]||(k[11]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(a)?(e.openBlock(),e.createBlock(l.VBtn,{key:2,value:"detail.add",onClick:k[6]||(k[6]=e.withModifiers(L=>e.unref(o).create(),["stop"])),title:e.unref(V.t)("panels.nav.add"),"aria-label":e.unref(V.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>k[12]||(k[12]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(d)["views.detail.edit"]||e.unref(a)?(e.openBlock(),e.createBlock(l.VBtn,{key:3,value:"detail.edit",onClick:k[7]||(k[7]=e.withModifiers(L=>e.unref(o).show({view:"detail.edit",value:e.unref(o).value}),["stop"])),disabled:!((C=e.unref(o).value)!=null&&C.id),title:e.unref(V.t)("panels.nav.edit"),"aria-label":e.unref(V.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>k[13]||(k[13]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(g.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(v.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[i.warning?(e.openBlock(),e.createBlock(l.VAlert,{key:0,type:"warning",variant:"tonal",text:i.warning},null,8,["text"])):e.createCommentVNode("",!0),e.renderSlot(g.$slots,"top"),e.withDirectives(e.createVNode(te,{ref_key:"filters",ref:r,search:i.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(C=>[e.renderSlot(g.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(C)))]),_:3},8,["search"]),[[e.vShow,e.unref(o).view.startsWith("list.")&&e.unref(b)]])]),_:2},[e.unref(d)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(le,{headers:A.value},e.createSlots({_:2},[e.renderList(e.unref(u),(C,L)=>({name:L,fn:e.withCtx(M=>[e.renderSlot(g.$slots,L,e.normalizeProps(e.guardReactiveProps(M)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(n),(C,L)=>({name:L,fn:e.withCtx(()=>[e.renderSlot(g.$slots,L,e.normalizeProps(e.guardReactiveProps(v.value)))])})),e.unref(d)["views.detail.edit"]||e.unref(a)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(e.unref(oe),{title:e.unref(V.t)(`models.${e.unref(o).model.entity}`)},e.createSlots({_:2},[e.renderList(e.unref(a),(C,L)=>({name:C,fn:e.withCtx(()=>[e.renderSlot(g.$slots,L,{saved:B,value:e.unref(o).value})])}))]),1032,["title"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),Ye=Object.freeze(Object.defineProperty({__proto__:null,OxAction:W,OxActionModelDelete:ie,OxActions:ue,OxApp:ce,OxAutocomplete:de,OxComponent:fe,OxFieldDetails:H,OxFormList:pe,OxListFilters:te,OxListKanban:me,OxListTable:le,OxLogin:ve,OxModelEdit:Ve,OxModelPanel:ke,OxPanel:ne,OxStateAlert:q,OxValidationBtn:J,OxView:oe},Symbol.toStringTag,{value:"Module"})),He={el:"#app",delimiters:["[[","]]"],components:{...Ye,...Te.components}};exports.App=He;exports.OxAction=W;exports.OxActionModelDelete=ie;exports.OxActions=ue;exports.OxApp=ce;exports.OxAutocomplete=de;exports.OxComponent=fe;exports.OxFieldDetails=H;exports.OxFormList=pe;exports.OxListFilters=te;exports.OxListKanban=me;exports.OxListTable=le;exports.OxLogin=ve;exports.OxModelEdit=Ve;exports.OxModelPanel=ke;exports.OxPanel=ne;exports.OxStateAlert=q;exports.OxValidationBtn=J;exports.OxView=oe;
//# sourceMappingURL=components.cjs.map
