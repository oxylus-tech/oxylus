"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),v=require("ox"),l=require("./VAlert-CyY72O0P.cjs"),C=require("./theme-BS02m0hV.cjs"),z=require("./lodash-BI-XH5la.cjs"),Le=require("ox/vendor"),H=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{type:[String,Function,Array]},run:{},href:{}},emits:["completed"],setup(t,{emit:i}){const n=t,r=i,o=e.inject("context"),{run:p,processing:s,allowed:c}=v.useAction({user:o.user,emits:r,props:n});return(a,u)=>e.unref(c)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.button?(e.openBlock(),e.createBlock(l.VBtn,{key:0,variant:"text",disabled:e.unref(s),color:n.color,icon:n.icon,title:n.title,"aria-label":n.title,onClick:e.withModifiers(e.unref(p),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(l.VListItem,{key:1,title:n.title,"base-color":n.color,"prepend-icon":n.icon,disabled:e.unref(s),onClick:e.withModifiers(e.unref(p),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),se=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(t){const i=e.inject("panel"),n=e.inject("repos"),r=t;async function o(p,s){return await n[s.constructor.entity].api().delete(s.$url(),{delete:r.item.id})}return(p,s)=>(e.openBlock(),e.createBlock(H,{item:r.item,button:r.button,icon:"mdi-delete",color:"error",title:e.unref(v.t)("actions.delete"),confirm:e.unref(v.t)("actions.delete.confirm"),permissions:["delete",(c,a)=>a.id],run:o,onCompleted:s[0]||(s[0]=c=>{var a;return(a=e.unref(i))==null?void 0:a.show({view:e.unref(i).index})})},null,8,["item","button","title","confirm","permissions"]))}}),ue={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(t){e.useSlots();const i=t;return(n,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(n.$slots,"before",e.normalizeProps(e.guardReactiveProps(i))),e.renderSlot(n.$slots,"default",e.normalizeProps(e.guardReactiveProps(i))),e.renderSlot(n.$slots,"after",e.normalizeProps(e.guardReactiveProps(i)))],64))}},Ie=e.defineComponent({__name:"OxAppNavItem",props:{title:{},icon:{},value:{},url:{},permissions:{},type:{},items:{}},setup(t){const i=t,n=e.inject("context"),r=e.inject("panels");e.computed(()=>!i.auto||panel.name==i.name);function o(){const p={panel:i.value,href:i.url};console.log(i,p),r.show(p)}return(p,s)=>{const c=e.resolveComponent("ox-app-nav-item",!0);return i.type=="subheader"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VListSubheader,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.title),1)]),_:1}),i.items?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(i.items,a=>(e.openBlock(),e.createBlock(c,e.mergeProps({ref_for:!0},a),null,16))),256)):e.createCommentVNode("",!0)],64)):i.type=="group"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[!i.permissions||e.unref(n).user.can(i.permissions)?(e.openBlock(),e.createBlock(l.VListGroup,{key:0,value:i.value},{activator:e.withCtx(({props:a})=>[e.createVNode(l.VListItem,e.mergeProps(a,{title:i.title,"prepend-icon":i.icon}),null,16,["title","prepend-icon"])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.items,(a,u)=>(e.openBlock(),e.createBlock(c,e.mergeProps({key:u,ref_for:!0},a),null,16))),128))]),_:1},8,["value"])):e.createCommentVNode("",!0)],64)):i.type=="divider"?(e.openBlock(),e.createBlock(l.VDivider,{key:2})):!i.permissions||e.unref(n).user.can(i.permissions)?(e.openBlock(),e.createBlock(l.VListItem,{key:3,active:e.unref(r).panel==i.value,value:i.value,"prepend-icon":i.icon,title:i.title,onClick:e.withModifiers(o,["stop"])},null,8,["active","value","prepend-icon","title"])):e.createCommentVNode("",!0)}}}),Ae={__name:"OxAppNav",props:e.mergeModels({items:Array},{drawer:{},drawerModifiers:{}}),emits:["update:drawer"],setup(t){e.inject("context");const i=e.inject("panels"),n=e.useModel(t,"drawer"),r=e.ref([]),o=t,p=e.computed(()=>o.items);function s(a){if(i.panel){for(const u of a)if(u.items){const d=s(u.items);if(d)return[d,u.value]}else if(u.value==i.panel)return[u.value]}}function c(){r.value=s(p.value)}return e.onMounted(c),e.watch(p,c),e.watch(()=>i.panel,c),(a,u)=>(e.openBlock(),e.createBlock(l.VNavigationDrawer,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=d=>n.value=d),theme:"dark"},{append:e.withCtx(()=>[e.createVNode(l.VList,null,{default:e.withCtx(()=>[e.renderSlot(a.$slots,"append")]),_:3})]),default:e.withCtx(()=>[e.renderSlot(a.$slots,"prepend"),e.createVNode(l.VList,{opened:r.value,"onUpdate:opened":u[0]||(u[0]=d=>r.value=d),density:"compact"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,(d,m)=>(e.openBlock(),e.createBlock(e.unref(Ie),e.mergeProps({key:m,ref_for:!0},d),null,16))),128))]),_:1},8,["opened"])]),_:3},8,["modelValue"]))}};function Fe(t){const i=e.shallowRef(t());let n=-1;function r(){clearInterval(n)}function o(){r(),e.nextTick(()=>i.value=t())}function p(s){const c=s?getComputedStyle(s):{transitionDuration:.2},a=parseFloat(c.transitionDuration)*1e3||200;if(r(),i.value<=0)return;const u=performance.now();n=window.setInterval(()=>{const d=performance.now()-u+a;i.value=Math.max(t()-d,0),i.value<=0&&r()},a)}return e.onScopeDispose(r),{clear:r,time:i,start:p,reset:o}}const Ee=C.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...l.makeLocationProps({location:"bottom"}),...l.makePositionProps(),...l.makeRoundedProps(),...l.makeVariantProps(),...C.makeThemeProps(),...C.omit(l.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Me=C.genericComponent()({name:"VSnackbar",props:Ee(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:n}=i;const r=C.useProxiedModel(t,"modelValue"),{positionClasses:o}=l.usePosition(t),{scopeId:p}=l.useScopeId(),{themeClasses:s}=C.provideTheme(t),{colorClasses:c,colorStyles:a,variantClasses:u}=l.useVariant(t),{roundedClasses:d}=l.useRounded(t),m=Fe(()=>Number(t.timeout)),g=e.ref(),B=e.ref(),I=e.shallowRef(!1),A=e.shallowRef(0),V=e.ref(),k=e.inject(l.VuetifyLayoutKey,void 0);C.useToggleScope(()=>!!k,()=>{const O=l.useLayout();e.watchEffect(()=>{V.value=O.mainStyles.value})}),e.watch(r,h),e.watch(()=>t.timeout,h),e.onMounted(()=>{r.value&&h()});let F=-1;function h(){m.reset(),window.clearTimeout(F);const O=Number(t.timeout);if(!r.value||O===-1)return;const R=C.refElement(B.value);m.start(R),F=window.setTimeout(()=>{r.value=!1},O)}function y(){m.reset(),window.clearTimeout(F)}function $(){I.value=!0,y()}function S(){I.value=!1,h()}function j(O){A.value=O.touches[0].clientY}function D(O){Math.abs(A.value-O.changedTouches[0].clientY)>50&&(r.value=!1)}function Q(){I.value&&S()}const K=e.computed(()=>t.location.split(" ").reduce((O,R)=>(O[`v-snackbar--${R}`]=!0,O),{}));return l.useRender(()=>{const O=l.VOverlay.filterProps(t),R=!!(n.default||n.text||t.text);return e.createVNode(l.VOverlay,e.mergeProps({ref:g,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},K.value,o.value,t.class],style:[V.value,t.style]},O,{modelValue:r.value,"onUpdate:modelValue":b=>r.value=b,contentProps:e.mergeProps({class:["v-snackbar__wrapper",s.value,c.value,d.value,u.value],style:[a.value],onPointerenter:$,onPointerleave:S},O.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:j,onTouchend:D,onAfterLeave:Q},p),{default:()=>{var b,G;return[l.genOverlays(!1,"v-snackbar"),t.timer&&!I.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(l.VProgressLinear,{ref:B,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":m.time.value},null)]),R&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((b=n.text)==null?void 0:b.call(n))??t.text,(G=n.default)==null?void 0:G.call(n)]),n.actions&&e.createVNode(l.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[n.actions({isActive:r})])]})]},activator:n.activator})}),l.forwardRefs({},g)}}),_e={class:"nav-home"};var ie;const ce=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(ie=document.body.dataset)==null?void 0:ie.appData},models:{},data:{}},setup(t){const i=e.useSlots(),n=t,r=e.reactive({drawer:!0}),o=v.useAppContext(n),p=v.usePanels();return e.onMounted(()=>{p.panel=o.data.panel}),e.watch(()=>[o.state.state,o.state.data],()=>{o.showState=!0}),e.onErrorCaptured((s,c,a)=>{o.state.error(`${s}`)}),(s,c)=>(e.openBlock(),e.createBlock(l.VApp,null,{default:e.withCtx(()=>[e.createVNode(Me,{modelValue:e.unref(o).showState,"onUpdate:modelValue":c[0]||(c[0]=a=>e.unref(o).showState=a),color:e.unref(o).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(o).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(l.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(l.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(v.t)("nav.panels"),"aria-label":e.unref(v.t)("nav.panels"),onClick:c[1]||(c[1]=e.withModifiers(a=>r.drawer=!r.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(i)["app-nav"]&&!r.drawer2?(e.openBlock(),e.createBlock(l.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:c[2]||(c[2]=a=>{r.drawer2=!0,r.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(l.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(l.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"title",{context:e.unref(o)})]),_:3}),e.createVNode(l.VSpacer),e.renderSlot(s.$slots,"app-bar-left",{context:e.unref(o)}),c[6]||(c[6]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(s.$slots,"app-bar-right",{context:e.unref(o)})]),_:3}),e.createVNode(e.unref(Ae),{drawer:r.drawer,"onUpdate:drawer":c[4]||(c[4]=a=>r.drawer=a),items:e.unref(o).data.nav},e.createSlots({prepend:e.withCtx(()=>[e.createElementVNode("a",_e,[s.logo?(e.openBlock(),e.createBlock(l.VImg,{key:0,src:s.logo,class:"logo"},null,8,["src"])):e.createCommentVNode("",!0)]),e.renderSlot(s.$slots,"nav-start",{context:e.unref(o)})]),_:2},[e.unref(i)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.createVNode(l.VList,{opened:r.opened,"onUpdate:opened":c[3]||(c[3]=a=>r.opened=a)},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"nav-end",{context:e.unref(o)})]),_:3},8,["opened"])]),key:"0"}:void 0]),1032,["drawer","items"]),e.createVNode(l.VMain,null,{default:e.withCtx(()=>[e.renderSlot(s.$slots,"main",{},()=>[e.createVNode(l.VTabsWindow,{modelValue:e.unref(p).panel,"onUpdate:modelValue":c[5]||(c[5]=a=>e.unref(p).panel=a)},{default:e.withCtx(a=>[e.renderSlot(s.$slots,"default",e.mergeProps(a,{context:e.unref(o)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),De=C.propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...l.makeFilterProps({filterKeys:["title"]}),...l.makeSelectProps(),...C.omit(l.makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...l.makeTransitionProps({transition:!1})},"VAutocomplete"),re=C.genericComponent()({name:"VAutocomplete",props:De(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,i){let{slots:n}=i;const{t:r}=C.useLocale(),o=e.ref(),p=e.shallowRef(!1),s=e.shallowRef(!0),c=e.shallowRef(!1),a=e.ref(),u=e.ref(),d=e.shallowRef(-1),{items:m,transformIn:g,transformOut:B}=l.useItems(t),{textColorClasses:I,textColorStyles:A}=l.useTextColor(()=>{var f;return(f=o.value)==null?void 0:f.color}),V=C.useProxiedModel(t,"search",""),k=C.useProxiedModel(t,"modelValue",[],f=>g(f===null?[null]:C.wrapInArray(f)),f=>{const w=B(f);return t.multiple?w:w[0]??null}),F=e.computed(()=>typeof t.counterValue=="function"?t.counterValue(k.value):typeof t.counterValue=="number"?t.counterValue:k.value.length),h=l.useForm(t),{filteredItems:y,getMatches:$}=l.useFilter(t,m,()=>s.value?"":V.value),S=e.computed(()=>t.hideSelected?y.value.filter(f=>!k.value.some(w=>w.value===f.value)):y.value),j=e.computed(()=>!!(t.chips||n.chip)),D=e.computed(()=>j.value||!!n.selection),Q=e.computed(()=>k.value.map(f=>f.props.value)),K=e.computed(()=>{var w;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&V.value===((w=S.value[0])==null?void 0:w.title))&&S.value.length>0&&!s.value&&!c.value}),O=e.computed(()=>t.hideNoData&&!S.value.length||h.isReadonly.value||h.isDisabled.value),R=C.useProxiedModel(t,"menu"),b=e.computed({get:()=>R.value,set:f=>{var w;R.value&&!f&&((w=a.value)!=null&&w.ΨopenChildren.size)||f&&O.value||(R.value=f)}}),G=e.computed(()=>b.value?t.closeText:t.openText),X=e.ref(),ge=l.useScrolling(X,o);function he(f){t.openOnClear&&(b.value=!0),V.value=""}function ye(){O.value||(b.value=!0)}function xe(f){O.value||(p.value&&(f.preventDefault(),f.stopPropagation()),b.value=!b.value)}function Be(f){var w;f.key!==" "&&C.checkPrintable(f)&&((w=o.value)==null||w.focus())}function Ce(f){var x,T,M,_,N;if(h.isReadonly.value)return;const w=(x=o.value)==null?void 0:x.selectionStart,P=k.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(f.key)&&f.preventDefault(),["Enter","ArrowDown"].includes(f.key)&&(b.value=!0),["Escape"].includes(f.key)&&(b.value=!1),K.value&&["Enter","Tab"].includes(f.key)&&!k.value.some(E=>{let{value:L}=E;return L===S.value[0].value})&&U(S.value[0]),f.key==="ArrowDown"&&K.value&&((T=X.value)==null||T.focus("next")),["Backspace","Delete"].includes(f.key)){if(!t.multiple&&D.value&&k.value.length>0&&!V.value)return U(k.value[0],!1);if(~d.value){f.preventDefault();const E=d.value;U(k.value[d.value],!1),d.value=E>=P-1?P-2:E}else f.key==="Backspace"&&!V.value&&(d.value=P-1);return}if(t.multiple)if(f.key==="ArrowLeft"){if(d.value<0&&w&&w>0)return;const E=d.value>-1?d.value-1:P-1;if(k.value[E])d.value=E;else{const L=((M=V.value)==null?void 0:M.length)??null;d.value=-1,(_=o.value)==null||_.setSelectionRange(L,L)}}else if(f.key==="ArrowRight"){if(d.value<0)return;const E=d.value+1;k.value[E]?d.value=E:(d.value=-1,(N=o.value)==null||N.setSelectionRange(0,0))}else~d.value&&C.checkPrintable(f)&&(d.value=-1)}function be(f){if(C.matchesSelector(o.value,":autofill")||C.matchesSelector(o.value,":-webkit-autofill")){const w=m.value.find(P=>P.title===f.target.value);w&&U(w)}}function Se(){var f;t.eager&&((f=u.value)==null||f.calculateVisibleItems())}function Ne(){var f;p.value&&(s.value=!0,(f=o.value)==null||f.focus())}function Pe(f){p.value=!0,setTimeout(()=>{c.value=!0})}function $e(f){c.value=!1}function Oe(f){(f==null||f===""&&!t.multiple&&!D.value)&&(k.value=[])}const Z=e.shallowRef(!1);function U(f){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!f||f.props.disabled))if(t.multiple){const P=k.value.findIndex(T=>(t.valueComparator||C.deepEqual)(T.value,f.value)),x=w??!~P;if(~P){const T=x?[...k.value,f]:[...k.value];T.splice(P,1),k.value=T}else x&&(k.value=[...k.value,f]);t.clearOnSelect&&(V.value="")}else{const P=w!==!1;k.value=P?[f]:[],V.value=P&&!D.value?f.title:"",e.nextTick(()=>{b.value=!1,s.value=!0})}}return e.watch(p,(f,w)=>{var P;f!==w&&(f?(Z.value=!0,V.value=t.multiple||D.value?"":String(((P=k.value.at(-1))==null?void 0:P.props.title)??""),s.value=!0,e.nextTick(()=>Z.value=!1)):(!t.multiple&&V.value==null&&(k.value=[]),b.value=!1,(t.multiple||D.value)&&(V.value=""),d.value=-1))}),e.watch(V,f=>{!p.value||Z.value||(f&&(b.value=!0),s.value=!f)}),e.watch(b,()=>{if(!t.hideSelected&&b.value&&k.value.length){const f=S.value.findIndex(w=>k.value.some(P=>w.value===P.value));C.IN_BROWSER&&window.requestAnimationFrame(()=>{var w;f>=0&&((w=u.value)==null||w.scrollToIndex(f))})}}),e.watch(()=>t.items,(f,w)=>{b.value||p.value&&!w.length&&f.length&&(b.value=!0)}),e.watch(k,f=>{var w;!t.multiple&&!D.value&&(V.value=((w=f[0])==null?void 0:w.title)??"")}),l.useRender(()=>{const f=!!(!t.hideNoData||S.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),w=k.value.length>0,P=l.VTextField.filterProps(t);return e.createVNode(l.VTextField,e.mergeProps({ref:o},P,{modelValue:V.value,"onUpdate:modelValue":[x=>V.value=x,Oe],focused:p.value,"onUpdate:focused":x=>p.value=x,validationValue:k.externalValue,counterValue:F.value,dirty:w,onChange:be,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":b.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!D.value,"v-autocomplete--selecting-index":d.value>-1},t.class],style:t.style,readonly:h.isReadonly.value,placeholder:w?void 0:t.placeholder,"onClick:clear":he,"onMousedown:control":ye,onKeydown:Ce}),{...n,default:()=>e.createVNode(e.Fragment,null,[e.createVNode(l.VMenu,e.mergeProps({ref:a,modelValue:b.value,"onUpdate:modelValue":x=>b.value=x,activator:"parent",contentClass:"v-autocomplete__content",disabled:O.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Se,onAfterLeave:Ne},t.menuProps),{default:()=>[f&&e.createVNode(l.VList,e.mergeProps({ref:X,selected:Q.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:x=>x.preventDefault(),onKeydown:Be,onFocusin:Pe,onFocusout:$e,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},ge,t.listProps),{default:()=>{var x,T,M;return[(x=n["prepend-item"])==null?void 0:x.call(n),!S.value.length&&!t.hideNoData&&(((T=n["no-data"])==null?void 0:T.call(n))??e.createVNode(l.VListItem,{key:"no-data",title:r(t.noDataText)},null)),e.createVNode(l.VVirtualScroll,{ref:u,renderless:!0,items:S.value,itemKey:"value"},{default:_=>{var ae;let{item:N,index:E,itemRef:L}=_;const oe=e.mergeProps(N.props,{ref:L,key:N.value,active:K.value&&E===0?!0:void 0,onClick:()=>U(N,null)});return((ae=n.item)==null?void 0:ae.call(n,{item:N,index:E,props:oe}))??e.createVNode(l.VListItem,e.mergeProps(oe,{role:"option"}),{prepend:q=>{let{isSelected:Te}=q;return e.createVNode(e.Fragment,null,[t.multiple&&!t.hideSelected?e.createVNode(l.VCheckboxBtn,{key:N.value,modelValue:Te,ripple:!1,tabindex:"-1"},null):void 0,N.props.prependAvatar&&e.createVNode(l.VAvatar,{image:N.props.prependAvatar},null),N.props.prependIcon&&e.createVNode(l.VIcon,{icon:N.props.prependIcon},null)])},title:()=>{var q;return s.value?N.title:l.highlightResult("v-autocomplete",N.title,(q=$(N))==null?void 0:q.title)}})}}),(M=n["append-item"])==null?void 0:M.call(n)]}})]}),k.value.map((x,T)=>{function M(L){L.stopPropagation(),L.preventDefault(),U(x,!1)}const _={"onClick:close":M,onKeydown(L){L.key!=="Enter"&&L.key!==" "||(L.preventDefault(),L.stopPropagation(),M(L))},onMousedown(L){L.preventDefault(),L.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},N=j.value?!!n.chip:!!n.selection,E=N?C.ensureValidVNode(j.value?n.chip({item:x,index:T,props:_}):n.selection({item:x,index:T})):void 0;if(!(N&&!E))return e.createVNode("div",{key:x.value,class:["v-autocomplete__selection",T===d.value&&["v-autocomplete__selection--selected",I.value]],style:T===d.value?A.value:{}},[j.value?n.chip?e.createVNode(l.VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:x.title}}},{default:()=>[E]}):e.createVNode(l.VChip,e.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:x.title,disabled:x.props.disabled},_),null):E??e.createVNode("span",{class:"v-autocomplete__selection-text"},[x.title,t.multiple&&T<k.value.length-1&&e.createVNode("span",{class:"v-autocomplete__selection-comma"},[e.createTextVNode(",")])])])})]),"append-inner":function(){var _,N;for(var x=arguments.length,T=new Array(x),M=0;M<x;M++)T[M]=arguments[M];return e.createVNode(e.Fragment,null,[(_=n["append-inner"])==null?void 0:_.call(n,...T),t.menuIcon?e.createVNode(l.VIcon,{class:"v-autocomplete__menu-icon",color:(N=o.value)==null?void 0:N.fieldIconColor,icon:t.menuIcon,onMousedown:xe,onClick:C.noop,"aria-label":r(G.value),title:r(G.value),tabindex:"-1"},null):void 0])}})}),l.forwardRefs({isFocused:p,isPristine:s,menu:b,search:V,filteredItems:y,select:U},o)}}),de=e.defineComponent({__name:"OxAutocomplete",props:e.mergeModels({repo:{},lookup:{default:"search"},label:{},name:{},disabled:{type:Boolean},multiple:{type:Boolean},hideDetails:{type:Boolean},density:{},itemTitle:{},itemValue:{},customFilter:{},filters:{},prevKey:{},nextKey:{},countKey:{},dataKey:{},query:{},relations:{},url:{},fetchRelations:{type:Boolean},save:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var A;const i=e.useSlots(),n=e.useModel(t,"modelValue"),r=e.ref(""),o=t,p=e.inject("repos"),s=e.computed(()=>v.splitValues(o,re.props)),c=e.computed(()=>s.value[0]),a=v.excludeValues(s.value[1],["repo","search"]),{list:u,items:d}=v.useModelList({...(A=a.value)==null?void 0:A[1],filters:o.filters||{},save:!1,query:v.query(o.repo,p)});function m(V){V[o.lookup]=r.value,z.lodashExports.isEqual(u.filters,V)||(u.filters={...o.filters},u.filters[o.lookup]=r.value,u.load())}function g(V){const k=u.filters[o.lookup];u.nextUrl,V&&V!="<empty string>"&&V!=k&&(u.filters[o.lookup]=V,u.load().then(F=>{r.value=V}))}var B=null;function I(V){!V||u.findIndex(V)!=-1||u.findIndex(V)==-1&&B!=V&&(B=V,u.load({id:V,append:0}))}return e.onMounted(()=>{o.filters&&Object.values(o.filters).length?m(o.filters):u.load(),I(n.value)}),e.watch(()=>o.filters,V=>m(V)),e.watch(r,g),e.watch(n,(V,k)=>V!=k&&I(V)),(V,k)=>(e.openBlock(),e.createBlock(e.unref(re),e.mergeProps(c.value,{items:e.unref(d),loading:e.unref(u).state.isProcessing,modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=F=>n.value=F),search:r.value,"onUpdate:search":k[1]||(k[1]=F=>r.value=F)}),e.createSlots({_:2},[e.renderList(e.unref(i),(F,h)=>({name:h,fn:e.withCtx(y=>[e.renderSlot(V.$slots,h,e.normalizeProps(e.guardReactiveProps(y)))])}))]),1040,["items","loading","modelValue","search"]))}}),pe={props:{src:String,is:String},setup(t){const i=e.shallowRef(null),n=e.computed(()=>{if(t.is)return t.is;let o=t.src.substring(t.src.lastIndexOf("/")+1);if(o&&(o=o.substring(0,o.indexOf("."))),!o)throw Error("`is` not provided and could not be deducted from `src`.");return o});function r(){i.value=v.defineAsyncComponent(t.src,n.value)}return e.watch(()=>t.src,r),r(),()=>e.h(i.value,t)}},Re={class:"text-error"},Y={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(t){const i=t;return(n,r)=>i.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(i.errors,o=>(e.openBlock(),e.createElementBlock("div",Re,[e.createVNode(l.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(o),1)]))),256)):e.createCommentVNode("",!0)}},ee={__name:"OxListFilters",props:{search:String},setup(t,{expose:i}){const n=e.inject("list"),r=t,o=e.computed(()=>{const c=n.filters;return c&&Object.entries(c).some(([a,u])=>!a.startsWith("page")&&!a.startsWith("ordering")&&!!u)}),p=e.computed(()=>o.value?"mdi-filter-check":"mdi-filter-outline");function s(){n.filters={},n.load()}return i({icon:p,hasFilters:o,reset:s}),(c,a)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:a[2]||(a[2]=e.withModifiers(u=>e.unref(n).load(),["prevent"])),class:"width-full"},[e.createVNode(l.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(l.VAppBarNavIcon,{icon:p.value,readonly:""},null,8,["icon"]),r.search&&e.unref(n).filters?(e.openBlock(),e.createBlock(l.VTextField,{key:0,label:e.unref(v.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(n).filters[r.search],"onUpdate:modelValue":a[0]||(a[0]=u=>e.unref(n).filters[r.search]=u),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"default",{list:e.unref(n),filters:e.unref(n).filters}),e.createVNode(l.VBtn,{onClick:a[1]||(a[1]=e.withModifiers(u=>e.unref(n).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":c.$t("filters.apply"),title:e.unref(v.t)("filters.apply")},null,8,["aria-label","title"]),o.value?(e.openBlock(),e.createBlock(l.VBtn,{key:1,onClick:e.withModifiers(s,["stop"]),icon:"mdi-backspace","aria-label":e.unref(v.t)("filters.reset"),title:e.unref(v.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},je={class:"flex-row justify-right"},fe=e.defineComponent({__name:"OxFormList",props:e.mergeModels({editable:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var a;const i=e.useModel(t,"modelValue"),n=e.ref({}),r=t,{editable:o}=e.toRefs(r),p=e.ref([]);(a=i.value)!=null&&a.length||p.value.push(-1);function s(){i.value.push(n.value),n.value={}}function c(u){confirm(v.t("actions.delete.confirm"))&&r.editable&&i.value.splice(u)}return(u,d)=>(e.openBlock(),e.createBlock(l.VList,{opened:p.value,"onUpdate:opened":d[3]||(d[3]=m=>p.value=m)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(m,g)=>(e.openBlock(),e.createBlock(l.VListGroup,{key:g,value:g},{activator:e.withCtx(({props:B})=>[e.createVNode(l.VListItem,e.mergeProps({ref_for:!0},B),{append:e.withCtx(()=>[e.createElementVNode("div",{onClick:d[0]||(d[0]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(u.$slots,"item.actions",{item:m,index:g,editable:e.unref(o)}),e.unref(o)?(e.openBlock(),e.createBlock(l.VBtn,{key:0,type:"button",class:"ml-2",size:"small",onClick:e.withModifiers(I=>c(g),["stop","prevent"]),color:"error","aria-label":e.unref(v.t)("actions.remove"),title:e.unref(v.t)("actions.remove"),icon:"mdi-delete"},null,8,["onClick","aria-label","title"])):e.createCommentVNode("",!0)])]),default:e.withCtx(()=>[e.createVNode(l.VListItemTitle,null,{default:e.withCtx(()=>[e.renderSlot(u.$slots,"item.title",{item:m})]),_:2},1024)]),_:2},1040)]),default:e.withCtx(()=>[e.renderSlot(u.$slots,"item",{item:m,index:g})]),_:2},1032,["value"]))),128)),i.value.length?(e.openBlock(),e.createBlock(l.VDivider,{key:0})):e.createCommentVNode("",!0),e.unref(o)?(e.openBlock(),e.createBlock(l.VListGroup,{key:1,value:-1},{activator:e.withCtx(({props:m})=>[e.createVNode(l.VListItem,e.mergeProps(m,{title:e.unref(v.t)("actions.add_item"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),default:e.withCtx(()=>[e.renderSlot(u.$slots,"item",{item:n.value,edit:!0}),n.value?(e.openBlock(),e.createBlock(l.VListItem,{key:0},{default:e.withCtx(()=>[e.createElementVNode("div",je,[n.value?(e.openBlock(),e.createBlock(l.VBtn,{key:0,size:"small",onClick:d[1]||(d[1]=m=>n.value={}),color:"secondary","prepend-icon":"mdi-backspace","aria-label":e.unref(v.t)("actions.discard")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.discard")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0),n.value?(e.openBlock(),e.createBlock(l.VBtn,{key:1,size:"small",onClick:d[2]||(d[2]=m=>s()),color:"primary","prepend-icon":"mdi-plus","aria-label":e.unref(v.t)("actions.add")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.add")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0)])]),_:1})):e.createCommentVNode("",!0)]),_:3})):e.createCommentVNode("",!0)]),_:3},8,["opened"]))}}),Ue=C.genericComponent()({name:"VSlideGroupItem",props:l.makeGroupItemProps(),emits:{"group:selected":t=>!0},setup(t,i){let{slots:n}=i;const r=l.useGroupItem(t,l.VSlideGroupSymbol);return()=>{var o;return(o=n.default)==null?void 0:o.call(n,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}}),me={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(t,{emit:i}){const n=i;e.inject("list");const r=e.inject("items"),o=t;function p(a){return a=a%o.colors.length,o.colorVariant?o.colors[a]+"-"+o.colorVariant:o.colors[a]}function s(a,u,d){a[d]?!a[d].includes(u)&&a[d].push(u):a[d]=[u]}const c=e.computed(()=>{const a={};if(r.value)for(var u of r.value){const m=u[o.field];if(Array.isArray(m))if(m.length)for(var d of m)s(a,u,d);else s(a,u,null);else s(a,u,m)}return a});return(a,u)=>(e.openBlock(),e.createBlock(l.VSheet,null,{default:e.withCtx(()=>[e.createVNode(l.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.headers,(d,m)=>(e.openBlock(),e.createBlock(Ue,{key:d.value},{default:e.withCtx(({selectedClass:g})=>[e.createVNode(l.VCard,{width:"400",class:e.normalizeClass(["ma-3",g]),color:p(m),lines:"two"},{default:e.withCtx(()=>[e.createVNode(l.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.title),1)]),_:2},1024),e.createVNode(l.VList,{"bg-color":p(m)},{default:e.withCtx(()=>[c.value&&c.value[d.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(c.value[d.value],B=>e.renderSlot(a.$slots,"item",{key:B.id,header:d,item:B},()=>[e.createVNode(l.VListItem,{title:B[o.itemTitle],value:o.itemValue&&B[o.itemValue],onClick:I=>n("click",B)},{append:e.withCtx(()=>[e.renderSlot(a.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},te=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(t){const i=e.useSlots(),n=z.filterSlots(i,"item.",{exclude:["item.actions"]}),r=e.inject("panel"),o=e.inject("list"),p=e.inject("items"),s=["change"],c=t,a=e.computed(()=>c.headers.reduce((m,g)=>(m.push(typeof g=="string"?{key:g,title:v.t(v.tKeys.field(g))}:g),m),[]));function u(m){o.filters.page=m.page,o.filters.page_size=m.itemsPerPage,o.filters.ordering=m.sortBy.map(({key:g,order:B})=>B=="asc"?g:`-${g}`)}function d(m,g){r.show({view:"detail.edit",value:g})}return(m,g)=>{var B;return e.openBlock(),e.createBlock(l.VDataTableServer,{items:e.unref(p),"item-index":"id","items-length":e.unref(o).count||e.unref(p).length,"items-per-page":c.itemsPerPage,loading:(B=e.unref(o).state)==null?void 0:B.isProcessing,headers:a.value,class:"align-top-table","onUpdate:options":u},e.createSlots({loading:e.withCtx(()=>[e.createVNode(l.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:I})=>[t.edit?(e.openBlock(),e.createBlock(H,{key:0,icon:"mdi-pencil",button:"",title:e.unref(v.t)("actions.edit"),permissions:s,item:I,run:d},null,8,["title","item"])):e.createCommentVNode("",!0),e.renderSlot(m.$slots,"item.actions",{value:I,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(n),(I,A)=>({name:A,fn:e.withCtx(V=>[e.renderSlot(m.$slots,A,e.normalizeProps(e.guardReactiveProps(V)))])}))]),1032,["items","items-length","items-per-page","loading","headers"])}}}),W={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(t){const i=e.useSlots(),n=t;let r=e.ref(!1);e.watch(()=>n.state.state,s=>{n.delay&&s==z.States.PROCESSING&&(r.value=!1,window.setTimeout(()=>{r.value=!0},5e3))});const o=e.computed(()=>{var s;return((s=n.state)==null?void 0:s.isProcessing)&&(!n.delay||r.value)}),p=e.computed(()=>{var s,c;return(c=(s=n.state)==null?void 0:s.data)==null?void 0:c.messages});return(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.state.isNone&&e.unref(i).none?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:t.state,title:t.noneTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"none",{state:t.state})]),_:3},8,["state","title"])):o.value?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.processingTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"processing",{state:t.state},()=>[c[0]||(c[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):n.state.isError?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.errorTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"error",{state:t.state},()=>[c[1]||(c[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(s.$slots,"error-detail",{state:t.state})]),_:3},8,["state","title"])):n.state.isOk?(e.openBlock(),e.createBlock(e.unref(l.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.okTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"ok",{state:t.state},()=>[c[2]||(c[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),p.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,a=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(a),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"ok-detail",{state:t.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default",{state:n.state})],64))}},ze={class:"text-right"},J={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(t,{emit:i}){const n=i,r=t;return(o,p)=>(e.openBlock(),e.createElementBlock("div",ze,[e.createVNode(e.unref(l.VBtn),{color:"error",class:"me-2","prepend-icon":r.resetIcon,onClick:p[0]||(p[0]=s=>n("reset")),disabled:r.disabled},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(r.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),r.state.isSending?(e.openBlock(),e.createBlock(e.unref(l.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>p[2]||(p[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(l.VBtn),{key:1,color:"primary","prepend-icon":r.validateIcon,onClick:p[1]||(p[1]=s=>n("validate")),disabled:r.disabled||r.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(r.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},Ke={key:0},Ge={class:"text-right mt-3"},ve={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(t,{emit:i}){const n=e.useTemplateRef("password"),r=t,o=e.reactive({username:"",password:""}),p=e.ref(!1),s=e.reactive(new z.State);function c(u=!0){z.reset(o,{username:"",password:""}),u&&s.none()}async function a(){s.processing();try{const u=await fetch(r.url,{method:"POST",headers:z.config$1.axiosConfig.headers,body:JSON.stringify(o)});u.status==200?(o.credentials="",o.password="",s.ok(await u.json()),r.next&&(window.location.href=r.next)):s.error(await u.json())}catch(u){s.ok((u==null?void 0:u.message)||u)}}return(u,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(W),{state:s},{none:e.withCtx(({state:m})=>d[7]||(d[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:m})=>[r.next?(e.openBlock(),e.createElementBlock("p",Ke,[d[8]||(d[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(r.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:m})=>{var g,B;return[e.createVNode(Y,{errors:(g=m.data)==null?void 0:g.username},null,8,["errors"]),e.createVNode(Y,{errors:(B=m.data)==null?void 0:B.password},null,8,["errors"])]}),_:1},8,["state"]),s.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VTextField,{variant:"underlined",label:"Enter login",modelValue:o.username,"onUpdate:modelValue":d[0]||(d[0]=m=>o.username=m),onKeyup:d[1]||(d[1]=e.withKeys(e.withModifiers(m=>e.unref(n).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(l.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:o.password,"onUpdate:modelValue":d[2]||(d[2]=m=>o.password=m),type:p.value?"text":"password","append-icon":p.value?"mdi-eye":"mdi-eye-off","onClick:append":d[3]||(d[3]=m=>p.value=!p.value),onKeyup:d[4]||(d[4]=e.withKeys(e.withModifiers(m=>a(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",Ge,[e.renderSlot(u.$slots,"default",{value:o.password},()=>[o.username&&o.password?(e.openBlock(),e.createBlock(J,{key:0,"validate-label":"Login!",onValidate:d[5]||(d[5]=m=>a()),onReset:d[6]||(d[6]=m=>c()),state:s},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},le=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(t){const i=e.useSlots(),n=t,r=v.filterSlots(i,"views."),o=e.ref(!1);e.onMounted(()=>{o.value=!0}),e.onUnmounted(()=>{o.value=!1});const p=e.inject("panels"),s=e.inject("panel");return(c,a)=>(e.openBlock(),e.createBlock(l.VTabsWindowItem,{value:n.name},{default:e.withCtx(()=>[n.state?(e.openBlock(),e.createBlock(W,{key:0,state:n.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(l.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!o.value||e.unref(p).panel!=n.name},[n.icon?(e.openBlock(),e.createBlock(l.VIcon,{key:0,icon:n.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!o.value||e.unref(p).panel!=n.name},[e.renderSlot(c.$slots,"append-title"),n.help?(e.openBlock(),e.createBlock(l.VBtn,{key:0,class:"ml-3",href:n.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(c.$slots,"top"),e.renderSlot(c.$slots,"default",{},()=>[e.unref(r)?(e.openBlock(),e.createBlock(l.VWindow,{key:0,modelValue:e.unref(s).view,"onUpdate:modelValue":a[0]||(a[0]=u=>e.unref(s).view=u)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(u,d)=>(e.openBlock(),e.createBlock(l.VWindowItem,{key:u,value:u},{default:e.withCtx(()=>[e.renderSlot(c.$slots,d)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(c.$slots,"bottom")]),_:3})]),_:3},8,["value"]))}}),ne=e.defineComponent({__name:"OxView",props:{title:String},setup(t){const i=t,n=e.ref(null),r=e.useSlots(),o=v.filterSlots(r,"tab.",{exclude:"tab.default"}),p=v.filterSlots(r,"window.");return(s,c)=>e.unref(o)&&Object.keys(e.unref(o)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(l.VTabs,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=a=>n.value=a)},{default:e.withCtx(()=>[e.unref(r).default?e.renderSlot(s.$slots,"tab",{key:0},()=>[e.createVNode(l.VTab,{text:i==null?void 0:i.title,value:"default"},null,8,["text"])]):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),(a,u)=>(e.openBlock(),e.createBlock(l.VTab,{value:a},{default:e.withCtx(()=>[e.renderSlot(s.$slots,u)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"]),e.createVNode(l.VTabsWindow,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=a=>n.value=a)},{default:e.withCtx(()=>[e.unref(r).default?(e.openBlock(),e.createBlock(l.VTabsWindowItem,{key:0,value:"default"},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default")]),_:3})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(a,u)=>(e.openBlock(),e.createBlock(l.VTabsWindowItem,{value:a},{default:e.withCtx(()=>[e.renderSlot(s.$slots,u)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(s.$slots,"default",{key:1})}}),We={class:"mb-3"},Ve=e.defineComponent({__name:"OxModelEdit",props:{repo:{},empty:{},initial:{},name:{},url:{},saved:{type:Function}},setup(t,{expose:i}){const n=t,{editor:r,edited:o}=v.useModelEditor({props:n});e.computed(()=>r.repo.use);const{value:p}=e.toRefs(r);return i({editor:r,edited:o,value:p}),(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(W,{state:e.unref(r).state},null,8,["state"]),e.createElementVNode("div",We,[e.unref(o)?(e.openBlock(),e.createBlock(J,{key:0,onValidate:c[0]||(c[0]=a=>e.unref(r).save()),onReset:c[1]||(c[1]=a=>e.unref(r).discard()),state:e.unref(r).state,"validate-disabled":!e.unref(r).valid},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)]),e.createVNode(l.VContainer,null,{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default",{editor:e.unref(r),edited:e.unref(o),value:e.unref(p),model:e.unref(r).repo.use})]),_:3})],64))}}),ke=e.defineComponent({__name:"OxModelPanel",props:{repo:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},fetchRelations:{type:Boolean,default:!0},search:{default:"search"},warning:{},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(t){const i=e.useSlots(),n=v.filterSlots(i,"views.list."),r=v.filterSlots(i,"item."),o=v.filterSlots(i,"views.detail.edit."),p=e.useTemplateRef("filters"),s=t,c=e.inject("context"),{panel:a,list:u,items:d,next:m,prev:g}=e.inject("panel")??v.useModelPanel({props:s}),B=a.panels,I=e.computed(()=>{var h;return c.user.can([a.model,(h=a.value)!=null&&h.id?"change":"add"])}),{showFilters:A}=e.toRefs(a),V=e.computed(()=>[...s.headers,{key:"actions",title:v.t("actions")}]);function k(h){a.value.value=h}const F=e.computed(()=>({panel:a,panels:B,list:u,items:d,context:c,value:a.value}));return e.watch(()=>Object.values(u.filters),()=>u.load()),(h,y)=>(e.openBlock(),e.createBlock(le,{name:s.name,title:e.unref(a).title,icon:e.unref(a).icon,state:e.unref(u).state,index:s.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(h.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(F.value))),e.unref(a).view.startsWith("list.")?(e.openBlock(),e.createBlock(l.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(h.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(F.value))),e.unref(p)?(e.openBlock(),e.createBlock(l.VBtn,{key:0,title:e.unref(A)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),"aria-label":e.unref(A)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),onClick:y[0]||(y[0]=$=>A.value=!e.unref(A)),active:e.unref(A)},{default:e.withCtx(()=>[e.createVNode(l.VIcon,{icon:e.unref(p).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(a).view.startsWith("detail.")&&e.unref(a).value?(e.openBlock(),e.createBlock(l.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(h.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(F.value))),e.unref(a).view=="detail.edit"&&e.unref(a).value?(e.openBlock(),e.createBlock(l.VMenu,{key:0},{activator:e.withCtx(({props:$})=>[e.createVNode(l.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},$),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(l.VList,null,{default:e.withCtx(()=>[e.renderSlot(h.$slots,"item.actions",{value:e.unref(a).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(l.VBtn,{disabled:!e.unref(g),title:e.unref(v.t)("prev"),"aria-label":e.unref(v.t)("prev"),onClick:y[1]||(y[1]=e.withModifiers($=>e.unref(a).show({value:e.unref(g)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(l.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(l.VBtn,{disabled:!e.unref(m),title:e.unref(v.t)("next"),"aria-label":e.unref(v.t)("next"),onClick:y[2]||(y[2]=e.withModifiers($=>e.unref(a).show({value:e.unref(m)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(l.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(l.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(a).view,"onUpdate:modelValue":y[4]||(y[4]=$=>e.unref(a).view=$),density:"compact",variant:"tonal",mandatory:""},{default:e.withCtx(()=>{var $;return[e.createVNode(l.VBtn,{value:"list.table",title:e.unref(v.t)("panels.nav.table"),"aria-label":e.unref(v.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>y[5]||(y[5]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(i)["views.list.cards"]?(e.openBlock(),e.createBlock(l.VBtn,{key:0,value:"list.cards",title:e.unref(v.t)("panels.nav.cards"),"aria-label":e.unref(v.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>y[6]||(y[6]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.list.kanban"]?(e.openBlock(),e.createBlock(l.VBtn,{key:1,value:"list.kanban",title:e.unref(v.t)("panels.nav.kanban"),"aria-label":e.unref(v.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>y[7]||(y[7]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(o)?(e.openBlock(),e.createBlock(l.VBtn,{key:2,value:"detail.add",onClick:y[3]||(y[3]=e.withModifiers(S=>e.unref(a).create(),["stop"])),title:e.unref(v.t)("panels.nav.add"),"aria-label":e.unref(v.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>y[8]||(y[8]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(i)["views.detail.edit"]||e.unref(o)?(e.openBlock(),e.createBlock(l.VBtn,{key:3,value:"detail.edit",disabled:!(($=e.unref(a).value)!=null&&$.id),title:e.unref(v.t)("panels.nav.edit"),"aria-label":e.unref(v.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(l.VIcon,null,{default:e.withCtx(()=>y[9]||(y[9]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(h.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(F.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[s.warning?(e.openBlock(),e.createBlock(l.VAlert,{key:0,type:"warning",variant:"tonal",text:s.warning},null,8,["text"])):e.createCommentVNode("",!0),e.renderSlot(h.$slots,"top"),e.withDirectives(e.createVNode(ee,{ref_key:"filters",ref:p,search:s.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx($=>[e.renderSlot(h.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps($)))]),_:3},8,["search"]),[[e.vShow,e.unref(a).view.startsWith("list.")&&e.unref(A)]])]),_:2},[e.unref(i)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(te,{headers:V.value,edit:""},e.createSlots({_:2},[e.renderList(e.unref(r),($,S)=>({name:S,fn:e.withCtx(j=>[e.renderSlot(h.$slots,S,e.normalizeProps(e.guardReactiveProps(j)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(n),($,S)=>({name:S,fn:e.withCtx(()=>[e.renderSlot(h.$slots,S,e.normalizeProps(e.guardReactiveProps(F.value)))])})),(e.unref(i)["views.detail.edit"]||e.unref(o))&&I.value?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(e.unref(ne),{title:e.unref(v.t)(`models.${e.unref(a).model.entity}`)},e.createSlots({_:2},[e.renderList(e.unref(o),($,S)=>({name:$,fn:e.withCtx(()=>[e.renderSlot(h.$slots,S,{saved:k,value:e.unref(a).value})])}))]),1032,["title"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),we=e.defineComponent({__name:"OxPanelNav",props:{title:{},icon:{},value:{},url:{},permissions:{},type:{},items:{}},setup(t){const i=t,n=e.inject("panels");return e.computed(()=>!i.auto||panel.name==i.name),(r,o)=>(e.openBlock(),e.createBlock(l.VListItem,{value:i.panel,active:e.unref(n).panel==i.panel,"prepend-icon":i.icon,title:i.title,onClick:o[0]||(o[0]=e.withModifiers(p=>e.unref(n).show(i),["stop"]))},null,8,["value","active","prepend-icon","title"]))}}),qe=Object.freeze(Object.defineProperty({__proto__:null,OxAction:H,OxActionModelDelete:se,OxActions:ue,OxApp:ce,OxAutocomplete:de,OxComponent:pe,OxFieldDetails:Y,OxFormList:fe,OxListFilters:ee,OxListKanban:me,OxListTable:te,OxLogin:ve,OxModelEdit:Ve,OxModelPanel:ke,OxPanel:le,OxPanelNav:we,OxStateAlert:W,OxValidationBtn:J,OxView:ne},Symbol.toStringTag,{value:"Module"})),Ye={el:"#app",delimiters:["[[","]]"],components:{...qe,...Le.components}};exports.App=Ye;exports.OxAction=H;exports.OxActionModelDelete=se;exports.OxActions=ue;exports.OxApp=ce;exports.OxAutocomplete=de;exports.OxComponent=pe;exports.OxFieldDetails=Y;exports.OxFormList=fe;exports.OxListFilters=ee;exports.OxListKanban=me;exports.OxListTable=te;exports.OxLogin=ve;exports.OxModelEdit=Ve;exports.OxModelPanel=ke;exports.OxPanel=le;exports.OxPanelNav=we;exports.OxStateAlert=W;exports.OxValidationBtn=J;exports.OxView=ne;
//# sourceMappingURL=components.cjs.map
