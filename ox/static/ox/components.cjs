"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),v=require("ox"),n=require("./VAlert-Dj0RKqk_.cjs"),B=require("./theme-BS02m0hV.cjs"),z=require("./lodash-DHSgm9t9.cjs"),Te=require("ox/vendor"),W=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{type:[String,Function,Array]},run:{},href:{}},emits:["completed"],setup(t,{emit:u}){const a=t,s=u,l=e.inject("context"),{run:f,processing:r,allowed:d}=v.useAction({user:l.user,emits:s,props:a});return(o,c)=>e.unref(d)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[a.button?(e.openBlock(),e.createBlock(n.VBtn,{key:0,variant:"text",disabled:e.unref(r),color:a.color,icon:a.icon,title:a.title,"aria-label":a.title,onClick:e.withModifiers(e.unref(f),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(n.VListItem,{key:1,title:a.title,"base-color":a.color,"prepend-icon":a.icon,disabled:e.unref(r),onClick:e.withModifiers(e.unref(f),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),se=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(t){const u=e.inject("panel"),a=e.inject("repos"),s=t;async function l(f,r){return await a[r.constructor.entity].api().delete(r.$url(),{delete:s.item.id})}return(f,r)=>(e.openBlock(),e.createBlock(W,{item:s.item,button:s.button,icon:"mdi-delete",color:"error",title:e.unref(v.t)("actions.delete"),confirm:e.unref(v.t)("actions.delete.confirm"),permissions:["delete",(d,o)=>o.id],run:l,onCompleted:r[0]||(r[0]=d=>{var o;return(o=e.unref(u))==null?void 0:o.show({view:e.unref(u).index})})},null,8,["item","button","title","confirm","permissions"]))}}),ie={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(t){e.useSlots();const u=t;return(a,s)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(a.$slots,"before",e.normalizeProps(e.guardReactiveProps(u))),e.renderSlot(a.$slots,"default",e.normalizeProps(e.guardReactiveProps(u))),e.renderSlot(a.$slots,"after",e.normalizeProps(e.guardReactiveProps(u)))],64))}},Le=e.defineComponent({__name:"OxAppNavItem",props:{title:{},icon:{},value:{},url:{},permissions:{},type:{},items:{},order:{}},setup(t){const u=t;e.ref(null);const a=e.inject("user"),s=e.inject("panels");e.computed(()=>!u.auto||panel.name==u.name);function l(r){return r.permissions&&!a.can(r.permissions)?!1:r.items?r.items.some(d=>l(d)):!0}function f(){const r={panel:u.value,href:u.url};console.log(u,r),s.show(r)}return(r,d)=>{const o=e.resolveComponent("ox-app-nav-item",!0);return l(u)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[u.type=="subheader"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VListSubheader,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.title),1)]),_:1}),u.items?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.items,c=>(e.openBlock(),e.createBlock(o,e.mergeProps({ref_for:!0},c),null,16))),256)):e.createCommentVNode("",!0)],64)):u.type=="group"?(e.openBlock(),e.createBlock(n.VListGroup,{key:1,value:u.value},{activator:e.withCtx(({props:c})=>[e.createVNode(n.VListItem,e.mergeProps(c,{title:u.title,"prepend-icon":u.icon}),null,16,["title","prepend-icon"])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.items,(c,i)=>(e.openBlock(),e.createBlock(o,e.mergeProps({key:i,ref_for:!0},c),null,16))),128))]),_:1},8,["value"])):u.type=="divider"?(e.openBlock(),e.createBlock(n.VDivider,{key:2})):(e.openBlock(),e.createBlock(n.VListItem,{key:3,active:e.unref(s).panel==u.value,value:u.value,"prepend-icon":u.icon,title:u.title,onClick:e.withModifiers(f,["stop"])},null,8,["active","value","prepend-icon","title"]))],64)):e.createCommentVNode("",!0)}}}),Ie={__name:"OxAppNav",props:e.mergeModels({items:Array},{drawer:{},drawerModifiers:{}}),emits:["update:drawer"],setup(t){e.inject("context");const u=e.inject("panels"),a=e.useModel(t,"drawer"),s=e.ref([]),l=t,f=e.computed(()=>l.items);function r(o){if(u.panel){for(const c of o)if(c.items){const i=r(c.items);if(i)return[i,c.value]}else if(c.value==u.panel)return[c.value]}}function d(){s.value=r(f.value)}return e.onMounted(d),e.watch(f,d),e.watch(()=>u.panel,d),(o,c)=>(e.openBlock(),e.createBlock(n.VNavigationDrawer,{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=i=>a.value=i),theme:"dark"},{append:e.withCtx(()=>[e.createVNode(n.VList,null,{default:e.withCtx(()=>[e.renderSlot(o.$slots,"append")]),_:3})]),default:e.withCtx(()=>[e.renderSlot(o.$slots,"prepend"),e.createVNode(n.VList,{opened:s.value,"onUpdate:opened":c[0]||(c[0]=i=>s.value=i),density:"compact"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,(i,m)=>(e.openBlock(),e.createBlock(e.unref(Le),e.mergeProps({key:m,ref_for:!0},i),null,16))),128))]),_:1},8,["opened"])]),_:3},8,["modelValue"]))}};function Fe(t){const u=e.shallowRef(t());let a=-1;function s(){clearInterval(a)}function l(){s(),e.nextTick(()=>u.value=t())}function f(r){const d=r?getComputedStyle(r):{transitionDuration:.2},o=parseFloat(d.transitionDuration)*1e3||200;if(s(),u.value<=0)return;const c=performance.now();a=window.setInterval(()=>{const i=performance.now()-c+o;u.value=Math.max(t()-i,0),u.value<=0&&s()},o)}return e.onScopeDispose(s),{clear:s,time:u,start:f,reset:l}}const Ae=B.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...n.makeLocationProps({location:"bottom"}),...n.makePositionProps(),...n.makeRoundedProps(),...n.makeVariantProps(),...B.makeThemeProps(),...B.omit(n.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Me=B.genericComponent()({name:"VSnackbar",props:Ae(),emits:{"update:modelValue":t=>!0},setup(t,u){let{slots:a}=u;const s=B.useProxiedModel(t,"modelValue"),{positionClasses:l}=n.usePosition(t),{scopeId:f}=n.useScopeId(),{themeClasses:r}=B.provideTheme(t),{colorClasses:d,colorStyles:o,variantClasses:c}=n.useVariant(t),{roundedClasses:i}=n.useRounded(t),m=Fe(()=>Number(t.timeout)),b=e.ref(),g=e.ref(),x=e.shallowRef(!1),h=e.shallowRef(0),y=e.ref(),V=e.inject(n.VuetifyLayoutKey,void 0);B.useToggleScope(()=>!!V,()=>{const T=n.useLayout();e.watchEffect(()=>{y.value=T.mainStyles.value})}),e.watch(s,k),e.watch(()=>t.timeout,k),e.onMounted(()=>{s.value&&k()});let S=-1;function k(){m.reset(),window.clearTimeout(S);const T=Number(t.timeout);if(!s.value||T===-1)return;const _=B.refElement(g.value);m.start(_),S=window.setTimeout(()=>{s.value=!1},T)}function P(){m.reset(),window.clearTimeout(S)}function A(){x.value=!0,P()}function M(){x.value=!1,k()}function U(T){h.value=T.touches[0].clientY}function D(T){Math.abs(h.value-T.changedTouches[0].clientY)>50&&(s.value=!1)}function Q(){x.value&&M()}const K=e.computed(()=>t.location.split(" ").reduce((T,_)=>(T[`v-snackbar--${_}`]=!0,T),{}));return n.useRender(()=>{const T=n.VOverlay.filterProps(t),_=!!(a.default||a.text||t.text);return e.createVNode(n.VOverlay,e.mergeProps({ref:b,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},K.value,l.value,t.class],style:[y.value,t.style]},T,{modelValue:s.value,"onUpdate:modelValue":N=>s.value=N,contentProps:e.mergeProps({class:["v-snackbar__wrapper",r.value,d.value,i.value,c.value],style:[o.value],onPointerenter:A,onPointerleave:M},T.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:U,onTouchend:D,onAfterLeave:Q},f),{default:()=>{var N,G;return[n.genOverlays(!1,"v-snackbar"),t.timer&&!x.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(n.VProgressLinear,{ref:g,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":m.time.value},null)]),_&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((N=a.text)==null?void 0:N.call(a))??t.text,(G=a.default)==null?void 0:G.call(a)]),a.actions&&e.createVNode(n.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[a.actions({isActive:s})])]})]},activator:a.activator})}),n.forwardRefs({},b)}}),Ee={class:"nav-home"};var re;const ue=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(re=document.body.dataset)==null?void 0:re.appData},models:{},data:{}},setup(t){const u=e.useSlots(),a=t,s=e.reactive({drawer:!0}),l=v.useAppContext(a),f=v.usePanels();return e.onMounted(()=>{f.panel=l.data.panel}),e.watch(()=>[l.state.state,l.state.data],()=>{l.showState=!0}),e.onErrorCaptured((r,d,o)=>{l.state.error(`${r}`)}),(r,d)=>(e.openBlock(),e.createBlock(n.VApp,null,{default:e.withCtx(()=>[e.createVNode(Me,{modelValue:e.unref(l).showState,"onUpdate:modelValue":d[0]||(d[0]=o=>e.unref(l).showState=o),color:e.unref(l).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(n.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(v.t)("nav.panels"),"aria-label":e.unref(v.t)("nav.panels"),onClick:d[1]||(d[1]=e.withModifiers(o=>s.drawer=!s.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(u)["app-nav"]&&!s.drawer2?(e.openBlock(),e.createBlock(n.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:d[2]||(d[2]=o=>{s.drawer2=!0,s.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(n.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(n.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"title",{context:e.unref(l)})]),_:3}),e.createVNode(n.VSpacer),e.renderSlot(r.$slots,"app-bar-left",{context:e.unref(l)}),d[6]||(d[6]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(r.$slots,"app-bar-right",{context:e.unref(l)})]),_:3}),e.createVNode(e.unref(Ie),{drawer:s.drawer,"onUpdate:drawer":d[4]||(d[4]=o=>s.drawer=o),items:e.unref(l).data.nav},e.createSlots({prepend:e.withCtx(()=>[e.createElementVNode("a",Ee,[r.logo?(e.openBlock(),e.createBlock(n.VImg,{key:0,src:r.logo,class:"logo"},null,8,["src"])):e.createCommentVNode("",!0)]),e.renderSlot(r.$slots,"nav-start",{context:e.unref(l)})]),_:2},[e.unref(u)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.createVNode(n.VList,{opened:s.opened,"onUpdate:opened":d[3]||(d[3]=o=>s.opened=o)},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"nav-end",{context:e.unref(l)})]),_:3},8,["opened"])]),key:"0"}:void 0]),1032,["drawer","items"]),e.createVNode(n.VMain,null,{default:e.withCtx(()=>[e.renderSlot(r.$slots,"main",{},()=>[e.createVNode(n.VTabsWindow,{modelValue:e.unref(f).panel,"onUpdate:modelValue":d[5]||(d[5]=o=>e.unref(f).panel=o)},{default:e.withCtx(o=>[e.renderSlot(r.$slots,"default",e.mergeProps(o,{context:e.unref(l)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),Re=B.propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...n.makeFilterProps({filterKeys:["title"]}),...n.makeSelectProps(),...B.omit(n.makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...n.makeTransitionProps({transition:!1})},"VAutocomplete"),De=B.genericComponent()({name:"VAutocomplete",props:Re(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,u){let{slots:a}=u;const{t:s}=B.useLocale(),l=e.ref(),f=e.shallowRef(!1),r=e.shallowRef(!0),d=e.shallowRef(!1),o=e.ref(),c=e.ref(),i=e.shallowRef(-1),{items:m,transformIn:b,transformOut:g}=n.useItems(t),{textColorClasses:x,textColorStyles:h}=n.useTextColor(()=>{var p;return(p=l.value)==null?void 0:p.color}),y=B.useProxiedModel(t,"search",""),V=B.useProxiedModel(t,"modelValue",[],p=>b(p===null?[null]:B.wrapInArray(p)),p=>{const w=g(p);return t.multiple?w:w[0]??null}),S=e.computed(()=>typeof t.counterValue=="function"?t.counterValue(V.value):typeof t.counterValue=="number"?t.counterValue:V.value.length),k=n.useForm(t),{filteredItems:P,getMatches:A}=n.useFilter(t,m,()=>r.value?"":y.value),M=e.computed(()=>t.hideSelected?P.value.filter(p=>!V.value.some(w=>w.value===p.value)):P.value),U=e.computed(()=>!!(t.chips||a.chip)),D=e.computed(()=>U.value||!!a.selection),Q=e.computed(()=>V.value.map(p=>p.props.value)),K=e.computed(()=>{var w;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&y.value===((w=M.value[0])==null?void 0:w.title))&&M.value.length>0&&!r.value&&!d.value}),T=e.computed(()=>t.hideNoData&&!M.value.length||k.isReadonly.value||k.isDisabled.value),_=B.useProxiedModel(t,"menu"),N=e.computed({get:()=>_.value,set:p=>{var w;_.value&&!p&&((w=o.value)!=null&&w.Î¨openChildren.size)||p&&T.value||(_.value=p)}}),G=e.computed(()=>N.value?t.closeText:t.openText),X=e.ref(),we=n.useScrolling(X,l);function ge(p){t.openOnClear&&(N.value=!0),y.value=""}function he(){T.value||(N.value=!0)}function ye(p){T.value||(f.value&&(p.preventDefault(),p.stopPropagation()),N.value=!N.value)}function be(p){var w;p.key!==" "&&B.checkPrintable(p)&&((w=l.value)==null||w.focus())}function xe(p){var C,L,E,R,$;if(k.isReadonly.value)return;const w=(C=l.value)==null?void 0:C.selectionStart,O=V.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(p.key)&&p.preventDefault(),["Enter","ArrowDown"].includes(p.key)&&(N.value=!0),["Escape"].includes(p.key)&&(N.value=!1),K.value&&["Enter","Tab"].includes(p.key)&&!V.value.some(F=>{let{value:I}=F;return I===M.value[0].value})&&j(M.value[0]),p.key==="ArrowDown"&&K.value&&((L=X.value)==null||L.focus("next")),["Backspace","Delete"].includes(p.key)){if(!t.multiple&&D.value&&V.value.length>0&&!y.value)return j(V.value[0],!1);if(~i.value){p.preventDefault();const F=i.value;j(V.value[i.value],!1),i.value=F>=O-1?O-2:F}else p.key==="Backspace"&&!y.value&&(i.value=O-1);return}if(t.multiple)if(p.key==="ArrowLeft"){if(i.value<0&&w&&w>0)return;const F=i.value>-1?i.value-1:O-1;if(V.value[F])i.value=F;else{const I=((E=y.value)==null?void 0:E.length)??null;i.value=-1,(R=l.value)==null||R.setSelectionRange(I,I)}}else if(p.key==="ArrowRight"){if(i.value<0)return;const F=i.value+1;V.value[F]?i.value=F:(i.value=-1,($=l.value)==null||$.setSelectionRange(0,0))}else~i.value&&B.checkPrintable(p)&&(i.value=-1)}function Ce(p){if(B.matchesSelector(l.value,":autofill")||B.matchesSelector(l.value,":-webkit-autofill")){const w=m.value.find(O=>O.title===p.target.value);w&&j(w)}}function Be(){var p;t.eager&&((p=c.value)==null||p.calculateVisibleItems())}function Se(){var p;f.value&&(r.value=!0,(p=l.value)==null||p.focus())}function Ne(p){f.value=!0,setTimeout(()=>{d.value=!0})}function Pe(p){d.value=!1}function $e(p){(p==null||p===""&&!t.multiple&&!D.value)&&(V.value=[])}const Z=e.shallowRef(!1);function j(p){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!p||p.props.disabled))if(t.multiple){const O=V.value.findIndex(L=>(t.valueComparator||B.deepEqual)(L.value,p.value)),C=w??!~O;if(~O){const L=C?[...V.value,p]:[...V.value];L.splice(O,1),V.value=L}else C&&(V.value=[...V.value,p]);t.clearOnSelect&&(y.value="")}else{const O=w!==!1;V.value=O?[p]:[],y.value=O&&!D.value?p.title:"",e.nextTick(()=>{N.value=!1,r.value=!0})}}return e.watch(f,(p,w)=>{var O;p!==w&&(p?(Z.value=!0,y.value=t.multiple||D.value?"":String(((O=V.value.at(-1))==null?void 0:O.props.title)??""),r.value=!0,e.nextTick(()=>Z.value=!1)):(!t.multiple&&y.value==null&&(V.value=[]),N.value=!1,(t.multiple||D.value)&&(y.value=""),i.value=-1))}),e.watch(y,p=>{!f.value||Z.value||(p&&(N.value=!0),r.value=!p)}),e.watch(N,()=>{if(!t.hideSelected&&N.value&&V.value.length){const p=M.value.findIndex(w=>V.value.some(O=>w.value===O.value));B.IN_BROWSER&&window.requestAnimationFrame(()=>{var w;p>=0&&((w=c.value)==null||w.scrollToIndex(p))})}}),e.watch(()=>t.items,(p,w)=>{N.value||f.value&&!w.length&&p.length&&(N.value=!0)}),e.watch(V,p=>{var w;!t.multiple&&!D.value&&(y.value=((w=p[0])==null?void 0:w.title)??"")}),n.useRender(()=>{const p=!!(!t.hideNoData||M.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),w=V.value.length>0,O=n.VTextField.filterProps(t);return e.createVNode(n.VTextField,e.mergeProps({ref:l},O,{modelValue:y.value,"onUpdate:modelValue":[C=>y.value=C,$e],focused:f.value,"onUpdate:focused":C=>f.value=C,validationValue:V.externalValue,counterValue:S.value,dirty:w,onChange:Ce,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":N.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!D.value,"v-autocomplete--selecting-index":i.value>-1},t.class],style:t.style,readonly:k.isReadonly.value,placeholder:w?void 0:t.placeholder,"onClick:clear":ge,"onMousedown:control":he,onKeydown:xe}),{...a,default:()=>e.createVNode(e.Fragment,null,[e.createVNode(n.VMenu,e.mergeProps({ref:o,modelValue:N.value,"onUpdate:modelValue":C=>N.value=C,activator:"parent",contentClass:"v-autocomplete__content",disabled:T.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Be,onAfterLeave:Se},t.menuProps),{default:()=>[p&&e.createVNode(n.VList,e.mergeProps({ref:X,selected:Q.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onKeydown:be,onFocusin:Ne,onFocusout:Pe,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},we,t.listProps),{default:()=>{var C,L,E;return[(C=a["prepend-item"])==null?void 0:C.call(a),!M.value.length&&!t.hideNoData&&(((L=a["no-data"])==null?void 0:L.call(a))??e.createVNode(n.VListItem,{key:"no-data",title:s(t.noDataText)},null)),e.createVNode(n.VVirtualScroll,{ref:c,renderless:!0,items:M.value,itemKey:"value"},{default:R=>{var ae;let{item:$,index:F,itemRef:I}=R;const oe=e.mergeProps($.props,{ref:I,key:$.value,active:K.value&&F===0?!0:void 0,onClick:()=>j($,null)});return((ae=a.item)==null?void 0:ae.call(a,{item:$,index:F,props:oe}))??e.createVNode(n.VListItem,e.mergeProps(oe,{role:"option"}),{prepend:Y=>{let{isSelected:Oe}=Y;return e.createVNode(e.Fragment,null,[t.multiple&&!t.hideSelected?e.createVNode(n.VCheckboxBtn,{key:$.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,$.props.prependAvatar&&e.createVNode(n.VAvatar,{image:$.props.prependAvatar},null),$.props.prependIcon&&e.createVNode(n.VIcon,{icon:$.props.prependIcon},null)])},title:()=>{var Y;return r.value?$.title:n.highlightResult("v-autocomplete",$.title,(Y=A($))==null?void 0:Y.title)}})}}),(E=a["append-item"])==null?void 0:E.call(a)]}})]}),V.value.map((C,L)=>{function E(I){I.stopPropagation(),I.preventDefault(),j(C,!1)}const R={"onClick:close":E,onKeydown(I){I.key!=="Enter"&&I.key!==" "||(I.preventDefault(),I.stopPropagation(),E(I))},onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},$=U.value?!!a.chip:!!a.selection,F=$?B.ensureValidVNode(U.value?a.chip({item:C,index:L,props:R}):a.selection({item:C,index:L})):void 0;if(!($&&!F))return e.createVNode("div",{key:C.value,class:["v-autocomplete__selection",L===i.value&&["v-autocomplete__selection--selected",x.value]],style:L===i.value?h.value:{}},[U.value?a.chip?e.createVNode(n.VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:C.title}}},{default:()=>[F]}):e.createVNode(n.VChip,e.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:C.title,disabled:C.props.disabled},R),null):F??e.createVNode("span",{class:"v-autocomplete__selection-text"},[C.title,t.multiple&&L<V.value.length-1&&e.createVNode("span",{class:"v-autocomplete__selection-comma"},[e.createTextVNode(",")])])])})]),"append-inner":function(){var R,$;for(var C=arguments.length,L=new Array(C),E=0;E<C;E++)L[E]=arguments[E];return e.createVNode(e.Fragment,null,[(R=a["append-inner"])==null?void 0:R.call(a,...L),t.menuIcon?e.createVNode(n.VIcon,{class:"v-autocomplete__menu-icon",color:($=l.value)==null?void 0:$.fieldIconColor,icon:t.menuIcon,onMousedown:ye,onClick:B.noop,"aria-label":s(G.value),title:s(G.value),tabindex:"-1"},null):void 0])}})}),n.forwardRefs({isFocused:f,isPristine:r,menu:N,search:y,filteredItems:P,select:j},l)}}),ce=e.defineComponent({__name:"OxAutocomplete",props:e.mergeModels({repo:{},lookup:{default:"search"},filters:{},prevKey:{},nextKey:{},countKey:{},dataKey:{},query:{},relations:{},url:{},fetchRelations:{type:Boolean},save:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var x;const u=e.useSlots(),a=e.useModel(t,"modelValue"),s=e.ref(""),l=t,f=e.useAttrs(),r=e.inject("repos"),d=v.excludeValues(l,["repo","search"]),{list:o,items:c}=v.useModelList({...(x=d.value)==null?void 0:x[1],filters:l.filters||{},save:!1,query:v.query(l.repo,r)});function i(h){h[l.lookup]=s.value,z.lodashExports.isEqual(o.filters,h)||(o.filters={...l.filters},o.filters[l.lookup]=s.value,o.load())}function m(h){const y=o.filters[l.lookup];o.nextUrl,h&&h!="<empty string>"&&h!=y&&(o.filters[l.lookup]=h,o.load().then(V=>{s.value=h}))}var b=null;function g(h){!h||o.findIndex(h)!=-1||o.findIndex(h)==-1&&b!=h&&(b=h,o.load({id:h,append:0}))}return e.onMounted(()=>{l.filters&&Object.values(l.filters).length?i(l.filters):o.load(),g(a.value)}),e.watch(()=>l.filters,h=>i(h)),e.watch(s,m),e.watch(a,(h,y)=>h!=y&&g(h)),(h,y)=>(e.openBlock(),e.createBlock(e.unref(De),e.mergeProps(e.unref(f),{items:e.unref(c),loading:e.unref(o).state.isProcessing,modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=V=>a.value=V),search:s.value,"onUpdate:search":y[1]||(y[1]=V=>s.value=V)}),e.createSlots({_:2},[e.renderList(e.unref(u),(V,S)=>({name:S,fn:e.withCtx(k=>[e.renderSlot(h.$slots,S,e.normalizeProps(e.guardReactiveProps(k)))])}))]),1040,["items","loading","modelValue","search"]))}}),de={props:{src:String,is:String},setup(t){const u=e.shallowRef(null),a=e.computed(()=>{if(t.is)return t.is;let l=t.src.substring(t.src.lastIndexOf("/")+1);if(l&&(l=l.substring(0,l.indexOf("."))),!l)throw Error("`is` not provided and could not be deducted from `src`.");return l});function s(){u.value=v.defineAsyncComponent(t.src,a.value)}return e.watch(()=>t.src,s),s(),()=>e.h(u.value,t)}},_e={class:"text-error"},H={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(t){const u=t;return(a,s)=>u.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.errors,l=>(e.openBlock(),e.createElementBlock("div",_e,[e.createVNode(n.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(l),1)]))),256)):e.createCommentVNode("",!0)}},ee={__name:"OxListFilters",props:{search:String},setup(t,{expose:u}){const a=e.inject("list"),s=t,l=e.computed(()=>{const d=a.filters;return d&&Object.entries(d).some(([o,c])=>!o.startsWith("page")&&!o.startsWith("ordering")&&!!c)}),f=e.computed(()=>l.value?"mdi-filter-check":"mdi-filter-outline");function r(){a.filters={},a.load()}return u({icon:f,hasFilters:l,reset:r}),(d,o)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:o[2]||(o[2]=e.withModifiers(c=>e.unref(a).load(),["prevent"])),class:"width-full"},[e.createVNode(n.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:f.value,readonly:""},null,8,["icon"]),s.search&&e.unref(a).filters?(e.openBlock(),e.createBlock(n.VTextField,{key:0,label:e.unref(v.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(a).filters[s.search],"onUpdate:modelValue":o[0]||(o[0]=c=>e.unref(a).filters[s.search]=c),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"default",{list:e.unref(a),filters:e.unref(a).filters}),e.createVNode(n.VBtn,{onClick:o[1]||(o[1]=e.withModifiers(c=>e.unref(a).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":d.$t("filters.apply"),title:e.unref(v.t)("filters.apply")},null,8,["aria-label","title"]),l.value?(e.openBlock(),e.createBlock(n.VBtn,{key:1,onClick:e.withModifiers(r,["stop"]),icon:"mdi-backspace","aria-label":e.unref(v.t)("filters.reset"),title:e.unref(v.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},je=B.propsFactory({...n.makeComponentProps(),...n.makeFormProps()},"VForm"),fe=B.genericComponent()({name:"VForm",props:je(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,u){let{slots:a,emit:s}=u;const l=n.createForm(t),f=e.ref();function r(o){o.preventDefault(),l.reset()}function d(o){const c=o,i=l.validate();c.then=i.then.bind(i),c.catch=i.catch.bind(i),c.finally=i.finally.bind(i),s("submit",c),c.defaultPrevented||i.then(m=>{var g;let{valid:b}=m;b&&((g=f.value)==null||g.submit())}),c.preventDefault()}return n.useRender(()=>{var o;return e.createVNode("form",{ref:f,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:r,onSubmit:d},[(o=a.default)==null?void 0:o.call(a,l)])}),n.forwardRefs(l,f)}}),Ue={class:"flex-row justify-right"},ze={key:1},pe=e.defineComponent({__name:"OxFormList",props:e.mergeModels({useModel:Function,editable:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var c;const u=e.useModel(t,"modelValue"),a=e.inject("user"),s=e.ref({}),l=t,f=e.computed(()=>({add:l.editable&&a.can([l.useModel,"add"]),change:l.editable&&a.can([l.useModel,"change"]),delete:l.editable&&a.can([l.useModel,"delete"])})),r=e.ref([]);(c=u.value)!=null&&c.length||r.value.push(-1);function d(){u.value.push(s.value),s.value={}}function o(i){confirm(v.t("actions.delete.confirm"))&&l.delete&&u.value.splice(i)}return(i,m)=>{var b;return(b=u.value)!=null&&b.length?(e.openBlock(),e.createBlock(n.VList,{key:0,opened:r.value,"onUpdate:opened":m[3]||(m[3]=g=>r.value=g)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(g,x)=>(e.openBlock(),e.createBlock(n.VListGroup,{key:x,value:x},{activator:e.withCtx(({props:h})=>[e.createVNode(n.VListItem,e.mergeProps({ref_for:!0},h),{append:e.withCtx(()=>[e.createElementVNode("div",{onClick:m[0]||(m[0]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(i.$slots,"item.actions",e.mergeProps({item:g,index:x,ref_for:!0},h)),f.value.delete?(e.openBlock(),e.createBlock(n.VBtn,{key:0,type:"button",class:"ml-2",size:"small",onClick:e.withModifiers(y=>o(x),["stop","prevent"]),color:"error","aria-label":e.unref(v.t)("actions.remove"),title:e.unref(v.t)("actions.remove"),icon:"mdi-delete"},null,8,["onClick","aria-label","title"])):e.createCommentVNode("",!0)])]),default:e.withCtx(()=>[e.createVNode(n.VListItemTitle,null,{default:e.withCtx(()=>[e.renderSlot(i.$slots,"item.title",{item:g})]),_:2},1024)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(fe,{disabled:!f.value.change},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"item",{item:g,index:x,editable:f.value.change})]),_:2},1032,["disabled"])]),_:2},1032,["value"]))),128)),f.value.add?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[u.value.length?(e.openBlock(),e.createBlock(n.VDivider,{key:0})):e.createCommentVNode("",!0),e.createVNode(n.VListGroup,{value:-1},{activator:e.withCtx(({props:g})=>[e.createVNode(n.VListItem,e.mergeProps(g,{title:e.unref(v.t)("actions.add_item"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),default:e.withCtx(()=>[e.renderSlot(i.$slots,"item",{item:s.value,edit:!0}),s.value?(e.openBlock(),e.createBlock(n.VListItem,{key:0},{default:e.withCtx(()=>[e.createElementVNode("div",Ue,[s.value?(e.openBlock(),e.createBlock(n.VBtn,{key:0,size:"small",onClick:m[1]||(m[1]=g=>s.value={}),color:"secondary","prepend-icon":"mdi-backspace","aria-label":e.unref(v.t)("actions.discard")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.discard")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0),s.value?(e.openBlock(),e.createBlock(n.VBtn,{key:1,size:"small",onClick:m[2]||(m[2]=g=>d()),color:"primary","prepend-icon":"mdi-plus","aria-label":e.unref(v.t)("actions.add")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.add")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0)])]),_:1})):e.createCommentVNode("",!0)]),_:3})],64)):e.createCommentVNode("",!0)]),_:3},8,["opened"])):(e.openBlock(),e.createElementBlock("div",ze,e.toDisplayString(e.unref(v.t)("lists.empty")),1))}}}),Ke=B.genericComponent()({name:"VSlideGroupItem",props:n.makeGroupItemProps(),emits:{"group:selected":t=>!0},setup(t,u){let{slots:a}=u;const s=n.useGroupItem(t,n.VSlideGroupSymbol);return()=>{var l;return(l=a.default)==null?void 0:l.call(a,{isSelected:s.isSelected.value,select:s.select,toggle:s.toggle,selectedClass:s.selectedClass.value})}}}),me={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(t,{emit:u}){const a=u;e.inject("list");const s=e.inject("items"),l=t;function f(o){return o=o%l.colors.length,l.colorVariant?l.colors[o]+"-"+l.colorVariant:l.colors[o]}function r(o,c,i){o[i]?!o[i].includes(c)&&o[i].push(c):o[i]=[c]}const d=e.computed(()=>{const o={};if(s.value)for(var c of s.value){const m=c[l.field];if(Array.isArray(m))if(m.length)for(var i of m)r(o,c,i);else r(o,c,null);else r(o,c,m)}return o});return(o,c)=>(e.openBlock(),e.createBlock(n.VSheet,null,{default:e.withCtx(()=>[e.createVNode(n.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.headers,(i,m)=>(e.openBlock(),e.createBlock(Ke,{key:i.value},{default:e.withCtx(({selectedClass:b})=>[e.createVNode(n.VCard,{width:"400",class:e.normalizeClass(["ma-3",b]),color:f(m),lines:"two"},{default:e.withCtx(()=>[e.createVNode(n.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.title),1)]),_:2},1024),e.createVNode(n.VList,{"bg-color":f(m)},{default:e.withCtx(()=>[d.value&&d.value[i.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.value[i.value],g=>e.renderSlot(o.$slots,"item",{key:g.id,header:i,item:g},()=>[e.createVNode(n.VListItem,{title:g[l.itemTitle],value:l.itemValue&&g[l.itemValue],onClick:x=>a("click",g)},{append:e.withCtx(()=>[e.renderSlot(o.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},te=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(t){const u=e.useSlots(),a=z.filterSlots(u,"item.",{exclude:["item.actions"]}),s=e.inject("panel"),l=e.inject("list"),f=e.inject("items"),r=e.inject("user"),d=t,o=e.computed(()=>d.headers.reduce((m,b)=>(m.push(typeof b=="string"?{key:b,title:v.t(v.tKeys.field(b))}:b),m),[]));function c(m){l.filters.page=m.page,l.filters.page_size=m.itemsPerPage,l.filters.ordering=m.sortBy.map(({key:b,order:g})=>g=="asc"?b:`-${b}`)}function i(m,b){s.show({view:"detail.edit",value:b})}return(m,b)=>{var g;return e.openBlock(),e.createBlock(n.VDataTableServer,{items:e.unref(f),"item-index":"id","items-length":e.unref(l).count||e.unref(f).length,"items-per-page":d.itemsPerPage,loading:(g=e.unref(l).state)==null?void 0:g.isProcessing,headers:o.value,"no-data-text":e.unref(v.t)("lists.empty"),class:"align-top-table","onUpdate:options":c},e.createSlots({loading:e.withCtx(()=>[e.createVNode(n.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:x})=>[e.unref(r).can([x.constructor,"change"])?(e.openBlock(),e.createBlock(W,{key:0,icon:"mdi-pencil",button:"",title:e.unref(v.t)("actions.edit"),item:x,run:i},null,8,["title","item"])):e.unref(r).can([x.constructor,"view"])?(e.openBlock(),e.createBlock(W,{key:1,icon:"mdi-eye-outline",button:"",title:e.unref(v.t)("actions.edit"),item:x,run:i},null,8,["title","item"])):e.createCommentVNode("",!0),e.renderSlot(m.$slots,"item.actions",{value:x,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(a),(x,h)=>({name:h,fn:e.withCtx(y=>[e.renderSlot(m.$slots,h,e.normalizeProps(e.guardReactiveProps(y)))])}))]),1032,["items","items-length","items-per-page","loading","headers","no-data-text"])}}}),q={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(t){const u=e.useSlots(),a=t;let s=e.ref(!1);e.watch(()=>a.state.state,r=>{a.delay&&r==z.States.PROCESSING&&(s.value=!1,window.setTimeout(()=>{s.value=!0},5e3))});const l=e.computed(()=>{var r;return((r=a.state)==null?void 0:r.isProcessing)&&(!a.delay||s.value)}),f=e.computed(()=>{var r,d;return(d=(r=a.state)==null?void 0:r.data)==null?void 0:d.messages});return(r,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[a.state.isNone&&e.unref(u).none?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:t.state,title:t.noneTitle},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"none",{state:t.state})]),_:3},8,["state","title"])):l.value?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.processingTitle},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"processing",{state:t.state},()=>[d[0]||(d[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):a.state.isError?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.errorTitle},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"error",{state:t.state},()=>[d[1]||(d[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(r.$slots,"error-detail",{state:t.state})]),_:3},8,["state","title"])):a.state.isOk?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.okTitle},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"ok",{state:t.state},()=>[d[2]||(d[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),f.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,o=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(o),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(r.$slots,"ok-detail",{state:t.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(r.$slots,"default",{state:a.state})],64))}},Ge={class:"text-right"},J={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(t,{emit:u}){const a=u,s=t;return(l,f)=>(e.openBlock(),e.createElementBlock("div",Ge,[e.createVNode(e.unref(n.VBtn),{color:"error",class:"me-2","prepend-icon":s.resetIcon,onClick:f[0]||(f[0]=r=>a("reset")),disabled:s.disabled},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(s.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),s.state.isSending?(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>f[2]||(f[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:1,color:"primary","prepend-icon":s.validateIcon,onClick:f[1]||(f[1]=r=>a("validate")),disabled:s.disabled||s.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(s.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},We={key:0},qe={class:"text-right mt-3"},ve={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(t,{emit:u}){const a=e.useTemplateRef("password"),s=t,l=e.reactive({username:"",password:""}),f=e.ref(!1),r=e.reactive(new z.State);function d(c=!0){z.reset(l,{username:"",password:""}),c&&r.none()}async function o(){r.processing();try{const c=await fetch(s.url,{method:"POST",headers:z.config$1.axiosConfig.headers,body:JSON.stringify(l)});c.status==200?(l.credentials="",l.password="",r.ok(await c.json()),s.next&&(window.location.href=s.next)):r.error(await c.json())}catch(c){r.ok((c==null?void 0:c.message)||c)}}return(c,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(q),{state:r},{none:e.withCtx(({state:m})=>i[7]||(i[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:m})=>[s.next?(e.openBlock(),e.createElementBlock("p",We,[i[8]||(i[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(s.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:m})=>{var b,g;return[e.createVNode(H,{errors:(b=m.data)==null?void 0:b.username},null,8,["errors"]),e.createVNode(H,{errors:(g=m.data)==null?void 0:g.password},null,8,["errors"])]}),_:1},8,["state"]),r.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTextField,{variant:"underlined",label:"Enter login",modelValue:l.username,"onUpdate:modelValue":i[0]||(i[0]=m=>l.username=m),onKeyup:i[1]||(i[1]=e.withKeys(e.withModifiers(m=>e.unref(a).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(n.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:l.password,"onUpdate:modelValue":i[2]||(i[2]=m=>l.password=m),type:f.value?"text":"password","append-icon":f.value?"mdi-eye":"mdi-eye-off","onClick:append":i[3]||(i[3]=m=>f.value=!f.value),onKeyup:i[4]||(i[4]=e.withKeys(e.withModifiers(m=>o(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",qe,[e.renderSlot(c.$slots,"default",{value:l.password},()=>[l.username&&l.password?(e.openBlock(),e.createBlock(J,{key:0,"validate-label":"Login!",onValidate:i[5]||(i[5]=m=>o()),onReset:i[6]||(i[6]=m=>d()),state:r},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},le=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(t){const u=e.useSlots(),a=t,s=v.filterSlots(u,"views."),l=e.ref(!1);e.onMounted(()=>{l.value=!0}),e.onUnmounted(()=>{l.value=!1});const f=e.inject("panels"),r=e.inject("panel");return(d,o)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:a.name},{default:e.withCtx(()=>[a.state?(e.openBlock(),e.createBlock(q,{key:0,state:a.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(n.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!l.value||e.unref(f).panel!=a.name},[a.icon?(e.openBlock(),e.createBlock(n.VIcon,{key:0,icon:a.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(a.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!l.value||e.unref(f).panel!=a.name},[e.renderSlot(d.$slots,"append-title"),a.help?(e.openBlock(),e.createBlock(n.VBtn,{key:0,class:"ml-3",href:a.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(d.$slots,"top"),e.renderSlot(d.$slots,"default",{},()=>[e.unref(s)?(e.openBlock(),e.createBlock(n.VWindow,{key:0,modelValue:e.unref(r).view,"onUpdate:modelValue":o[0]||(o[0]=c=>e.unref(r).view=c)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),(c,i)=>(e.openBlock(),e.createBlock(n.VWindowItem,{key:c,value:c},{default:e.withCtx(()=>[e.renderSlot(d.$slots,i)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(d.$slots,"bottom")]),_:3})]),_:3},8,["value"]))}}),ne=e.defineComponent({__name:"OxView",props:{title:String},setup(t){const u=t,a=e.ref(null),s=e.useSlots(),l=v.filterSlots(s,"tab.",{exclude:"tab.default"}),f=v.filterSlots(s,"window.");return(r,d)=>e.unref(l)&&Object.keys(e.unref(l)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTabs,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=o=>a.value=o)},{default:e.withCtx(()=>[e.unref(s).default?e.renderSlot(r.$slots,"tab",{key:0},()=>[e.createVNode(n.VTab,{text:u==null?void 0:u.title,value:"default"},null,8,["text"])]):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(o,c)=>(e.openBlock(),e.createBlock(n.VTab,{value:o},{default:e.withCtx(()=>[e.renderSlot(r.$slots,c)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"]),e.createVNode(n.VTabsWindow,{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=o=>a.value=o)},{default:e.withCtx(()=>[e.unref(s).default?(e.openBlock(),e.createBlock(n.VTabsWindowItem,{key:0,value:"default"},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"default")]),_:3})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(o,c)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:o},{default:e.withCtx(()=>[e.renderSlot(r.$slots,c)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(r.$slots,"default",{key:1})}}),Ye={class:"mb-3"},Ve=e.defineComponent({__name:"OxModelEdit",props:{repo:{},empty:{},initial:{},name:{},url:{},saved:{type:Function}},setup(t,{expose:u}){const a=e.inject("context"),s=t,{editor:l,edited:f}=v.useModelEditor({props:s}),r=e.computed(()=>a.user.can([l.repo.use,"change"])),d=e.computed(()=>({editor:l,edited:f,editable:r.value,value:l.value,model:l.repo.use}));return u({editor:l,edited:f}),(o,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(q,{state:e.unref(l).state},null,8,["state"]),e.createElementVNode("div",Ye,[r.value&&e.unref(f)?(e.openBlock(),e.createBlock(J,{key:0,onValidate:c[0]||(c[0]=i=>e.unref(l).save()),onReset:c[1]||(c[1]=i=>e.unref(l).discard()),state:e.unref(l).state,"validate-disabled":!e.unref(l).valid,disabled:e.unref(l).state.isProcessing},null,8,["state","validate-disabled","disabled"])):e.createCommentVNode("",!0)]),e.createVNode(n.VContainer,{class:"ox-model-edit"},{default:e.withCtx(()=>[e.createVNode(fe,{modelValue:e.unref(l).valid,"onUpdate:modelValue":c[2]||(c[2]=i=>e.unref(l).valid=i),disabled:!r.value},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"default",e.normalizeProps(e.guardReactiveProps(d.value)))]),_:3},8,["modelValue","disabled"]),e.renderSlot(o.$slots,"append",e.normalizeProps(e.guardReactiveProps(d.value)))]),_:3})],64))}}),ke=e.defineComponent({__name:"OxModelPanel",props:{repo:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},fetchRelations:{type:Boolean,default:!0},search:{default:"search"},warning:{},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(t){const u=e.useSlots(),a=v.filterSlots(u,"views.list."),s=v.filterSlots(u,"item."),l=v.filterSlots(u,"views.detail.edit."),f=e.useTemplateRef("filters"),r=t,d=e.inject("context"),{panel:o,list:c,items:i,next:m,prev:b}=e.inject("panel")??v.useModelPanel({props:r}),g=o.panels;e.computed(()=>{var S;return d.user.can([o.model,(S=o.value)!=null&&S.id?"change":"add"])});const{showFilters:x}=e.toRefs(o),h=e.computed(()=>[...r.headers,{key:"actions",title:v.t("actions")}]);function y(S){o.value.value=S}const V=e.computed(()=>({panel:o,panels:g,list:c,items:i,context:d,value:o.value}));return e.watch(()=>Object.values(c.filters),()=>c.load()),(S,k)=>(e.openBlock(),e.createBlock(le,{name:r.name,title:e.unref(o).title,icon:e.unref(o).icon,state:e.unref(c).state,index:r.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(S.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(V.value))),e.unref(o).view.startsWith("list.")?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(S.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(V.value))),e.unref(f)?(e.openBlock(),e.createBlock(n.VBtn,{key:0,title:e.unref(x)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),"aria-label":e.unref(x)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),onClick:k[0]||(k[0]=P=>x.value=!e.unref(x)),active:e.unref(x)},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:e.unref(f).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(o).view.startsWith("detail.")&&e.unref(o).value?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(S.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(V.value))),e.unref(o).view=="detail.edit"&&e.unref(o).value?(e.openBlock(),e.createBlock(n.VMenu,{key:0},{activator:e.withCtx(({props:P})=>[e.createVNode(n.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},P),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(n.VList,null,{default:e.withCtx(()=>[e.renderSlot(S.$slots,"item.actions",{value:e.unref(o).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtn,{disabled:!e.unref(b),title:e.unref(v.t)("prev"),"aria-label":e.unref(v.t)("prev"),onClick:k[1]||(k[1]=e.withModifiers(P=>e.unref(o).show({view:e.unref(o).view,value:e.unref(b)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(n.VBtn,{disabled:!e.unref(m),title:e.unref(v.t)("next"),"aria-label":e.unref(v.t)("next"),onClick:k[2]||(k[2]=e.withModifiers(P=>e.unref(o).show({view:e.unref(o).view,value:e.unref(m)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtnToggle,{class:"ml-3",color:"secondary",density:"compact",variant:"tonal",mandatory:"",modelValue:e.unref(o).view,"onUpdate:modelValue":k[8]||(k[8]=P=>e.unref(o).view=P)},{default:e.withCtx(()=>{var P;return[e.createVNode(n.VBtn,{value:"list.table",onClick:k[3]||(k[3]=e.withModifiers(A=>e.unref(o).show({view:"list.table"}),["stop"])),title:e.unref(v.t)("panels.nav.table"),"aria-label":e.unref(v.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[9]||(k[9]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(u)["views.list.cards"]?(e.openBlock(),e.createBlock(n.VBtn,{key:0,value:"list.cards",onClick:k[4]||(k[4]=e.withModifiers(A=>e.unref(o).show({view:"list.cards"}),["stop"])),title:e.unref(v.t)("panels.nav.cards"),"aria-label":e.unref(v.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[10]||(k[10]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(u)["views.list.kanban"]?(e.openBlock(),e.createBlock(n.VBtn,{key:1,value:"list.kanban",onClick:k[5]||(k[5]=e.withModifiers(A=>e.unref(o).show({view:"list.kanban"}),["stop"])),title:e.unref(v.t)("panels.nav.kanban"),"aria-label":e.unref(v.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[11]||(k[11]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(l)?(e.openBlock(),e.createBlock(n.VBtn,{key:2,value:"detail.add",onClick:k[6]||(k[6]=e.withModifiers(A=>e.unref(o).create(),["stop"])),title:e.unref(v.t)("panels.nav.add"),"aria-label":e.unref(v.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[12]||(k[12]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(u)["views.detail.edit"]||e.unref(l)?(e.openBlock(),e.createBlock(n.VBtn,{key:3,value:"detail.edit",onClick:k[7]||(k[7]=e.withModifiers(A=>e.unref(o).show({view:"detail.edit",value:e.unref(o).value}),["stop"])),disabled:!((P=e.unref(o).value)!=null&&P.id),title:e.unref(v.t)("panels.nav.edit"),"aria-label":e.unref(v.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[13]||(k[13]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(S.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(V.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[r.warning?(e.openBlock(),e.createBlock(n.VAlert,{key:0,type:"warning",variant:"tonal",text:r.warning},null,8,["text"])):e.createCommentVNode("",!0),e.renderSlot(S.$slots,"top"),e.withDirectives(e.createVNode(ee,{ref_key:"filters",ref:f,search:r.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(P=>[e.renderSlot(S.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(P)))]),_:3},8,["search"]),[[e.vShow,e.unref(o).view.startsWith("list.")&&e.unref(x)]])]),_:2},[e.unref(u)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(te,{headers:h.value},e.createSlots({_:2},[e.renderList(e.unref(s),(P,A)=>({name:A,fn:e.withCtx(M=>[e.renderSlot(S.$slots,A,e.normalizeProps(e.guardReactiveProps(M)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(a),(P,A)=>({name:A,fn:e.withCtx(()=>[e.renderSlot(S.$slots,A,e.normalizeProps(e.guardReactiveProps(V.value)))])})),e.unref(u)["views.detail.edit"]||e.unref(l)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(e.unref(ne),{title:e.unref(v.t)(`models.${e.unref(o).model.entity}`)},e.createSlots({_:2},[e.renderList(e.unref(l),(P,A)=>({name:P,fn:e.withCtx(()=>[e.renderSlot(S.$slots,A,{saved:y,value:e.unref(o).value})])}))]),1032,["title"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),He=Object.freeze(Object.defineProperty({__proto__:null,OxAction:W,OxActionModelDelete:se,OxActions:ie,OxApp:ue,OxAutocomplete:ce,OxComponent:de,OxFieldDetails:H,OxFormList:pe,OxListFilters:ee,OxListKanban:me,OxListTable:te,OxLogin:ve,OxModelEdit:Ve,OxModelPanel:ke,OxPanel:le,OxStateAlert:q,OxValidationBtn:J,OxView:ne},Symbol.toStringTag,{value:"Module"})),Je={el:"#app",delimiters:["[[","]]"],components:{...He,...Te.components}};exports.App=Je;exports.OxAction=W;exports.OxActionModelDelete=se;exports.OxActions=ie;exports.OxApp=ue;exports.OxAutocomplete=ce;exports.OxComponent=de;exports.OxFieldDetails=H;exports.OxFormList=pe;exports.OxListFilters=ee;exports.OxListKanban=me;exports.OxListTable=te;exports.OxLogin=ve;exports.OxModelEdit=Ve;exports.OxModelPanel=ke;exports.OxPanel=le;exports.OxStateAlert=q;exports.OxValidationBtn=J;exports.OxView=ne;
//# sourceMappingURL=components.cjs.map
