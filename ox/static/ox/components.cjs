"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),v=require("ox"),n=require("./VAlert-CmnHFt6E.cjs"),b=require("./theme-BS02m0hV.cjs"),W=require("./auth-B7vmOLeu.cjs"),Oe=require("ox/vendor"),H=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{type:[String,Function,Array]},run:{},href:{}},emits:["completed"],setup(t,{emit:c}){const l=t,r=c,o=e.inject("context"),{run:f,processing:i,allowed:u}=v.useAction({user:o.user,emits:r,props:l});return(a,p)=>e.unref(u)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.button?(e.openBlock(),e.createBlock(n.VBtn,{key:0,variant:"text",disabled:e.unref(i),color:l.color,icon:l.icon,title:l.title,"aria-label":l.title,onClick:e.withModifiers(e.unref(f),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(n.VListItem,{key:1,title:l.title,"base-color":l.color,"prepend-icon":l.icon,disabled:e.unref(i),onClick:e.withModifiers(e.unref(f),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),ie=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(t){const c=e.inject("panel"),l=e.inject("repos"),r=t;async function o(f,i){return await l[i.constructor.entity].api().delete(i.$url(),{delete:r.item.id})}return(f,i)=>(e.openBlock(),e.createBlock(H,{item:r.item,button:r.button,icon:"mdi-delete",color:"error",title:e.unref(v.t)("actions.delete"),confirm:e.unref(v.t)("actions.delete.confirm"),permissions:["delete",(u,a)=>a.id],run:o,onCompleted:i[0]||(i[0]=u=>{var a;return(a=e.unref(c))==null?void 0:a.show({view:e.unref(c).index})})},null,8,["item","button","title","confirm","permissions"]))}}),se={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(t){e.useSlots();const c=t;return(l,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(l.$slots,"before",e.normalizeProps(e.guardReactiveProps(c))),e.renderSlot(l.$slots,"default",e.normalizeProps(e.guardReactiveProps(c))),e.renderSlot(l.$slots,"after",e.normalizeProps(e.guardReactiveProps(c)))],64))}};function Ie(t){const c=e.shallowRef(t());let l=-1;function r(){clearInterval(l)}function o(){r(),e.nextTick(()=>c.value=t())}function f(i){const u=i?getComputedStyle(i):{transitionDuration:.2},a=parseFloat(u.transitionDuration)*1e3||200;if(r(),c.value<=0)return;const p=performance.now();l=window.setInterval(()=>{const s=performance.now()-p+a;c.value=Math.max(t()-s,0),c.value<=0&&r()},a)}return e.onScopeDispose(r),{clear:r,time:c,start:f,reset:o}}const Le=b.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...n.makeLocationProps({location:"bottom"}),...n.makePositionProps(),...n.makeRoundedProps(),...n.makeVariantProps(),...b.makeThemeProps(),...b.omit(n.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ae=b.genericComponent()({name:"VSnackbar",props:Le(),emits:{"update:modelValue":t=>!0},setup(t,c){let{slots:l}=c;const r=b.useProxiedModel(t,"modelValue"),{positionClasses:o}=n.usePosition(t),{scopeId:f}=n.useScopeId(),{themeClasses:i}=b.provideTheme(t),{colorClasses:u,colorStyles:a,variantClasses:p}=n.useVariant(t),{roundedClasses:s}=n.useRounded(t),m=Ie(()=>Number(t.timeout)),k=e.ref(),y=e.ref(),A=e.shallowRef(!1),F=e.shallowRef(0),C=e.ref(),w=e.inject(n.VuetifyLayoutKey,void 0);b.useToggleScope(()=>!!w,()=>{const T=n.useLayout();e.watchEffect(()=>{C.value=T.mainStyles.value})}),e.watch(r,x),e.watch(()=>t.timeout,x),e.onMounted(()=>{r.value&&x()});let M=-1;function x(){m.reset(),window.clearTimeout(M);const T=Number(t.timeout);if(!r.value||T===-1)return;const _=b.refElement(y.value);m.start(_),M=window.setTimeout(()=>{r.value=!1},T)}function g(){m.reset(),window.clearTimeout(M)}function $(){A.value=!0,g()}function S(){A.value=!1,x()}function j(T){F.value=T.touches[0].clientY}function R(T){Math.abs(F.value-T.changedTouches[0].clientY)>50&&(r.value=!1)}function Q(){A.value&&S()}const z=e.computed(()=>t.location.split(" ").reduce((T,_)=>(T[`v-snackbar--${_}`]=!0,T),{}));return n.useRender(()=>{const T=n.VOverlay.filterProps(t),_=!!(l.default||l.text||t.text);return e.createVNode(n.VOverlay,e.mergeProps({ref:k,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},z.value,o.value,t.class],style:[C.value,t.style]},T,{modelValue:r.value,"onUpdate:modelValue":B=>r.value=B,contentProps:e.mergeProps({class:["v-snackbar__wrapper",i.value,u.value,s.value,p.value],style:[a.value],onPointerenter:$,onPointerleave:S},T.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:j,onTouchend:R,onAfterLeave:Q},f),{default:()=>{var B,K;return[n.genOverlays(!1,"v-snackbar"),t.timer&&!A.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(n.VProgressLinear,{ref:y,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":m.time.value},null)]),_&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((B=l.text)==null?void 0:B.call(l))??t.text,(K=l.default)==null?void 0:K.call(l)]),l.actions&&e.createVNode(n.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[l.actions({isActive:r})])]})]},activator:l.activator})}),n.forwardRefs({},k)}}),Fe={class:"nav-home"};var re;const ue=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(re=document.body.dataset)==null?void 0:re.appData},models:{},data:{}},setup(t){const c=e.useSlots(),l=t,r=e.reactive({drawer:!0}),o=v.useAppContext(l),f=v.usePanels();return e.onMounted(()=>{f.panel=o.data.panel}),e.watch(()=>[o.state.state,o.state.data],()=>{o.showState=!0}),e.onErrorCaptured((i,u,a)=>{o.state.error(`${i}`)}),(i,u)=>(e.openBlock(),e.createBlock(n.VApp,null,{default:e.withCtx(()=>[e.createVNode(Ae,{modelValue:e.unref(o).showState,"onUpdate:modelValue":u[0]||(u[0]=a=>e.unref(o).showState=a),color:e.unref(o).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(o).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(n.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(v.t)("nav.panels"),"aria-label":e.unref(v.t)("nav.panels"),onClick:u[1]||(u[1]=e.withModifiers(a=>r.drawer=!r.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(c)["app-nav"]&&!r.drawer2?(e.openBlock(),e.createBlock(n.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:u[2]||(u[2]=a=>{r.drawer2=!0,r.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(n.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(n.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"title",{context:e.unref(o)})]),_:3}),e.createVNode(n.VSpacer),e.renderSlot(i.$slots,"app-bar-left",{context:e.unref(o)}),u[5]||(u[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(i.$slots,"app-bar-right",{context:e.unref(o)})]),_:3}),e.createVNode(n.VNavigationDrawer,{theme:"dark",modelValue:r.drawer,"onUpdate:modelValue":u[3]||(u[3]=a=>r.drawer=a)},e.createSlots({default:e.withCtx(()=>[e.createElementVNode("a",Fe,[i.logo?(e.openBlock(),e.createBlock(n.VImg,{key:0,src:i.logo,class:"logo"},null,8,["src"])):e.createCommentVNode("",!0)]),e.renderSlot(i.$slots,"nav-start",{context:e.unref(o)}),e.renderSlot(i.$slots,"nav-list",{context:e.unref(o)})]),_:2},[e.unref(c)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.renderSlot(i.$slots,"nav-end",{context:e.unref(o)})]),key:"0"}:void 0]),1032,["modelValue"]),e.createVNode(n.VMain,null,{default:e.withCtx(()=>[e.renderSlot(i.$slots,"main",{},()=>[e.createVNode(n.VTabsWindow,{modelValue:e.unref(f).panel,"onUpdate:modelValue":u[4]||(u[4]=a=>e.unref(f).panel=a)},{default:e.withCtx(a=>[e.renderSlot(i.$slots,"default",e.mergeProps(a,{context:e.unref(o)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),Ee=b.propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...n.makeFilterProps({filterKeys:["title"]}),...n.makeSelectProps(),...b.omit(n.makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...n.makeTransitionProps({transition:!1})},"VAutocomplete"),Me=b.genericComponent()({name:"VAutocomplete",props:Ee(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,c){let{slots:l}=c;const{t:r}=b.useLocale(),o=e.ref(),f=e.shallowRef(!1),i=e.shallowRef(!0),u=e.shallowRef(!1),a=e.ref(),p=e.ref(),s=e.shallowRef(-1),{items:m,transformIn:k,transformOut:y}=n.useItems(t),{textColorClasses:A,textColorStyles:F}=n.useTextColor(()=>{var d;return(d=o.value)==null?void 0:d.color}),C=b.useProxiedModel(t,"search",""),w=b.useProxiedModel(t,"modelValue",[],d=>k(d===null?[null]:b.wrapInArray(d)),d=>{const V=y(d);return t.multiple?V:V[0]??null}),M=e.computed(()=>typeof t.counterValue=="function"?t.counterValue(w.value):typeof t.counterValue=="number"?t.counterValue:w.value.length),x=n.useForm(t),{filteredItems:g,getMatches:$}=n.useFilter(t,m,()=>i.value?"":C.value),S=e.computed(()=>t.hideSelected?g.value.filter(d=>!w.value.some(V=>V.value===d.value)):g.value),j=e.computed(()=>!!(t.chips||l.chip)),R=e.computed(()=>j.value||!!l.selection),Q=e.computed(()=>w.value.map(d=>d.props.value)),z=e.computed(()=>{var V;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&C.value===((V=S.value[0])==null?void 0:V.title))&&S.value.length>0&&!i.value&&!u.value}),T=e.computed(()=>t.hideNoData&&!S.value.length||x.isReadonly.value||x.isDisabled.value),_=b.useProxiedModel(t,"menu"),B=e.computed({get:()=>_.value,set:d=>{var V;_.value&&!d&&((V=a.value)!=null&&V.Î¨openChildren.size)||d&&T.value||(_.value=d)}}),K=e.computed(()=>B.value?t.closeText:t.openText),X=e.ref(),we=n.useScrolling(X,o);function he(d){t.openOnClear&&(B.value=!0),C.value=""}function ge(){T.value||(B.value=!0)}function ye(d){T.value||(f.value&&(d.preventDefault(),d.stopPropagation()),B.value=!B.value)}function be(d){var V;d.key!==" "&&b.checkPrintable(d)&&((V=o.value)==null||V.focus())}function xe(d){var h,O,E,D,N;if(x.isReadonly.value)return;const V=(h=o.value)==null?void 0:h.selectionStart,P=w.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(d.key)&&d.preventDefault(),["Enter","ArrowDown"].includes(d.key)&&(B.value=!0),["Escape"].includes(d.key)&&(B.value=!1),z.value&&["Enter","Tab"].includes(d.key)&&!w.value.some(L=>{let{value:I}=L;return I===S.value[0].value})&&U(S.value[0]),d.key==="ArrowDown"&&z.value&&((O=X.value)==null||O.focus("next")),["Backspace","Delete"].includes(d.key)){if(!t.multiple&&R.value&&w.value.length>0&&!C.value)return U(w.value[0],!1);if(~s.value){d.preventDefault();const L=s.value;U(w.value[s.value],!1),s.value=L>=P-1?P-2:L}else d.key==="Backspace"&&!C.value&&(s.value=P-1);return}if(t.multiple)if(d.key==="ArrowLeft"){if(s.value<0&&V&&V>0)return;const L=s.value>-1?s.value-1:P-1;if(w.value[L])s.value=L;else{const I=((E=C.value)==null?void 0:E.length)??null;s.value=-1,(D=o.value)==null||D.setSelectionRange(I,I)}}else if(d.key==="ArrowRight"){if(s.value<0)return;const L=s.value+1;w.value[L]?s.value=L:(s.value=-1,(N=o.value)==null||N.setSelectionRange(0,0))}else~s.value&&b.checkPrintable(d)&&(s.value=-1)}function Ce(d){if(b.matchesSelector(o.value,":autofill")||b.matchesSelector(o.value,":-webkit-autofill")){const V=m.value.find(P=>P.title===d.target.value);V&&U(V)}}function Be(){var d;t.eager&&((d=p.value)==null||d.calculateVisibleItems())}function Se(){var d;f.value&&(i.value=!0,(d=o.value)==null||d.focus())}function Ne(d){f.value=!0,setTimeout(()=>{u.value=!0})}function Pe(d){u.value=!1}function $e(d){(d==null||d===""&&!t.multiple&&!R.value)&&(w.value=[])}const Z=e.shallowRef(!1);function U(d){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!d||d.props.disabled))if(t.multiple){const P=w.value.findIndex(O=>(t.valueComparator||b.deepEqual)(O.value,d.value)),h=V??!~P;if(~P){const O=h?[...w.value,d]:[...w.value];O.splice(P,1),w.value=O}else h&&(w.value=[...w.value,d]);t.clearOnSelect&&(C.value="")}else{const P=V!==!1;w.value=P?[d]:[],C.value=P&&!R.value?d.title:"",e.nextTick(()=>{B.value=!1,i.value=!0})}}return e.watch(f,(d,V)=>{var P;d!==V&&(d?(Z.value=!0,C.value=t.multiple||R.value?"":String(((P=w.value.at(-1))==null?void 0:P.props.title)??""),i.value=!0,e.nextTick(()=>Z.value=!1)):(!t.multiple&&C.value==null&&(w.value=[]),B.value=!1,(t.multiple||R.value)&&(C.value=""),s.value=-1))}),e.watch(C,d=>{!f.value||Z.value||(d&&(B.value=!0),i.value=!d)}),e.watch(B,()=>{if(!t.hideSelected&&B.value&&w.value.length){const d=S.value.findIndex(V=>w.value.some(P=>V.value===P.value));b.IN_BROWSER&&window.requestAnimationFrame(()=>{var V;d>=0&&((V=p.value)==null||V.scrollToIndex(d))})}}),e.watch(()=>t.items,(d,V)=>{B.value||f.value&&!V.length&&d.length&&(B.value=!0)}),e.watch(w,d=>{var V;!t.multiple&&!R.value&&(C.value=((V=d[0])==null?void 0:V.title)??"")}),n.useRender(()=>{const d=!!(!t.hideNoData||S.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),V=w.value.length>0,P=n.VTextField.filterProps(t);return e.createVNode(n.VTextField,e.mergeProps({ref:o},P,{modelValue:C.value,"onUpdate:modelValue":[h=>C.value=h,$e],focused:f.value,"onUpdate:focused":h=>f.value=h,validationValue:w.externalValue,counterValue:M.value,dirty:V,onChange:Ce,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":B.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!R.value,"v-autocomplete--selecting-index":s.value>-1},t.class],style:t.style,readonly:x.isReadonly.value,placeholder:V?void 0:t.placeholder,"onClick:clear":he,"onMousedown:control":ge,onKeydown:xe}),{...l,default:()=>e.createVNode(e.Fragment,null,[e.createVNode(n.VMenu,e.mergeProps({ref:a,modelValue:B.value,"onUpdate:modelValue":h=>B.value=h,activator:"parent",contentClass:"v-autocomplete__content",disabled:T.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Be,onAfterLeave:Se},t.menuProps),{default:()=>[d&&e.createVNode(n.VList,e.mergeProps({ref:X,selected:Q.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:h=>h.preventDefault(),onKeydown:be,onFocusin:Ne,onFocusout:Pe,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},we,t.listProps),{default:()=>{var h,O,E;return[(h=l["prepend-item"])==null?void 0:h.call(l),!S.value.length&&!t.hideNoData&&(((O=l["no-data"])==null?void 0:O.call(l))??e.createVNode(n.VListItem,{key:"no-data",title:r(t.noDataText)},null)),e.createVNode(n.VVirtualScroll,{ref:p,renderless:!0,items:S.value,itemKey:"value"},{default:D=>{var ae;let{item:N,index:L,itemRef:I}=D;const oe=e.mergeProps(N.props,{ref:I,key:N.value,active:z.value&&L===0?!0:void 0,onClick:()=>U(N,null)});return((ae=l.item)==null?void 0:ae.call(l,{item:N,index:L,props:oe}))??e.createVNode(n.VListItem,e.mergeProps(oe,{role:"option"}),{prepend:q=>{let{isSelected:Te}=q;return e.createVNode(e.Fragment,null,[t.multiple&&!t.hideSelected?e.createVNode(n.VCheckboxBtn,{key:N.value,modelValue:Te,ripple:!1,tabindex:"-1"},null):void 0,N.props.prependAvatar&&e.createVNode(n.VAvatar,{image:N.props.prependAvatar},null),N.props.prependIcon&&e.createVNode(n.VIcon,{icon:N.props.prependIcon},null)])},title:()=>{var q;return i.value?N.title:n.highlightResult("v-autocomplete",N.title,(q=$(N))==null?void 0:q.title)}})}}),(E=l["append-item"])==null?void 0:E.call(l)]}})]}),w.value.map((h,O)=>{function E(I){I.stopPropagation(),I.preventDefault(),U(h,!1)}const D={"onClick:close":E,onKeydown(I){I.key!=="Enter"&&I.key!==" "||(I.preventDefault(),I.stopPropagation(),E(I))},onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},N=j.value?!!l.chip:!!l.selection,L=N?b.ensureValidVNode(j.value?l.chip({item:h,index:O,props:D}):l.selection({item:h,index:O})):void 0;if(!(N&&!L))return e.createVNode("div",{key:h.value,class:["v-autocomplete__selection",O===s.value&&["v-autocomplete__selection--selected",A.value]],style:O===s.value?F.value:{}},[j.value?l.chip?e.createVNode(n.VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:h.title}}},{default:()=>[L]}):e.createVNode(n.VChip,e.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:h.title,disabled:h.props.disabled},D),null):L??e.createVNode("span",{class:"v-autocomplete__selection-text"},[h.title,t.multiple&&O<w.value.length-1&&e.createVNode("span",{class:"v-autocomplete__selection-comma"},[e.createTextVNode(",")])])])})]),"append-inner":function(){var D,N;for(var h=arguments.length,O=new Array(h),E=0;E<h;E++)O[E]=arguments[E];return e.createVNode(e.Fragment,null,[(D=l["append-inner"])==null?void 0:D.call(l,...O),t.menuIcon?e.createVNode(n.VIcon,{class:"v-autocomplete__menu-icon",color:(N=o.value)==null?void 0:N.fieldIconColor,icon:t.menuIcon,onMousedown:ye,onClick:b.noop,"aria-label":r(K.value),title:r(K.value),tabindex:"-1"},null):void 0])}})}),n.forwardRefs({isFocused:f,isPristine:i,menu:B,search:C,filteredItems:g,select:U},o)}}),ce=e.defineComponent({__name:"OxAutocomplete",props:e.mergeModels({repo:{},lookup:{default:"search"},label:{},name:{},multiple:{type:Boolean},hideDetails:{type:Boolean},density:{},itemTitle:{},itemValue:{},filters:{},prevKey:{},nextKey:{},countKey:{},dataKey:{},query:{},relations:{},url:{},fetchRelations:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){console.log("SETUP");const c=e.useSlots(),l=e.useModel(t,"modelValue"),r=e.ref(""),o=t,f=e.inject("repos"),i=["label","name","multiple","hideDetails","density","itemTitle","itemValue"],u=e.computed(()=>v.filterValues(o,i)),{list:a,items:p}=v.useModelList({...v.excludeValues(o,["repo","search",...i]),filters:o.filters||{},query:v.query(o.repo,f)});return a.load(),e.watch(r,s=>{const m=a.filters[o.lookup];a.nextUrl,s&&s!="<empty string>"&&s!=m&&(!m||!m.startsWith(s)||!a.nextUrl)&&(a.filters[o.lookup]=s,a.load().then(A=>{r.value=s}))}),(s,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createTextVNode(e.toDisplayString(e.unref(c))+" ",1),e.createVNode(Me,e.mergeProps(u.value,{items:e.unref(p),modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=k=>l.value=k),search:r.value,"onUpdate:search":m[1]||(m[1]=k=>r.value=k)}),e.createSlots({_:2},[e.renderList(e.unref(c),k=>({name:k,fn:e.withCtx(y=>[e.renderSlot(s.$slots,k,e.normalizeProps(e.guardReactiveProps(y)))])}))]),1040,["items","modelValue","search"])],64))}}),de={props:{src:String,is:String},setup(t){const c=e.shallowRef(null),l=e.computed(()=>{if(t.is)return t.is;let o=t.src.substring(t.src.lastIndexOf("/")+1);if(o&&(o=o.substring(0,o.indexOf("."))),!o)throw Error("`is` not provided and could not be deducted from `src`.");return o});function r(){c.value=v.defineAsyncComponent(t.src,l.value)}return e.watch(()=>t.src,r),r(),()=>e.h(c.value,t)}},De={class:"text-error"},Y={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(t){const c=t;return(l,r)=>c.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(c.errors,o=>(e.openBlock(),e.createElementBlock("div",De,[e.createVNode(n.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(o),1)]))),256)):e.createCommentVNode("",!0)}},ee={__name:"OxListFilters",props:{search:String},setup(t,{expose:c}){const l=e.inject("list"),r=t,o=e.computed(()=>{const u=l.filters;return u&&Object.entries(u).some(([a,p])=>!a.startsWith("page")&&!a.startsWith("ordering")&&!!p)}),f=e.computed(()=>o.value?"mdi-filter-check":"mdi-filter-outline");function i(){l.filters={},l.load()}return e.watch(()=>Object.values(l.filters),()=>l.load()),c({icon:f,hasFilters:o,reset:i}),(u,a)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:a[2]||(a[2]=e.withModifiers(p=>e.unref(l).load(),["prevent"])),class:"width-full"},[e.createVNode(n.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:f.value,readonly:""},null,8,["icon"]),r.search&&e.unref(l).filters?(e.openBlock(),e.createBlock(n.VTextField,{key:0,label:e.unref(v.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(l).filters[r.search],"onUpdate:modelValue":a[0]||(a[0]=p=>e.unref(l).filters[r.search]=p),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(u.$slots,"default",{list:e.unref(l),filters:e.unref(l).filters}),e.createVNode(n.VBtn,{onClick:a[1]||(a[1]=e.withModifiers(p=>e.unref(l).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":u.$t("filters.apply"),title:e.unref(v.t)("filters.apply")},null,8,["aria-label","title"]),o.value?(e.openBlock(),e.createBlock(n.VBtn,{key:1,onClick:e.withModifiers(i,["stop"]),icon:"mdi-backspace","aria-label":e.unref(v.t)("filters.reset"),title:e.unref(v.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},Re={class:"flex-row justify-right"},fe=e.defineComponent({__name:"OxFormList",props:e.mergeModels({editable:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var a;const c=e.useModel(t,"modelValue"),l=e.ref({}),r=t,{editable:o}=e.toRefs(r),f=e.ref([]);(a=c.value)!=null&&a.length||f.value.push(-1);function i(){c.value.push(l.value),l.value={}}function u(p){confirm(v.t("actions.delete.confirm"))&&r.editable&&c.value.splice(p)}return(p,s)=>(e.openBlock(),e.createBlock(n.VList,{opened:f.value,"onUpdate:opened":s[3]||(s[3]=m=>f.value=m)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(m,k)=>(e.openBlock(),e.createBlock(n.VListGroup,{key:k,value:k},{activator:e.withCtx(({props:y})=>[e.createVNode(n.VListItem,e.mergeProps({ref_for:!0},y),{append:e.withCtx(()=>[e.createElementVNode("div",{onClick:s[0]||(s[0]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(p.$slots,"item.actions",{item:m,index:k,editable:e.unref(o)}),e.unref(o)?(e.openBlock(),e.createBlock(n.VBtn,{key:0,type:"button",class:"ml-2",size:"small",onClick:e.withModifiers(A=>u(k),["stop","prevent"]),color:"error","aria-label":e.unref(v.t)("actions.remove"),title:e.unref(v.t)("actions.remove"),icon:"mdi-delete"},null,8,["onClick","aria-label","title"])):e.createCommentVNode("",!0)])]),default:e.withCtx(()=>[e.createVNode(n.VListItemTitle,null,{default:e.withCtx(()=>[e.renderSlot(p.$slots,"item.title",{item:m})]),_:2},1024)]),_:2},1040)]),default:e.withCtx(()=>[e.renderSlot(p.$slots,"item",{item:m,index:k})]),_:2},1032,["value"]))),128)),c.value.length?(e.openBlock(),e.createBlock(n.VDivider,{key:0})):e.createCommentVNode("",!0),e.unref(o)?(e.openBlock(),e.createBlock(n.VListGroup,{key:1,value:-1},{activator:e.withCtx(({props:m})=>[e.createVNode(n.VListItem,e.mergeProps(m,{title:e.unref(v.t)("actions.add_item"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),default:e.withCtx(()=>[e.renderSlot(p.$slots,"item",{item:l.value,edit:!0}),l.value?(e.openBlock(),e.createBlock(n.VListItem,{key:0},{default:e.withCtx(()=>[e.createElementVNode("div",Re,[l.value?(e.openBlock(),e.createBlock(n.VBtn,{key:0,size:"small",onClick:s[1]||(s[1]=m=>l.value={}),color:"secondary","prepend-icon":"mdi-backspace","aria-label":e.unref(v.t)("actions.discard")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.discard")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0),l.value?(e.openBlock(),e.createBlock(n.VBtn,{key:1,size:"small",onClick:s[2]||(s[2]=m=>i()),color:"primary","prepend-icon":"mdi-plus","aria-label":e.unref(v.t)("actions.add")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.add")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0)])]),_:1})):e.createCommentVNode("",!0)]),_:3})):e.createCommentVNode("",!0)]),_:3},8,["opened"]))}}),_e=b.genericComponent()({name:"VSlideGroupItem",props:n.makeGroupItemProps(),emits:{"group:selected":t=>!0},setup(t,c){let{slots:l}=c;const r=n.useGroupItem(t,n.VSlideGroupSymbol);return()=>{var o;return(o=l.default)==null?void 0:o.call(l,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}}),me={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(t,{emit:c}){const l=c;e.inject("list");const r=e.inject("items"),o=t;function f(a){return a=a%o.colors.length,o.colorVariant?o.colors[a]+"-"+o.colorVariant:o.colors[a]}function i(a,p,s){a[s]?!a[s].includes(p)&&a[s].push(p):a[s]=[p]}const u=e.computed(()=>{const a={};if(r.value)for(var p of r.value){const m=p[o.field];if(Array.isArray(m))if(m.length)for(var s of m)i(a,p,s);else i(a,p,null);else i(a,p,m)}return a});return(a,p)=>(e.openBlock(),e.createBlock(n.VSheet,null,{default:e.withCtx(()=>[e.createVNode(n.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.headers,(s,m)=>(e.openBlock(),e.createBlock(_e,{key:s.value},{default:e.withCtx(({selectedClass:k})=>[e.createVNode(n.VCard,{width:"400",class:e.normalizeClass(["ma-3",k]),color:f(m),lines:"two"},{default:e.withCtx(()=>[e.createVNode(n.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.title),1)]),_:2},1024),e.createVNode(n.VList,{"bg-color":f(m)},{default:e.withCtx(()=>[u.value&&u.value[s.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.value[s.value],y=>e.renderSlot(a.$slots,"item",{key:y.id,header:s,item:y},()=>[e.createVNode(n.VListItem,{title:y[o.itemTitle],value:o.itemValue&&y[o.itemValue],onClick:A=>l("click",y)},{append:e.withCtx(()=>[e.renderSlot(a.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},te=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(t){const c=e.useSlots(),l=W.filterSlots(c,"item.",{exclude:["item.actions"]}),r=e.inject("panel"),o=e.inject("list"),f=e.inject("items"),i=["change"],u=t,a=e.computed(()=>u.headers.reduce((m,k)=>(m.push(typeof k=="string"?{key:k,title:v.t(v.tKeys.field(k))}:k),m),[]));function p(m){o.filters.page=m.page,o.filters.page_size=m.itemsPerPage,o.filters.ordering=m.sortBy.map(({key:k,order:y})=>y=="asc"?k:`-${k}`)}function s(m,k){r.show({view:"detail.edit",value:k})}return(m,k)=>{var y;return e.openBlock(),e.createBlock(n.VDataTableServer,{items:e.unref(f),"item-index":"id","items-length":e.unref(o).count||e.unref(f).length,"items-per-page":u.itemsPerPage,loading:(y=e.unref(o).state)==null?void 0:y.isProcessing,headers:a.value,class:"align-top-table","onUpdate:options":p},e.createSlots({loading:e.withCtx(()=>[e.createVNode(n.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:A})=>[t.edit?(e.openBlock(),e.createBlock(H,{key:0,icon:"mdi-pencil",button:"",title:e.unref(v.t)("actions.edit"),permissions:i,item:A,run:s},null,8,["title","item"])):e.createCommentVNode("",!0),e.renderSlot(m.$slots,"item.actions",{value:A,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(l),(A,F)=>({name:F,fn:e.withCtx(C=>[e.renderSlot(m.$slots,F,e.normalizeProps(e.guardReactiveProps(C)))])}))]),1032,["items","items-length","items-per-page","loading","headers"])}}}),G={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(t){const c=e.useSlots(),l=t;let r=e.ref(!1);e.watch(()=>l.state.state,i=>{l.delay&&i==W.States.PROCESSING&&(r.value=!1,window.setTimeout(()=>{r.value=!0},5e3))});const o=e.computed(()=>{var i;return((i=l.state)==null?void 0:i.isProcessing)&&(!l.delay||r.value)}),f=e.computed(()=>{var i,u;return(u=(i=l.state)==null?void 0:i.data)==null?void 0:u.messages});return(i,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.state.isNone&&e.unref(c).none?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:t.state,title:t.noneTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"none",{state:t.state})]),_:3},8,["state","title"])):o.value?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.processingTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"processing",{state:t.state},()=>[u[0]||(u[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):l.state.isError?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.errorTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"error",{state:t.state},()=>[u[1]||(u[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(i.$slots,"error-detail",{state:t.state})]),_:3},8,["state","title"])):l.state.isOk?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.okTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"ok",{state:t.state},()=>[u[2]||(u[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),f.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,a=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(a),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"ok-detail",{state:t.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"default",{state:l.state})],64))}},je={class:"text-right"},J={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(t,{emit:c}){const l=c,r=t;return(o,f)=>(e.openBlock(),e.createElementBlock("div",je,[e.createVNode(e.unref(n.VBtn),{color:"error",class:"me-2","prepend-icon":r.resetIcon,onClick:f[0]||(f[0]=i=>l("reset")),disabled:r.disabled},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(r.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),r.state.isSending?(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>f[2]||(f[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:1,color:"primary","prepend-icon":r.validateIcon,onClick:f[1]||(f[1]=i=>l("validate")),disabled:r.disabled||r.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(r.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},Ue={key:0},ze={class:"text-right mt-3"},pe={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(t,{emit:c}){const l=e.useTemplateRef("password"),r=t,o=e.reactive({username:"",password:""}),f=e.ref(!1),i=e.reactive(new W.State);function u(p=!0){W.reset(o,{username:"",password:""}),p&&i.none()}async function a(){i.processing();try{const p=await fetch(r.url,{method:"POST",headers:W.config$1.axiosConfig.headers,body:JSON.stringify(o)});p.status==200?(o.credentials="",o.password="",i.ok(await p.json()),r.next&&(window.location.href=r.next)):i.error(await p.json())}catch(p){i.ok((p==null?void 0:p.message)||p)}}return(p,s)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(G),{state:i},{none:e.withCtx(({state:m})=>s[7]||(s[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:m})=>[r.next?(e.openBlock(),e.createElementBlock("p",Ue,[s[8]||(s[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(r.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:m})=>{var k,y;return[e.createVNode(Y,{errors:(k=m.data)==null?void 0:k.username},null,8,["errors"]),e.createVNode(Y,{errors:(y=m.data)==null?void 0:y.password},null,8,["errors"])]}),_:1},8,["state"]),i.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTextField,{variant:"underlined",label:"Enter login",modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=m=>o.username=m),onKeyup:s[1]||(s[1]=e.withKeys(e.withModifiers(m=>e.unref(l).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(n.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:o.password,"onUpdate:modelValue":s[2]||(s[2]=m=>o.password=m),type:f.value?"text":"password","append-icon":f.value?"mdi-eye":"mdi-eye-off","onClick:append":s[3]||(s[3]=m=>f.value=!f.value),onKeyup:s[4]||(s[4]=e.withKeys(e.withModifiers(m=>a(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",ze,[e.renderSlot(p.$slots,"default",{value:o.password},()=>[o.username&&o.password?(e.openBlock(),e.createBlock(J,{key:0,"validate-label":"Login!",onValidate:s[5]||(s[5]=m=>a()),onReset:s[6]||(s[6]=m=>u()),state:i},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},le=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(t){const c=e.useSlots(),l=t,r=v.filterSlots(c,"views."),o=e.ref(!1);e.onMounted(()=>{o.value=!0}),e.onUnmounted(()=>{o.value=!1});const f=e.inject("panels"),i=e.inject("panel");return(u,a)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:l.name},{default:e.withCtx(()=>[l.state?(e.openBlock(),e.createBlock(G,{key:0,state:l.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(n.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!o.value||e.unref(f).panel!=l.name},[l.icon?(e.openBlock(),e.createBlock(n.VIcon,{key:0,icon:l.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(l.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!o.value||e.unref(f).panel!=l.name},[e.renderSlot(u.$slots,"append-title"),l.help?(e.openBlock(),e.createBlock(n.VBtn,{key:0,class:"ml-3",href:l.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(u.$slots,"top"),e.renderSlot(u.$slots,"default",{},()=>[e.unref(r)?(e.openBlock(),e.createBlock(n.VWindow,{key:0,modelValue:e.unref(i).view,"onUpdate:modelValue":a[0]||(a[0]=p=>e.unref(i).view=p)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(p,s)=>(e.openBlock(),e.createBlock(n.VWindowItem,{key:p,value:p},{default:e.withCtx(()=>[e.renderSlot(u.$slots,s)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(u.$slots,"bottom")]),_:3})]),_:3},8,["value"]))}}),ne=e.defineComponent({__name:"OxView",props:{title:String},setup(t){const c=t,l=e.ref(null),r=e.useSlots(),o=v.filterSlots(r,"tab.",{exclude:"tab.default"}),f=v.filterSlots(r,"window.");return(i,u)=>e.unref(o)&&Object.keys(e.unref(o)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTabs,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=a=>l.value=a)},{default:e.withCtx(()=>[e.unref(r).default?e.renderSlot(i.$slots,"tab",{key:0},()=>[e.createVNode(n.VTab,{text:c==null?void 0:c.title,value:"default"},null,8,["text"])]):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),(a,p)=>(e.openBlock(),e.createBlock(n.VTab,{value:a},{default:e.withCtx(()=>[e.renderSlot(i.$slots,p)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"]),e.createVNode(n.VTabsWindow,{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=a=>l.value=a)},{default:e.withCtx(()=>[e.unref(r).default?(e.openBlock(),e.createBlock(n.VTabsWindowItem,{key:0,value:"default"},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"default")]),_:3})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(a,p)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:a},{default:e.withCtx(()=>[e.renderSlot(i.$slots,p)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(i.$slots,"default",{key:1})}}),Ke={class:"mb-3"},ve=e.defineComponent({__name:"OxModelEdit",props:{repo:{},empty:{},initial:{},name:{},url:{},saved:{type:Function}},setup(t,{expose:c}){const l=t,{editor:r,edited:o}=v.useModelEditor({props:l});e.computed(()=>r.repo.use);const{value:f}=e.toRefs(r);return c({editor:r,edited:o,value:f}),(i,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(G,{state:e.unref(r).state},null,8,["state"]),e.createElementVNode("div",Ke,[e.unref(o)?(e.openBlock(),e.createBlock(J,{key:0,onValidate:u[0]||(u[0]=a=>e.unref(r).save()),onReset:u[1]||(u[1]=a=>e.unref(r).discard()),state:e.unref(r).state,"validate-disabled":!e.unref(r).valid},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)]),e.createVNode(n.VContainer,null,{default:e.withCtx(()=>[e.renderSlot(i.$slots,"default",{editor:e.unref(r),edited:e.unref(o),value:e.unref(f),model:e.unref(r).repo.use})]),_:3})],64))}}),Ve=e.defineComponent({__name:"OxModelPanel",props:{repo:{},search:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(t){const c=e.useSlots(),l=v.filterSlots(c,"views.list."),r=v.filterSlots(c,"item."),o=v.filterSlots(c,"views.detail.edit."),f=e.useTemplateRef("filters"),i=t,u=e.inject("context"),{panel:a,list:p,items:s,next:m,prev:k}=e.inject("panel")??v.useModelPanel({props:i}),y=a.panels,A=e.computed(()=>{var x;return u.user.can([a.model,(x=a.value)!=null&&x.id?"change":"add"])}),{showFilters:F}=e.toRefs(a),C=e.computed(()=>[...i.headers,{key:"actions",title:v.t("actions")}]);function w(x){a.value.value=x}const M=e.computed(()=>({panel:a,panels:y,list:p,items:s,context:u,value:a.value}));return(x,g)=>(e.openBlock(),e.createBlock(le,{name:i.name,title:e.unref(a).title,icon:e.unref(a).icon,state:e.unref(p).state,index:i.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(x.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(M.value))),e.unref(a).view.startsWith("list.")?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(x.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(M.value))),e.unref(f)?(e.openBlock(),e.createBlock(n.VBtn,{key:0,title:e.unref(F)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),"aria-label":e.unref(F)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),onClick:g[0]||(g[0]=$=>F.value=!e.unref(F)),active:e.unref(F)},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:e.unref(f).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(a).view.startsWith("detail.")&&e.unref(a).value?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(x.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(M.value))),e.unref(a).view=="detail.edit"&&e.unref(a).value?(e.openBlock(),e.createBlock(n.VMenu,{key:0},{activator:e.withCtx(({props:$})=>[e.createVNode(n.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},$),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(n.VList,null,{default:e.withCtx(()=>[e.renderSlot(x.$slots,"item.actions",{value:e.unref(a).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtn,{disabled:!e.unref(k),title:e.unref(v.t)("prev"),"aria-label":e.unref(v.t)("prev"),onClick:g[1]||(g[1]=e.withModifiers($=>e.unref(a).show({value:e.unref(k)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(n.VBtn,{disabled:!e.unref(m),title:e.unref(v.t)("next"),"aria-label":e.unref(v.t)("next"),onClick:g[2]||(g[2]=e.withModifiers($=>e.unref(a).show({value:e.unref(m)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(a).view,"onUpdate:modelValue":g[4]||(g[4]=$=>e.unref(a).view=$),density:"compact",variant:"tonal",mandatory:""},{default:e.withCtx(()=>{var $;return[e.createVNode(n.VBtn,{value:"list.table",title:e.unref(v.t)("panels.nav.table"),"aria-label":e.unref(v.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>g[5]||(g[5]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(c)["views.list.cards"]?(e.openBlock(),e.createBlock(n.VBtn,{key:0,value:"list.cards",title:e.unref(v.t)("panels.nav.cards"),"aria-label":e.unref(v.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>g[6]||(g[6]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(c)["views.list.kanban"]?(e.openBlock(),e.createBlock(n.VBtn,{key:1,value:"list.kanban",title:e.unref(v.t)("panels.nav.kanban"),"aria-label":e.unref(v.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>g[7]||(g[7]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(o)?(e.openBlock(),e.createBlock(n.VBtn,{key:2,value:"detail.add",onClick:g[3]||(g[3]=e.withModifiers(S=>e.unref(a).create(),["stop"])),title:e.unref(v.t)("panels.nav.add"),"aria-label":e.unref(v.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>g[8]||(g[8]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(c)["views.detail.edit"]||e.unref(o)?(e.openBlock(),e.createBlock(n.VBtn,{key:3,value:"detail.edit",disabled:!(($=e.unref(a).value)!=null&&$.id),title:e.unref(v.t)("panels.nav.edit"),"aria-label":e.unref(v.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>g[9]||(g[9]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(x.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(M.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[e.withDirectives(e.createVNode(ee,{ref_key:"filters",ref:f,search:i.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx($=>[e.renderSlot(x.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps($)))]),_:3},8,["search"]),[[e.vShow,e.unref(a).view.startsWith("list.")&&e.unref(F)]])]),_:2},[e.unref(c)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(te,{headers:C.value,edit:""},e.createSlots({_:2},[e.renderList(e.unref(r),($,S)=>({name:S,fn:e.withCtx(j=>[e.renderSlot(x.$slots,S,e.normalizeProps(e.guardReactiveProps(j)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(l),($,S)=>({name:S,fn:e.withCtx(()=>[e.renderSlot(x.$slots,S,e.normalizeProps(e.guardReactiveProps(M.value)))])})),(e.unref(c)["views.detail.edit"]||e.unref(o))&&A.value?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(e.unref(ne),{title:e.unref(v.t)(`models.${e.unref(a).model.entity}`)},e.createSlots({_:2},[e.renderList(e.unref(o),($,S)=>({name:$,fn:e.withCtx(()=>[e.renderSlot(x.$slots,S,{saved:w,value:e.unref(a).value})])}))]),1032,["title"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),ke=e.defineComponent({__name:"OxPanelNav",props:{title:{},icon:{},panel:{},href:{},auto:{type:Boolean}},setup(t){const c=t,l=e.inject("panels");return e.computed(()=>!c.auto||panel.name==c.name),(r,o)=>(e.openBlock(),e.createBlock(n.VListItem,{active:e.unref(l).panel==c.panel,"prepend-icon":c.icon,title:c.title,onClick:o[0]||(o[0]=e.withModifiers(f=>e.unref(l).show(c),["stop"]))},null,8,["active","prepend-icon","title"]))}}),We=Object.freeze(Object.defineProperty({__proto__:null,OxAction:H,OxActionModelDelete:ie,OxActions:se,OxApp:ue,OxAutocomplete:ce,OxComponent:de,OxFieldDetails:Y,OxFormList:fe,OxListFilters:ee,OxListKanban:me,OxListTable:te,OxLogin:pe,OxModelEdit:ve,OxModelPanel:Ve,OxPanel:le,OxPanelNav:ke,OxStateAlert:G,OxValidationBtn:J,OxView:ne},Symbol.toStringTag,{value:"Module"})),Ge={el:"#app",delimiters:["[[","]]"],components:{...We,...Oe.components}};exports.App=Ge;exports.OxAction=H;exports.OxActionModelDelete=ie;exports.OxActions=se;exports.OxApp=ue;exports.OxAutocomplete=ce;exports.OxComponent=de;exports.OxFieldDetails=Y;exports.OxFormList=fe;exports.OxListFilters=ee;exports.OxListKanban=me;exports.OxListTable=te;exports.OxLogin=pe;exports.OxModelEdit=ve;exports.OxModelPanel=Ve;exports.OxPanel=le;exports.OxPanelNav=ke;exports.OxStateAlert=G;exports.OxValidationBtn=J;exports.OxView=ne;
//# sourceMappingURL=components.cjs.map
