"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),v=require("ox"),o=require("./VContainer-CSTtybZH.cjs"),S=require("./theme-BS02m0hV.cjs"),D=require("./lodash-C1eGBxPE.cjs");require("axios");const Fe=require("ox/vendor"),G=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permission:{},run:{},href:{}},emits:["completed"],setup(t,{emit:p}){const l=t,r=p,a=e.inject("user"),{run:s,processing:i,allowed:c}=v.useAction({user:a,emits:r,props:l});return(d,n)=>e.unref(c)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.button?(e.openBlock(),e.createBlock(o.VBtn,{key:0,variant:"text",disabled:e.unref(i),color:l.color,icon:l.icon,title:l.title,"aria-label":l.title,onClick:e.withModifiers(e.unref(s),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(o.VListItem,{key:1,title:l.title,"base-color":l.color,"prepend-icon":l.icon,disabled:e.unref(i),onClick:e.withModifiers(e.unref(s),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),ue=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(t){const p=e.inject("panel"),l=e.inject("repos"),r=t;async function a(s,i){return await l[i.constructor.entity].api().delete(i.$url(),{delete:r.item.id})}return(s,i)=>(e.openBlock(),e.createBlock(G,{item:r.item,button:r.button,icon:"mdi-delete",color:"error",title:e.unref(v.t)("actions.delete"),confirm:e.unref(v.t)("actions.delete.confirm"),permission:[r.item.constructor,"delete"],run:a,onCompleted:i[0]||(i[0]=c=>{var d;return(d=e.unref(p))==null?void 0:d.show({view:e.unref(p).index})})},null,8,["item","button","title","confirm","permission"]))}}),de={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(t){e.useSlots();const p=t;return(l,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(l.$slots,"before",e.normalizeProps(e.guardReactiveProps(p))),e.renderSlot(l.$slots,"default",e.normalizeProps(e.guardReactiveProps(p))),e.renderSlot(l.$slots,"after",e.normalizeProps(e.guardReactiveProps(p)))],64))}},Le=e.defineComponent({__name:"OxAppNavItem",props:{title:{},icon:{},name:{},url:{},permissions:{},type:{},items:{},order:{}},setup(t){const p=t;e.ref(null);const l=e.inject("user"),r=e.inject("panels");e.computed(()=>!p.auto||panel.name==p.name);function a(i){return i.permissions&&!l.can(i.permissions)?!1:i.items?i.items.some(c=>a(c)):!0}function s(){const i={panel:p.name,href:p.url};r.show(i)}return(i,c)=>{const d=e.resolveComponent("ox-app-nav-item",!0);return a(p)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[p.type=="subheader"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(o.VListSubheader,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p.title),1)]),_:1}),p.items?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(p.items,n=>(e.openBlock(),e.createBlock(d,e.mergeProps({ref_for:!0},n),null,16))),256)):e.createCommentVNode("",!0)],64)):p.type=="group"?(e.openBlock(),e.createBlock(o.VListGroup,{key:1,value:p.name},{activator:e.withCtx(({props:n})=>[e.createVNode(o.VListItem,e.mergeProps(n,{title:p.title,"prepend-icon":p.icon}),null,16,["title","prepend-icon"])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.items,(n,u)=>(e.openBlock(),e.createBlock(d,e.mergeProps({key:u,ref_for:!0},n),null,16))),128))]),_:1},8,["value"])):p.type=="divider"?(e.openBlock(),e.createBlock(o.VDivider,{key:2})):(e.openBlock(),e.createBlock(o.VListItem,{key:3,active:e.unref(r).panel==p.name,value:p.name,"prepend-icon":p.icon,title:p.title,onClick:e.withModifiers(s,["stop"])},null,8,["active","value","prepend-icon","title"]))],64)):e.createCommentVNode("",!0)}}}),Ie={__name:"OxAppNav",props:e.mergeModels({items:Array},{drawer:{},drawerModifiers:{}}),emits:["update:drawer"],setup(t){e.inject("context");const p=e.inject("panels"),l=e.useModel(t,"drawer"),r=e.ref([]),a=t,s=e.computed(()=>(i(a.items),a.items));function i(d){r.value=c(d)}function c(d){if(p.panel){for(const n of d)if(n.items){const u=c(n.items);if(u)return[u,n.name]}else if(n.name==p.panel)return[n.name]}}return(d,n)=>(e.openBlock(),e.createBlock(o.VNavigationDrawer,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=u=>l.value=u),theme:"dark"},{append:e.withCtx(()=>[e.createVNode(o.VList,null,{default:e.withCtx(()=>[e.renderSlot(d.$slots,"append")]),_:3})]),default:e.withCtx(()=>[e.renderSlot(d.$slots,"prepend"),e.createVNode(o.VList,{opened:r.value,"onUpdate:opened":n[0]||(n[0]=u=>r.value=u),density:"compact"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(u,f)=>(e.openBlock(),e.createBlock(e.unref(Le),e.mergeProps({key:f,ref_for:!0},u),null,16))),128))]),_:1},8,["opened"])]),_:3},8,["modelValue"]))}};function Ee(t){const p=e.shallowRef(t());let l=-1;function r(){clearInterval(l)}function a(){r(),e.nextTick(()=>p.value=t())}function s(i){const c=i?getComputedStyle(i):{transitionDuration:.2},d=parseFloat(c.transitionDuration)*1e3||200;if(r(),p.value<=0)return;const n=performance.now();l=window.setInterval(()=>{const u=performance.now()-n+d;p.value=Math.max(t()-u,0),p.value<=0&&r()},d)}return e.onScopeDispose(r),{clear:r,time:p,start:s,reset:a}}const Me=S.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...o.makeLocationProps({location:"bottom"}),...o.makePositionProps(),...o.makeRoundedProps(),...o.makeVariantProps(),...S.makeThemeProps(),...S.omit(o.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ae=S.genericComponent()({name:"VSnackbar",props:Me(),emits:{"update:modelValue":t=>!0},setup(t,p){let{slots:l}=p;const r=S.useProxiedModel(t,"modelValue"),{positionClasses:a}=o.usePosition(t),{scopeId:s}=o.useScopeId(),{themeClasses:i}=S.provideTheme(t),{colorClasses:c,colorStyles:d,variantClasses:n}=o.useVariant(t),{roundedClasses:u}=o.useRounded(t),f=Ee(()=>Number(t.timeout)),y=e.ref(),h=e.ref(),B=e.shallowRef(!1),F=e.shallowRef(0),N=e.ref(),C=e.inject(o.VuetifyLayoutKey,void 0);S.useToggleScope(()=>!!C,()=>{const L=o.useLayout();e.watchEffect(()=>{N.value=L.mainStyles.value})}),e.watch(r,V),e.watch(()=>t.timeout,V),e.onMounted(()=>{r.value&&V()});let w=-1;function V(){f.reset(),window.clearTimeout(w);const L=Number(t.timeout);if(!r.value||L===-1)return;const j=S.refElement(h.value);f.start(j),w=window.setTimeout(()=>{r.value=!1},L)}function k(){f.reset(),window.clearTimeout(w)}function P(){B.value=!0,k()}function x(){B.value=!1,V()}function z(L){F.value=L.touches[0].clientY}function _(L){Math.abs(F.value-L.changedTouches[0].clientY)>50&&(r.value=!1)}function Q(){B.value&&x()}const K=e.computed(()=>t.location.split(" ").reduce((L,j)=>(L[`v-snackbar--${j}`]=!0,L),{}));return o.useRender(()=>{const L=o.VOverlay.filterProps(t),j=!!(l.default||l.text||t.text);return e.createVNode(o.VOverlay,e.mergeProps({ref:y,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},K.value,a.value,t.class],style:[N.value,t.style]},L,{modelValue:r.value,"onUpdate:modelValue":$=>r.value=$,contentProps:e.mergeProps({class:["v-snackbar__wrapper",i.value,c.value,u.value,n.value],style:[d.value],onPointerenter:P,onPointerleave:x},L.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:z,onTouchend:_,onAfterLeave:Q},s),{default:()=>{var $,q;return[o.genOverlays(!1,"v-snackbar"),t.timer&&!B.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(o.VProgressLinear,{ref:h,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":f.time.value},null)]),j&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[(($=l.text)==null?void 0:$.call(l))??t.text,(q=l.default)==null?void 0:q.call(l)]),l.actions&&e.createVNode(o.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[l.actions({isActive:r})])]})]},activator:l.activator})}),o.forwardRefs({},y)}}),Re={class:"nav-home"};var ie;const ce=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(ie=document.body.dataset)==null?void 0:ie.appData},models:{},data:{}},setup(t){const p=e.useSlots(),l=v.filterSlots(p,"panels."),r=t,a=e.reactive({drawer:!0}),s=v.useAppContext(r),i=v.usePanels();return e.onMounted(()=>{i.panel=s.data.panel}),e.watch(()=>[s.state.state,s.state.data],()=>{s.showState=!0}),e.onErrorCaptured((c,d,n)=>{s.state.error(`${c}`)}),(c,d)=>(e.openBlock(),e.createBlock(o.VApp,null,{default:e.withCtx(()=>[e.createVNode(Ae,{modelValue:e.unref(s).showState,"onUpdate:modelValue":d[0]||(d[0]=n=>e.unref(s).showState=n),color:e.unref(s).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(o.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(o.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(v.t)("nav.panels"),"aria-label":e.unref(v.t)("nav.panels"),onClick:d[1]||(d[1]=e.withModifiers(n=>a.drawer=!a.drawer,["stop"]))},null,8,["title","aria-label"])]),default:e.withCtx(()=>[e.createVNode(o.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(o.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"title",{context:e.unref(s)})]),_:3}),e.renderSlot(c.$slots,"app-bar-left",{context:e.unref(s)}),d[5]||(d[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(c.$slots,"app-bar-right",{context:e.unref(s)})]),_:3}),e.createVNode(e.unref(Ie),{drawer:a.drawer,"onUpdate:drawer":d[3]||(d[3]=n=>a.drawer=n),items:e.unref(s).data.nav},e.createSlots({prepend:e.withCtx(()=>[e.createElementVNode("a",Re,[c.logo?(e.openBlock(),e.createBlock(o.VImg,{key:0,src:c.logo,class:"logo"},null,8,["src"])):e.createCommentVNode("",!0)]),e.renderSlot(c.$slots,"nav-start",{context:e.unref(s)})]),_:2},[e.unref(p)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.createVNode(o.VList,{opened:a.opened,"onUpdate:opened":d[2]||(d[2]=n=>a.opened=n)},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"nav-end",{context:e.unref(s)})]),_:3},8,["opened"])]),key:"0"}:void 0]),1032,["drawer","items"]),e.createVNode(o.VMain,null,{default:e.withCtx(()=>[e.renderSlot(c.$slots,"main",{},()=>[e.createVNode(o.VTabsWindow,{modelValue:e.unref(i).panel,"onUpdate:modelValue":d[4]||(d[4]=n=>e.unref(i).panel=n)},{default:e.withCtx(n=>[e.renderSlot(c.$slots,"default",e.mergeProps(n,{context:e.unref(s)})),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(u,f)=>(e.openBlock(),e.createBlock(o.VTabsWindowItem,{key:f,value:u},{default:e.withCtx(()=>[e.renderSlot(c.$slots,f,e.mergeProps({ref_for:!0},n,{context:e.unref(s)}))]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),De=S.propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...o.makeFilterProps({filterKeys:["title"]}),...o.makeSelectProps(),...S.omit(o.makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...o.makeTransitionProps({transition:!1})},"VAutocomplete"),_e=S.genericComponent()({name:"VAutocomplete",props:De(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,p){let{slots:l}=p;const{t:r}=S.useLocale(),a=e.ref(),s=e.shallowRef(!1),i=e.shallowRef(!0),c=e.shallowRef(!1),d=e.ref(),n=e.ref(),u=e.shallowRef(-1),{items:f,transformIn:y,transformOut:h}=o.useItems(t),{textColorClasses:B,textColorStyles:F}=o.useTextColor(()=>{var m;return(m=a.value)==null?void 0:m.color}),N=S.useProxiedModel(t,"search",""),C=S.useProxiedModel(t,"modelValue",[],m=>y(m===null?[null]:S.wrapInArray(m)),m=>{const g=h(m);return t.multiple?g:g[0]??null}),w=e.computed(()=>typeof t.counterValue=="function"?t.counterValue(C.value):typeof t.counterValue=="number"?t.counterValue:C.value.length),V=o.useForm(t),{filteredItems:k,getMatches:P}=o.useFilter(t,f,()=>i.value?"":N.value),x=e.computed(()=>t.hideSelected?k.value.filter(m=>!C.value.some(g=>g.value===m.value)):k.value),z=e.computed(()=>!!(t.chips||l.chip)),_=e.computed(()=>z.value||!!l.selection),Q=e.computed(()=>C.value.map(m=>m.props.value)),K=e.computed(()=>{var g;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&N.value===((g=x.value[0])==null?void 0:g.title))&&x.value.length>0&&!i.value&&!c.value}),L=e.computed(()=>t.hideNoData&&!x.value.length||V.isReadonly.value||V.isDisabled.value),j=S.useProxiedModel(t,"menu"),$=e.computed({get:()=>j.value,set:m=>{var g;j.value&&!m&&((g=d.value)!=null&&g.Î¨openChildren.size)||m&&L.value||(j.value=m)}}),q=e.computed(()=>$.value?t.closeText:t.openText),X=e.ref(),ge=o.useScrolling(X,a);function he(m){t.openOnClear&&($.value=!0),N.value=""}function ye(){L.value||($.value=!0)}function Ce(m){L.value||(s.value&&(m.preventDefault(),m.stopPropagation()),$.value=!$.value)}function be(m){var g;m.key!==" "&&S.checkPrintable(m)&&((g=a.value)==null||g.focus())}function Be(m){var b,I,A,R,O;if(V.isReadonly.value)return;const g=(b=a.value)==null?void 0:b.selectionStart,T=C.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(m.key)&&m.preventDefault(),["Enter","ArrowDown"].includes(m.key)&&($.value=!0),["Escape"].includes(m.key)&&($.value=!1),K.value&&["Enter","Tab"].includes(m.key)&&!C.value.some(M=>{let{value:E}=M;return E===x.value[0].value})&&U(x.value[0]),m.key==="ArrowDown"&&K.value&&((I=X.value)==null||I.focus("next")),["Backspace","Delete"].includes(m.key)){if(!t.multiple&&_.value&&C.value.length>0&&!N.value)return U(C.value[0],!1);if(~u.value){m.preventDefault();const M=u.value;U(C.value[u.value],!1),u.value=M>=T-1?T-2:M}else m.key==="Backspace"&&!N.value&&(u.value=T-1);return}if(t.multiple)if(m.key==="ArrowLeft"){if(u.value<0&&g&&g>0)return;const M=u.value>-1?u.value-1:T-1;if(C.value[M])u.value=M;else{const E=((A=N.value)==null?void 0:A.length)??null;u.value=-1,(R=a.value)==null||R.setSelectionRange(E,E)}}else if(m.key==="ArrowRight"){if(u.value<0)return;const M=u.value+1;C.value[M]?u.value=M:(u.value=-1,(O=a.value)==null||O.setSelectionRange(0,0))}else~u.value&&S.checkPrintable(m)&&(u.value=-1)}function xe(m){if(S.matchesSelector(a.value,":autofill")||S.matchesSelector(a.value,":-webkit-autofill")){const g=f.value.find(T=>T.title===m.target.value);g&&U(g)}}function Se(){var m;t.eager&&((m=n.value)==null||m.calculateVisibleItems())}function Ne(){var m;s.value&&(i.value=!0,(m=a.value)==null||m.focus())}function Pe(m){s.value=!0,setTimeout(()=>{c.value=!0})}function $e(m){c.value=!1}function Oe(m){(m==null||m===""&&!t.multiple&&!_.value)&&(C.value=[])}const Z=e.shallowRef(!1);function U(m){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!m||m.props.disabled))if(t.multiple){const T=C.value.findIndex(I=>(t.valueComparator||S.deepEqual)(I.value,m.value)),b=g??!~T;if(~T){const I=b?[...C.value,m]:[...C.value];I.splice(T,1),C.value=I}else b&&(C.value=[...C.value,m]);t.clearOnSelect&&(N.value="")}else{const T=g!==!1;C.value=T?[m]:[],N.value=T&&!_.value?m.title:"",e.nextTick(()=>{$.value=!1,i.value=!0})}}return e.watch(s,(m,g)=>{var T;m!==g&&(m?(Z.value=!0,N.value=t.multiple||_.value?"":String(((T=C.value.at(-1))==null?void 0:T.props.title)??""),i.value=!0,e.nextTick(()=>Z.value=!1)):(!t.multiple&&N.value==null&&(C.value=[]),$.value=!1,(t.multiple||_.value)&&(N.value=""),u.value=-1))}),e.watch(N,m=>{!s.value||Z.value||(m&&($.value=!0),i.value=!m)}),e.watch($,()=>{if(!t.hideSelected&&$.value&&C.value.length){const m=x.value.findIndex(g=>C.value.some(T=>g.value===T.value));S.IN_BROWSER&&window.requestAnimationFrame(()=>{var g;m>=0&&((g=n.value)==null||g.scrollToIndex(m))})}}),e.watch(()=>t.items,(m,g)=>{$.value||s.value&&!g.length&&m.length&&($.value=!0)}),e.watch(C,m=>{var g;!t.multiple&&!_.value&&(N.value=((g=m[0])==null?void 0:g.title)??"")}),o.useRender(()=>{const m=!!(!t.hideNoData||x.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),g=C.value.length>0,T=o.VTextField.filterProps(t);return e.createVNode(o.VTextField,e.mergeProps({ref:a},T,{modelValue:N.value,"onUpdate:modelValue":[b=>N.value=b,Oe],focused:s.value,"onUpdate:focused":b=>s.value=b,validationValue:C.externalValue,counterValue:w.value,dirty:g,onChange:xe,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":$.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!_.value,"v-autocomplete--selecting-index":u.value>-1},t.class],style:t.style,readonly:V.isReadonly.value,placeholder:g?void 0:t.placeholder,"onClick:clear":he,"onMousedown:control":ye,onKeydown:Be}),{...l,default:()=>e.createVNode(e.Fragment,null,[e.createVNode(o.VMenu,e.mergeProps({ref:d,modelValue:$.value,"onUpdate:modelValue":b=>$.value=b,activator:"parent",contentClass:"v-autocomplete__content",disabled:L.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Se,onAfterLeave:Ne},t.menuProps),{default:()=>[m&&e.createVNode(o.VList,e.mergeProps({ref:X,selected:Q.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:b=>b.preventDefault(),onKeydown:be,onFocusin:Pe,onFocusout:$e,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},ge,t.listProps),{default:()=>{var b,I,A;return[(b=l["prepend-item"])==null?void 0:b.call(l),!x.value.length&&!t.hideNoData&&(((I=l["no-data"])==null?void 0:I.call(l))??e.createVNode(o.VListItem,{key:"no-data",title:r(t.noDataText)},null)),e.createVNode(o.VVirtualScroll,{ref:n,renderless:!0,items:x.value,itemKey:"value"},{default:R=>{var se;let{item:O,index:M,itemRef:E}=R;const re=e.mergeProps(O.props,{ref:E,key:O.value,active:K.value&&M===0?!0:void 0,onClick:()=>U(O,null)});return((se=l.item)==null?void 0:se.call(l,{item:O,index:M,props:re}))??e.createVNode(o.VListItem,e.mergeProps(re,{role:"option"}),{prepend:Y=>{let{isSelected:Te}=Y;return e.createVNode(e.Fragment,null,[t.multiple&&!t.hideSelected?e.createVNode(o.VCheckboxBtn,{key:O.value,modelValue:Te,ripple:!1,tabindex:"-1"},null):void 0,O.props.prependAvatar&&e.createVNode(o.VAvatar,{image:O.props.prependAvatar},null),O.props.prependIcon&&e.createVNode(o.VIcon,{icon:O.props.prependIcon},null)])},title:()=>{var Y;return i.value?O.title:o.highlightResult("v-autocomplete",O.title,(Y=P(O))==null?void 0:Y.title)}})}}),(A=l["append-item"])==null?void 0:A.call(l)]}})]}),C.value.map((b,I)=>{function A(E){E.stopPropagation(),E.preventDefault(),U(b,!1)}const R={"onClick:close":A,onKeydown(E){E.key!=="Enter"&&E.key!==" "||(E.preventDefault(),E.stopPropagation(),A(E))},onMousedown(E){E.preventDefault(),E.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},O=z.value?!!l.chip:!!l.selection,M=O?S.ensureValidVNode(z.value?l.chip({item:b,index:I,props:R}):l.selection({item:b,index:I})):void 0;if(!(O&&!M))return e.createVNode("div",{key:b.value,class:["v-autocomplete__selection",I===u.value&&["v-autocomplete__selection--selected",B.value]],style:I===u.value?F.value:{}},[z.value?l.chip?e.createVNode(o.VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:b.title}}},{default:()=>[M]}):e.createVNode(o.VChip,e.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:b.title,disabled:b.props.disabled},R),null):M??e.createVNode("span",{class:"v-autocomplete__selection-text"},[b.title,t.multiple&&I<C.value.length-1&&e.createVNode("span",{class:"v-autocomplete__selection-comma"},[e.createTextVNode(",")])])])})]),"append-inner":function(){var R,O;for(var b=arguments.length,I=new Array(b),A=0;A<b;A++)I[A]=arguments[A];return e.createVNode(e.Fragment,null,[(R=l["append-inner"])==null?void 0:R.call(l,...I),t.menuIcon?e.createVNode(o.VIcon,{class:"v-autocomplete__menu-icon",color:(O=a.value)==null?void 0:O.fieldIconColor,icon:t.menuIcon,onMousedown:Ce,onClick:S.noop,"aria-label":r(q.value),title:r(q.value),tabindex:"-1"},null):void 0])}})}),o.forwardRefs({isFocused:s,isPristine:i,menu:$,search:N,filteredItems:k,select:U},a)}}),je=["name","value"],pe=e.defineComponent({__name:"OxAutocomplete",props:e.mergeModels({repo:{},lookup:{default:"search"},name:{},filters:{},prevKey:{},nextKey:{},countKey:{},dataKey:{},query:{},relations:{},url:{},fetchRelations:{type:Boolean},save:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var C;const p=e.useSlots(),l=e.useModel(t,"modelValue"),r=e.ref(null),a=e.ref(""),s=t,i=e.useAttrs(),c=e.inject("repos"),d=v.excludeValues(s,["repo","search"]),{list:n,items:u}=v.useModelList({...(C=d.value)==null?void 0:C[1],filters:s.filters||{},save:!1,query:v.query(s.repo,c)});var f=null;async function y(w){if(w){const V=n.findIndex(w);if(V!=-1)r.value=n.items[V];else if(f!=w){f=w;const P=(await n.load({id:w,append:0})).entities[0];r.value=P.id==w?P:null}}else r.value=null;return r}let h=null;const B=D.lodashExports.debounce(async({reset:w=!1}={})=>{if(n.state.isProcessing)return;const V=a.value!="<empty string>"&&a.value||"";!w&&V==h||(h=V,n.filters={...s.filters},n.filters[s.lookup]=V,console.log(">>> load",V),await n.load(),console.log(">>> load",V,a.value),r.value&&n.add(r.value,0),w||(!r.value&&await y(l.value),a.value=V))},500);function F(w){const V={...e.toRaw(n.filters)};delete V[s.lookup],D.lodashExports.isEqual(e.toRaw(V),e.toRaw(w))||B({reset:!0})}function N(w){w!="<empty string>"&&w!=h&&B({q:w})}return e.onMounted(()=>{var w;(w=n.load())==null||w.then(()=>y(l.value))}),e.watch(()=>s.filters,w=>F(w)),e.watch(a,N),e.watch(l,(w,V)=>w!=V&&y(w)),(w,V)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[s.name?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:s.name,value:l.value},null,8,je)):e.createCommentVNode("",!0),e.createVNode(e.unref(_e),e.mergeProps(e.unref(i),{items:e.unref(u),loading:e.unref(n).state.isProcessing,modelValue:l.value,"onUpdate:modelValue":V[0]||(V[0]=k=>l.value=k),search:a.value,"onUpdate:search":V[1]||(V[1]=k=>a.value=k)}),e.createSlots({_:2},[e.renderList(e.unref(p),(k,P)=>({name:P,fn:e.withCtx(x=>[e.renderSlot(w.$slots,P,e.normalizeProps(e.guardReactiveProps(x)))])}))]),1040,["items","loading","modelValue","search"])],64))}}),me={props:{src:String,is:String},setup(t){const p=e.shallowRef(null),l=e.computed(()=>{if(t.is)return t.is;let a=t.src.substring(t.src.lastIndexOf("/")+1);if(a&&(a=a.substring(0,a.indexOf("."))),!a)throw Error("`is` not provided and could not be deducted from `src`.");return a});function r(){p.value=v.defineAsyncComponent(t.src,l.value)}return e.watch(()=>t.src,r),r(),()=>e.h(p.value,t)}},ze={class:"text-error"},H={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(t){const p=t;return(l,r)=>p.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(p.errors,a=>(e.openBlock(),e.createElementBlock("div",ze,[e.createVNode(o.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(a),1)]))),256)):e.createCommentVNode("",!0)}},te={__name:"OxListFilters",props:{search:String},setup(t,{expose:p}){const l=e.inject("list"),r=t,a=e.computed(()=>{const c=l.filters;return c&&Object.entries(c).some(([d,n])=>!d.startsWith("page")&&!d.startsWith("ordering")&&!!n)}),s=e.computed(()=>a.value?"mdi-filter-check":"mdi-filter-outline");function i(){l.filters={},l.load()}return p({icon:s,hasFilters:a,reset:i}),(c,d)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:d[2]||(d[2]=e.withModifiers(n=>e.unref(l).load(),["prevent"])),class:"ox-list-filters width-full"},[e.createVNode(o.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(o.VAppBarNavIcon,{icon:s.value,readonly:""},null,8,["icon"]),r.search&&e.unref(l).filters?(e.openBlock(),e.createBlock(o.VTextField,{key:0,label:e.unref(v.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(l).filters[r.search],"onUpdate:modelValue":d[0]||(d[0]=n=>e.unref(l).filters[r.search]=n),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"default",{list:e.unref(l),filters:e.unref(l).filters}),e.createVNode(o.VBtn,{onClick:d[1]||(d[1]=e.withModifiers(n=>e.unref(l).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":c.$t("filters.apply"),title:e.unref(v.t)("filters.apply")},null,8,["aria-label","title"]),a.value?(e.openBlock(),e.createBlock(o.VBtn,{key:1,onClick:e.withModifiers(i,["stop"]),icon:"mdi-backspace","aria-label":e.unref(v.t)("filters.reset"),title:e.unref(v.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},Ue=S.propsFactory({...o.makeComponentProps(),...o.makeFormProps()},"VForm"),ee=S.genericComponent()({name:"VForm",props:Ue(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,p){let{slots:l,emit:r}=p;const a=o.createForm(t),s=e.ref();function i(d){d.preventDefault(),a.reset()}function c(d){const n=d,u=a.validate();n.then=u.then.bind(u),n.catch=u.catch.bind(u),n.finally=u.finally.bind(u),r("submit",n),n.defaultPrevented||u.then(f=>{var h;let{valid:y}=f;y&&((h=s.value)==null||h.submit())}),n.preventDefault()}return o.useRender(()=>{var d;return e.createVNode("form",{ref:s,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:i,onSubmit:c},[(d=l.default)==null?void 0:d.call(l,a)])}),o.forwardRefs(a,s)}}),Ke={class:"flex-row justify-right"},fe=e.defineComponent({__name:"OxFormList",props:e.mergeModels({useModel:Function,editable:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var n;const p=e.useModel(t,"modelValue"),l=e.inject("user"),r=e.ref({}),a=t,s=e.computed(()=>({add:a.editable&&l.can([a.useModel,"add"]),change:a.editable&&l.can([a.useModel,"change"]),delete:a.editable&&l.can([a.useModel,"delete"])})),i=e.ref([]);(n=p.value)!=null&&n.length||i.value.push(-1);function c(){p.value.push(r.value),r.value={}}function d(u){confirm(v.t("actions.delete.confirm"))&&a.delete&&p.value.splice(u)}return(u,f)=>(e.openBlock(),e.createBlock(o.VList,{opened:i.value,"onUpdate:opened":f[3]||(f[3]=y=>i.value=y)},{default:e.withCtx(()=>{var y;return[(y=p.value)!=null&&y.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(p.value,(h,B)=>(e.openBlock(),e.createBlock(o.VListGroup,{key:B,value:B},{activator:e.withCtx(({props:F})=>[e.createVNode(o.VListItem,e.mergeProps({ref_for:!0},F),{append:e.withCtx(()=>[e.createElementVNode("div",{onClick:f[0]||(f[0]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(u.$slots,"item.actions",e.mergeProps({item:h,index:B,ref_for:!0},F)),s.value.delete?(e.openBlock(),e.createBlock(o.VBtn,{key:0,type:"button",class:"ml-2",size:"small",onClick:e.withModifiers(N=>d(B),["stop","prevent"]),color:"error","aria-label":e.unref(v.t)("actions.remove"),title:e.unref(v.t)("actions.remove"),icon:"mdi-delete"},null,8,["onClick","aria-label","title"])):e.createCommentVNode("",!0)])]),default:e.withCtx(()=>[e.createVNode(o.VListItemTitle,null,{default:e.withCtx(()=>[e.renderSlot(u.$slots,"item.title",{item:h})]),_:2},1024)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(ee,{disabled:!s.value.change},{default:e.withCtx(()=>[e.renderSlot(u.$slots,"item",{item:h,index:B,editable:s.value.change})]),_:2},1032,["disabled"])]),_:2},1032,["value"]))),128)):(e.openBlock(),e.createBlock(o.VListItem,{key:1,title:e.unref(v.t)("lists.empty")},null,8,["title"])),s.value.add?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[p.value.length?(e.openBlock(),e.createBlock(o.VDivider,{key:0})):e.createCommentVNode("",!0),e.createVNode(o.VListGroup,{value:-1},{activator:e.withCtx(({props:h})=>[e.createVNode(o.VListItem,e.mergeProps(h,{title:e.unref(v.t)("actions.add_item"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),default:e.withCtx(()=>[e.createVNode(ee,null,{default:e.withCtx(()=>[e.renderSlot(u.$slots,"item",{item:r.value,edit:!0})]),_:3}),r.value?(e.openBlock(),e.createBlock(o.VListItem,{key:0},{default:e.withCtx(()=>[e.createElementVNode("div",Ke,[r.value?(e.openBlock(),e.createBlock(o.VBtn,{key:0,size:"small",onClick:f[1]||(f[1]=h=>r.value={}),color:"secondary","prepend-icon":"mdi-backspace","aria-label":e.unref(v.t)("actions.discard")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.discard")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0),r.value?(e.openBlock(),e.createBlock(o.VBtn,{key:1,size:"small",onClick:f[2]||(f[2]=h=>c()),color:"primary","prepend-icon":"mdi-plus","aria-label":e.unref(v.t)("actions.add")},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions.add")),1)]),_:1},8,["aria-label"])):e.createCommentVNode("",!0)])]),_:1})):e.createCommentVNode("",!0)]),_:3})],64)):e.createCommentVNode("",!0)]}),_:3},8,["opened"]))}}),qe=S.genericComponent()({name:"VSlideGroupItem",props:o.makeGroupItemProps(),emits:{"group:selected":t=>!0},setup(t,p){let{slots:l}=p;const r=o.useGroupItem(t,o.VSlideGroupSymbol);return()=>{var a;return(a=l.default)==null?void 0:a.call(l,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}}),ve={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(t,{emit:p}){const l=p;e.inject("list");const r=e.inject("items"),a=t;function s(d){return d=d%a.colors.length,a.colorVariant?a.colors[d]+"-"+a.colorVariant:a.colors[d]}function i(d,n,u){d[u]?!d[u].includes(n)&&d[u].push(n):d[u]=[n]}const c=e.computed(()=>{const d={};if(r.value)for(var n of r.value){const f=n[a.field];if(Array.isArray(f))if(f.length)for(var u of f)i(d,n,u);else i(d,n,null);else i(d,n,f)}return d});return(d,n)=>(e.openBlock(),e.createBlock(o.VSheet,null,{default:e.withCtx(()=>[e.createVNode(o.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.headers,(u,f)=>(e.openBlock(),e.createBlock(qe,{key:u.value},{default:e.withCtx(({selectedClass:y})=>[e.createVNode(o.VCard,{width:"400",class:e.normalizeClass(["ma-3",y]),color:s(f),lines:"two"},{default:e.withCtx(()=>[e.createVNode(o.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.title),1)]),_:2},1024),e.createVNode(o.VList,{"bg-color":s(f)},{default:e.withCtx(()=>[c.value&&c.value[u.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(c.value[u.value],h=>e.renderSlot(d.$slots,"item",{key:h.id,header:u,item:h},()=>[e.createVNode(o.VListItem,{title:h[a.itemTitle],value:a.itemValue&&h[a.itemValue],onClick:B=>l("click",h)},{append:e.withCtx(()=>[e.renderSlot(d.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},le=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(t){const p=e.useSlots(),l=D.filterSlots(p,"item.",{exclude:["item.actions"]}),r=e.inject("panel"),a=e.inject("list"),s=e.inject("items"),i=e.inject("user"),c=t,d=e.computed(()=>c.headers.reduce((f,y)=>(f.push(typeof y=="string"?{key:y,title:v.t(v.tKeys.field(y))}:{key:y.key,title:v.t(y.title)}),f),[]));function n(f){a.filters.page=f.page,a.filters.page_size=f.itemsPerPage,a.filters.ordering=f.sortBy.map(({key:y,order:h})=>h=="asc"?y:`-${y}`)}function u(f,y){r.show({view:"detail.edit",value:y})}return(f,y)=>{var h;return e.openBlock(),e.createBlock(o.VDataTableServer,{items:e.unref(s),"item-index":"id","items-length":e.unref(a).count||e.unref(s).length,"items-per-page":c.itemsPerPage,loading:(h=e.unref(a).state)==null?void 0:h.isProcessing,headers:d.value,"no-data-text":e.unref(v.t)("lists.empty"),class:"align-top-table","onUpdate:options":n},e.createSlots({"item.actions":e.withCtx(({item:B})=>[e.unref(i).can([B.constructor,"change"],B)?(e.openBlock(),e.createBlock(G,{key:0,icon:"mdi-pencil",button:"",title:e.unref(v.t)("actions.edit"),item:B,run:u},null,8,["title","item"])):e.unref(i).can([B.constructor,"view"],B)?(e.openBlock(),e.createBlock(G,{key:1,icon:"mdi-eye-outline",button:"",title:e.unref(v.t)("actions.edit"),item:B,run:u},null,8,["title","item"])):e.createCommentVNode("",!0),e.renderSlot(f.$slots,"item.actions",{value:B,dense:!0,button:!0})]),_:2},[e.unref(s).length?void 0:{name:"loading",fn:e.withCtx(()=>[e.createVNode(o.VSkeletonLoader,{type:"table-row@10"})]),key:"0"},e.renderList(e.unref(l),(B,F)=>({name:F,fn:e.withCtx(N=>[e.renderSlot(f.$slots,F,e.normalizeProps(e.guardReactiveProps(N)))])}))]),1032,["items","items-length","items-per-page","loading","headers","no-data-text"])}}}),W={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(t){const p=e.useSlots(),l=t;let r=e.ref(!1);e.watch(()=>l.state.state,i=>{l.delay&&i==D.States.PROCESSING&&(r.value=!1,window.setTimeout(()=>{r.value=!0},5e3))});const a=e.computed(()=>{var i;return((i=l.state)==null?void 0:i.isProcessing)&&(!l.delay||r.value)}),s=e.computed(()=>{var i,c;return(c=(i=l.state)==null?void 0:i.data)==null?void 0:c.messages});return(i,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.state.isNone&&e.unref(p).none?(e.openBlock(),e.createBlock(e.unref(o.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:t.state,title:t.noneTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"none",{state:t.state})]),_:3},8,["state","title"])):a.value?(e.openBlock(),e.createBlock(e.unref(o.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.processingTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"processing",{state:t.state},()=>[c[0]||(c[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):l.state.isError?(e.openBlock(),e.createBlock(e.unref(o.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.errorTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"error",{state:t.state},()=>[c[1]||(c[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(i.$slots,"error-detail",{state:t.state})]),_:3},8,["state","title"])):l.state.isOk?(e.openBlock(),e.createBlock(e.unref(o.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:t.state,title:t.okTitle},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"ok",{state:t.state},()=>[c[2]||(c[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),s.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(o.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,d=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(d),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"ok-detail",{state:t.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(i.$slots,"default",{state:l.state})],64))}},Ge={class:"text-right"},J={__name:"OxValidationBtn",props:{resetLabel:String,resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:String,validateIcon:{type:String,default:"mdi-content-save"},processingLabel:String,processingIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(t,{emit:p}){const l=p,r=t;return(a,s)=>(e.openBlock(),e.createElementBlock("div",Ge,[e.createVNode(o.VBtn,{color:"error",class:"me-2","prepend-icon":r.resetIcon,onClick:s[0]||(s[0]=i=>l("reset")),disabled:r.disabled},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"discard",{},()=>[e.createTextVNode(e.toDisplayString(r.resetLabel||e.unref(D.t)("actions.discard")),1)])]),_:3},8,["prepend-icon","disabled"]),r.state.isSending||r.state.isProcessing?(e.openBlock(),e.createBlock(o.VBtn,{key:0,color:"primary","prepend-icon":r.processingIcon,disabled:""},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"processing",{},()=>[e.createTextVNode(e.toDisplayString(r.processingLabel||e.unref(D.t)("actions.saving")),1)])]),_:3},8,["prepend-icon"])):(e.openBlock(),e.createBlock(o.VBtn,{key:1,color:"primary","prepend-icon":r.validateIcon,onClick:s[1]||(s[1]=i=>l("validate")),disabled:r.disabled||r.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(r.validateLabel||e.unref(D.t)("actions.save")),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},We={key:0},Ye={class:"text-right mt-3"},Ve={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(t,{emit:p}){const l=e.useTemplateRef("password"),r=t,a=e.reactive({username:"",password:""}),s=e.ref(!1),i=e.reactive(new D.State);function c(n=!0){D.reset(a,{username:"",password:""}),n&&i.none()}async function d(){i.processing();try{const n=await fetch(r.url,{method:"POST",headers:D.config$1.axiosConfig.headers,body:JSON.stringify(a)});n.status==200?(a.credentials="",a.password="",i.ok(await n.json()),r.next&&(window.location.href=r.next)):i.error(await n.json())}catch(n){i.ok((n==null?void 0:n.message)||n)}}return(n,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(W),{state:i},{none:e.withCtx(({state:f})=>u[7]||(u[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:f})=>[r.next?(e.openBlock(),e.createElementBlock("p",We,[u[8]||(u[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(r.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:f})=>{var y,h;return[e.createVNode(H,{errors:(y=f.data)==null?void 0:y.username},null,8,["errors"]),e.createVNode(H,{errors:(h=f.data)==null?void 0:h.password},null,8,["errors"])]}),_:1},8,["state"]),i.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(o.VTextField,{variant:"underlined",label:"Enter login",modelValue:a.username,"onUpdate:modelValue":u[0]||(u[0]=f=>a.username=f),onKeyup:u[1]||(u[1]=e.withKeys(e.withModifiers(f=>e.unref(l).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(o.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:a.password,"onUpdate:modelValue":u[2]||(u[2]=f=>a.password=f),type:s.value?"text":"password","append-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:append":u[3]||(u[3]=f=>s.value=!s.value),onKeyup:u[4]||(u[4]=e.withKeys(e.withModifiers(f=>d(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",Ye,[e.renderSlot(n.$slots,"default",{value:a.password},()=>[a.username&&a.password?(e.openBlock(),e.createBlock(J,{key:0,"validate-label":"Login!",onValidate:u[5]||(u[5]=f=>d()),onReset:u[6]||(u[6]=f=>c()),state:i},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},ne=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(t){const p=e.useSlots(),l=t,r=v.filterSlots(p,"views."),a=e.ref(!1);e.onMounted(()=>{a.value=!0}),e.onUnmounted(()=>{a.value=!1});const s=e.inject("panels"),i=e.inject("panel");return(c,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.state?(e.openBlock(),e.createBlock(W,{key:0,state:l.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.unref(p).prepend&&e.unref(s).panel==e.unref(i).name?e.renderSlot(c.$slots,"prepend",{key:1}):e.createCommentVNode("",!0),e.createVNode(o.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!a.value||e.unref(s).panel!=l.name},[l.icon?(e.openBlock(),e.createBlock(o.VIcon,{key:0,icon:l.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(l.title)+" ",1),e.renderSlot(c.$slots,"append-title")],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!a.value||e.unref(s).panel!=l.name},[e.renderSlot(c.$slots,"app-bar-right"),l.help?(e.openBlock(),e.createBlock(o.VBtn,{key:0,class:"ml-3",href:l.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(c.$slots,"top"),e.renderSlot(c.$slots,"default",{},()=>[e.unref(r)?(e.openBlock(),e.createBlock(o.VWindow,{key:0,modelValue:e.unref(i).view,"onUpdate:modelValue":d[0]||(d[0]=n=>e.unref(i).view=n)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(n,u)=>(e.openBlock(),e.createBlock(o.VWindowItem,{key:n,value:n},{default:e.withCtx(()=>[e.renderSlot(c.$slots,u)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(c.$slots,"bottom")]),_:3}),e.unref(p).append&&e.unref(s).panel==e.unref(i).name?e.renderSlot(c.$slots,"append",{key:2}):e.createCommentVNode("",!0)],64))}}),oe=e.defineComponent({__name:"OxView",props:{title:String},setup(t){const p=t,l=e.ref(null),r=e.useSlots(),a=v.filterSlots(r,"tab.",{exclude:["tab.default"]}),s=v.filterSlots(r,"window.");return(i,c)=>e.unref(a)&&Object.keys(e.unref(a)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(o.VTabs,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=d=>l.value=d)},{default:e.withCtx(()=>[e.unref(r).default?e.renderSlot(i.$slots,"tab",{key:0},()=>[e.createVNode(o.VTab,{text:p==null?void 0:p.title,value:"default"},null,8,["text"])]):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(d,n)=>(e.openBlock(),e.createBlock(o.VTab,{value:d},{default:e.withCtx(()=>[e.renderSlot(i.$slots,n)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"]),e.createVNode(o.VTabsWindow,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=d=>l.value=d)},{default:e.withCtx(()=>[e.unref(r).default?(e.openBlock(),e.createBlock(o.VTabsWindowItem,{key:0,value:"default"},{default:e.withCtx(()=>[e.renderSlot(i.$slots,"default")]),_:3})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),(d,n)=>(e.openBlock(),e.createBlock(o.VTabsWindowItem,{value:d},{default:e.withCtx(()=>[e.renderSlot(i.$slots,n)]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(i.$slots,"default",{key:1})}}),ae=e.defineComponent({__name:"OxModelEditor",props:{repo:{},initial:{},name:{},url:{},saved:{type:Function}},setup(t,{expose:p}){const l=e.ref(null),r=e.inject("user"),a=t,{editor:s,edited:i}=v.useModelEditor({props:a}),c=e.computed(()=>r.can([s.repo.use,"change",a.initial])),d=e.computed(()=>({editor:s,edited:i,form:l.value,editable:c.value,disabled:!c.value,value:s.value,model:s.repo.use}));return e.watch(()=>s.errors&&Object.values(s.errors),()=>l.value.validate()),p({editor:s,edited:i,form:l,editable:c}),(n,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(n.$slots,"prepend",e.normalizeProps(e.guardReactiveProps(d.value))),e.createVNode(ee,{ref_key:"form",ref:l,modelValue:e.unref(s).valid,"onUpdate:modelValue":u[0]||(u[0]=f=>e.unref(s).valid=f),disabled:!c.value},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"default",e.normalizeProps(e.guardReactiveProps(d.value)))]),_:3},8,["modelValue","disabled"]),e.renderSlot(n.$slots,"append",e.normalizeProps(e.guardReactiveProps(d.value)))],64))}}),He={key:0,class:"mb-3"},ke=e.defineComponent({__name:"OxModelEdit",props:{sendFormData:{type:Boolean},hideValidationBtn:{type:Boolean},repo:{},initial:{},name:{},url:{},saved:{type:Function}},setup(t,{expose:p}){const l=t,r=e.ref(null);function a(){r.value.editor.reset(l.initial)}function s(){const i=r.value;return l.sendFormData?i.editor.save(new FormData(i.form.value.$el)):i.editor.save()}return p({modelEditor:r,save:s,reset:a}),(i,c)=>{var d;return e.openBlock(),e.createElementBlock(e.Fragment,null,[(d=r.value)!=null&&d.editor?(e.openBlock(),e.createBlock(W,{key:0,state:r.value.editor.state},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(o.VContainer,{class:"ox-model-edit"},{default:e.withCtx(()=>[e.createVNode(e.unref(ae),e.mergeProps({ref_key:"modelEditor",ref:r},l),{prepend:e.withCtx(n=>[l.hideValidationBtn?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",He,[e.renderSlot(i.$slots,"prepend",e.mergeProps(n,{save:s,reset:a}),()=>[n.editable&&n.edited?(e.openBlock(),e.createBlock(J,{key:0,onValidate:c[0]||(c[0]=u=>s()),onReset:c[1]||(c[1]=u=>a()),state:n.editor.state,"validate-disabled":n.editor.valid===!1},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)])]))]),default:e.withCtx(n=>[e.renderSlot(i.$slots,"default",e.mergeProps(n,{save:s,reset:a}))]),append:e.withCtx(n=>[e.renderSlot(i.$slots,"append",e.mergeProps(n,{save:s,reset:a}))]),_:3},16)]),_:3})],64)}}}),we=e.defineComponent({__name:"OxModelPanel",props:{repo:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},fetchRelations:{type:Boolean,default:!0},search:{default:"search"},warning:{},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(t,{expose:p}){const l=e.useSlots(),r=v.filterSlots(l,"views.list."),a=v.filterSlots(l,"item."),s=v.filterSlots(l,"views.detail.edit."),i=e.useTemplateRef("filters"),c=t,d=e.inject("context"),{panel:n,list:u,items:f,next:y,prev:h}=e.inject("panel")??v.useModelPanel({props:c}),B=n.panels;e.computed(()=>{var V;return d.user.can([n.model,(V=n.value)!=null&&V.id?"change":"add"])});const{showFilters:F}=e.toRefs(n),N=e.computed(()=>[...c.headers,{key:"actions",title:v.t("actions")}]);function C(V){V!=null&&V.id?n.value=n.repo.whereId(V.id).first():n.value=V,u.load()}const w=e.computed(()=>({panel:n,panels:B,list:u,items:f,context:d,saved:C,value:n.value}));return e.watch(()=>Object.values(u.filters),()=>u.load()),p({list:u,panel:n,items:f,next:y,prev:h}),(V,k)=>(e.openBlock(),e.createBlock(ne,{name:c.name,title:e.unref(n).title,icon:e.unref(n).icon,state:e.unref(u).state,index:c.index},e.createSlots({"app-bar-right":e.withCtx(()=>[e.renderSlot(V.$slots,"app-bar-right",e.normalizeProps(e.guardReactiveProps(w.value))),e.unref(n).view.startsWith("list.")?(e.openBlock(),e.createBlock(o.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(V.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(w.value))),e.createVNode(o.VBtn,{title:e.unref(v.t)("actions.list.reload"),"aria-label":e.unref(v.t)("actions.list.reload"),onClick:k[0]||(k[0]=P=>e.unref(u).load())},{default:e.withCtx(()=>[e.createVNode(o.VIcon,null,{default:e.withCtx(()=>k[10]||(k[10]=[e.createTextVNode("mdi-reload")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(i)?(e.openBlock(),e.createBlock(o.VBtn,{key:0,title:e.unref(F)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),"aria-label":e.unref(F)?e.unref(v.t)("filters.hide"):e.unref(v.t)("filters.show"),onClick:k[1]||(k[1]=P=>F.value=!e.unref(F)),active:e.unref(F)},{default:e.withCtx(()=>[e.createVNode(o.VIcon,{icon:e.unref(i).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(n).view.startsWith("detail.")&&e.unref(n).value?(e.openBlock(),e.createBlock(o.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(V.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(w.value))),e.unref(n).view=="detail.edit"&&e.unref(n).value?(e.openBlock(),e.createBlock(o.VMenu,{key:0},{activator:e.withCtx(({props:P})=>[e.createVNode(o.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},P),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(v.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(o.VList,null,{default:e.withCtx(()=>[e.renderSlot(V.$slots,"item.actions",{value:e.unref(n).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(o.VBtn,{disabled:!e.unref(h),title:e.unref(v.t)("prev"),"aria-label":e.unref(v.t)("prev"),onClick:k[2]||(k[2]=e.withModifiers(P=>e.unref(n).show({view:e.unref(n).view,value:e.unref(h)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(o.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(o.VBtn,{disabled:!e.unref(y),title:e.unref(v.t)("next"),"aria-label":e.unref(v.t)("next"),onClick:k[3]||(k[3]=e.withModifiers(P=>e.unref(n).show({view:e.unref(n).view,value:e.unref(y)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(o.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(o.VBtnToggle,{class:"ml-3",color:"secondary",density:"compact",variant:"tonal",mandatory:"",modelValue:e.unref(n).view,"onUpdate:modelValue":k[9]||(k[9]=P=>e.unref(n).view=P)},{default:e.withCtx(()=>{var P;return[e.createVNode(o.VBtn,{value:"list.table",onClickCapture:k[4]||(k[4]=e.withModifiers(x=>e.unref(n).show({view:"list.table"}),["stop"])),title:e.unref(v.t)("panels.nav.table"),"aria-label":e.unref(v.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(o.VIcon,null,{default:e.withCtx(()=>k[11]||(k[11]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(l)["views.list.cards"]?(e.openBlock(),e.createBlock(o.VBtn,{key:0,value:"list.cards",onClickCapture:k[5]||(k[5]=e.withModifiers(x=>e.unref(n).show({view:"list.cards"}),["stop"])),title:e.unref(v.t)("panels.nav.cards"),"aria-label":e.unref(v.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(o.VIcon,null,{default:e.withCtx(()=>k[12]||(k[12]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(l)["views.list.kanban"]?(e.openBlock(),e.createBlock(o.VBtn,{key:1,value:"list.kanban",onClickCapture:k[6]||(k[6]=e.withModifiers(x=>e.unref(n).show({view:"list.kanban"}),["stop"])),title:e.unref(v.t)("panels.nav.kanban"),"aria-label":e.unref(v.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(o.VIcon,null,{default:e.withCtx(()=>k[13]||(k[13]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(l)["views.detail.edit"]||e.unref(s)?(e.openBlock(),e.createBlock(o.VBtn,{key:2,value:"detail.edit",onClickCapture:k[7]||(k[7]=e.withModifiers(x=>e.unref(n).show({view:"detail.edit",value:e.unref(n).value}),["stop"])),disabled:!((P=e.unref(n).value)!=null&&P.id)&&e.unref(n).view!="detail.edit",title:e.unref(v.t)("panels.nav.edit"),"aria-label":e.unref(v.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(o.VIcon,null,{default:e.withCtx(()=>k[14]||(k[14]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.unref(s)?(e.openBlock(),e.createBlock(o.VBtn,{key:3,value:"detail.add",onClickCapture:k[8]||(k[8]=e.withModifiers(x=>e.unref(n).create(),["stop"])),title:e.unref(v.t)("panels.nav.add"),"aria-label":e.unref(v.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(o.VIcon,null,{default:e.withCtx(()=>k[15]||(k[15]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(V.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(w.value)))]}),_:3},8,["modelValue"]),e.renderSlot(V.$slots,"app-bar-end",e.normalizeProps(e.guardReactiveProps(w.value)))]),top:e.withCtx(()=>[c.warning?(e.openBlock(),e.createBlock(o.VAlert,{key:0,type:"warning",variant:"tonal",text:c.warning},null,8,["text"])):e.createCommentVNode("",!0),e.renderSlot(V.$slots,"top"),e.withDirectives(e.createVNode(te,{ref_key:"filters",ref:i,search:c.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(P=>[e.renderSlot(V.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(P)))]),_:3},8,["search"]),[[e.vShow,e.unref(n).view.startsWith("list.")&&e.unref(F)]])]),_:2},[e.unref(l)["append-title"]?{name:"append-title",fn:e.withCtx(()=>[e.renderSlot(V.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(w.value)))]),key:"0"}:void 0,e.unref(l).prepend?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(V.$slots,"prepend",e.normalizeProps(e.guardReactiveProps(w.value)))]),key:"1"}:void 0,e.unref(l).append?{name:"append",fn:e.withCtx(()=>[e.renderSlot(V.$slots,"append",e.normalizeProps(e.guardReactiveProps(w.value)))]),key:"2"}:void 0,e.unref(l)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(le,{headers:N.value},e.createSlots({_:2},[e.renderList(e.unref(a),(P,x)=>({name:x,fn:e.withCtx(z=>[e.renderSlot(V.$slots,x,e.normalizeProps(e.guardReactiveProps(z)))])}))]),1032,["headers"])]),key:"3"},e.renderList(e.unref(r),(P,x)=>({name:x,fn:e.withCtx(()=>[e.renderSlot(V.$slots,x,e.normalizeProps(e.guardReactiveProps(w.value)))])})),e.unref(l)["views.detail.edit"]||e.unref(s)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(e.unref(oe),{title:e.unref(v.t)(`models.${e.unref(n).model.entity}`)},e.createSlots({_:2},[e.renderList(e.unref(s),(P,x)=>({name:P,fn:e.withCtx(()=>[e.renderSlot(V.$slots,x,e.normalizeProps(e.guardReactiveProps(w.value)))])}))]),1032,["title"])]),key:"4"}:void 0]),1032,["name","title","icon","state","index"]))}}),Je=Object.freeze(Object.defineProperty({__proto__:null,OxAction:G,OxActionModelDelete:ue,OxActions:de,OxApp:ce,OxAutocomplete:pe,OxComponent:me,OxFieldDetails:H,OxFormList:fe,OxListFilters:te,OxListKanban:ve,OxListTable:le,OxLogin:Ve,OxModelEdit:ke,OxModelEditor:ae,OxModelPanel:we,OxPanel:ne,OxStateAlert:W,OxValidationBtn:J,OxView:oe},Symbol.toStringTag,{value:"Module"})),Qe={el:"#app",delimiters:["[[","]]"],components:{...Je,...Fe.components}};exports.App=Qe;exports.OxAction=G;exports.OxActionModelDelete=ue;exports.OxActions=de;exports.OxApp=ce;exports.OxAutocomplete=pe;exports.OxComponent=me;exports.OxFieldDetails=H;exports.OxFormList=fe;exports.OxListFilters=te;exports.OxListKanban=ve;exports.OxListTable=le;exports.OxLogin=Ve;exports.OxModelEdit=ke;exports.OxModelEditor=ae;exports.OxModelPanel=we;exports.OxPanel=ne;exports.OxStateAlert=W;exports.OxValidationBtn=J;exports.OxView=oe;
//# sourceMappingURL=components.cjs.map
