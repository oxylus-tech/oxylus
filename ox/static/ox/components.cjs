"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),f=require("ox"),n=require("./VAlert-BQiprWaW.cjs"),C=require("./theme-Bxzsxwfr.cjs"),S=require("./auth-3lDhBERb.cjs"),Z=require("ox/vendor"),T=e.defineComponent({__name:"OxAction",props:{item:{},title:{},icon:{},color:{},button:{type:Boolean},confirm:{},permissions:{},run:{}},emits:["completed"],setup(l,{emit:u}){const t=l,a=u,o=e.inject("context"),{run:p,processing:s,allowed:r}=f.useAction({user:o.user,emits:a,props:t});return(i,m)=>e.unref(r)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.button?(e.openBlock(),e.createBlock(n.VBtn,{key:0,variant:"text",disabled:e.unref(s),color:t.color,icon:t.icon,title:t.title,"aria-label":t.title,onClick:e.withModifiers(e.unref(p),["stop"])},null,8,["disabled","color","icon","title","aria-label","onClick"])):(e.openBlock(),e.createBlock(n.VListItem,{key:1,title:t.title,"base-color":t.color,"prepend-icon":t.icon,disabled:e.unref(s),onClick:e.withModifiers(e.unref(p),["stop"])},null,8,["title","base-color","prepend-icon","disabled","onClick"]))],64)):e.createCommentVNode("",!0)}}),j=e.defineComponent({__name:"OxActionModelDelete",props:{item:{},button:{type:Boolean}},setup(l){const u=e.inject("panel"),t=e.inject("repos"),a=l;async function o(p,s){return await t[s.constructor.entity].api().delete(s.$url(),{delete:a.item.id})}return(p,s)=>(e.openBlock(),e.createBlock(T,{item:a.item,button:a.button,icon:"mdi-delete",color:"error",title:e.unref(f.t)("actions.delete"),confirm:e.unref(f.t)("actions.delete.confirm"),permissions:["delete",(r,i)=>i.id],run:o,onCompleted:s[0]||(s[0]=r=>{var i;return(i=e.unref(u))==null?void 0:i.show({view:e.unref(u).index})})},null,8,["item","button","title","confirm","permissions"]))}}),_={__name:"OxActions",props:{value:Object,dense:{type:Boolean,default:!1},button:{type:Boolean,default:!1},exclude:{type:Array}},setup(l){e.useSlots();const u=l;return(t,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(t.$slots,"before",e.normalizeProps(e.guardReactiveProps(u))),e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps(u))),e.renderSlot(t.$slots,"after",e.normalizeProps(e.guardReactiveProps(u)))],64))}};function ee(l){const u=e.shallowRef(l());let t=-1;function a(){clearInterval(t)}function o(){a(),e.nextTick(()=>u.value=l())}function p(s){const r=s?getComputedStyle(s):{transitionDuration:.2},i=parseFloat(r.transitionDuration)*1e3||200;if(a(),u.value<=0)return;const m=performance.now();t=window.setInterval(()=>{const d=performance.now()-m+i;u.value=Math.max(l()-d,0),u.value<=0&&a()},i)}return e.onScopeDispose(a),{clear:a,time:u,start:p,reset:o}}const te=C.propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...n.makeLocationProps({location:"bottom"}),...n.makePositionProps(),...n.makeRoundedProps(),...n.makeVariantProps(),...C.makeThemeProps(),...C.omit(n.makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ne=C.genericComponent()({name:"VSnackbar",props:te(),emits:{"update:modelValue":l=>!0},setup(l,u){let{slots:t}=u;const a=C.useProxiedModel(l,"modelValue"),{positionClasses:o}=n.usePosition(l),{scopeId:p}=n.useScopeId(),{themeClasses:s}=C.provideTheme(l),{colorClasses:r,colorStyles:i,variantClasses:m}=n.useVariant(l),{roundedClasses:d}=n.useRounded(l),c=ee(()=>Number(l.timeout)),V=e.ref(),v=e.ref(),b=e.shallowRef(!1),x=e.shallowRef(0),y=e.ref(),k=e.inject(n.VuetifyLayoutKey,void 0);C.useToggleScope(()=>!!k,()=>{const g=n.useLayout();e.watchEffect(()=>{y.value=g.mainStyles.value})}),e.watch(a,B),e.watch(()=>l.timeout,B),e.onMounted(()=>{a.value&&B()});let w=-1;function B(){c.reset(),window.clearTimeout(w);const g=Number(l.timeout);if(!a.value||g===-1)return;const N=C.refElement(v.value);c.start(N),w=window.setTimeout(()=>{a.value=!1},g)}function h(){c.reset(),window.clearTimeout(w)}function Y(){b.value=!0,h()}function R(){b.value=!1,B()}function H(g){x.value=g.touches[0].clientY}function J(g){Math.abs(x.value-g.changedTouches[0].clientY)>50&&(a.value=!1)}function Q(){b.value&&R()}const X=e.computed(()=>l.location.split(" ").reduce((g,N)=>(g[`v-snackbar--${N}`]=!0,g),{}));return n.useRender(()=>{const g=n.VOverlay.filterProps(l),N=!!(t.default||t.text||l.text);return e.createVNode(n.VOverlay,e.mergeProps({ref:V,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":l.multiLine&&!l.vertical,"v-snackbar--timer":!!l.timer,"v-snackbar--vertical":l.vertical},X.value,o.value,l.class],style:[y.value,l.style]},g,{modelValue:a.value,"onUpdate:modelValue":P=>a.value=P,contentProps:e.mergeProps({class:["v-snackbar__wrapper",s.value,r.value,d.value,m.value],style:[i.value],onPointerenter:Y,onPointerleave:R},g.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:H,onTouchend:J,onAfterLeave:Q},p),{default:()=>{var P,F;return[n.genOverlays(!1,"v-snackbar"),l.timer&&!b.value&&e.createVNode("div",{key:"timer",class:"v-snackbar__timer"},[e.createVNode(n.VProgressLinear,{ref:v,color:typeof l.timer=="string"?l.timer:"info",max:l.timeout,"model-value":c.time.value},null)]),N&&e.createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((P=t.text)==null?void 0:P.call(t))??l.text,(F=t.default)==null?void 0:F.call(t)]),t.actions&&e.createVNode(n.VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[e.createVNode("div",{class:"v-snackbar__actions"},[t.actions({isActive:a})])]})]},activator:t.activator})}),n.forwardRefs({},V)}}),oe={class:"nav-home"},le=["src"];var D;const z=e.defineComponent({__name:"OxApp",props:{apiUrl:{},logo:{},dataEl:{default:(D=document.body.dataset)==null?void 0:D.appData},models:{},data:{}},setup(l){const u=e.useSlots(),t=l,a=e.reactive({drawer:!0}),o=f.useAppContext(t),p=f.usePanels();return e.watch(()=>[o.state.state,o.state.data],()=>{o.showState=!0}),e.onErrorCaptured((s,r,i)=>{o.state.error(`${s}`)}),(s,r)=>(e.openBlock(),e.createBlock(n.VApp,null,{default:e.withCtx(()=>[e.createVNode(ne,{modelValue:e.unref(o).showState,"onUpdate:modelValue":r[0]||(r[0]=i=>e.unref(o).showState=i),color:e.unref(o).state.color,"multi-line":""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(o).state.data),1)]),_:1},8,["modelValue","color"]),e.createVNode(n.VAppBar,{color:"primary"},{prepend:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:"mdi-apps",title:e.unref(f.t)("nav.panels"),"aria-label":e.unref(f.t)("nav.panels"),onClick:r[1]||(r[1]=e.withModifiers(i=>a.drawer=!a.drawer,["stop"]))},null,8,["title","aria-label"]),e.unref(u)["app-nav"]&&!a.drawer2?(e.openBlock(),e.createBlock(n.VAppBarNavIcon,{key:0,icon:"mdi-menu",onClick:r[2]||(r[2]=i=>{a.drawer2=!0,a.drawer=!1})})):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createVNode(n.VAppBarTitle,{id:"app-bar-sheet-title"}),e.createVNode(n.VAppBarTitle,{id:"app-bar-title"},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"title",{context:e.unref(o)})]),_:3}),e.createVNode(n.VSpacer),r[5]||(r[5]=e.createElementVNode("div",{id:"app-bar-right",class:"mr-3"},null,-1)),e.renderSlot(s.$slots,"app-bar-right",{context:e.unref(o)})]),_:3}),e.createVNode(n.VNavigationDrawer,{theme:"dark",modelValue:a.drawer,"onUpdate:modelValue":r[3]||(r[3]=i=>a.drawer=i)},e.createSlots({default:e.withCtx(()=>[e.createElementVNode("a",oe,[s.logo?(e.openBlock(),e.createElementBlock("img",{key:0,src:s.logo,class:"logo"},null,8,le)):e.createCommentVNode("",!0)]),e.renderSlot(s.$slots,"nav-start",{context:e.unref(o)}),e.renderSlot(s.$slots,"nav-list",{context:e.unref(o)})]),_:2},[e.unref(u)["nav-end"]?{name:"append",fn:e.withCtx(()=>[e.renderSlot(s.$slots,"nav-end",{context:e.unref(o)})]),key:"0"}:void 0]),1032,["modelValue"]),e.createVNode(n.VMain,null,{default:e.withCtx(()=>[e.renderSlot(s.$slots,"main",{},()=>[e.createVNode(n.VTabsWindow,{modelValue:e.unref(p).panel,"onUpdate:modelValue":r[4]||(r[4]=i=>e.unref(p).panel=i)},{default:e.withCtx(i=>[e.renderSlot(s.$slots,"default",e.mergeProps(i,{context:e.unref(o)}))]),_:3},8,["modelValue"])])]),_:3})]),_:3}))}}),U={props:{src:String,is:String},setup(l){const u=e.shallowRef(null),t=e.computed(()=>{if(l.is)return l.is;let o=l.src.substring(l.src.lastIndexOf("/")+1);if(o&&(o=o.substring(0,o.indexOf("."))),!o)throw Error("`is` not provided and could not be deducted from `src`.");return o});function a(){u.value=f.defineAsyncComponent(l.src,t.value)}return e.watch(()=>l.src,a),a(),()=>e.h(u.value,l)}},re={class:"password-error"},O={__name:"OxFieldDetails",props:{state:Object,errors:Array},setup(l){const u=l;return(t,a)=>u.errors?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.errors,o=>(e.openBlock(),e.createElementBlock("div",re,[e.createVNode(n.VIcon,{icon:"mdi-alert-circle-outline"}),e.createTextVNode(" "+e.toDisplayString(o),1)]))),256)):e.createCommentVNode("",!0)}},L={__name:"OxListFilters",props:{search:String},setup(l,{expose:u}){const t=e.inject("list"),a=l,o=e.computed(()=>{const r=t.filters;return r&&Object.entries(r).some(([i,m])=>!i.startsWith("page")&&!i.startsWith("ordering")&&!!m)}),p=e.computed(()=>o.value?"mdi-filter-check":"mdi-filter-outline");function s(){t.filters={},t.load()}return u({icon:p,hasFilters:o,reset:s}),(r,i)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:i[2]||(i[2]=e.withModifiers(m=>e.unref(t).load(),["prevent"])),class:"width-full"},[e.createVNode(n.VToolbar,{dense:"",color:"transparent"},{default:e.withCtx(()=>[e.createVNode(n.VAppBarNavIcon,{icon:p.value,readonly:""},null,8,["icon"]),a.search&&e.unref(t).filters?(e.openBlock(),e.createBlock(n.VTextField,{key:0,label:e.unref(f.t)("filters.search"),density:"compact",class:"ml-2",modelValue:e.unref(t).filters[a.search],"onUpdate:modelValue":i[0]||(i[0]=m=>e.unref(t).filters[a.search]=m),"hide-details":""},null,8,["label","modelValue"])):e.createCommentVNode("",!0),e.renderSlot(r.$slots,"default",{list:e.unref(t),filters:e.unref(t).filters}),e.createVNode(n.VBtn,{onClick:i[1]||(i[1]=e.withModifiers(m=>e.unref(t).load(),["stop"])),class:"ml-2",icon:"mdi-check","aria-label":r.$t("filters.apply"),title:e.unref(f.t)("filters.apply")},null,8,["aria-label","title"]),o.value?(e.openBlock(),e.createBlock(n.VBtn,{key:1,onClick:e.withModifiers(s,["stop"]),icon:"mdi-backspace","aria-label":e.unref(f.t)("filters.reset"),title:e.unref(f.t)("filters.reset")},null,8,["aria-label","title"])):e.createCommentVNode("",!0)]),_:3})],32))}},ae=C.genericComponent()({name:"VSlideGroupItem",props:n.makeGroupItemProps(),emits:{"group:selected":l=>!0},setup(l,u){let{slots:t}=u;const a=n.useGroupItem(l,n.VSlideGroupSymbol);return()=>{var o;return(o=t.default)==null?void 0:o.call(t,{isSelected:a.isSelected.value,select:a.select,toggle:a.toggle,selectedClass:a.selectedClass.value})}}}),W={__name:"OxListKanban",props:{itemTitle:String,itemValue:String,field:String,headers:Array,colors:{type:Array,default:()=>["purple","blue","teal","lime","orange","blue-gray","pink","indigo","cyan","light-green","amber","brown","red","deep-purple","light-blue","green","yellow","deep-orange"]},colorVariant:{type:String,default:"lighten-2"}},emits:["click"],setup(l,{emit:u}){const t=u;e.inject("list");const a=e.inject("items"),o=l;function p(i){return i=i%o.colors.length,o.colorVariant?o.colors[i]+"-"+o.colorVariant:o.colors[i]}function s(i,m,d){i[d]?!i[d].includes(m)&&i[d].push(m):i[d]=[m]}const r=e.computed(()=>{const i={};if(a.value)for(var m of a.value){const c=m[o.field];if(Array.isArray(c))if(c.length)for(var d of c)s(i,m,d);else s(i,m,null);else s(i,m,c)}return i});return(i,m)=>(e.openBlock(),e.createBlock(n.VSheet,null,{default:e.withCtx(()=>[e.createVNode(n.VSlideGroup,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.headers,(d,c)=>(e.openBlock(),e.createBlock(ae,{key:d.value},{default:e.withCtx(({selectedClass:V})=>[e.createVNode(n.VCard,{width:"400",class:e.normalizeClass(["ma-3",V]),color:p(c),lines:"two"},{default:e.withCtx(()=>[e.createVNode(n.VCardTitle,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.title),1)]),_:2},1024),e.createVNode(n.VList,{"bg-color":p(c)},{default:e.withCtx(()=>[r.value&&r.value[d.value]?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(r.value[d.value],v=>e.renderSlot(i.$slots,"item",{key:v.id,header:d,item:v},()=>[e.createVNode(n.VListItem,{title:v[o.itemTitle],value:o.itemValue&&v[o.itemValue],onClick:b=>t("click",v)},{append:e.withCtx(()=>[e.renderSlot(i.$slots,"item.action")]),_:2},1032,["title","value","onClick"])])),128)):e.createCommentVNode("",!0)]),_:2},1032,["bg-color"])]),_:2},1032,["class","color"])]),_:2},1024))),128))]),_:3})]),_:3}))}},E=e.defineComponent({__name:"OxListTable",props:{headers:Array,edit:Boolean},setup(l){const u=e.useSlots(),t=S.filterSlots(u,"item.",{exclude:["item.actions"]}),a=e.inject("panel"),o=e.inject("list"),p=e.inject("items"),s=new S.Permissions("change"),r=l,i=e.computed(()=>r.headers.reduce((c,V)=>(c.push(typeof V=="string"?{key:V,title:f.t(f.tKeys.field(V))}:V),c),[]));function m(c){return o.fetch({filters:{page:c.page,page_size:c.itemsPerPage,ordering:c.sortBy.map(({key:V,order:v})=>v=="asc"?V:`-${V}`)}})}function d(c,V){a.show({view:"detail.edit",value:V})}return(c,V)=>{var v;return e.openBlock(),e.createBlock(n.VDataTableServer,{items:e.unref(p),"item-index":"id","items-length":e.unref(o).count||e.unref(p).length,loading:(v=e.unref(o).state)==null?void 0:v.isProcessing,headers:i.value,"onUpdate:options":m},e.createSlots({loading:e.withCtx(()=>[e.createVNode(n.VSkeletonLoader,{type:"table-row@10"})]),"item.actions":e.withCtx(({item:b})=>[l.edit?(e.openBlock(),e.createBlock(T,{key:0,icon:"mdi-pencil",button:"",title:e.unref(f.t)("actions.edit"),permissions:e.unref(s),item:b,run:d},null,8,["title","permissions","item"])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"item.actions",{value:b,dense:!0,button:!0})]),_:2},[e.renderList(e.unref(t),(b,x)=>({name:x,fn:e.withCtx(y=>[e.renderSlot(c.$slots,x,e.normalizeProps(e.guardReactiveProps(y)))])}))]),1032,["items","items-length","loading","headers"])}}}),$={__name:"OxStateAlert",props:{state:Object,delay:{type:Boolean,default:!1},okTitle:{type:String,default:""},noneTitle:{type:String,default:""},errorTitle:{type:String,default:"Oups..."},processingTitle:{type:String,default:"Processing..."}},setup(l){const u=e.useSlots(),t=l;let a=e.ref(!1);e.watch(()=>t.state.state,s=>{t.delay&&s==S.States.PROCESSING&&(a.value=!1,window.setTimeout(()=>{a.value=!0},5e3))});const o=e.computed(()=>{var s;return((s=t.state)==null?void 0:s.isProcessing)&&(!t.delay||a.value)}),p=e.computed(()=>{var s,r;return(r=(s=t.state)==null?void 0:s.data)==null?void 0:r.messages});return(s,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[t.state.isNone&&e.unref(u).none?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:0,type:"info",variant:"tonal",class:"mb-3",state:l.state,title:l.noneTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"none",{state:l.state})]),_:3},8,["state","title"])):o.value?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:1,type:"info",variant:"tonal",class:"mb-3",closable:"",state:l.state,title:l.processingTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"processing",{state:l.state},()=>[r[0]||(r[0]=e.createTextVNode(" Data are being sent to server, please be patient. If this message persist you might wan't to retry. "))])]),_:3},8,["state","title"])):t.state.isError?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:2,type:"error",variant:"tonal",class:"mb-3",closable:"",state:l.state,title:l.errorTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"error",{state:l.state},()=>[r[1]||(r[1]=e.createTextVNode(" Oups... something wrong happened. "))]),e.renderSlot(s.$slots,"error-detail",{state:l.state})]),_:3},8,["state","title"])):t.state.isOk?(e.openBlock(),e.createBlock(e.unref(n.VAlert),{key:3,type:"success",variant:"tonal",class:"mb-3",closable:"",state:l.state,title:l.okTitle},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"ok",{state:l.state},()=>[r[2]||(r[2]=e.createElementVNode("p",null,"Congrats! Data have been updated.",-1))]),p.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VDivider),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,i=>(e.openBlock(),e.createElementBlock("p",null,e.toDisplayString(i),1))),256))],64)):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"ok-detail",{state:l.state})]),_:3},8,["state","title"])):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default",{state:t.state})],64))}},se={class:"text-right"},A={__name:"OxValidationBtn",props:{resetLabel:{type:String,default:"Reset"},resetIcon:{type:String,default:"mdi-close-circle"},validateLabel:{type:String,default:"Save"},validateIcon:{type:String,default:"mdi-content-save"},disabled:{type:Boolean,default:!1},state:{type:Object,default:()=>State.none()},validateDisabled:{type:Boolean,default:!1}},emits:["validate","reset"],setup(l,{emit:u}){const t=u,a=l;return(o,p)=>(e.openBlock(),e.createElementBlock("div",se,[e.createVNode(e.unref(n.VBtn),{color:"error",class:"me-2","prepend-icon":a.resetIcon,onClick:p[0]||(p[0]=s=>t("reset")),disabled:a.disabled},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"reset",{},()=>[e.createTextVNode(e.toDisplayString(a.resetLabel),1)])]),_:3},8,["prepend-icon","disabled"]),a.state.isSending?(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:0,color:"primary","prepend-icon":"mdi-content-save",disabled:""},{default:e.withCtx(()=>p[2]||(p[2]=[e.createTextVNode(" Saving ")])),_:1})):(e.openBlock(),e.createBlock(e.unref(n.VBtn),{key:1,color:"primary","prepend-icon":a.validateIcon,onClick:p[1]||(p[1]=s=>t("validate")),disabled:a.disabled||a.validateDisabled},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"validate",{},()=>[e.createTextVNode(e.toDisplayString(a.validateLabel),1)])]),_:3},8,["prepend-icon","disabled"]))]))}},ie={key:0},ue={class:"text-right mt-3"},G={__name:"OxLogin",props:{next:{type:String},url:{type:String}},emits:["save","saved"],setup(l,{emit:u}){const t=e.useTemplateRef("password"),a=l,o=e.reactive({username:"",password:""}),p=e.ref(!1),s=e.reactive(new S.State);function r(m=!0){S.reset(o,{username:"",password:""}),m&&s.none()}async function i(){s.processing();try{const m=await fetch(a.url,{method:"POST",headers:S.config$1.axiosConfig.headers,body:JSON.stringify(o)});m.status==200?(o.credentials="",o.password="",s.ok(await m.json()),a.next&&(window.location.href=a.next)):s.error(await m.json())}catch(m){s.ok((m==null?void 0:m.message)||m)}}return(m,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref($),{state:s},{none:e.withCtx(({state:c})=>d[7]||(d[7]=[e.createElementVNode("p",null,"Please enter your credentials in order too proceed...",-1)])),"ok-detail":e.withCtx(({state:c})=>[a.next?(e.openBlock(),e.createElementBlock("p",ie,[d[8]||(d[8]=e.createTextVNode("You soon will be redirected to ")),e.createElementVNode("i",null,e.toDisplayString(a.next),1)])):e.createCommentVNode("",!0)]),error:e.withCtx(({state:c})=>{var V,v;return[e.createVNode(O,{errors:(V=c.data)==null?void 0:V.username},null,8,["errors"]),e.createVNode(O,{errors:(v=c.data)==null?void 0:v.password},null,8,["errors"])]}),_:1},8,["state"]),s.isOk?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTextField,{variant:"underlined",label:"Enter login",modelValue:o.username,"onUpdate:modelValue":d[0]||(d[0]=c=>o.username=c),onKeyup:d[1]||(d[1]=e.withKeys(e.withModifiers(c=>e.unref(t).focus(),["stop"]),["enter"]))},null,8,["modelValue"]),e.createVNode(n.VTextField,{variant:"underlined",ref:"password",label:"Enter password",modelValue:o.password,"onUpdate:modelValue":d[2]||(d[2]=c=>o.password=c),type:p.value?"text":"password","append-icon":p.value?"mdi-eye":"mdi-eye-off","onClick:append":d[3]||(d[3]=c=>p.value=!p.value),onKeyup:d[4]||(d[4]=e.withKeys(e.withModifiers(c=>i(),["stop"]),["enter"]))},null,8,["modelValue","type","append-icon"]),e.createElementVNode("div",ue,[e.renderSlot(m.$slots,"default",{value:o.password},()=>[o.username&&o.password?(e.openBlock(),e.createBlock(A,{key:0,"validate-label":"Login!",onValidate:d[5]||(d[5]=c=>i()),onReset:d[6]||(d[6]=c=>r()),state:s},null,8,["state"])):e.createCommentVNode("",!0)])])],64))],64))}},I=e.defineComponent({__name:"OxPanel",props:{name:{},index:{},view:{},value:{},state:{},help:{},title:{},icon:{}},setup(l){const u=e.useSlots(),t=l,a=f.filterSlots(u,"views."),o=e.ref(!1);e.onMounted(()=>{o.value=!0}),e.onUnmounted(()=>{o.value=!1});const p=e.inject("panels"),s=e.inject("panel");return(r,i)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:t.name},{default:e.withCtx(()=>[t.state?(e.openBlock(),e.createBlock($,{key:0,state:t.state,delay:""},null,8,["state"])):e.createCommentVNode("",!0),e.createVNode(n.VSheet,{class:"ma-4"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-sheet-title",disabled:!o.value||e.unref(p).panel!=t.name},[t.icon?(e.openBlock(),e.createBlock(n.VIcon,{key:0,icon:t.icon},null,8,["icon"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(t.title),1)],8,["disabled"])),(e.openBlock(),e.createBlock(e.Teleport,{to:"#app-bar-right",disabled:!o.value||e.unref(p).panel!=t.name},[e.renderSlot(r.$slots,"append-title"),t.help?(e.openBlock(),e.createBlock(n.VBtn,{key:0,class:"ml-3",href:t.help,panels:"new",icon:"mdi-information-outline"},null,8,["href"])):e.createCommentVNode("",!0)],8,["disabled"])),e.renderSlot(r.$slots,"top"),e.renderSlot(r.$slots,"default",{},()=>[e.unref(a)?(e.openBlock(),e.createBlock(n.VWindow,{key:0,modelValue:e.unref(s).view,"onUpdate:modelValue":i[0]||(i[0]=m=>e.unref(s).view=m)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(m,d)=>(e.openBlock(),e.createBlock(n.VWindowItem,{key:m,value:m},{default:e.withCtx(()=>[e.renderSlot(r.$slots,d)]),_:2},1032,["value"]))),128))]),_:3},8,["modelValue"])):e.createCommentVNode("",!0)]),e.renderSlot(r.$slots,"bottom")]),_:3})]),_:3},8,["value"]))}}),de={class:"mb-3"},M=e.defineComponent({__name:"OxModelEdit",props:{repo:{},initial:{},name:{},url:{},saved:{type:Function}},setup(l){const u=l,{editor:t,edited:a}=f.useModelEditor({props:u}),o=e.computed(()=>t.repo.use),{value:p}=e.toRefs(t),s=e.ref(null),r=e.useSlots(),i=f.filterSlots(r,"tab.",{exclude:"tab.default"}),m=f.filterSlots(r,"window.",{exclude:"window.default"}),d=e.computed(()=>({value:p.value,model:o.value}));return(c,V)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode($,{state:e.unref(t).state},null,8,["state"]),e.createElementVNode("div",de,[e.unref(a)?(e.openBlock(),e.createBlock(A,{key:0,onValidate:V[0]||(V[0]=v=>e.unref(t).save()),onReset:V[1]||(V[1]=v=>e.unref(t).discard()),state:e.unref(t).state,"validate-disabled":!e.unref(t).valid},null,8,["state","validate-disabled"])):e.createCommentVNode("",!0)]),e.unref(i)&&Object.keys(e.unref(i)).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(n.VTabs,{modelValue:s.value,"onUpdate:modelValue":V[2]||(V[2]=v=>s.value=v)},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"tab.default",e.normalizeProps(e.guardReactiveProps(d.value)),()=>[e.createVNode(n.VTab,{text:e.unref(f.t)(`models.${o.value.entity}`),value:"model"},null,8,["text"])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),(v,b)=>e.renderSlot(c.$slots,b,e.mergeProps({ref_for:!0},d.value))),256))]),_:3},8,["modelValue"]),e.createVNode(n.VTabsWindow,{modelValue:s.value,"onUpdate:modelValue":V[3]||(V[3]=v=>s.value=v)},{default:e.withCtx(()=>[e.createVNode(n.VTabsWindowItem,{value:"model"},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"window.default",e.normalizeProps(e.guardReactiveProps(d.value)))]),_:3}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),(v,b)=>(e.openBlock(),e.createBlock(n.VTabsWindowItem,{value:v},{default:e.withCtx(()=>[e.renderSlot(c.$slots,b,e.mergeProps({ref_for:!0},d.value))]),_:2},1032,["value"]))),256))]),_:3},8,["modelValue"])],64)):e.renderSlot(c.$slots,"window.default",e.normalizeProps(e.mergeProps({key:1},d.value)))],64))}}),K=e.defineComponent({__name:"OxModelPanel",props:{repo:{},search:{},view:{},headers:{},relations:{},showFilters:{type:Boolean},name:{},index:{default:"list.table"},value:{},state:{},help:{},title:{},icon:{}},setup(l){const u=e.useSlots(),t=f.filterSlots(u,"views.list."),a=f.filterSlots(u,"item."),o=f.filterSlots(u,"views.detail.edit."),p=e.useTemplateRef("filters"),s=l,{panel:r,list:i,items:m,next:d,prev:c}=e.inject("panel")??f.useModelPanel({props:s}),V=r.panels,{showFilters:v}=e.toRefs(r),b=e.computed(()=>[...s.headers,{key:"actions",title:f.t("actions")}]),x=e.computed(()=>({panel:r,panels:V,list:i,items:m,value:r.value}));return(y,k)=>(e.openBlock(),e.createBlock(I,{name:s.name,title:e.unref(r).title,icon:e.unref(r).icon,state:e.unref(i).state,index:s.index},e.createSlots({"append-title":e.withCtx(()=>[e.renderSlot(y.$slots,"append-title",e.normalizeProps(e.guardReactiveProps(x.value))),e.unref(r).view.startsWith("list.")?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:0,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(y.$slots,"nav.list",e.normalizeProps(e.guardReactiveProps(x.value))),e.unref(p)?(e.openBlock(),e.createBlock(n.VBtn,{key:0,title:e.unref(v)?e.unref(f.t)("filters.hide"):e.unref(f.t)("filters.show"),"aria-label":e.unref(v)?e.unref(f.t)("filters.hide"):e.unref(f.t)("filters.show"),onClick:k[0]||(k[0]=w=>v.value=!e.unref(v)),active:e.unref(v)},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:e.unref(p).icon},null,8,["icon"])]),_:1},8,["title","aria-label","active"])):e.createCommentVNode("",!0)]),_:3})):e.unref(r).view.startsWith("detail.")&&e.unref(r).value?(e.openBlock(),e.createBlock(n.VBtnGroup,{key:1,class:"ml-3",color:"secondary",density:"compact",variant:"tonal"},{default:e.withCtx(()=>[e.renderSlot(y.$slots,"nav.detail",e.normalizeProps(e.guardReactiveProps(x.value))),e.unref(r).view=="detail.edit"&&e.unref(r).value?(e.openBlock(),e.createBlock(n.VMenu,{key:0},{activator:e.withCtx(({props:w})=>[e.createVNode(n.VBtn,e.mergeProps({"prepend-icon":"mdi-dots-vertical"},w),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(f.t)("actions")),1)]),_:2},1040)]),default:e.withCtx(()=>[e.createVNode(n.VList,null,{default:e.withCtx(()=>[e.renderSlot(y.$slots,"item.actions",{value:e.unref(r).value})]),_:3})]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtn,{disabled:!e.unref(c),title:e.unref(f.t)("prev"),"aria-label":e.unref(f.t)("prev"),onClick:k[1]||(k[1]=e.withModifiers(w=>e.unref(r).show({value:e.unref(c)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-left"})]),_:1},8,["disabled","title","aria-label"]),e.createVNode(n.VBtn,{disabled:!e.unref(d),title:e.unref(f.t)("next"),"aria-label":e.unref(f.t)("next"),onClick:k[2]||(k[2]=e.withModifiers(w=>e.unref(r).show({value:e.unref(d)}),["stop"]))},{default:e.withCtx(()=>[e.createVNode(n.VIcon,{icon:"mdi-chevron-right"})]),_:1},8,["disabled","title","aria-label"])]),_:3})):e.createCommentVNode("",!0),e.createVNode(n.VBtnToggle,{class:"ml-3",color:"secondary",modelValue:e.unref(r).view,"onUpdate:modelValue":k[4]||(k[4]=w=>e.unref(r).view=w),density:"compact",variant:"tonal",mandatory:""},{default:e.withCtx(()=>{var w;return[e.createVNode(n.VBtn,{value:"list.table",title:e.unref(f.t)("panels.nav.table"),"aria-label":e.unref(f.t)("panels.nav.table")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[5]||(k[5]=[e.createTextVNode("mdi-table")])),_:1})]),_:1},8,["title","aria-label"]),e.unref(u)["views.list.cards"]?(e.openBlock(),e.createBlock(n.VBtn,{key:0,value:"list.cards",title:e.unref(f.t)("panels.nav.cards"),"aria-label":e.unref(f.t)("panels.nav.cards")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[6]||(k[6]=[e.createTextVNode("mdi-card-account-details")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(u)["views.list.kanban"]?(e.openBlock(),e.createBlock(n.VBtn,{key:1,value:"list.kanban",title:e.unref(f.t)("panels.nav.kanban"),"aria-label":e.unref(f.t)("panels.nav.kanban")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[7]||(k[7]=[e.createTextVNode("mdi-view-column")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(o)?(e.openBlock(),e.createBlock(n.VBtn,{key:2,value:"detail.add",onClick:k[3]||(k[3]=e.withModifiers(B=>e.unref(r).create(),["stop"])),title:e.unref(f.t)("panels.nav.add"),"aria-label":e.unref(f.t)("panels.nav.add")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[8]||(k[8]=[e.createTextVNode("mdi-plus-box")])),_:1})]),_:1},8,["title","aria-label"])):e.createCommentVNode("",!0),e.unref(u)["views.detail.edit"]||e.unref(o)?(e.openBlock(),e.createBlock(n.VBtn,{key:3,value:"detail.edit",disabled:!((w=e.unref(r).value)!=null&&w.id),title:e.unref(f.t)("panels.nav.edit"),"aria-label":e.unref(f.t)("panels.nav.edit")},{default:e.withCtx(()=>[e.createVNode(n.VIcon,null,{default:e.withCtx(()=>k[9]||(k[9]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:1},8,["disabled","title","aria-label"])):e.createCommentVNode("",!0),e.renderSlot(y.$slots,"nav.views",e.normalizeProps(e.guardReactiveProps(x.value)))]}),_:3},8,["modelValue"])]),top:e.withCtx(()=>[e.withDirectives(e.createVNode(L,{ref_key:"filters",ref:p,search:s.search,"teleport-to":"#panel-list-actions"},{default:e.withCtx(w=>[e.renderSlot(y.$slots,"list.filters",e.normalizeProps(e.guardReactiveProps(w)))]),_:3},8,["search"]),[[e.vShow,e.unref(r).view.startsWith("list.")&&e.unref(v)]])]),_:2},[e.unref(u)["views.list.table"]?void 0:{name:"views.list.table",fn:e.withCtx(()=>[e.createVNode(E,{headers:b.value,edit:""},e.createSlots({_:2},[e.renderList(e.unref(a),(w,B)=>({name:B,fn:e.withCtx(h=>[e.renderSlot(y.$slots,B,e.normalizeProps(e.guardReactiveProps(h)))])}))]),1032,["headers"])]),key:"0"},e.renderList(e.unref(t),(w,B)=>({name:B,fn:e.withCtx(()=>[e.renderSlot(y.$slots,B,e.normalizeProps(e.guardReactiveProps(x.value)))])})),e.unref(u)["views.detail.edit"]||e.unref(o)?{name:"views.detail.edit",fn:e.withCtx(()=>[e.createVNode(M,{repo:e.unref(r).repo,initial:e.unref(r).value,name:`${e.unref(r).model.entity}-edit`,saved:w=>e.unref(r).value=w},e.createSlots({_:2},[e.renderList(e.unref(o),(w,B)=>({name:w,fn:e.withCtx(h=>[e.renderSlot(y.$slots,B,e.normalizeProps(e.guardReactiveProps(h)))])}))]),1032,["repo","initial","name","saved"])]),key:"1"}:void 0]),1032,["name","title","icon","state","index"]))}}),q=e.defineComponent({__name:"OxPanelNav",props:{title:{},icon:{},panel:{},href:{},auto:{type:Boolean}},setup(l){const u=l,t=e.inject("panels");return e.computed(()=>!u.auto||panel.name==u.name),(a,o)=>(e.openBlock(),e.createBlock(n.VListItem,{active:e.unref(t).panel==u.name,"prepend-icon":u.icon,title:u.title,onClick:o[0]||(o[0]=e.withModifiers(p=>e.unref(t).show(u),["stop"]))},null,8,["active","prepend-icon","title"]))}}),ce=Object.freeze(Object.defineProperty({__proto__:null,OxAction:T,OxActionModelDelete:j,OxActions:_,OxApp:z,OxComponent:U,OxFieldDetails:O,OxListFilters:L,OxListKanban:W,OxListTable:E,OxLogin:G,OxModelEdit:M,OxModelPanel:K,OxPanel:I,OxPanelNav:q,OxStateAlert:$,OxValidationBtn:A},Symbol.toStringTag,{value:"Module"})),pe={el:"#app",delimiters:["[[","]]"],components:{...ce,...Z.components}};exports.App=pe;exports.OxAction=T;exports.OxActionModelDelete=j;exports.OxActions=_;exports.OxApp=z;exports.OxComponent=U;exports.OxFieldDetails=O;exports.OxListFilters=L;exports.OxListKanban=W;exports.OxListTable=E;exports.OxLogin=G;exports.OxModelEdit=M;exports.OxModelPanel=K;exports.OxPanel=I;exports.OxPanelNav=q;exports.OxStateAlert=$;exports.OxValidationBtn=A;
//# sourceMappingURL=components.cjs.map
